<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="../../util/docbook/schema/docbookspec.rng" type="xml"?>
<?oxygen SCHSchema="../../util/docbook/schema/docbookspec.sch"?>
<?oxygen SCHSchema="../../util/docbook/schema/docbook.sch"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1"
    xmlns:epub="http://www.idpf.org/2011/epub">
    <title>EPUB Publications 3.0</title>

    <info>
        <releaseinfo>Editors Draft</releaseinfo>
        <pubdate>16 December 2010</pubdate>
        <printhistory>
            <formalpara>
                <title>This version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Previous version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Diffs to previous version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
        </printhistory>
        <xi:include href="./share/copyright.xml"/>
        <xi:include href="./share/legalnotice.xml"/>
        <authorgroup role="current">
            <editor>
                <personname>Markus Gylling</personname>
                <affiliation>
                    <org>
                        <orgname>DAISY Consortium</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>William McCoy</personname>
                <affiliation>
                    <org>
                        <orgname>WebPaper LLC</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Daniel Weck</personname>
                <affiliation>
                    <org>
                        <orgname>DAISY Consortium</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Matt Garrish</personname>
                <affiliation>
                    <org>
                        <orgname>Invited Expert</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Daniel Hughes</personname>
                <affiliation>
                    <org>
                        <orgname>Liguori Publications</orgname>
                    </org>
                </affiliation>
            </editor>
        </authorgroup>
        <authorgroup role="previous">
            <editor>
                <personname>Garth Conboy</personname>
                <affiliation>
                    <org>
                        <orgname>eBook Technologies</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname><remark role="todo">TODO complete previous editors
                    list</remark></personname>
            </editor>
        </authorgroup>
        <abstract>
            <title>EPUB Publications 3.0</title>
            <para>EPUB is an interchange and delivery format for digital publications based on XML
                and Web Standards. EPUB3, the third major revision of EPUB, is defined by <link
                    linkend="refEPUB3Overview">a set of specification documents</link> including
                this document, which defines publication-level semantics and conformance
                requirements for EPUB3.</para>
        </abstract>
        
        <!-- metadata for building package vocab from embedded defs -->
        <annotation xml:id="rdfa-vocab-package-meta" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:z="http://www.daisy.org/ns/rdf/" xmlns:db="http://docbook.org/ns/docbook">
            <dc:creator>mgylling</dc:creator>
            <dc:issued>2011-01-03</dc:issued>  
            <dc:publisher>International Digital Publishing Forum (IDPF)</dc:publisher>
            <dc:title>EPUB3 Package Metadata Vocabulary</dc:title>
            <dc:description>This vocabulary, a part of EPUB 3.0, defines a set of metadata properties for use in <db:link xlink:href="../../spec/epub30-publications.html#sec-package-documents">Package Documents</db:link>.</dc:description>
            <z:bags>
                <z:bag>
                    <dc:identifier>package-props</dc:identifier>
                    <dc:title>Package-level properties</dc:title>
                </z:bag>
                <z:bag>
                    <dc:identifier>ancillary-props</dc:identifier>
                    <dc:title>Ancillary properties</dc:title>
                </z:bag>
                <z:bag>
                    <dc:identifier>meta-auth-props</dc:identifier>
                    <dc:title>Metadata Authority properties</dc:title>
                </z:bag>
                <z:bag>
                    <dc:identifier>manifest-types</dc:identifier>
                    <dc:title>Manifest properties</dc:title>
                </z:bag>
                <z:bag>
                    <dc:identifier>metarec-types</dc:identifier>
                    <dc:title>Metadata record types</dc:title>
                </z:bag>
            </z:bags>
        </annotation>
    </info>

    <chapter xml:id="sec-overview">
        <title>Overview</title>
        <section xml:id="sec-overview-purpose-and-scope">
            <title>Purpose and Scope</title>
            <para>This document, EPUB Publications 3.0, defines publication-level semantics and
                conformance requirements for EPUB3, the third major revision of EPUB, an interchange
                and delivery format based on XML and Web Standards.</para>
            <para>This document is meant to be read and understood in concert with the other
                documents that make up EPUB3. The EPUB3 Overview <xref linkend="refEPUB3Overview"/>,
                which provides an informative overview of EPUB and a roadmap to the rest of the
                EPUB3 documents, should be read first.</para>
        </section>

        <section xml:id="sec-overview-relationships">
            <title>Relationship to Other Specifications</title>
            <para>This specification depends on other sibling specifications, as described in <xref
                    linkend="refEPUB3Overview"/>. Sibling specifications include EPUB Content
                Documents 3.0 <xref linkend="refContentDocs3"/>, Open Container Format 3.0 <xref
                    linkend="refOCF30"/>, and EPUB Media Overlays 3.0 <xref linkend="refOverlays3"
                />. </para>

            <para>This specification defines constructs based on XML <xref linkend="refXML"/>, and
                by default all terminology used in this specification has the same meaning as its
                use in <xref linkend="refXML"/>. This specification also relies on XML Namespaces
                    <xref linkend="refXMLNamespaces"/>, and in this specification the term "XML
                namespace" (or just "namespace") has the meaning defined in that
                specification.</para>

            <para>EPUB Publications 3.0 is a revision to, and supersedes, Open Package Format 2.0.1
                    <xref linkend="refOPF2"/>.</para>

            <para>
                <remark role="todo">
                    <remark role="todo"> TBD: enumerate other dependent specs </remark>
                </remark>
            </para>
        </section>

        <xi:include href="./share/terminology.xml"/>

        <section xml:id="sec-overview-conformance">
            <title>Conformance</title>
            <xi:include href="./share/conformancestatements.xml"/>
        </section>

    </chapter>

    <chapter xml:id="sec-epub-introduction" conformance="informative">
        <title>Introduction</title>

        <para>EPUB is an interchange and delivery format for digital publications, based on XML and
            Web Standards. An EPUB Publication can be thought of as a a reliable packaging of Web
            content that represents a digital book, magazine, or other type of publication, with a
            declarative means to navigate through the content, and the ability to be distributed
            reliably for online and offline consumption. </para>

        <para>This specification defines the semantics and conformance requirements for EPUB at the
            publication level. It defines the formats of the <link linkend="sec-package-documents"
                >Package</link> and <link linkend="sec-ncx">NCX</link> documents, as well as rules
            for how these documents and other Publication resources are associated to create a
            conforming EPUB Publication. This specification also defines rules for how EPUB
            Publications are processed by conforming Reading Systems.</para>

        <!-- TODO
The individual resources that constitute an EPUB Publication
are defined by other specifications. -->

        <!--
        <para>; a fully-packaged EPUB Publication consists of at minimum four files (e.g.,
                <filename>container.xml</filename>, <filename>manifest.opf</filename>,
                <filename>nav.ncx</filename>, and <filename>content.xhtml</filename>), defined
            according to the rules of this and other specifications (including <xref
                linkend="refOCF30"/>, and <xref linkend="refContentDocs3"/>). This specification
            defines the formats of the OPF and NCX files, as well as additional rules for how these
            files and other optional files are tied together to create valid and conforming EPUB
            Publications, and for how such Publications are processed by conforming Reading
            Systems.</para>
-->
    </chapter>

    <chapter xml:id="sec-epub-publications-overview">
        <title>EPUB Publications</title>
        <para>This section describes the high-level content and Reading System conformance
            requirements for EPUB Publications. The sections following this one describe more
            specifically the requirements for Package Documents, NCX Documents, and Core Media
            Types.</para>
        <section xml:id="sec-epub-content-conformance">
            <title>Publication Content Conformance</title>

            <para>A EPUB Publication minimally consists of the following Publication
                Resources:</para>

            <itemizedlist>
                <listitem>
                    <para>Exactly one Package Document, conformant to the requirements defined in
                            <xref linkend="sec-package-content-conf"/></para>
                </listitem>
                <listitem>
                    <para>Exactly one NCX Document, conformant to the requirements defined in <xref
                            linkend="sec-ncx-content-conf"/></para>
                </listitem>
                <listitem>
                    <para>One or more EPUB Content Documents, conformant to the requirements defined
                        for EPUB Content Documents in <xref linkend="refContentDocs3"/></para>
                </listitem>
                <listitem>
                    <para>Zero or more EPUB Style Sheets, conformant to the content conformance
                        requirements defined for EPUB Style Sheets in <xref
                            linkend="refContentDocs3"/></para>
                </listitem>
                <listitem>
                    <para>Zero or more Media Overlay Documents, conformant to the content
                        conformance requirements defined in <xref linkend="refOverlays3"/></para>
                </listitem>
                <listitem>
                    <para>Zero or more additional resources, with content conformance requirements
                        inferred from their media type unless explicitly specified differently by
                        this specification or one of its <link linkend="refEPUB3Overview">sibling
                            specifications</link>.</para>
                </listitem>
            </itemizedlist>
            <!--
            <para>As defined in <xref linkend="sec-manifest-elem"/>, all Publication Resources
                as listed above, except the Package Document itself, must be referenced from the Package
                Document <code>manifest</code>, unless the resource type is explicitly declared to
                be <link linkend="list-external-resources">external</link>.</para>

            <para>When a Publication Resource is not a <link linkend="sec-core-media-types">Core
                    Media Type</link>, a fallback must be provided for it, as defined in <xref
                    linkend="sec-fallbacks"/>.</para>
-->
            <para>An EPUB Publication is instantiated as an EPUB File, i.e. in a ZIP container
                conformant with the requirements in <xref linkend="refOCF30"/>.</para>

        </section>

        <section xml:id="sec-epub-reading-system-conformance">
            <title>Publication Reading System Conformance</title>
            <para><remark role="TODO">TODO this needs work - explicit links</remark></para>

            <para>A conforming Reading System is not necessarily a single dedicated program or
                device, but may exist as a distributed system. A wide variety of legitimate
                presentations of Publications by Reading Systems are contemplated by the EPUB3
                specification suite.</para>

            <para>In addition to conforming with the requirements specific to this specification, an
                EPUB Reading System must necessarily also be a conforming User Agent according to
                    <xref linkend="refContentDocs3"/> and a conforming OCF Processor according to
                    <xref linkend="refOCF30"/>. An EPUB Reading System must also, if it supports
                Media Overlays, be a confoming Media Overlay Processor according to <xref
                    linkend="refOverlays3"/>.</para>

            <para>EPUB Reading Systems conformant with this Publications 3.0 specification should
                also be conformant processors of EPUB version 2 publications, as defined by <xref
                    linkend="refOPF2"/>, <xref linkend="refOPS2"/>, and <xref linkend="refOCF2"/>,
                and must at a minimum attempt to process any publication whose Package Document
                designates a version other than "3.0" or which omits the version attribute, as if
                such publication had designated a version "3.0"; provided, however, that Reading
                Systems must in this situation ignore the presence of removed constructs including
                    <code>ops:switch</code> in Content Documents and <code>@fallback-style</code> in
                manifest items.</para>

            <para><remark role="todo">TODO add link to W3C XML Processors draft
                    (http://www.w3.org/TR/xml-proc-profiles/#profiles), alternatively extract and
                    echo the relevant items.</remark></para>
        </section>
    </chapter>

    <chapter xml:id="sec-package-documents">
        <title>Package Documents</title>

        <section xml:id="sec-opf-intro" conformance="informative">
            <title>Introduction</title>
            <para>The fundamental publication-level construct of an EPUB Publication is the <xref
                    linkend="gloss-package-document"/>. The Package Document provides central
                information about the publication as a whole, and about the individual resources
                that comprise the publication:</para>
            <itemizedlist>
                <listitem>
                    <para>Publication <link linkend="sec-metadata-elem">metadata</link> - mechanisms
                        for including and/or referencing metadata applicable to the entire
                        Publication and particular resources within it.</para>
                </listitem>
                <listitem>
                    <para>A <link linkend="sec-manifest-elem">Publication manifest</link>, which
                        identifies (via URI) and describes (via MIME type) the set of resources that
                        collectively comprise the Publication.</para>
                </listitem>
                <listitem>
                    <para>A <link linkend="sec-spine-elem">spine</link> - an ordered sequence of id
                        references to top-level resources in the manifest, from which all other
                        resources in the set can be reached or utilized. The spine defines the
                        default "reading order" of the publication.</para>
                </listitem>
                <listitem>
                    <para>Navigation - a publication-wide <link linkend="sec-ncx">declarative
                            navigation</link> layer.</para>
                </listitem>
                <listitem>
                    <para><link linkend="sec-fallbacks">Fallback chains</link> - an optional means
                        for publications to define an ordered list of items that can be considered
                        informational equivalents, that a Reading System can choose between in
                        rendering content</para>
                </listitem>
                <listitem>
                    <para><link linkend="sec-bindings-elem">Bindings</link> - an optional means of
                        associating script-based implementations with custom media types.</para>
                </listitem>
            </itemizedlist>
            <!--
            <example>
                <title>Package Logic Overview</title>
                <remark role="todo">TODO DIAGRAM: show visual graph of abstract "hedge" here, inc
                    fallback chains and sharing resources between roots.</remark>
            </example>
            -->
        </section>

        <section xml:id="sec-package-content-conf">
            <title>Package Document Content Conformance</title>

            <simplelist role="conformance-list">
                <member role="conformance-item">A <xref linkend="gloss-package-document"/> must be a
                    well-formed XML Document <xref linkend="refXML"/>.</member>
                <member role="conformance-item">A Package Document must be encoded in UTF-8 or
                    UTF-16 <xref linkend="refUnicode5"/>.</member>
                <member role="conformance-item">A Package Document must be valid to the Package
                    Document schema as defined in <xref linkend="app-package-schema"/>, and in
                    addition must conform to all content conformance constraints expressed in <xref
                        linkend="sec-package-def"/>.</member>
                <member role="conformance-item">The Package Document filename should use the file
                    extension <filename>.opf</filename>. Any document fragments (included via
                    external general entities <xref linkend="refXML"/> should not use the
                        <filename>.opf</filename> extension. </member>
            </simplelist>

        </section>

        <section xml:id="sec-package-rs-conf">
            <title>Package Document Reading System Conformance</title>
            <para><remark role="todo">TODO</remark></para>
        </section>

        <section xml:id="sec-package-def">
            <title>Package Document Definition</title>
            
            <note>
                <bridgehead>Note:</bridgehead>
                <para>All elements defined in this section are in the
                    <literal>http://www.idpf.org/2007/opf</literal> namespace unless otherwise
                    specified.</para>
            </note>

            <section xml:id="sec-package-elem">
                <title>The <literal>package</literal> Element</title>

                <section xml:id="sec-package-elem-def">
                    <title>Definition</title>

                    <variablelist xreflabel="package" role="elem-synopsis"
                        xml:id="elemdef-opf-package">
                        <varlistentry>
                            <term>Element Name</term>
                            <listitem>
                                <para><literal>package</literal></para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Usage</term>
                            <listitem>
                                <para>The <literal>package</literal> element is the root element of
                                    the Package Document.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Attributes</term>
                            <listitem>
                                <variablelist role="elem-synopsis-attlist">
                                    <varlistentry xml:id="attrdef-version-package"
                                        xreflabel="version">
                                        <term><literal>version</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para>Specifies the EPUB specification version to which
                                                the publication adheres.</para>
                                            <para>This version of the specification requires the attribute have the value <literal>3.0</literal></para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-unique-identifier"
                                        xreflabel="unique-identifier">
                                        <term><literal>unique-identifier</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para>Identifies via an IDREF <xref linkend="refXML"/>
                                                the <literal><xref linkend="sec-opf-dcidentifier"
                                                  /></literal> element that provides the package's
                                                preferred, or primary, identifier.</para>
                                            <para>Refer to <xref linkend="sec-metadata-identifiers"
                                                /> for details.</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-package-profile"
                                        xreflabel="profile">
                                        <term><literal>profile</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para>Specifies the URI of the metadata profile <xref
                                                  linkend="refRDFa11Core"/> for the Package
                                                Document. </para>
                                            <para>This version of the specification requires the attribute have the 
                                                value <literal>http://www.idpf.org/TODO</literal>
                                            </para>
                                            <para>Refer to <xref linkend="sec-metadata-elem"/> for
                                                details.</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-package-prefix" xreflabel="prefix">
                                        <term><literal>prefix</literal>
                                            <option>[optional]</option></term>
                                        <listitem>
                                            <para>Declares additional metadata vocabulary prefixes
                                                not defined in the the metadata profile
                                                <xref linkend="refRDFa11Core"/>.</para>
                                            <para>Refer to <xref linkend="sec-metadata-elem"/> for
                                                details.</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry>
                                        <term><literal>xml:lang</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <xi:include href="./share/xmllang-prose-para.xml"/>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry>
                                        <term><literal>dir</literal>
                                            <option>[optional]</option></term>
                                        <xi:include href="./share/dir-prose-listitem.xml"/>
                                    </varlistentry>
                                    <varlistentry>
                                        <term><literal>id</literal>
                                            <option>[optional]</option></term>
                                        <listitem>
                                            <xi:include href="./share/id-prose-para.xml"/>
                                        </listitem>
                                    </varlistentry>
                                </variablelist>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Content Model</term>
                            <listitem>
                                <para>In this order: <literal><xref linkend="elemdef-opf-metadata"
                                        /></literal>
                                    <option>[required]</option>, <literal><xref
                                            linkend="elemdef-opf-manifest"/></literal>
                                    <option>[required]</option>, <literal><xref
                                            linkend="elemdef-opf-spine"/></literal>
                                    <option>[required]</option>, <literal><xref
                                            linkend="elemdef-opf-guide"/></literal>
                                    <option>[optional/deprecated]</option>, <literal><xref
                                            linkend="elemdef-opf-bindings"/></literal>
                                    <option>[optional]</option></para>
                            </listitem>
                        </varlistentry>

                    </variablelist>
                </section>


                <section xml:id="sec-metadata-extensibility"
                    xreflabel="Metadata Extensibility Mechanism">
                    <title>Metadata extensibility</title>
                    <para> This specification subsets the RDFa 1.1 <xref linkend="refRDFa11Core"/>
                        profile and prefix definition mechanisms to simplify the inclusion and
                        extension of metadata vocabularies for defining publications. These new
                        features allow core metadata properties to be added unprefixed and
                        additionally work to standardize the inclusion of metadata across the
                        publishing spectrum by predefining prefixes for the most commonly-used
                        vocabularies. </para>

                    <para>All publications must reference the metadata profile on the root
                            <literal>package</literal> element using the <literal><link
                                linkend="attrdef-package-profile">profile</link></literal>
                        attribute. Unlike its RDFa equivalent, the <literal>profile</literal>
                        attribute must only contain the single canonical URI of the EPUB default
                        profile.</para>

                    <informalexample>
                        <para>The following example shows how the metadata profile is
                            defined.</para>
                        <synopsis>
                    <xi:include parse="text" href="examples/publications/rdfa-profile.xml"/>
                </synopsis>
                    </informalexample>

                    <para> The addition of the metadata profile allows all properties from the
                            <link xlink:href="http://www.idpf.org/epub/30/vocab/package/">EPUB3
                            Package Metadata Vocabulary</link> to be referenced without using
                        prefixes. The profile also defines a set of prefixes for use adding other
                        vocabulary properties to EPUB Publications (refer to the profile for more
                        information). </para>

                    <para> If the RDFa profile does not define a prefix for a needed vocabulary, it
                        does not imply that the vocabulary cannot be included for use. The <link
                            linkend="attrdef-package-prefix">prefix</link> attribute can also be
                        attached to the <literal>package</literal> element to define additional
                        prefixes. New prefixes are defined by including whitespace-separated
                        prefix/URI pairings. </para>

                    <informalexample>
                        <para>The following example shows how to defines a new prefix for a
                            vocabulary.</para>
                        <synopsis>
                        <xi:include parse="text" href="examples/publications/rdfa-prefix.xml"/>
                    </synopsis>
                    </informalexample>

                    <para> It is not permitted to use the <literal>prefix</literal> attribute to
                        redeclare a prefix that has already been defined in the metadata
                        profile. The <xref linkend="refXMLNamespaces"/> method of defining namespace
                        prefixes must similary not be used to define vocabulary prefixes. </para>

                </section>
            </section>

<section xmlns="http://docbook.org/ns/docbook" xml:id="sec-metadata-elem"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1"
    xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>The <literal>metadata</literal> Element</title>
    
    <section xml:id="sec-opf-metadata-overview">
        <title>Overview</title>

        <para>The <literal>metadata</literal> element encapsulates information about the publication as a
            whole, including metadata that applies to the publication package and to the abstract content 
            contained within the package. Metadata is expressed through a combination of three required 
            Dublin Core Metadata Element Set <xref linkend="refDCMES"/> properties &#8212; title, identifier
            and language &#8212; coupled with optional properties from DCMI Metadata Terms 
            <xref linkend="refDCTERMS"/>. These metadata terms can be
            further enhanced and extended by a set of optional properties also defined in this specification.</para>
        
        <para>
            Properties from other RDF vocabularies may be added to the <literal>metadata</literal> section
            to enhance package and content metadata and to supplement required and optional properties,
            but Reading System support for them should not be assumed.
        </para>
    </section>
    
    <section xml:id="sec-opf-metadata-def">
        <title>Definition</title>
        
        <variablelist xreflabel="metadata" role="elem-synopsis" xml:id="elemdef-opf-metadata">
            <varlistentry>
                <term>Element Name</term>
                <listitem>
                    <para><literal>metadata</literal></para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Usage</term>
                <listitem>
                    <para>Required first child of <xref linkend="elemdef-opf-package"/>.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Attributes</term>
                <listitem>
                    <para>The <literal>metadata</literal> element has no attributes defined in this
                        specification.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Content Model</term>
                <listitem>
                    <para>In any order: <literal><xref linkend="elemdef-opf-dcidentifier"/></literal>
                        <option>[required]</option>, <literal><xref linkend="elemdef-opf-dctitle"
                        /></literal>
                        <option>[required]</option>, <literal><xref linkend="elemdef-opf-dclanguage"
                        /></literal>
                        <option>[required]</option>, <literal><xref linkend="elemdef-opf-meta"
                        /></literal>
                        <option>[optional]</option>, <literal><xref linkend="elemdef-opf-link"
                        /></literal>
                        <option>[optional]</option></para>
                </listitem>
            </varlistentry>
        </variablelist>
    </section>
    
    <section xml:id="sec-opf-metadata-dublin-core">
        <title>Package metadata</title>
        
        <section xml:id="sec-opf-metadata-dcmi-transition">
            <title>Dublin Core Metadata Vocabulary Transition</title>
            
            <para>
                This specification represents the beginning of a shift from traditional XML-based grammars to 
                RDFa vocabularies for expressing metadata. Unlike XML grammars, which intrude
                into host grammars and require specific accommodations to work, RDFa is a more natural and
                fluid means of expressing metadata, working within existing attributes to a greater degree of
                semantic richness than would otherwise be possible.
            </para>
            
            <para>
                The addition of RDFa support for the expression of metadata now allows properties from a wide 
                variety of vocabularies to be easily incorporated for expressing and refining information about the 
                package and its contents.
                RDFa properties also do not require the importing of new grammars, but allow properties to 
                be expressed via <code>meta</code> elements. (For more information, refer to the <xref
                    linkend="sec-metadata-extensibility"/>.)</para>
            
            <para>Although the requirement to include the core title, identifier and language <xref linkend="refDCMES"/>
                elements has not changed with this release, their inclusion is focused on 
                maintaining backwards compatibility during this period of transition, and their deprecation is 
                expected in a future version. Content authors are instead encouraged to begin using the new properties
                from the Dublin Core Metadata Terms <xref linkend="refDCTERMS"/> vocabulary, including
                the properties that supersede the required DCMES elements (see <remark role="todo">add link to override</remark>).
            </para>
        </section>
        
        <section xml:id="sec-opf-dcidentifier" xreflabel="dc:identifier">
            <title>The DCMES <literal>identifier</literal> Element</title>
            
            <para>Every <code>metadata</code> section must include at least one <literal>identifier</literal> element
                containing an unambiguous identifier for the package.
                Multiple <literal>identifier</literal> elements are permitted, but only one can be marked as 
                the primary identifier for the package via the <code>package</code> element's 
                <link linkend="attrdef-unique-identifier">unique-identifier</link> attribute.
            </para>
            
            <informalexample>
                <para>The following example shows the unique <literal>identifier</literal> element for a publication.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/identifier.xml"/>
                </synopsis>
            </informalexample>
            
            <para>The <xref linkend="refDCTERMS"/> <literal>identifier</literal> property will supersede
                the <literal>identifier</literal> element in a future version of the specification, but its inclusion
                is currently optional. Authors are encouraged to include both versions using the
                <literal>prefer</literal> attribute on the <literal>identifier</literal> element to indicate to Reading
                Systems that the property should be used in preference.
            </para>
            
            <informalexample>
                <para>The following example shows how an <literal>identifier</literal> element and property
                    should co-exist within a publication.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/identifier-1.xml"/>
                </synopsis>
            </informalexample>
            
            <para>
                This specification imposes no additional restrictions or requirements on identifiers except that they must be
                at least one character in length.
            </para>
            
            <para>
                If the <literal>identifier</literal> (element or property) conforms to a established system
                or has been granted by an issuing authority, the scheme employed should be identified by
                attaching the optional <literal><link linkend="rdfa-vocab-package-bag-ancillary-property-scheme">scheme</link></literal> 
                ancillary property to the <literal>identifier</literal>.
            </para>
            
            <informalexample>
                <para>The following example shows how an <literal>identifier</literal> can be marked as an ISBN.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/identifier-2.xml"/>
                </synopsis>
            </informalexample>
            
            <para>
                This specification does not require or endorse the use of any scheme for identifiers, but authors
                are encouraged to use established identifiers for schemes such as provided by the ONIX and MARC
                standards. The scheme identifier used should conform to the requirements of the chosen system; this
                specification imposes no restrictions or requirements on scheme identifiers.
            </para>
            
            <variablelist xreflabel="dc:identifier" role="elem-synopsis"
                xml:id="elemdef-opf-dcidentifier">
                <varlistentry>
                    <term>Element Name</term>
                    <listitem>
                        <para>
                            <literal>dc:identifier</literal>
                        </para>
                    </listitem>
                </varlistentry>
                
                <varlistentry>
                    <term>Namespace</term>
                    <listitem>
                        <para><literal>http://purl.org/dc/elements/1.1/</literal></para>
                    </listitem>
                </varlistentry>
                
                <varlistentry>
                    <term>Usage</term>
                    <listitem>
                        <para>Required child of <xref linkend="elemdef-opf-metadata"/>.
                            Repeatable.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Attributes</term>
                    <listitem>
                        
                        <variablelist role="elem-synopsis-attlist">
                            
                            <varlistentry xml:id="attrdef-dcidentifier-id">
                                <term>
                                    <literal>id</literal>
                                    <option>[required]</option>
                                </term>
                                <listitem>
                                    <para></para>
                                </listitem>
                            </varlistentry>
                            
                            <varlistentry xml:id="attrdef-dcidentifier-override">
                                <term>
                                    <literal>override</literal>
                                    <option>[optional]</option>
                                </term>
                                <listitem>
                                    <para></para>
                                </listitem>
                            </varlistentry>
                        </variablelist>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Content Model</term>
                    <listitem>
                        <para>Text</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>
        
        <section xml:id="elemdef-opf-dctitle" xreflabel="dc:title">
            <title>The DCMES <literal>title</literal> Element</title>
            
            <para> Every <code>metadata</code> section must include at least one <literal>title</literal> 
                element containing the title for the publication. Multiple <literal>title</literal> elements are
                permitted, but the optional <literal>sort-order</literal> property should be attached to each
                to indicate their primacy for display and other rendering purposes. If no means of establishing
                the primary title for the publication is included, Reading Systems must treat the first 
                <literal>title</literal> element encountered as the primary title.
            </para>
            
            <informalexample>
                <para>The following example shows how to indicate the display order for 
                    multiple <literal>title</literal> elements.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/title.xml"/>
                </synopsis>
            </informalexample>
            
            <para>The <xref linkend="refDCTERMS"/> <literal>title</literal> property will supersede
                the <literal>title</literal> element in a future version of the specification, but its inclusion
                is currently optional. Authors are encouraged to include both versions using the
                <literal>prefer</literal> attribute on the <literal>title</literal> element to indicate to Reading
                Systems that the property should be used in preference.
            </para>
            
            <informalexample>
                <para>The following example shows how a <literal>title</literal> element and property
                    should co-exist within a publication.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/title-1.xml"/>
                </synopsis>
            </informalexample>
            
            <para>
                This specification imposes no additional restrictions or requirements on titles except that they
                must be at least one character in length.
            </para>
            
            <para>
                The <literal><link linkend="rdfa-vocab-package-bag-ancillary-property-file-as">file-as</link></literal> property can be attached to a 
                <literal>title</literal> to include a normalized representation of the title for machine and
                bibliographic sorting purposes.
            </para>
            
            <informalexample>
                <para>The following example shows a <literal>title</literal> and its normalized form
                    for sorting.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/title-3.xml"/>
                </synopsis>
            </informalexample>
            
            <para>
                The <literal><link linkend="rdfa-vocab-package-bag-ancillary-property-alternate-script">alternate-script</link></literal> property can  
                also be attached to provide a rendition of the <literal>title</literal> in another language and/or script.
            </para>
            
            <informalexample>
                <para>The following example shows alternate renditions of a <literal>title</literal> for French
                    and English readers.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/title-4.xml"/>
                </synopsis>
            </informalexample>
            
            <variablelist xreflabel="dc:title" role="elem-synopsis">
                <varlistentry>
                    <term>Element Name</term>
                    <listitem>
                        <para>
                            <literal>dc:title</literal>
                        </para>
                    </listitem>
                </varlistentry>
                
                <varlistentry>
                    <term>Namespace</term>
                    <listitem>
                        <para><literal>http://purl.org/dc/elements/1.1/</literal></para>
                    </listitem>
                </varlistentry>
                
                <varlistentry>
                    <term>Usage</term>
                    <listitem>
                        <para>Required child of <xref linkend="elemdef-opf-metadata"/>.
                            Repeatable.</para>
                    </listitem>
                </varlistentry>
                
                <varlistentry>
                    <term>Attributes</term>
                    <listitem>
                        <variablelist role="elem-synopsis-attlist">
                            
                            <varlistentry xml:id="attrdef-dctitle-id">
                                <term>
                                    <literal>id</literal> [optional]</term>
                                <listitem><para></para></listitem>
                            </varlistentry>
                            
                            <varlistentry xml:id="attrdef-dctitle-override">
                                <term>
                                    <literal>override</literal>
                                    <option>[optional]</option>
                                </term>
                                <listitem><para></para></listitem>
                            </varlistentry>
                            
                        </variablelist>
                    </listitem>
                </varlistentry>
                
                
                <varlistentry>
                    <term>Content Model</term>
                    <listitem>
                        <para>Text</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>
        
        <section xml:id="elemdef-opf-dclanguage" xreflabel="dc:language">
            <title>The DCMES <literal>language</literal> Element</title>
            <para> Every <code>metadata</code> section must include a single <literal>language</literal> 
                element containing the default language of the publication content. The language specified
                must be either:
            </para>
            
            <itemizedlist>
                <listitem>
                    <para>a 2-letter language code as defined in <xref linkend="refISO6391"/>; or</para>
                </listitem>
                <listitem>
                    <para>a 3-letter language code as defined in <xref linkend="refISO6392T"/>.</para>
                </listitem>
            </itemizedlist>
            
            <para>
                The language identifier may include an optional dash-separated country code as defined in 
                <xref linkend="refISO3166"/>.
            </para>
            
            <informalexample>
                <para>The following example shows a publication in U.S. English.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/language.xml"/>
                </synopsis>
            </informalexample>
            
            <para>The <xref linkend="refDCTERMS"/> <literal>language</literal> property will supersede
                the <literal>language</literal> element in a future version of the specification, but its inclusion
                is currently optional. Authors are encouraged to include both versions using the
                <literal>prefer</literal> attribute on the <literal>language</literal> element to indicate to Reading
                Systems that the property should be used in preference.
            </para>
            
            <informalexample>
                <para>The following example shows how a <literal>language</literal> element and property
                    should co-exist within a publication.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/language-1.xml"/>
                </synopsis>
            </informalexample>
            
            <variablelist xreflabel="dc:language" role="elem-synopsis">
                <varlistentry>
                    <term>Element Name</term>
                    <listitem>
                        <para>
                            <literal>dc:language</literal>
                        </para>
                    </listitem>
                </varlistentry>
                
                <varlistentry>
                    <term>Namespace</term>
                    <listitem>
                        <para><literal>http://purl.org/dc/elements/1.1/</literal></para>
                    </listitem>
                </varlistentry>
                
                <varlistentry>
                    <term>Usage</term>
                    <listitem>
                        <para>Required child of <xref linkend="elemdef-opf-metadata"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Attributes</term>
                    <listitem>
                        <variablelist role="elem-synopsis-attlist">
                            <varlistentry xml:id="attrdef-dclanguage-override">
                                <term>
                                    <literal>override</literal>
                                    <option>[optional]</option>
                                </term>
                                <listitem>
                                    <para/>
                                </listitem>
                            </varlistentry>
                        </variablelist>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Content Model</term>
                    <listitem>
                        <para>Text</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>
        
        <section xml:id="sec-metadata-identifiers">
            <title>Publication Identifiers</title>
            <para><remark role="todo">TODO pending finalization of WG discussion</remark></para>
            <!-- TODO reenable
                <para>The Package Document's author is responsible for choosing a
                primary identifier that is unique to one and only one particular package (i.e.,
                the set of resources referenced from the package document's manifest).</para> 
                <para role="rsconferr">Reading Systems must not fail catastrophically if they
                encounter two distinct EPUB Publications with the same purportedly unique
                primary identifier. </para>
            -->
        </section>
        
    </section>
    
    <section xml:id="sec-opf-meta" xreflabel="meta">
        <title>The <literal>meta</literal> element</title>
        
        <section xml:id="sec-opt-meta-overview">
            <title>Overview</title>
            
            <para>The <literal>meta</literal> element provides a generic means of expressing metadata, both to
                express primary metadata about the package or content or to refine that metadata. 
                All <literal>meta</literal> elements must attach the RDFa <literal>property</literal> attribute 
                <xref linkend="refRDFa11Core"/> that contains a CURIE that resolves to a property from an RDF vocabulary
                (it is not required that Reading System be able to resolve the CURIES).</para>
            
            <para>
                If a <literal>meta</literal> element only includes a <literal>property</literal> attribute, the metadata 
                is assumed to apply to the package or content as a whole.
            </para>
            
            <informalexample>
                <para>The following example shows an instance of package metadata.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-package.xml"/>
                </synopsis>
            </informalexample>
            
            <para>
                To enahnce metadata properties defined in the 
                <xref linkend="refDCMES"/> elements or in other <literal>meta</literal> elements, the
                RDFa <literal>about</literal> attribute must be attached. The value of this attribute must be
                an IDREF to the <literal>xml:id</literal> of the element being refined.
            </para>
            
            <informalexample>
                <para>The following example shows an instance of ancillary metadata.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-package.xml"/>
                </synopsis>
            </informalexample>
            
        </section>
        
        <section xml:id="sec-opf-meta-def">
            <title>Definition</title>
            
            <variablelist xreflabel="Meta Element" role="elem-synopsis" xml:id="elemdef-opf-meta">
                <varlistentry>
                    <term>Element Name</term>
                    <listitem>
                        <para>
                            <literal>meta</literal>
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Usage</term>
                    <listitem>
                        <para>As child of the <xref linkend="elemdef-opf-metadata"/> element.
                            Repeatable.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Attributes</term>
                    <listitem>
                        <variablelist role="elem-synopsis-attlist">
                            <varlistentry xml:id="attrdef-meta-property">
                                <term>
                                    <literal>property</literal>
                                    <option>[required]</option>
                                </term>
                                <listitem>
                                    <para>A CURIE <xref linkend="refRDFa11Core"/> that resolves to a term in
                                        one of the vocabularies defined in the metadata profile or <literal>package</literal> 
                                        element's <xref linkend="attrdef-package-prefix"/> attribute.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>                        
                                <term>
                                    <literal>about</literal>
                                    <option>[context dependent]</option>
                                </term>
                                <listitem>
                                    <para>A reference by id to the subject of the <literal>meta</literal> element property
                                        being expressed. Optional only when a <literal>meta</literal> element contains a
                                        non-empty child text node. When the <literal>meta</literal> element contains an
                                        empty child text-node, the about attribute is required and must
                                        contain a valid id of another meta element.</para>
                                </listitem>                            
                            </varlistentry>
                            
                        </variablelist>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Content Model</term>
                    <listitem>
                        <para>Text or Empty.</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>
        
        <section xml:id="elemdef-opf-meta-vocabs">
            <title>Metadata properties</title>
            
            <section xml:id="elemdef-opf-meta-overview" conformance="informative">
                <title>Overview</title>
                
                <para>
                    The following sections enumerate key RDF vocabularies and properties both defined as
                    part of this specification and by external agencies. It is not intended to be a comprehensive 
                    list of RDF vocabularies or properties that can be used to add or annotate package metadata.
                </para>
                
                <para>
                    With the exception of <link linkend="elemdef-opf-meta-property-values-package">package properties</link>,
                    all metadata properties noted in the following sections can be used to annotate other metadata
                    properties in the package.
                </para>
            </section>
            
            <section xml:id="elemdef-opf-meta-property-values-dcterms">
                <title>DCTERMS</title>
                
                <para>The <literal>meta</literal> element <literal>property</literal> attribute may
                    define any property from DCMI Metadata Terms <xref linkend="refDCTERMS"/>
                    for expressing metadata about the package and its contents.</para>
                
                <para>
                    For more information about these properties and their use, please refer to the
                    vocabulary.
                </para>
                
            </section>
            
            <section xml:id="elemdef-opf-meta-property-values-package">
                <title>Package</title>
                
                <para>Package properties define information about the package and are not
                intended for use annotating other attributes. These properties are defined
                canonically in the 
                    <link xlink:href="http://www.idpf.org/epub/30/vocab/package/">EPUB3 Package Metadata Vocabulary</link>.
                </para>
                
                <para>The following table enumerates the available properties.</para>
                
                <informaltable xml:id="rdfa-vocab-package-bag-package-props">
                    <tgroup cols="2">
                        <tbody>
                            <row>
                                <entry>Property:</entry>
                                <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-package-property-content-version">
                                    <literal>content-version</literal>
                                </entry>
                            </row>
                            <row>
                                <entry>Description:</entry>
                                <entry role="rdfa-property-desc">The <literal>content-version</literal> property provides the 
                                    version number of the publication. The semantics of the three digit sequences and how they 
                                    are incremented for any given publication is not defined.</entry>
                            </row>
                            <row>
                                <entry>Allowed value(s):</entry>
                                <entry>A string of the form #.#.#</entry>
                            </row>
                        </tbody>
                    </tgroup>
                    <tgroup cols="2">
                        <tbody>
                            <row>
                                <entry>Property:</entry>
                                <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-package-property-publication-type">
                                    <literal>publication-type</literal>
                                </entry>
                            </row>
                            <row>
                                <entry>Description:</entry>
                                <entry role="rdfa-property-desc">The <literal>publication-type</literal> property describes the 
                                    nature of a specialized type of EPUB Package. The value <literal>dictionary</literal> indicates 
                                    that the package contains a dictionary as defined in <remark role="todo">TODO</remark> 
                                    and the value <literal>annotation</literal> that the package contains an annotation as defined 
                                    in <remark role="todo">TODO</remark>.</entry>
                            </row>
                            <row>
                                <entry>Allowed value(s):</entry>
                                <entry>dictionary | annotation</entry>
                            </row>
                        </tbody>
                    </tgroup>
                    <tgroup cols="2">
                        <tbody>
                            <row>
                                <entry>Property:</entry>
                                <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-package-property-source-identifier">
                                    <literal>source-identifier</literal>
                                </entry>
                            </row>
                            <row>
                                <entry>Description:</entry>
                                <entry role="rdfa-property-desc">The <literal>source-identifier</literal> property references the 
                                    <literal>identifier</literal> (element or property) that is the source of the NCX pageList 
                                    (i.e., the publication from which the pagination was derived).</entry>
                            </row>
                            <row>
                                <entry>Allowed value(s):</entry>
                                <entry>
                                    <literal>xsd:string</literal>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                    <tgroup cols="2">
                        <tbody>
                            <row>
                                <entry>Property:</entry>
                                <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-package-property-page-progression-direction">
                                    <literal>page-progression-direction</literal>
                                </entry>
                            </row>
                            <row>
                                <entry>Description:</entry>
                                <entry role="rdfa-property-desc">The <literal>page-progression-direction</literal> property indicates 
                                    the global direction in which the publication content flows. This property can be overriden by 
                                    individual manifest <literal>items</literal>s.</entry>
                            </row>
                            <row>
                                <entry>Allowed value(s):</entry>
                                <entry>
                                    <literal>rtl</literal> | <literal>ltr</literal>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </informaltable>
                
            </section>
            
            <section xml:id="elemdef-opf-meta-property-values-ancillary">
                <title>Ancillary</title>
                
                <para>Ancillary properties represent metadata about metadata and are intended to augment 
                    metadata defined elsewhere in the package. These properties are defined canonically in the 
                    <link xlink:href="http://www.idpf.org/epub/30/vocab/package/">EPUB3 Package Metadata Vocabulary</link>.
                </para>
                
                <para>The following table enumerates the available properties.</para>
                
                     <informaltable xml:id="rdfa-vocab-package-bag-ancillary-props">
                        <tgroup cols="2">
                           <tbody>
                              <row>
                                 <entry>Property:</entry>
                                 <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-ancillary-property-alternate-script">
                                    <literal>alternate-script</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Description:</entry>
                                 <entry role="rdfa-property-desc">The <literal>alternate-script</literal> property provides an 
                                     alternate expression of the associated property value in a language and script identified by 
                                     the <literal>xml:lang</literal> attribute. The property is typically attached to 
                                     <literal>creator</literal> and <literal>title</literal> properties for internationalization purposes.</entry>
                              </row>
                              <row>
                                 <entry>Allowed value(s):</entry>
                                 <entry>
                                    <literal>xsd:string</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Extends:</entry>
                                 <entry>All properties.</entry>
                              </row>
                              <row>
                                 <entry>Example:</entry>
                                 <entry>
                                    <link linkend="sec-metadata-examples-creator">[Example]</link>
                                 </entry>
                              </row>
                           </tbody>
                        </tgroup>
                        <tgroup cols="2">
                           <tbody>
                              <row>
                                 <entry>Property:</entry>
                                 <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-ancillary-property-date-ref">
                                    <literal>date-ref</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Description:</entry>
                                 <entry role="rdfa-property-desc">The <literal>date-ref</literal> property relates an 
                                     <link linkend="rdfa-vocab-package-bag-ancillary-property-event"><literal>event</literal></link>
                                     to the <literal>date</literal> on which it occurred. This property is 
                                     typically used to tie changes to metadata to the corresponding revision date for the publication. 
                                     <remark role="todo">Why was this under metadata authority props? Is it global?</remark>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Allowed value(s):</entry>
                                 <entry>
                                    <literal>xsd:IDREF</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Extends:</entry>
                                 <entry>All properties.</entry>
                              </row>
                              <row>
                                 <entry>Example:</entry>
                                 <entry>
                                    <link linkend="sec-metadata-examples-title">[Example]</link>
                                 </entry>
                              </row>
                           </tbody>
                        </tgroup>
                        <tgroup cols="2">
                           <tbody>
                              <row>
                                 <entry>Property:</entry>
                                 <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-ancillary-property-display-seq">
                                    <literal>display-seq</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Description:</entry>
                                 <entry role="rdfa-property-desc">The <literal>display-seq</literal> property indicates the numeric position in which to display the current property relative to identical metadata properties. For example, to indicate the order in which to render multiple <literal>title</literal> elements or properties.</entry>
                              </row>
                              <row>
                                 <entry>Allowed value(s):</entry>
                                 <entry>
                                    <literal>xsd:unsignedInt</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Extends:</entry>
                                 <entry>All properties.</entry>
                              </row>
                              <row>
                                 <entry>Example:</entry>
                                 <entry>
                                    <link linkend="sec-metadata-examples-title">[Example]</link>
                                 </entry>
                              </row>
                           </tbody>
                        </tgroup>
                        <tgroup cols="2">
                           <tbody>
                              <row>
                                 <entry>Property:</entry>
                                 <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-ancillary-property-event">
                                    <literal>event</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Description:</entry>
                                 <entry role="rdfa-property-desc">The <literal>event</literal> property indicates a significant event in the lifecycle of a publication. Events are typically modify <literal>date</literal> elements or properties to provide the reason for a change to the publication. A set of standard values are defined for this property but no restrictions are imposed on the extension of this list.</entry>
                              </row>
                              <row>
                                 <entry>Allowed value(s):</entry>
                                 <entry>creation | meta-update | modification | publication | <literal>xsd:string</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Extends:</entry>
                                 <entry>
                                    <literal>dcterms:date</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Example:</entry>
                                 <entry>
                                    <link linkend="sec-metadata-examples-identifier">[Example]</link>
                                 </entry>
                              </row>
                           </tbody>
                        </tgroup>
                        <tgroup cols="2">
                           <tbody>
                              <row>
                                 <entry>Property:</entry>
                                 <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-ancillary-property-file-as">
                                    <literal>file-as</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Description:</entry>
                                 <entry role="rdfa-property-desc">The <literal>file-as</literal> property provides the normalized form of the associated property for sorting.</entry>
                              </row>
                              <row>
                                 <entry>Allowed value(s):</entry>
                                 <entry>
                                    <literal>xsd:string</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Extends:</entry>
                                 <entry>All properties.</entry>
                              </row>
                              <row>
                                 <entry>Example:</entry>
                                 <entry>
                                    <link linkend="sec-metadata-examples-title">[Example]</link>
                                 </entry>
                              </row>
                           </tbody>
                        </tgroup>
                        <tgroup cols="2">
                           <tbody>
                              <row>
                                 <entry>Property:</entry>
                                 <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-ancillary-property-role">
                                    <literal>role</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Description:</entry>
                                 <entry role="rdfa-property-desc">The <literal>role</literal> property describes the nature of work performed by a <literal>creator</literal> or <literal>contributor</literal>, for example that they represent the author or editor of a publication.</entry>
                              </row>
                              <row>
                                 <entry>Allowed value(s):</entry>
                                 <entry>It is recommended that values be drawn from 
<db:link xmlns:db="http://docbook.org/ns/docbook" xlink:href="http://www.loc.gov/marc/relators/relacode.html">MARC Code List for Relators</db:link> and 
<db:link xmlns:db="http://docbook.org/ns/docbook" xlink:href="http://www.editeur.org/files/ONIX%203/ONIX_Code_Lists_Issue_12_Changes.pdf">ONIX 3.0 Code List 17</db:link>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Extends:</entry>
                                 <entry>
                                    <literal>dcterms:contributor</literal>, <literal>dcterms:creator</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Example:</entry>
                                 <entry>
                                    <link linkend="sec-metadata-examples-creator">[Example]</link>
                                 </entry>
                              </row>
                           </tbody>
                        </tgroup>
                        <tgroup cols="2">
                           <tbody>
                              <row>
                                 <entry>Property:</entry>
                                 <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-ancillary-property-scheme">
                                    <literal>scheme</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Description:</entry>
                                 <entry role="rdfa-property-desc">The <literal>scheme</literal> property identifies the formal system used to express the value of an <literal>identifier</literal> or <literal>subject</literal> element or property.</entry>
                              </row>
                              <row>
                                 <entry>Allowed value(s):</entry>
                                 <entry>Values for dcterms:subject should be drawn from ONIX 3.0 Code List 27.<remark role="todo">TODO: note different schemes for different types or leave unspecified?</remark>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Extends:</entry>
                                 <entry>
                                    <literal>dcterms:subject</literal>, <literal>dcterms:identifier</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Example:</entry>
                                 <entry>
                                    <link linkend="sec-metadata-examples-identifier">[Example]</link>
                                 </entry>
                              </row>
                           </tbody>
                        </tgroup>
                        <tgroup cols="2">
                           <tbody>
                              <row>
                                 <entry>Property:</entry>
                                 <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-ancillary-property-title-order">
                                    <literal>title-order</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Description:</entry>
                                 <entry role="rdfa-property-desc">The <literal>title-order</literal> property indicates the numeric position in which to sort the associated <literal>title</literal> relative to other titles identified with the same <literal>
title-type</literal> value. <remark role="todo">was sort-order, but unclear if any other use for the property with display-seq, and whether this is already covered by file-as.</remark>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Allowed value(s):</entry>
                                 <entry>
                                    <literal>xsd:unsignedInt</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Extends:</entry>
                                 <entry>
                                    <literal>dcterms:title</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Example:</entry>
                                 <entry>
                                    <link linkend="sec-metadata-examples-title">[Example]</link>
                                 </entry>
                              </row>
                           </tbody>
                        </tgroup>
                        <tgroup cols="2">
                           <tbody>
                              <row>
                                 <entry>Property:</entry>
                                 <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-ancillary-property-title-type">
                                    <literal>title-type</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Description:</entry>
                                 <entry role="rdfa-property-desc">The <literal>title-type</literal> property indicates the form or nature of a <literal>title</literal>. A set of standard values are defined for this property but no restrictions are imposed on the extension of this list. <remark role="todo">isn't this a role?</remark>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Allowed value(s):</entry>
                                 <entry>
                                    <literal>primary</literal> | <literal>short</literal> | <literal>long</literal> | <literal>sub</literal> | <literal>series</literal> | <literal>collection</literal> | <literal>edition</literal> | <literal>slang</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Extends:</entry>
                                 <entry>
                                    <literal>dcterms:title</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Example:</entry>
                                 <entry>
                                    <link linkend="sec-metadata-examples-title">[Example]</link>
                                 </entry>
                              </row>
                           </tbody>
                        </tgroup>
                     </informaltable>
                
                     <remark role="todo">Where do these properties fit in in relation to the above?</remark>
                
                     <informaltable xml:id="rdfa-vocab-package-bag-meta-auth-props">
                        <tgroup cols="2">
                           <tbody>
                              <row>
                                 <entry>Property:</entry>
                                 <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-meta-auth-property-authority">
                                    <literal>authority</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Description:</entry>
                                 <entry role="rdfa-property-desc">The <literal>authority</literal> property references the metadata authority (<literal>
meta-auth</literal>) responsible for an instance of package metadata.</entry>
                              </row>
                              <row>
                                 <entry>Allowed value(s):</entry>
                                 <entry>
                                    <literal>xsd:IDREF</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Example:</entry>
                                 <entry>
                                    <link linkend="sec-metadata-examples-meta-auth">[Example]</link>
                                 </entry>
                              </row>
                           </tbody>
                        </tgroup>
                        <tgroup cols="2">
                           <tbody>
                              <row>
                                 <entry>Property:</entry>
                                 <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-meta-auth-property-meta-auth">
                                    <literal>meta-auth</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Description:</entry>
                                 <entry role="rdfa-property-desc">The <literal>meta-auth</literal> property provides the name of a party or authority responsible for the package metadata.</entry>
                              </row>
                              <row>
                                 <entry>Allowed value(s):</entry>
                                 <entry>
                                    <literal>xsd:string</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Example:</entry>
                                 <entry>
                                    <link linkend="sec-metadata-examples-meta-auth">[Example]</link>
                                 </entry>
                              </row>
                           </tbody>
                        </tgroup>
                        <tgroup cols="2">
                           <tbody>
                              <row>
                                 <entry>Property:</entry>
                                 <entry role="rdfa-property" xml:id="rdfa-vocab-package-bag-meta-auth-property-signature">
                                    <literal>signature</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Description:</entry>
                                 <entry role="rdfa-property-desc">The <literal>signature</literal> property relates a metadata authority (<literal>
meta-auth</literal>) responsible for creating or updating package metadata to an XML Signature contained in the Signatures.xml file.</entry>
                              </row>
                              <row>
                                 <entry>Allowed value(s):</entry>
                                 <entry>
                                    <literal>xsd:IDREF</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Extends:</entry>
                                 <entry>
                                    <literal>meta-auth</literal>
                                 </entry>
                              </row>
                              <row>
                                 <entry>Example:</entry>
                                 <entry>
                                    <link linkend="sec-metadata-examples-meta-auth">[Example]</link>
                                 </entry>
                              </row>
                           </tbody>
                        </tgroup>
                     </informaltable>
                
            </section>
            
        </section>
        
    </section>

    <section xml:id="sec-opf-link" xreflabel="link">
        <title>The <literal>link</literal> element</title>
        
        <section xml:id="sec-opf-link-overview">
            <title>Overview</title>
            <para>This specification introdcues a new mechanism for associating metadata and bibliographic 
                records with a publication. One or more <literal>link</literal> elements can now be added to the 
                <link linkend="sec-metadata-elem">metadata</link> section to identify each record.</para>
            
            <para>
                The <literal>href</literal> attribute of the <literal>link</literal> element identifies the location
                of the resource and the RDFa <literal>rel</literal> attribute defines the type of record (see 
                <xref linkend="elemdef-opf-link-rel-values"/> the list of record types).
            </para>
            
            <!-- There is no provision for specifying the version of the record (this assumes that version information is available inline in the referenced resources) -->
            
            <informalexample>
                <para>The following example shows the <literal>link</literal> element used to
                    associate an ONIX record with the publication.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/link-1.xml"/>
                </synopsis>
            </informalexample>
            
            <para>The resources identified by the <literal>link</literal> element's <literal>href</literal> attribute are 
                considered <xref linkend="gloss-external-resource"/>s, and must therefore not be identified as items in the
                <link linkend="sec-manifest-elem">manifest</link>.</para>
            
            <para>If metadata provided in an external record conflicts with metadata given inline in the
                Package Document metadata element, then the external metadata should be given
                precedence.</para>
            
            <para>Reading Systems are not required to dereference the resources identified through the <literal>link</literal> element.</para>
            
        </section>
        
        <section xml:id="sec-opf-link-def">
            <title>Definition</title>
            
            <variablelist xreflabel="link" role="elem-synopsis" xml:id="elemdef-opf-link">
                <varlistentry>
                    <term>Element Name</term>
                    <listitem>
                        <para>
                            <literal>link</literal>
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Usage</term>
                    <listitem>
                        <para>As a child of <xref linkend="elemdef-opf-metadata"/>. Repeatable.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Attributes</term>
                    <listitem>
                        <variablelist role="elem-synopsis-attlist">
                            <varlistentry xml:id="attrdef-link-href">
                                <term>
                                    <literal>href</literal>
                                    <option>[required]</option>
                                </term>
                                <listitem>
                                    <para>A valid URL [TODO RFC link] to an external metadata
                                        resource.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry xml:id="attrdef-link-rel">
                                <term>
                                    <literal>rel</literal>
                                    <option>[required]</option>
                                </term>
                                <listitem>
                                    <para>A token that describes the nature of the external resource
                                        (its relation to the publication). See further <xref
                                            linkend="elemdef-opf-link-rel-values"/>.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry xml:id="attrdef-link-id">
                                <term>
                                    <literal>id</literal>
                                    <option>[optional]</option>
                                </term>
                                <listitem>                                
                                    <xi:include href="share/id-prose-para.xml"/>                                
                                </listitem>
                            </varlistentry>
                        </variablelist>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Content Model</term>
                    <listitem>
                        <para>Empty.</para>
                    </listitem>
                </varlistentry>
            </variablelist>
            
        </section>

        <section xml:id="elemdef-opf-link-rel-values">
            <title>Metadata record types</title>
            
            <para>A list of predefined metadata record identifiers is provided in the table below.
                These values are defined canonically in the 
                <link xlink:href="http://www.idpf.org/epub/30/vocab/package/">EPUB3 Package Metadata Vocabulary</link>.
            </para>
            
            <para>Additional identifiers can be added so long as they adhere to the requirements defined in
                <xref linkend="sec-metadata-extensibility"/> for referencing external vocabularies.</para>
            
            <informaltable xml:id="rdfa-vocab-package-bag-metarec-types">
                <tgroup cols="2">
                    <thead>
                        <row>
                            <entry>Value</entry>
                            <entry>Description</entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry role="rdfa-property" xml:id="metarec-property-onix-record">
                                <literal>onix-record</literal>
                            </entry>
                            <entry role="rdfa-property-desc">The <literal>onix-record</literal> property indicates the referenced resource is an ONIX record.</entry>
                        </row>
                        <row>
                            <entry role="rdfa-property" xml:id="metarec-property-mods-record">
                                <literal>mods-record</literal>
                            </entry>
                            <entry role="rdfa-property-desc">The <literal>mods-record</literal> property indicates the referenced resource is a MODS record.</entry>
                        </row>
                        <row>
                            <entry role="rdfa-property" xml:id="metarec-property-xmp-record">
                                <literal>xmp-record</literal>
                            </entry>
                            <entry role="rdfa-property-desc">The <literal>xmp-record</literal> property indicates the referenced resource is an XMP record.</entry>
                        </row>
                        <row>
                            <entry role="rdfa-property" xml:id="metarec-property-marc21xml-record">
                                <literal>marc21xml-record</literal>
                            </entry>
                            <entry role="rdfa-property-desc">The <literal>marc21xml-record</literal> property indicates the referenced resource is a MARC21 record.</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            
        </section>

        <section xml:id="sec-opf-link-examples">
            <title><literal>link</literal> element examples</title>

            <informalexample>
                <para>The following example shows the <literal>link</literal> element used to
                    associate two external resources with the publication: an XMP record, and a link
                    to an informational web page. Note that as the <literal>foaf:homepage</literal>
                    token is <link linkend="elemdef-opf-link-rel-values">not defined by this
                    specification</link>, the 
                    <link linkend="sec-metadata-extensibility">metadata extensibility mechanism</link> is employed.
                </para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/link-2.xml"/>
                </synopsis>
            </informalexample>

        </section>
    </section>

    <section xml:id="sec-metadata-examples">
        <title>Metadata Examples</title>
        
        <section xml:id="sec-metadata-examples-version">
            <title>Versioning</title>
            
            <informalexample>
                <para>The following example shows a typical version identifier in a package file.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-ex-versioning.xml"/>
                </synopsis>
            </informalexample>
            
            <informalexample>
                <para>The following examples shows how major and minor revision changes might appear in a package.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-ex-versioning-1.xml"/>
                </synopsis>
            </informalexample>
        </section>
        
        <section xml:id="sec-metadata-examples-identifier">
            <title>Identifiers</title>
            
            <informalexample>
                <para>The following examples show how different identifiers can be distinguished within a package
                    by their <literal>scheme</literal> attributes.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-ex-identifiers.xml"/>
                </synopsis>
            </informalexample>
        </section>
        
        <section xml:id="sec-metadata-examples-meta-auth">
            <title>Metadata authority</title>
            
            <informalexample>
                <para>The following example shows an identifier that has been added by a metadata authority
                    but that has not changed the unique the identifier for the package.
                </para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-ex-meta-auth.xml"/>
                </synopsis>
            </informalexample>
            
            <informalexample>
                <para>The following example shows how a retailer can replace the publisher supplied
                    unique identifier with their own.
                </para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-ex-meta-auth-1.xml"/>
                </synopsis>
            </informalexample>
        </section>
        
        <section xml:id="sec-metadata-examples-creator">
            <title>Creators</title>
            
            <informalexample>
                <para>The following example references the ID of the <literal>dcterms:creator</literal> element to express 
                    additional metadata properties of the <code>dcterms:creator</code> element.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-ex-creator.xml"/>
                </synopsis>
            </informalexample>
            
            <informalexample>
                <para>The following example shows how ancillary properties can be attached to a creator
                    to provide alternate representations of their name.
                </para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-ex-creator-1.xml"/>
                </synopsis>
            </informalexample>
            
            <informalexample>
                <para>The following examples shows how party identifiers can be associated with an author.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-ex-creator-2.xml"/>
                </synopsis>
            </informalexample>
        </section>
        
        <section xml:id="sec-metadata-examples-title">
            <title>Titles</title>
            
            <informalexample>
                <para>The following example shows a title for a publication.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-ex-title.xml"/>
                </synopsis>
            </informalexample>
            
            <informalexample>
                <para>The following example shows a title in two scripts.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-ex-title-1.xml"/>
                </synopsis>
            </informalexample>
            
            <informalexample>
                <para>The following complex example shows the book "The Great Cookbooks of the World: Mon premier guide 
                    de cuisson, un Mmoire. The New French Cuisine Masters, Volume Two. Special Anniversary Edition" could
                    be classified.
                </para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-ex-title-2.xml"/>
                </synopsis>
            </informalexample>
        </section>
        
        <section xml:id="sec-metadata-examples-publication-type">
            <title>Publication type</title>
            
            <informalexample>
                <para>The following example shows how a publication can be identified as a dictionary.</para>
                <synopsis>
                    <xi:include parse="text" href="examples/publications/meta-ex-pub-type.xml"/>
                </synopsis>
            </informalexample>
        </section>
        
    </section>

</section>

            <section xml:id="sec-manifest-elem">
                <title>The <literal>manifest</literal> Element</title>

                <section xml:id="sec-manifest-elem-overview">
                    <title>Overview</title>

                    <para>The <literal>manifest</literal> element provides an exhaustive list of all
                            <xref linkend="gloss-publication-resource"/>s that constitute the
                        Publication via its collection of child <code><link linkend="sec-item-elem"
                                >item</link></code> elements. </para>

                    <para>All <xref linkend="gloss-publication-resource"/>s must be referenced in
                        the <code>manifest</code> regardless of their physical location (i.e.,
                        regardless of whether they are available in the <xref
                            linkend="gloss-container"/> or remotely). Refer to <xref
                            linkend="sec-resource-locations"/> for media type specific requirements
                        regarding resource locations.</para>

                    <para>This specification and its sibling specifications may explicitly define
                        certain resource types to be <link linkend="gloss-external-resource"
                            >external</link>, thereby declaring that the resource is not a
                        Publication Resource. Examples of such external resources include resources
                        referenced from the Package Document metadata <xref linkend="sec-opf-link"/>
                        element.</para>

                    <para>The manifest is not self-referencing: it must not include
                            <literal>item</literal> elements referring to the resource(s) that make
                        up the Package Document itself.</para>

                    <para>The order of <literal>item</literal> elements in the manifest is not
                        significant. The presentation sequence of Content Documents is provided in
                            <link linkend="sec-spine-elem"><literal>spine</literal></link>.</para>

                </section>

                <section xml:id="sec-manifest-elem-def">
                    <title>Definition</title>

                    <variablelist xreflabel="manifest" role="elem-synopsis"
                        xml:id="elemdef-opf-manifest">
                        <varlistentry>
                            <term>Usage</term>
                            <listitem>
                                <para>Required second child of <xref linkend="elemdef-opf-package"
                                    />, following <xref linkend="elemdef-opf-metadata"/>.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Attributes</term>
                            <listitem>
                                <variablelist role="elem-synopsis-attlist">
                                    <varlistentry xml:id="attrdef-manifest-id" xreflabel="id">
                                        <term><literal>id</literal>
                                            <option>[optional]</option></term>
                                        <listitem>
                                            <xi:include href="./share/id-prose-para.xml"/>
                                        </listitem>
                                    </varlistentry>
                                </variablelist>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Content Model</term>
                            <listitem>
                                <para>Multiple <literal><xref linkend="elemdef-opf-item"/></literal>
                                    <option>[required]</option></para>
                            </listitem>
                        </varlistentry>
                    </variablelist>

                </section>

                <section xml:id="sec-item-elem" xreflabel="item">
                    <title>The <literal>item</literal> element</title>

                    <section xml:id="sec-item-elem-overview">
                        <title>Overview</title>

                        <para> Each <literal>item</literal> element in the
                                <literal>manifest</literal> identifies a resource belonging to the
                            EPUB Package by the URI provided in its <literal>href</literal>
                            attribute. The URI provided may be absolute or relative to the
                            container. In the case of relative URIs, Reading Systems will use the
                            URI of the Package Document in order to resolve these to absolute URIs.
                            The resulting absolute URI must be unique within the
                                <literal>manifest</literal> scope.</para>

                        <para>The resource identified by an item must conform to the applicable
                            specification(s) as inferred from the MIME Type provided in the
                                <literal>item</literal> element <literal>media-type</literal>
                            attribute.</para>

                    </section>

                    <section xml:id="sec-item-def">
                        <title>Definition</title>

                        <variablelist xreflabel="item" role="elem-synopsis"
                            xml:id="elemdef-opf-item">
                            <varlistentry>
                                <term>Element Name</term>
                                <listitem>
                                    <para><literal>item</literal></para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Usage</term>
                                <listitem>
                                    <para>As a child of <xref linkend="elemdef-opf-manifest"/>.
                                        Repeatable.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Attributes</term>
                                <listitem>
                                    <variablelist role="elem-synopsis-attlist">
                                        <varlistentry xml:id="attrdef-item-id" xreflabel="id">
                                            <term><literal>id</literal>
                                                <option>[required]</option></term>
                                            <listitem>
                                                <xi:include href="share/id-prose-para.xml"/>
                                            </listitem>
                                        </varlistentry>
                                        <varlistentry xml:id="attrdef-item-href" xreflabel="href">
                                            <term><literal>href</literal>
                                                <option>[required]</option></term>
                                            <listitem>
                                                <para>Specifies the URI of the resource described by
                                                  this <literal>item</literal> element.</para>
                                            </listitem>
                                        </varlistentry>
                                        <varlistentry xml:id="attrdef-item-media-type"
                                            xreflabel="media-type">
                                            <term><literal>media-type</literal>
                                                <option>[required]</option></term>
                                            <listitem>
                                                <para>Identifies the MIME media type <remark
                                                  role="todo">TODO MIME ref</remark> of the resource
                                                  described by this <literal>item</literal>
                                                  element.</para>
                                            </listitem>
                                        </varlistentry>
                                        <varlistentry xml:id="attrdef-item-fallback"
                                            xreflabel="fallback">
                                            <term><literal>fallback</literal>
                                                <option>[conditionally required]</option></term>
                                            <listitem>
                                                <para>Specifies via IDREF <xref linkend="refXML"/> a
                                                  fallback for a non-Core Media Type. Refer to <xref
                                                  linkend="sec-fallbacks"/> for details.</para>
                                            </listitem>
                                        </varlistentry>
                                        <varlistentry xreflabel="property">
                                            <term><literal>property</literal>
                                                <option>[optional]</option></term>
                                            <listitem>
                                                <para>A CURIE <xref linkend="refRDFa11Core"/> that resolves to a term in
                                                    one of the vocabularies defined in the metadata profile or <literal>package</literal> 
                                                    element's <xref linkend="attrdef-package-prefix"/> attribute.</para>
                                            </listitem>
                                        </varlistentry>
                                        <varlistentry xreflabel="property">
                                            <term><literal>media-overlay</literal>
                                                <option>[optional]</option></term>
                                            <listitem>
                                                <para>Defines via IDREF <xref linkend="refXML"/> the
                                                  <link linkend="refOverlays3">media overlay</link>
                                                  for the resource described by this
                                                  <literal>item</literal> element. Refer to Section
                                                  3.3 of <xref linkend="refOverlays3"/> for
                                                  details.<!-- #sec-the-package-document --></para>
                                            </listitem>
                                        </varlistentry>
                                    </variablelist>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Content Model</term>
                                <listitem>
                                    <para>Empty.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                    </section>

                    <section xml:id="sec-fallbacks">
                        <title>Item Fallbacks</title>

                        <para>Unless one of the exceptions listed in <xref
                                linkend="sec-fallback-processing-flow"/> apply, each item in the
                            manifest whose <xref linkend="attrdef-item-media-type"/> value is not
                            one of the <link linkend="sec-core-media-types">EPUB3 Core Media
                                Types</link> must use the <xref linkend="attrdef-item-fallback"/>
                            attribute to specify a fallback chain that includes at least one <xref
                                linkend="elemdef-opf-item"/> whose <xref
                                linkend="attrdef-item-media-type"/> is an EPUB3 Core Media
                            Type.</para>

                        <para>The <literal>fallback</literal> attribute IDREF <xref linkend="refXML"
                            /> value must resolve to another <literal>item</literal> in the
                                <literal>manifest</literal>. The ordered list of all ID references
                            that can be reached starting from a given item's
                                <literal>fallback</literal> attribute is considered to be the
                            "fallback chain" for that item. There must not be any circular- or self
                            references in fallback chains.</para>

                        <para>The general rule for processing manifest-level fallbacks is that a
                            Reading System that does not support the Media Type of a given item must
                            traverse the fallback chain until it encounters a supported Media Type.
                            The resource identified by the fallback item is then used in place of
                            the unsupported item. It is legal to have a fallback attribute on an
                            item of a Core Media Type and a Reading System may choose to "fall over"
                            such references in order to find the optimal version of a resource to
                            render in a given context. <remark role="todo">TODO Fallbacks for NCX,
                                and possibly other core media types, are not legal. Determine which
                                they are and add here.</remark>
                        </para>

                        <para>However, Reading Systems process fallbacks differently depending on
                            the context where a reference to a resources occurs in Content
                            Documents, in conjunction with the intrinstic fallback mechanisms
                            defined in <xref linkend="refHTML5"/>, <xref linkend="refCSS21"/> and
                                <xref linkend="refSVG"/> . Refer to <xref
                                linkend="sec-fallback-processing-flow"/> for a definition of the
                            overall processing flow for handling fallbacks.</para>

                    </section>

                    <section xml:id="elemdef-opf-item-property-values">
                        <title>Recognized values for the <literal>item</literal> element
                                <literal>property</literal> attribute</title>
                        <para><remark role="todo">TODO complete as per <link
                                    xlink:href="http://code.google.com/p/epub-revision/wiki/ImplementationProposalsMetadata"
                                    >ImplementationProposalsMetadata</link></remark></para>
                        <para><remark role="todo">TODO This might better live in <xref
                                    linkend="sec-content-definitions"/></remark>?</para>

                        <informaltable xml:id="rdfa-vocab-package-bag-manifest-types">
                            <tgroup cols="2">
                                <thead>
                                    <row>
                                        <entry>Value</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry role="rdfa-property" xml:id="manifest-property-cover-image">
                                            <literal>cover-image</literal>
                                        </entry>
                                        <entry role="rdfa-property-desc">The <literal>cover-image</literal> property identifies a resource as the cover image for the publication.</entry>
                                    </row>
                                    <row>
                                        <entry role="rdfa-property" xml:id="manifest-property-mathml">
                                            <literal>mathml</literal>
                                        </entry>
                                        <entry role="rdfa-property-desc">The <literal>mathml</literal> property indicates that the associated resource contains one or more instances of MathML markup.</entry>
                                    </row>
                                    <row>
                                        <entry role="rdfa-property" xml:id="manifest-property-online-resources">
                                            <literal>online-resources</literal>
                                        </entry>
                                        <entry role="rdfa-property-desc">The <literal>online-resources</literal> property indicates that the associated resource references publication resources that are located online.</entry>
                                    </row>
                                    <row>
                                        <entry role="rdfa-property" xml:id="manifest-property-page-spread-left">
                                            <literal>page-spread-left</literal>
                                        </entry>
                                        <entry role="rdfa-property-desc">The <literal>page-spread-left</literal> property indicates left-to-right directionality of a top-level SVG document. This property must always be used in conjunction with the <literal>
                                            svg</literal> property when describing a manifest <literal>item</literal>. It must not be used simultaneously with the <literal>
                                                page-spread-right</literal> property.</entry>
                                    </row>
                                    <row>
                                        <entry role="rdfa-property" xml:id="manifest-property-page-spread-right">
                                            <literal>page-spread-right</literal>
                                        </entry>
                                        <entry role="rdfa-property-desc">The <literal>page-spread-right</literal> property indicates right-to-left directionality of a top-level SVG document. This property must always be used in conjunction with the <literal>
                                            svg</literal> property when describing a manifest <literal>item</literal>. It must not be used simultaneously with the <literal>
                                                page-spread-left</literal> property.</entry>
                                    </row>
                                    <row>
                                        <entry role="rdfa-property" xml:id="manifest-property-scripted">
                                            <literal>scripted</literal>
                                        </entry>
                                        <entry role="rdfa-property-desc">The <literal>scripted</literal> property indicates that the associated resource contains scripted content.</entry>
                                    </row>
                                    <row>
                                        <entry role="rdfa-property" xml:id="manifest-property-svg">
                                            <literal>svg</literal>
                                        </entry>
                                        <entry role="rdfa-property-desc">The <literal>svg</literal> property indicates that the associated resource contains one or more instances of SVG markup.</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </informaltable>
                        
                        <section xml:id="sec-scripted-content">
                            <title>Scripted Content Documents</title>
                            <para>In EPUB Publications, Content Documents must not contain any
                                    <literal>script</literal> elements unless the manifest item
                                corresponding to that Content Document contains the
                                    <literal>property</literal> value <literal>scripted</literal>
                                (thus indicating a <emphasis role="bold">Scripted Content
                                    Document).</emphasis>Since scripted content may be processed
                                differently, with features such as pagination potentially disabled,
                                content items that set the property value of "scripted" should not
                                be spine items unless absolutely required by a publication (i.e.
                                scripted content should if possible be nested, contained within
                                top-level content via "object" or "iframe").</para>

                            <para>Reading Systems may render Scripted Content Documents as an
                                interactive, scripted HTML User Agent according to <xref
                                    linkend="refHTML5"/> rather than according to the simplified
                                processing model defined for EPUB User Agents in <xref
                                    linkend="refContentDocs3"/>, i.e. with scripting enabled.
                                Reading Systems should not enable scripting for any resources other
                                than Scripted Content Documents.</para>

                            <para>Reading Systems may implement support for Scripted Content
                                Documents in a manner that disables other EPUB capabilities and/or
                                provides a different rendering such as, for example, disabling
                                pagination.</para>
                        </section>

                    </section>
                </section>

                <section xml:id="sec-resource-locations">
                    <title>Publication Resource Locations</title>

                    <para>All <xref linkend="gloss-publication-resource"/>s must be located in the
                            <xref linkend="gloss-container"/>, with the exceptions listed
                        below.</para>

                    <para><remark role="todo">TODO below, reference media types table (which would
                            ideally be a categorized table)</remark></para>
                    <itemizedlist>
                        <listitem>
                            <para>Audio resources, as referenced from Content Documents or Media
                                Overlay documents, may be located in the container or
                                remotely</para>
                        </listitem>
                        <listitem>
                            <para>Video resources, as referenced from Content Documents, may be
                                located in the container or remotely</para>
                        </listitem>
                    </itemizedlist>

                    <para>When remote audio and video resources are included in the publication, the
                            <literal>online</literal> metadata property must be used... <remark
                            role="todo">TODO add link to the <literal>online</literal> meta property
                            here when it has been added, and describe that it must be set on any
                            content doc or media overlay that contains online resources as per the
                            list above.</remark></para>

                    <para>Content providers should prefer locating audio and video resorces in the
                        container to allow the user access to the entire presentation regardless of
                        connectivity status.</para>

                </section>
                <section xml:id="examples-manifest">
                    <title>The <literal>manifest</literal> Element: Examples</title>
                    <informalexample xml:id="example-manifest-1">
                        <para>The following example shows a <literal>manifest</literal> that only
                            contain <literal>item</literal>s that are Core Media Types.</para>
                        <synopsis>
<xi:include href="./examples/publications/manifest-1.xml" parse="text"/></synopsis>
                    </informalexample>
                    <informalexample>
                        <para>The following example shows a <literal>manifest</literal> that
                            contains two <literal>item</literal>s that are not Core Media Types, and
                            therefore uses the <link linkend="sec-fallbacks">fallback chain
                                mechanism</link> to supply content alternatives. The fallback chain
                            terminates with a Core Media Type. </para>
                        <synopsis>
<xi:include href="./examples/publications/manifest-2.xml" parse="text"/></synopsis>
                    </informalexample>
                </section>

            </section>
            <section xml:id="sec-spine-elem">
                <title>The <literal>spine</literal> element</title>

                <para>The <literal>spine</literal> element defines the default reading order of the
                    Publication content.</para>

                <variablelist xreflabel="spine" role="elem-synopsis" xml:id="elemdef-opf-spine">
                    <varlistentry>
                        <term>Element name</term>
                        <listitem>
                            <para><literal>spine</literal></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Third child of <xref linkend="elemdef-opf-package"/>, following
                                    <xref linkend="elemdef-opf-manifest"/>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-spine-id">
                                    <term><literal>id</literal>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-spine-toc">
                                    <term><literal>toc</literal>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> to the manifest
                                                <xref linkend="elemdef-opf-item"/> that represents
                                            the <link linkend="sec-ncx">NCX</link></para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para><literal><xref linkend="elemdef-spine-itemref"/></literal>
                                <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The <literal>spine</literal> elements <xref linkend="elemdef-spine-itemref"/>
                    children is a list of <xref linkend="gloss-extended-content-document-reference"
                    />s. The order in which the <literal>itemref</literal> elements appear defines
                    the default reading order of the Publication.</para>

                <section xml:id="sec-itemref-elem" xreflabel="itemref">
                    <title>The <literal>itemref</literal> element</title>
                    <variablelist xreflabel="itemref" role="elem-synopsis"
                        xml:id="elemdef-spine-itemref">
                        <varlistentry>
                            <term>Element Name</term>
                            <listitem>
                                <para><literal>itemref</literal></para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Usage</term>
                            <listitem>
                                <para>As a child of <xref linkend="elemdef-opf-spine"/>.
                                    Repeatable.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Attributes</term>
                            <listitem>
                                <variablelist role="elem-synopsis-attlist">
                                    <varlistentry xml:id="attrdef-itemref-idref" xreflabel="idref">
                                        <term><literal>idref</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para>Identifies via an IDREF <xref linkend="refXML"/> a
                                                manifest <xref linkend="elemdef-opf-item"/>
                                                element.</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-itemref-linear">
                                        <term><literal>linear</literal>
                                            <option>[optional]</option></term>
                                        <listitem>
                                            <para>Specifies whether the referenced content is
                                                primary. Value must be <literal>yes</literal> or
                                                  <literal>no</literal>.</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-itemref-id">
                                        <term><literal>id</literal>
                                            <option>[optional]</option></term>
                                        <listitem>
                                            <xi:include href="./share/id-prose-para.xml"/>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry>
                                        <term><literal>property</literal>
                                            <option>[optional]</option></term>
                                        <listitem>
                                            <para>Indicates the directional placement of a single
                                                  <literal>spine</literal>
                                                <literal>item</literal>. Value must be
                                                  <literal>left</literal> or
                                                  <literal>right</literal>. </para>

                                        </listitem>
                                    </varlistentry>
                                </variablelist>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Content Model</term>
                            <listitem>
                                <para>Empty.</para>
                            </listitem>
                        </varlistentry>

                    </variablelist>

                    <para>Each <literal>itemref</literal> element must (via the <xref
                            linkend="attrdef-itemref-idref"/> attribute) reference an item in the
                        manifest. Consequently, the <literal>spine</literal> represents an ordered
                        list of a subset of the <literal>item</literal>s in the manifest, with
                        content items not being referenced from the <literal>spine</literal> being
                        ancillary to those that do appear there. </para>

                    <para>Each <literal>item</literal> referenced via <literal>itemref</literal>
                        must be an <xref linkend="gloss-extended-content-document-reference"/>. Note
                        that in general such references should resolve to XHTML Content Documents
                        rather than SVG Content Documents, unless a) such use is within a
                        Publication that is packaged together with, and as an alternative
                        non-default representation of, another Publication that represents
                        effectively the same content utilizing XHTML Content Documents or b) the
                        nature of the content being represented via SVG is inherently unsuitable to
                        representation in XHTML.</para>

                    <para>The <literal>itemref</literal> element's <literal>linear</literal>
                        attribute indicates whether a spine item is considered primary
                            (<literal>linear='yes'</literal>) or auxiliary
                            (<literal>linear='no'</literal>).The default value of
                            <literal>linear</literal> is <literal>yes</literal>. This may be used to
                        enable Reading Systems to distinguish presentation of "body" content from
                        ancillary content which might be, for example, presented in a popup window,
                        or omitted from an aural rendition. </para>

                    <para>Reading Systems must provide a means to render a Publication in the order
                        defined by the <literal>spine</literal>. Reading Systems must as part of
                        this means a) recognize the first primary (<literal>linear='yes'</literal>)
                        item in spine to be the beginning of the main reading order of the
                        publication, and b) render successive primary items in the order given in
                        spine.</para>
                    <para>The vocabulary defined for the <literal>property</literal> attribute of
                        the <literal>itemref</literal> element includes the values
                            <literal>left</literal> and <literal>right</literal> which specify the
                        desired placement of a single-page rendering of that item. This is intended
                        to facilitate representation of two-page "spreads". <remark role="todo"
                            >TODO: this can be listed with the rest of the defined vocabulary;
                            describe interaction with page-progression-direction; finalize
                            names</remark></para>
                </section>
                <section xml:id="examples-spine">
                    <title>The <literal>spine</literal> Element: Examples</title>
                    <informalexample>
                        <para>The following example shows a <literal>spine</literal> element
                            corresponding to <link linkend="example-manifest-1">the manifest example
                                above</link>.</para>
                        <synopsis>
<xi:include href="./examples/publications/spine-1.xml" parse="text"/></synopsis>
                    </informalexample>
                </section>
            </section>
            <section xml:id="sec-guide-elem">
                <title>The <literal>guide</literal> element [DEPRECATED]</title>

                <para>The <code>guide</code> element is deprecated in EPUB3 in favor of the
                        <literal>landmarks</literal> mechanism defined in <remark role="todo"
                        >TODO</remark>. Authors may include the guide element for EPUB 2.0 Reading
                    System forward compatibility purposes. If a EPUB3 Reading System encounters a
                    Publication which contains both the package <code>guide</code> element and the
                        <remark role="todo">landmarks</remark> mechanism, then the landmarks
                    mechanism must be used.</para>

                <variablelist xreflabel="guide" role="elem-synopsis" xml:id="elemdef-opf-guide">
                    <varlistentry>
                        <term>Element name</term>
                        <listitem>
                            <para><literal>guide</literal></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Fourth child of <xref linkend="elemdef-opf-package"/>, following
                                    <xref linkend="elemdef-opf-spine"/>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <para>None.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>One or more <literal><xref linkend="elemdef-reference"/></literal>
                                <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The package element may contain one <literal>guide</literal> element, which if
                    present must contain one or more <literal>reference</literal> elements. Each
                    reference must have an <literal>href</literal> attribute, which may include a
                    fragment identifier as defined in section 4.1 of <xref linkend="refRFC2396"/>.
                    Each reference must further have <literal>type</literal> and
                        <literal>title</literal> attributes whose values must be strings. </para>

                <para>In the context of EPUB, the href attribute of each reference element must
                    resolve to or within a resource that is represented by an Extended Content
                    Document Reference, with each type attribute value taken from <link
                        xlink:href="TODO"><remark role="todo">TODO table in
                        2.0.1</remark>TODO</link> .</para>

                <para>Reading Systems may provide a means to navigate a Publication based on the
                    information in the <code>guide</code>.</para>

                <section xml:id="sec-guide-reference" xreflabel="reference">
                    <title>The <literal>reference</literal> element</title>
                    <variablelist xreflabel="item" role="elem-synopsis" xml:id="elemdef-reference">
                        <varlistentry>
                            <term>Element Name</term>
                            <listitem>
                                <para><literal>reference</literal></para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Usage</term>
                            <listitem>
                                <para>As a child of <xref linkend="elemdef-opf-guide"/>.
                                    Repeatable.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Attributes</term>
                            <listitem>
                                <variablelist role="elem-synopsis-attlist">
                                    <varlistentry xml:id="attrdef-reference-href" xreflabel="href">
                                        <term><literal>href</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para>Specifies the URI of the destination of the
                                                reference. May contain a fragment identifier.</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-reference-type" xreflabel="type">
                                        <term><literal>type</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para>Text string describing the type of the reference,
                                                as further detailed in <link xlink:href="TODO"
                                                  ><remark role="todo">TODO table in
                                                  2.0.1</remark>TODO</link>. </para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry>
                                        <term><literal>title</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para> Text string title for the reference. </para>
                                        </listitem>
                                    </varlistentry>
                                </variablelist>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Content Model</term>
                            <listitem>
                                <para>Empty.</para>
                            </listitem>
                        </varlistentry>

                    </variablelist>

                </section>

            </section>
            <section xml:id="sec-bindings-elem">
                <title>The <literal>bindings</literal> element</title>
                <variablelist xreflabel="bindings" role="elem-synopsis"
                    xml:id="elemdef-opf-bindings">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><literal>bindings</literal></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Fourth or fifth child of <xref linkend="elemdef-opf-package"/>,
                                following <xref linkend="elemdef-opf-spine"/> or <xref
                                    linkend="elemdef-opf-guide"/>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <para>None.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>One or several <literal><xref linkend="elemdef-mediaType"
                                    /></literal>
                                <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The package element may contain at most one <literal>bindings</literal>
                    element, which contains one or more <literal>mediaType</literal> elements, each
                    of which associates a custom media type with a "handler" that provides a default
                    script-based implementation for items of that media type when they are
                    referenced from <code>object</code> elements in XHTML Content Documents. </para>

                <para> Each <literal>mediaType</literal> element must uniquely designate, via its
                    required <literal>media-type</literal> attribute, a unique content type, which
                    must not be a Core Media Type, and must reference, via its required
                        <code>handler</code> attribute, the id in the manifest of the default
                    implementation for this media type, which must be an XHTML Content Document. </para>

                <para>Reading Systems that support scripting must utilize the bindings element, if
                    present in a Publication, to handle object element references whose MIME media
                    type is not natively supported by the Reading System. The processing model is to
                    instantiate for such references the designated XHTML Content Document handler
                    (which would typically include scripting) as if it had been referenced from the
                    object element's <code>data</code> attribute, but with URL parameters (which go
                    after '?' in a URL) of <itemizedlist>
                        <listitem>
                            <para><code>src</code> - URI to the resource (value of the data
                                attribute in the object element) </para>
                        </listitem>
                        <listitem>
                            <para><code>type</code> - resource media type (value of the type
                                attribute in the object element)</para>
                        </listitem>
                    </itemizedlist></para>
                <para>Any <code>param</code> children of the object element are encoded as URL
                    parameters in the same manner; e.g. for:</para>
                <para>
                    <synopsis>
&lt;object data="horse.ogg" media-type="audio/ogg"/>
&lt;param name="autoplay" value="false">
&lt;/object></synopsis></para>
                <para>a Reading System would instantiate the designated handler Content Document as
                    if its URI query string parameters were:</para>
                <para>
                    <synopsis>
src=horse.ogg&amp;type=audio/ogg&amp;autoplay=false        </synopsis></para>

                <para>Non-ASCII and non-URL-safe characters (e.g. '=') should be escaped in the
                    usual manner for these parameters (UTF-8 encoding and using %XX escapes). </para>
                <para role="rsconferr">The following partial example illustrates how bindings can be
                    used to provide a default implementation:</para>
                <para><informalexample>
                        <synopsis>
&lt;manifest>
  &lt;item id="pict1" href="images/Pict1.jpg" media-type="image/jpeg"/>
  ...
  &lt;item id="content" href="content.xhtml" media-type="application/xhtml+xml"/>
  &lt;item id="impl" href="impl.xhtml" media-type="application/xhtml+xml"/>
  &lt;item id="slideshow" href="slideshow.xml" media-type="application/x-demo-slideshow"/>
 &lt;/manifest>
 &lt;bindings>
   &lt;mediaType media-type="application/x-demo-slideshow" handler="impl"/>
 &lt;/bindings>

<emphasis role="italic">in content.xhtml:</emphasis>

...
&lt;object data="slideshow.xml" type="application/x-demo-slideshow">
&lt;!-- if scripting is not available, just show them inline -->
&lt;img src="images/Pict1.jpg"/>
&lt;img src="images/Pict2.jpg"/>
&lt;img src="images/Pict3.jpg"/>
&lt;img src="images/Pict4.jpg"/>
&lt;/object>
...

<emphasis role="italic">in slideshow.xml:</emphasis>
&lt;slides>
  &lt;slide src="images/Pict1.jpg" dur="3"/>
  &lt;slide src="images/Pict2.jpg" dur="3"/>
  &lt;slide src="images/Pict3.jpg" dur="3"/>
  &lt;slide src="images/Pict4.jpg" dur="3"/>
&lt;/slides>    
                           
            </synopsis>
                    </informalexample></para>

                <section xml:id="sec-mediaType" xreflabel="mediaType">
                    <title>The <literal>mediaType</literal> element</title>
                    <variablelist xreflabel="item" role="elem-synopsis" xml:id="elemdef-mediaType">
                        <varlistentry>
                            <term>Element Name</term>
                            <listitem>
                                <para><literal>mediaType</literal></para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Usage</term>
                            <listitem>
                                <para>As a child of <xref linkend="elemdef-opf-bindings"/>.
                                    Repeatable.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Attributes</term>
                            <listitem>
                                <variablelist role="elem-synopsis-attlist">

                                    <varlistentry xml:id="attrdef-mediaType-media-type"
                                        xreflabel="media-type">
                                        <term><literal>media-type</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para>MIME media type.</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-mediaaType-handler"
                                        xreflabel="handler">
                                        <term><literal>handler</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para>Identifies via an IDREF <xref linkend="refXML"/>
                                                the manifest XHTML Content Document to be invoked to
                                                handle content of the type specified in this
                                                element</para>
                                        </listitem>
                                    </varlistentry>

                                    <varlistentry>
                                        <term><literal>Common Package Attributes</literal>
                                            [TODO]</term>
                                        <listitem>
                                            <para/>
                                        </listitem>
                                    </varlistentry>
                                </variablelist>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Content Model</term>
                            <listitem>
                                <para>Empty.</para>
                            </listitem>
                        </varlistentry>

                    </variablelist>

                </section>
            </section>

        </section>

    </chapter>

    <xi:include href="./sections/epub30-publications-ncx.xml"/>

    <chapter xml:id="sec-content-definitions">
        <title>EPUB Content Definitions and Fallback Processing</title>

        <section xml:id="sec-core-media-types">
            <title>Core Media Types</title>
            <para>The following table lists the <link linkend="gloss-core-media-type">EPUB Core
                    Media Types</link> by MIME type <xref linkend="refRFC2046"/>.</para>

            <!-- TODO @WH the following statement about "must support" is not generally true, if we want to list
                those that are required, we need a new table column where we separate RSs
                that have video, audio, tts, CSS view port, etc capabilities; its gonna get messy 
                <para>Reading Systems must support rendering of these media types.</para> -->

            <para>Typically, <xref linkend="gloss-epub-publication"/>s contain only <xref
                    linkend="gloss-publication-resource"/>s that are Core Media Types. Publications
                may however optionally reference items of additional media types. In this case, a
                fallback chain is required to be supplied, as detailed in <xref
                    linkend="sec-fallback-processing-flow"/>.</para>

            <table xml:id="tbl-core-media-types">
                <caption>EPUB Core Media Types</caption>
                <thead>
                    <tr>
                        <th>MIME Media Type</th>
                        <th>Content Type Definition</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr xml:id="cmt-gif">
                        <td>
                            <literal>image/gif</literal>
                        </td>
                        <td>
                            <xref linkend="refGIF"/>
                        </td>
                        <td>Used for raster graphics </td>
                    </tr>

                    <tr xml:id="cmt-jpeg">
                        <td>
                            <code>image/jpeg</code>
                        </td>
                        <td>
                            <xref linkend="refJPEG"/>
                        </td>
                        <td> Used for raster graphics </td>
                    </tr>

                    <tr xml:id="cmt-png">
                        <td>
                            <code>image/png</code>
                        </td>
                        <td>
                            <xref linkend="refPNG"/>
                        </td>
                        <td> Used for raster graphics </td>
                    </tr>

                    <tr xml:id="cmt-svg11">
                        <td>
                            <code>image/svg+xml</code>
                        </td>
                        <td>
                            <olink type="epub-spec" targetdoc="contentdocs"
                                targetptr="sec-contentdocs-svg"/>
                        </td>
                        <td> Used for vector graphics for images embedded in <xref
                                linkend="gloss-content-document-xhtml"/>s and for <xref
                                linkend="gloss-content-document-svg"/>s. </td>
                    </tr>

                    <tr xml:id="cmt-xhtml">
                        <td>
                            <code>application/xhtml+xml</code>
                        </td>
                        <td>
                            <olink type="epub-spec" targetdoc="contentdocs"
                                targetptr="sec-contentdocs-xhtml"/>
                        </td>
                        <td> Used for <xref linkend="gloss-content-document-xhtml"/>s <remark
                                role="todo">TODO and (possibly) navigation-xhtml</remark>. </td>
                    </tr>

                    <tr xml:id="cmt-css">
                        <td>
                            <code>text/css</code>
                        </td>
                        <td>
                            <olink type="epub-spec" targetdoc="contentdocs" targetptr="sec-css"/>
                        </td>
                        <td> Used for <xref linkend="gloss-stylesheet"/>s. </td>
                    </tr>

                    <tr xml:id="cmt-ncx">
                        <td>
                            <code>application/x-dtbncx+xml</code>
                        </td>
                        <td>
                            <link
                                xlink:href="http://www.niso.org/standards/resources/Z39-86-2005.html"
                                >[Publications30]</link>
                            <remark role="todo">TODO mod to link to 2.0.1 if xhtml-nav</remark>
                        </td>
                        <td> Used for the NCX </td>
                    </tr>

                    <tr xml:id="cmt-pls">
                        <td>
                            <code>application/pls+xml</code>
                        </td>
                        <td>
                            <xref linkend="refPLS"/>
                        </td>
                        <td> Used for pronunciation lexicons to assist text-to-speech rendering</td>
                    </tr>

                    <tr xml:id="cmt-mp3">
                        <td>
                            <code>audio/mpeg</code> (<link
                                xlink:href="http://tools.ietf.org/html/rfc3003">RFC3003</link>) </td>
                        <td>
                            <xref linkend="refMP3"/>
                        </td>
                        <td> Used for MP3 audio</td>
                    </tr>

                    <tr xml:id="cmt-h264">
                        <td>
                            <code>video/mp4</code> (in video element 'type' attribute:
                                <code>"video/mp4; codecs='avc1.42E01E, mp4a.40.2'"</code>)</td>
                        <td>
                            <xref linkend="refH264"/>
                        </td>
                        <td> Used for MPEG-4 video; must use H.264 Basic Profile video and MP4 AAC
                            LC audio <xref linkend="refAAC"/>.</td>
                    </tr>
                    <!--
                    <tr xml:id="cmt-mp4-aac">
                        <td>
                            <code>audio/aac</code>
                        </td>
                        <td>
                            <xref linkend="refAAC"/>
                        </td>
                        <td> Used for MP4 AAC LC audio when not embedded in the <link
                                linkend="cmt-h264">video container</link>.</td>
                    </tr>
-->
                    <tr xml:id="cmt-opentype">
                        <td>
                            <code>application/vnd.ms-opentype</code>
                        </td>
                        <td>
                            <xref linkend="refOpenType"/>
                        </td>
                        <td> Used for OpenType fonts</td>
                    </tr>
                    <tr xml:id="cmt-woff">
                        <td>
                            <code>application/font-woff</code>
                        </td>
                        <td>
                            <xref linkend="refWOFF"/>
                        </td>
                        <td> Used for WOFF fonts</td>
                    </tr>
                    <tr>
                        <td>
                            <code>application/smil+xml</code>
                        </td>
                        <td>
                            <xref linkend="refOverlays3"/>
                        </td>
                        <td> Used for EPUB Media Overlay documents</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section xml:id="sec-fallback-processing-flow">
            <title>Fallback Requirements and Processing Flow </title>

            <para>This section defines in detail the requirements for including fallback content in
                a <xref linkend="gloss-epub-publication"/>, and the process by which Reading Systems
                must process fallback information. The rules for fallback processing depend on both
                the type of item, and how is referenced by a Content Document or other
                resource.</para>

            <para>Unless specified otherwise in the sections below, fallbacks must be provided for
                any <xref linkend="gloss-publication-resource"/> that is not a <link
                    linkend="sec-core-media-types">Core Media Type</link> using the <link
                    linkend="sec-fallbacks">manifest fallback mechanism</link>.</para>

            <!-- @WH : this can perhaps extend the intro up in sec-core-media-types, but is out of place here.
            <para>This specification defines a set of Core Media Types that all conforming Reading
                Systems must support in addition to Content Documents (e.g. PNG, SVG, OpenType
                fonts). Publications may optionally reference items of additional media types. In
                order to ensure that all conforming Publications can be successfully rendered by all
                conforming Reading Systems, alternative "fallback" items must be provided for each
                such item. Fallbacks may be provided either via inherent mechanisms defined for
                Content Documents, or via the manifest-level fallback mechanism defined in this
                specification. </para> -->


            <section xml:id="sec-fallback-processing-flow-av">
                <title>Audio and Video</title>
                <!-- TODO @WH this really says nothing about fallbacks, should eventually be moved somewhere else? -->

                <para>A Reading System that supports video playback must support video files that
                    utilize the MPEG-4 container with H.264/MPEG-4 AVC baseline profile format
                    (H.264) video codec and MPEG-4 Advanced Audio Coding - Low Complexity (AAC-LC)
                    audio codec, and this format is a Core Media Type.</para>

                <para>A Reading System that supports audio playback must support MPEG-1 Layer 3
                    (MP3) audio, and this format is a Core Media Type. Any Reading System that
                    supports video playback must also support standalone AAC-LC audio playback, but
                    AAC-LC is NOT a Core Media Type.</para>
                <!-- TODO @WH why is ACC-LC standalone not a core media type again? -->
            </section>


            <section xml:id="sec-fallback-processing-flow-xhtml-intrinsic">

                <title>XHTML Content Documents</title>

                <para>For every <xref linkend="gloss-publication-resource"/> referenced from an
                        <xref linkend="gloss-content-document-xhtml"/> that is not a <link
                        linkend="sec-core-media-types">Core Media Type</link>, suitable fallback(s)
                    to a resource that is a Core Media Type must be provided as detailed
                    below:</para>

                <variablelist>
                    <varlistentry>
                        <term><code>object</code></term>
                        <listitem>
                            <para>For resources referenced via the <code>object</code> element,
                                legitimate fallback(s) must be provided via that elements intrinsic
                                replacement capabilities.</para>
                            <para>Reading Systems must ignore manifest-level fallbacks in resolving
                                such references. (Note that the <code><link
                                        linkend="sec-bindings-elem">bindings</link></code> element
                                could be considered to enable a type of fallback, but not in the
                                sense meant here of ensuring that content can be rendered on all
                                Reading Systems, whether or not they support scripting).</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term><code>img</code></term>
                        <listitem>
                            <para> For resources referenced via <code>img</code> elements, the text
                                value of the <code>alt</code> attribute provides a legitimate
                                fallback and should be included. Additional manifest-level fallbacks
                                may be provided. </para>
                            <para>Reading Systems should process manifest-level fallbacks in
                                resolving such references. </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>All other cases</term>
                        <listitem>
                            <para>For all other resource referencing situations in XHTML content
                                documents, a legitimate fallback must be provided via the <link
                                    linkend="sec-fallbacks">manifest fallback mechanism</link>. </para>
                            <para>Reading Systems must process manifest-level fallbacks in resolving
                                such resource references. </para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <note>
                    <para>Only XHTML Content Documents must be referenced via <code>iframe</code>
                        elements; fallback processing is inapplicable.</para>
                </note>

            </section>

            <section xml:id="sec-fallback-processing-flow-svg-intrinsic">
                <title>SVG Content Documents</title>
                <para><remark role="todo">TODO any intrinsic fallback for SVG??</remark></para>
            </section>

            <section xml:id="sec-fallback-processing-flow-fonts">
                <title>Embedded Fonts</title>

                <para>For fonts embedded in Content Documents or EPUB Style Sheets using the
                        <code>@font-face</code> mechanism, the rules of CSS <xref linkend="refCSS21"
                    /> must be used to provide an appropriate fallback in case a non-standard or
                    font format is embedded (such fallback may be an OpenType or WOFF embedded font
                    or a reference to a system font).</para>

                <!-- @wh the statement that reading systems must support opentype and woff and obfusc has been
                    moved to contentdocs#sec-css-fonts -->

                <para>Reading Systems must ignore manifest-level fallbacks in resolving CSS font
                    references.</para>
            </section>


        </section>

    </chapter>

    <appendix xml:id="app-package-schema">
        <title>Package Document Schema</title>
        <para>The schema for Package Documents is available at <link
                xlink:href="../schema/opf30.nvdl">./schema/package-30.nvdl</link>.</para>
        <para>This schema is normative. In case of conflicts between the specification prose and
            this schema, the schema shall be considered definitive.</para>

        <section conformance="informative">
            <title>Using the Package Document Schema</title>
            <para>Validation of Package Documents using this schema will require a processor that
                supports <xref linkend="refNVDL"/>, <xref linkend="refRelaxNG"/> and <xref
                    linkend="refISOSchematron"/>.</para>
            <para>Note however that the NVDL schema layer can be substituted by a two-pass
                validation using the embedded RELAX NG and ISO Schematron schemas alone.</para>
        </section>

    </appendix>

    <appendix xml:id="app-ncx-schema">
        <title>NCX Document Schema</title>
        <para>The schema for NCX Documents is available at <link xlink:href="../schema/ncx-30.nvdl"
                >./schema/ncx30.nvdl</link>.</para>
        <para>This schema is normative. In case of conflicts between the specification prose and
            this schema, the schema shall be considered definitive.</para>

        <section conformance="informative">
            <title>Using the NCX Document Schema</title>
            <para>Validation of NCX Documents using this schema will require a processor that
                supports <xref linkend="refNVDL"/>, <xref linkend="refRelaxNG"/> and <xref
                    linkend="refISOSchematron"/>.</para>
            <para>Note however that the NVDL schema layer can be substituted by a two-pass
                validation using the embedded RELAX NG and ISO Schematron schemas alone.</para>
        </section>

    </appendix>

    <appendix xml:id="acknowledgements" role="acknowledgements" conformance="informative">
        <title>Contributors</title>
        <xi:include href="./share/contributors.xml"/>
    </appendix>

    <xi:include href="./share/references.xml"/>

    <appendix xml:id="DUMMY_REMOVE">
        <!-- a dummy that is removed by the build -->
        <title>THIS SECTION SHOULD NOT BE IN THE BUILD</title>
        <para xml:id="sec-css"/>
        <para xml:id="sec-contentdocs"/>
        <para xml:id="physical-container-zip"/>
        <para xml:id="sec-contentdocs-xhtml"/>
        <para xml:id="sec-contentdocs-svg"/>
    </appendix>
</book>
