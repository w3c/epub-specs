<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
	<head>
		<meta charset="utf-8" />
		<meta name="generator" content="ReSpec 32.1.2" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<style>
span.example-title{text-transform:none}
:is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
:is(aside,div).example{border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
.example pre{background-color:rgba(0,0,0,.03)}
</style>
		<style>
			.issue-label {
				text-transform: initial
			}
			.warning > p:first-child {
				margin-top: 0
			}
			.warning {
				padding: .5em;
				border-left-width: .5em;
				border-left-style: solid
			}
			span.warning {
				padding: .1em .5em .15em
			}
			.issue.closed span.issue-number {
				text-decoration: line-through
			}
			.warning {
				border-color: #f11;
				border-width: .2em;
				border-style: solid;
				background: #fbe9e9
			}
			.warning-title:before {
				content: "⚠";
				font-size: 1.3em;
				float: left;
				padding-right: .3em;
				margin-top: -.3em
			}
			li.task-list-item {
				list-style: none
			}
			input.task-list-item-checkbox {
				margin: 0 .35em .25em -1.6em;
				vertical-align: middle
			}
			.issue a.respec-gh-label {
				padding: 5px;
				margin: 0 2px 0 2px;
				font-size: 10px;
				text-transform: none;
				text-decoration: none;
				font-weight: 700;
				border-radius: 4px;
				position: relative;
				bottom: 2px;
				border: none;
				display: inline-block
			}</style>
		<style>
pre.idl{padding:1em;position:relative}
pre.idl>code{color:#000}
@media print{
pre.idl{white-space:pre-wrap}
}
.idlHeader{display:block;width:150px;background:#8ccbf2;color:#fff;font-family:sans-serif;font-weight:700;margin:-1em 0 1em -1em;height:28px;line-height:28px}
.idlHeader a.self-link{margin-left:.3cm;text-decoration:none;border-bottom:none}
.idlID{font-weight:700;color:#005a9c}
.idlType{color:#005a9c}
.idlName{color:#ff4500}
.idlName a{color:#ff4500;border-bottom:1px dotted #ff4500;text-decoration:none}
a.idlEnumItem{color:#000;border-bottom:1px dotted #ccc;text-decoration:none}
.idlSuperclass{font-style:italic;color:#005a9c}
.idlDefaultValue,.idlParamName{font-style:italic}
.extAttr{color:#666}
.idlSectionComment{color:gray}
.idlIncludes a{font-weight:700}
.respec-button-copy-paste:focus{text-decoration:none;border-color:#51a7e8;outline:0;box-shadow:0 0 5px rgba(81,167,232,.5)}
.respec-button-copy-paste:is(:focus:hover,.selected:focus){border-color:#51a7e8}
.respec-button-copy-paste:is(:hover,:active,.zeroclipboard-is-hover,.zeroclipboard-is-active){text-decoration:none;background-color:#ddd;background-image:linear-gradient(#eee,#ddd);border-color:#ccc}
.respec-button-copy-paste:is(:active,.selected,.zeroclipboard-is-active){background-color:#dcdcdc;background-image:none;border-color:#b5b5b5;box-shadow:inset 0 2px 4px rgba(0,0,0,.15)}
.respec-button-copy-paste.selected:hover{background-color:#cfcfcf}
.respec-button-copy-paste:is(:disabled,:disabled:hover,.disabled,.disabled:hover){color:rgba(102,102,102,.5);cursor:default;background-color:rgba(229,229,229,.5);background-image:none;border-color:rgba(197,197,197,.5);box-shadow:none}
@media print{
.respec-button-copy-paste{visibility:hidden}
}
</style>
		<style>
			dfn {
				cursor: pointer
			}
			.dfn-panel {
				position: absolute;
				z-index: 35;
				min-width: 300px;
				max-width: 500px;
				padding: .5em .75em;
				margin-top: .6em;
				font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
				background: #fff;
				color: #000;
				box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
				border-radius: 2px
			}
			.dfn-panel:not(.docked) > .caret {
				position: absolute;
				top: -9px
			}
			.dfn-panel:not(.docked) > .caret::after,
			.dfn-panel:not(.docked) > .caret::before {
				content: "";
				position: absolute;
				border: 10px solid transparent;
				border-top: 0;
				border-bottom: 10px solid #fff;
				top: 0
			}
			.dfn-panel:not(.docked) > .caret::before {
				border-bottom: 9px solid #a2a9b1
			}
			.dfn-panel * {
				margin: 0
			}
			.dfn-panel b {
				display: block;
				color: #000;
				margin-top: .25em
			}
			.dfn-panel ul a[href] {
				color: #333
			}
			.dfn-panel > div {
				display: flex
			}
			.dfn-panel a.self-link {
				font-weight: 700;
				margin-right: auto
			}
			.dfn-panel .marker {
				padding: .1em;
				margin-left: .5em;
				border-radius: .2em;
				text-align: center;
				white-space: nowrap;
				font-size: 90%;
				color: #040b1c
			}
			.dfn-panel .marker.dfn-exported {
				background: #d1edfd;
				box-shadow: 0 0 0 .125em #1ca5f940
			}
			.dfn-panel .marker.idl-block {
				background: #8ccbf2;
				box-shadow: 0 0 0 .125em #0670b161
			}
			.dfn-panel a:not(:hover) {
				text-decoration: none !important;
				border-bottom: none !important
			}
			.dfn-panel a[href]:hover {
				border-bottom-width: 1px
			}
			.dfn-panel ul {
				padding: 0
			}
			.dfn-panel li {
				margin-left: 1em
			}
			.dfn-panel.docked {
				position: fixed;
				left: .5em;
				top: unset;
				bottom: 2em;
				margin: 0 auto;
				max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
				max-height: 30vh;
				overflow: auto
			}</style>


		<title>EPUB Reading Systems 3.3</title>

		<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
:is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
code{color:#c63501}
th code{color:inherit}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>




		<style>
			ul.nomark,
			ol.nomark {
				list-style-type: none;
			}
			
			ol.cmt,
			ul.flat {
				list-style-type: none;
				padding-left: 0;
			}
			
			ol.cmt {
				margin: 0;
			}
			
			dl.elemdef {
				border-left: 0.5em solid rgb(145, 200, 255);
				background-color: rgb(236, 246, 255);
				padding: 0.5em 1em;
				margin-bottom: 2em;
			}
			
			dl.elemdef ul.nomark {
				padding-left: 1em;
			}
			
			dl.elemdef > dd > ul.nomark:first-child {
				padding-left: 0 !important;
			}
			
			dl.conformance-list > dd {
				margin-top: 0.7em;
			}
			
			dl.elemdef > dt,
			table.tabledef th {
				font-weight: normal;
				font-style: italic;
			}
			
			dl.elemdef > dt {
				margin-bottom: 0.5em;
			}
			
			dl.elemdef dfn {
				font-style: normal;
			}
			
			/* styles for conformance list links */
			
			a.hidden-reveal {
				color: #005A9C !important;
			}
			a.hidden-reveal::before {
				content: "›" !important;
			}
			a.hidden-reveal:link {
				text-decoration: none !important;
				color: #005A9C !important;
				border-bottom: none !important;
			}
			a.hidden-reveal:visited {
				text-decoration: none !important;
				color: #005A9C !important;
			}
			a.hidden-reveal:hover {
				background-color: rgb(255, 255, 0) !important;
			}
			a.hidden-reveal:active {
				text-decoration: none !important;
				color: #005A9C !important;
			}
			
			/* styles for prefix mapping tables */
			
			table.mapping {
				border-collapse: collapse;
			}
			
			table.mapping th,
			table.mapping td {
				padding: 0.5em;
				border-bottom: 1px solid rgb(0, 90, 156);
			}
			
			table.mapping tr > td:first-child {
				border-right: 1px solid rgb(220, 220, 220);
			}
			
			
			/*  EBNF tables */
			
			
			table.productionset {
				border: none;
				border-left: 5px solid rgb(145, 200, 255);
				background-color: rgb(236, 246, 255);
			}
			
			table.productionset caption {
				text-align: left;
				font-size: 80%;
				font-style: normal;
			}
			
			table.productionset tbody tr {
				border: none;
			}
			
			table.productionset tbody tr td {
				border: none;
				padding: 0.5em;
				border-bottom: 1px solid #ddd;
			}
			
			table.productionset tbody tr td a {
				text-decoration: none;
				border-bottom: 1px dotted #000090;
			}
			
			table.productionset tbody tr td a:hover {
				text-decoration: underline;
			}
			
			table.productionset tbody tr td a:visited,
			table.productionset tbody tr td a:active,
			table.productionset tbody tr td a:hover {
				color: #000090;
			}
			
			a.deprecated,
			a.legacy {
				font-size: 85%;
				text-transform: uppercase;
			}
			
			/* styles for core media types */
			
			table#tbl-core-media-types {
				border-spacing: 0px;
				padding: 1em;
				margin-top: 1.5em;
				margin-bottom: 2em;
			}
			
			table#tbl-core-media-types th {
				border-bottom: 1px solid #005A9C;
				font-weight: bold;
				padding: 0.5em;
				font-weight: bold;
				color: #000090;
				font-size: 90%
			}
			
			table#tbl-core-media-types td {
				border-bottom: 1px solid #005A9C;
				border-right: 1px solid #efefef;
				padding: 0.5em;
				text-align: left
			}
			
			table#tbl-core-media-types tr td:last-child {
				border-right: none;
			}
			
			table#tbl-core-media-types td *,
			table#tbl-core-media-types td > * {
				text-align: left;
			}
			
			table#tbl-core-media-types,
			table#tbl-core-media-types tbody {
				padding: 0;
			}
			
			table#tbl-core-media-types caption {
				text-align: left;
				font-size: 90%
			}
			
			.tbl-group {
				text-align: left;
				border-bottom: none;
				color: rgb(0, 0, 0);
				background-color: rgb(240, 248, 255);
			}
			
			table#tbl-core-media-types > thead > tr > th {
				background-color: rgb(240, 240, 240);
				text-align: left;
				white-space: nowrap;
			}
			
			table#tbl-core-media-types > tbody > tr > th {
				text-align: left;
				font-weight: normal;
				font-style: italic;
				padding: 3px;
			}
			
			table#tbl-core-media-types td,
			table#tbl-core-media-types th,
			table#tbl-core-media-types tr {
				border-color: #005A9C;
				margin: 0em;
			}
			
			table#tbl-core-media-types td code,
			table#tbl-core-media-types td a {
				white-space: nowrap;
			}
			
			td[headers = "tbl-cmt-appl"] {
				font-size: .9em;
			}
			
			
			
			
			/****************************************************/
			/*  property tables                                 */
			/****************************************************/
			
			/* ensure confomity of width for property tables */
			table.tabledef {
				border-spacing: 0px;
				border: none;
				font-size: 1em;
				width: 100%
			}
			
			table.tabledef td,
			table.tabledef th {
				border: none;
				background-color: rgb(236, 246, 255);
				color: rgb(0, 0, 0);
				padding: 0.3em;
				vertical-align: top;
			}
			
			table.tabledef th {
				text-align: left;
				vertical-align: top;
				width: 8em;
				padding-left: 1em;
			}
			
			table.tabledef th {
				border-left: 5px solid rgb(145, 200, 255);
			}
			
			table.tabledef td {
				padding: 3px 3px 3px 10px;
			}
			
			table.tabledef td > p:first-child {
				padding: 0em;
				margin: 0em
			}
			
			
			/* Reserved prefix tables */
			
			table.prefix {
				border-spacing: 0px;
				padding: 1em;
				margin-top: 1.5em;
				margin-bottom: 2em;
			}
			table.prefix th {
				border-bottom: 1px solid #005A9C;
				font-weight: bold;
				padding: 0.5em;
				font-weight: bold;
				color: #000090;
				font-size: 90%
			}
			table.prefix td {
				border-bottom: 1px solid #005A9C;
				border-right: 1px solid #efefef;
				padding: 0.5em;
				text-align: left
			}
			table.prefix tr td:last-child {
				border-right: none;
			}
			table.prefix td *,
			table.prefix td > * {
				text-align: left;
			}
			table.prefix,
			table.prefix tbody {
				padding: 0;
			}
			
			table.prefix caption {
				text-align: left;
				font-size: 90%
			}
			
			
			/* Table zebra style... */
			
			table.zebra {
				font-size: inherit;
				font: 90%;
				margin: 1em;
			}
			
			table.zebra td {
				padding-left: 0.3em;
			}
			
			table.zebra th {
				font-weight: bold;
				text-align: center;
				background-color: rgb(0, 0, 128) !important;
				font-size: 110%;
				background: hsl(180, 30%, 50%);
				color: #fff;
			}
			
			table.zebra th a:link {
				color: #fff;
			}
			
			table.zebra th a:visited {
				color: #aaa;
			}
			
			table.zebra tr:nth-child(even) {
				background-color: hsl(180, 30%, 93%) !important;
			}
			
			table.zebra th {
				border-bottom: 1px solid #bbb;
				padding: .2em 1em;
			}
			table.zebra td {
				border-bottom: 1px solid #ddd;
				padding: .2em 1em;
			}
			
			/* structure defs */
			
			section#structure-vocab dd > p:first-child {
				margin-top: 1rem !important;
			}
			
			section#structure-vocab dd + dd {
				font-size: 90%;
			}
			
			.subproplabel {
				font-style: italic;
			}
			
			p.support {
				border-left: 0.4rem solid rgb(255, 255, 0);
				background-color: rgb(255, 255, 230);
				padding: 0.7rem;
			}
			
			p.caution,
			div.caution {
				padding: 0.5rem;
				border-left: 0.5rem solid rgb(255, 140, 0);
				background-color: rgb(254, 236, 207);
			}
			
			div.caution-title > span {
				color: rgb(140, 40, 0);
				text-transform: uppercase;
			}
			
			details.desc {
				margin-top: -2.5rem !important;
				margin-left: 3rem !important;
			}
			
			details.explanation,
			details.desc {
				background-color: rgb(245, 245, 245);
				border-left: 0.3em solid rgb(200, 200, 200);
				padding: 0.3em;
			}
			
			details.explanation > summary,
			details.desc > summary {
				font-size: small;
				text-align: left;
				font-weight: normal !important;
				font-style: italic;
			}
			
			code a[data-type ~= "element"],
			code a[data-type ~= "dfn"],
			code a[data-type ~= "element-attr"]
			{
				color: #c63501 !important;
			}</style>
		<meta name="description"
			content="EPUB® 3 defines a distribution and interchange format for digital publications and documents. The EPUB
				format provides a means of representing, packaging, and encoding structured and semantically enhanced
				web content — including HTML, CSS, SVG and other resources — for distribution in a single-file
				container." />
		<link rel="canonical" href="https://www.w3.org/TR/epub-rs-33/" />
		<style>
			.hljs {
				display: block;
				overflow-x: auto;
				padding: .5em;
				color: #383a42;
				background: #fafafa
			}
			.hljs-comment,
			.hljs-quote {
				color: #717277;
				font-style: italic
			}
			.hljs-doctag,
			.hljs-formula,
			.hljs-keyword {
				color: #a626a4
			}
			.hljs-deletion,
			.hljs-name,
			.hljs-section,
			.hljs-selector-tag,
			.hljs-subst {
				color: #ca4706;
				font-weight: 700
			}
			.hljs-literal {
				color: #0b76c5
			}
			.hljs-addition,
			.hljs-attribute,
			.hljs-meta-string,
			.hljs-regexp,
			.hljs-string {
				color: #42803c
			}
			.hljs-built_in,
			.hljs-class .hljs-title {
				color: #9a6a01
			}
			.hljs-attr,
			.hljs-number,
			.hljs-selector-attr,
			.hljs-selector-class,
			.hljs-selector-pseudo,
			.hljs-template-variable,
			.hljs-type,
			.hljs-variable {
				color: #986801
			}
			.hljs-bullet,
			.hljs-link,
			.hljs-meta,
			.hljs-selector-id,
			.hljs-symbol,
			.hljs-title {
				color: #336ae3
			}
			.hljs-emphasis {
				font-style: italic
			}
			.hljs-strong {
				font-weight: 700
			}
			.hljs-link {
				text-decoration: underline
			}</style>
		<style>
			var {
				position: relative;
				cursor: pointer
			}
			var[data-type]::after,
			var[data-type]::before {
				position: absolute;
				left: 50%;
				top: -6px;
				opacity: 0;
				transition: opacity .4s;
				pointer-events: none
			}
			var[data-type]::before {
				content: "";
				transform: translateX(-50%);
				border-width: 4px 6px 0 6px;
				border-style: solid;
				border-color: transparent;
				border-top-color: #000
			}
			var[data-type]::after {
				content: attr(data-type);
				transform: translateX(-50%) translateY(-100%);
				background: #000;
				text-align: center;
				font-family: "Dank Mono", "Fira Code", monospace;
				font-style: normal;
				padding: 6px;
				border-radius: 3px;
				color: #daca88;
				text-indent: 0;
				font-weight: 400
			}
			var[data-type]:hover::after,
			var[data-type]:hover::before {
				opacity: 1
			}</style>
		<script id="initialUserConfig" type="application/json">{
  "group": "epub",
  "wgPublicList": "public-epub-wg",
  "specStatus": "CR",
  "shortName": "epub-rs-33",
  "edDraftURI": "https://w3c.github.io/epub-specs/epub33/rs/",
  "implementationReportURI": "https://w3c.github.io/epub-specs/epub33/reports/",
  "crEnd": "2022-10-30",
  "previousPublishDate": "2021-07-12",
  "previousMaturity": "WD",
  "copyrightStart": "1999",
  "editors": [
    {
      "name": "Matt Garrish",
      "company": "DAISY Consortium",
      "companyURL": "https://daisy.org",
      "w3cid": 51655
    },
    {
      "name": "Ivan Herman",
      "url": "https://www.w3.org/People/Ivan/",
      "company": "W3C",
      "w3cid": 7382,
      "orcid": "https://orcid.org/0000-0003-0782-2704",
      "companyURL": "https://www.w3.org"
    },
    {
      "name": "Dave Cramer",
      "company": "Invited Expert",
      "w3cid": 65283
    }
  ],
  "formerEditors": [
    {
      "name": "Garth Conboy",
      "company": "Google",
      "companyURL": "https://www.google.com",
      "w3cid": 92141
    },
    {
      "name": "Marisa DeMeglio",
      "company": "DAISY Consortium",
      "companyURL": "https://daisy.org",
      "w3cid": 35713
    },
    {
      "name": "Daniel Weck",
      "company": "DAISY Consortium",
      "companyURL": "https://daisy.org",
      "w3cid": 45653
    }
  ],
  "includePermalinks": true,
  "permalinkEdge": true,
  "permalinkHide": false,
  "github": {
    "repoURL": "https://github.com/w3c/epub-specs",
    "branch": "main"
  },
  "localBiblio": {
    "csssnapshot": {
      "title": "CSS Snapshot",
      "href": "https://www.w3.org/TR/CSS/",
      "id": "csssnapshot"
    },
    "epubcontentdocs-301": {
      "authors": [
        "Markus Gylling",
        "William McCoy",
        "Elika J. Etimad",
        "Matt Garrish"
      ],
      "title": "EPUB Content Documents 3.0.1",
      "href": "http://idpf.org/epub/301/spec/epub-contentdocs-20140626.html",
      "date": "26 June 2014",
      "publisher": "IDPF",
      "id": "epubcontentdocs-301"
    },
    "epubpackages-32": {
      "authors": [
        "Matt Garrish",
        "Dave Cramer"
      ],
      "title": "EPUB Packages 3.2",
      "href": "https://www.w3.org/publishing/epub32/epub-packages.html",
      "date": "08 May 2019",
      "publisher": "EPUB 3 Community Group",
      "id": "epubpackages-32"
    },
    "h264": {
      "title": "H.264 : Advanced video coding for generic audiovisual services",
      "href": "https://www.itu.int/ITU-T/recommendations/rec.aspx?rec=13189",
      "date": "2017-04-13",
      "id": "h264"
    },
    "svg": {
      "title": "SVG",
      "href": "https://www.w3.org/TR/SVG/",
      "publisher": "W3C",
      "id": "svg"
    },
    "w3cprocess": {
      "title": "W3C Process Document",
      "href": "https://www.w3.org/Consortium/Process/",
      "id": "w3cprocess"
    }
  },
  "preProcess": [
    null
  ],
  "postProcess": [
    null
  ],
  "testSuiteURI": "https://w3c.github.io/epub-tests/index.html",
  "lint": {
    "wpt-tests-exist": true
  },
  "xref": {
    "profile": "web-platform",
    "specs": [
      "epub-33"
    ]
  },
  "publishDate": "2022-05-12",
  "publishISODate": "2022-05-12T00:00:00.000Z",
  "generatedSubtitle": "W3C Candidate Recommendation Snapshot 12 May 2022"
}</script>
		<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-CR" />
	</head>
	<body class="h-entry" data-cite="WEBIDL epub-33 HTML INFRA URL WEBIDL DOM FETCH"><div class="head">
			<p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48"
						src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72" />
				</a></p>
			<h1 id="title" class="title">EPUB Reading Systems 3.3</h1>
			<p id="w3c-state"><a href="https://www.w3.org/standards/types#CR">W3C Candidate Recommendation Snapshot</a>
				<time class="dt-published" datetime="2022-05-12">12 May 2022</time></p>
			<details open="">
				<summary>More details about this document</summary>
				<dl>
					<dt>This version:</dt>
					<dd>
						<a class="u-url" href="https://www.w3.org/TR/2022/CR-epub-rs-33-20220512/"
							>https://www.w3.org/TR/2022/CR-epub-rs-33-20220512/</a>
					</dd>
					<dt>Latest published version:</dt>
					<dd>
						<a href="https://www.w3.org/TR/epub-rs-33/">https://www.w3.org/TR/epub-rs-33/</a>
					</dd>
					<dt>Latest editor's draft:</dt>
					<dd><a href="https://w3c.github.io/epub-specs/epub33/rs/"
							>https://w3c.github.io/epub-specs/epub33/rs/</a></dd>
					<dt>History:</dt>
					<dd>
						<a href="https://www.w3.org/standards/history/epub-rs-33"
							>https://www.w3.org/standards/history/epub-rs-33</a>
					</dd>
					<dd>
						<a href="https://github.com/w3c/epub-specs/commits/main">Commit history</a>
					</dd>
					<dt>Test suite:</dt>
					<dd><a href="https://w3c.github.io/epub-tests/index.html"
							>https://w3c.github.io/epub-tests/index.html</a></dd>
					<dt>Implementation report:</dt>
					<dd>
						<a href="https://w3c.github.io/epub-specs/epub33/reports/"
							>https://w3c.github.io/epub-specs/epub33/reports/</a>
					</dd>



					<dt>Editors:</dt>
					<dd class="editor p-author h-card vcard" data-editor-id="51655">
						<span class="p-name fn">Matt Garrish</span> (<a class="p-org org h-org" href="https://daisy.org"
							>DAISY Consortium</a>) </dd>
					<dd class="editor p-author h-card vcard" data-editor-id="7382">
						<a class="u-url url p-name fn" href="https://www.w3.org/People/Ivan/">Ivan Herman</a><a
							class="p-name orcid" href="https://orcid.org/0000-0003-0782-2704"><svg width="16"
								height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
								<style>
									.st1 {
										fill: #fff;
									}</style>
								<path d="M256 128c0 70.7-57.3 128-128 128S0 198.7 0 128 57.3 0 128 0s128 57.3 128 128z"
									fill="#a6ce39"/>
								<path class="st1"
									d="M86.3 186.2H70.9V79.1h15.4v107.1zM108.9 79.1h41.6c39.6 0 57 28.3 57 53.6 0 27.5-21.5 53.6-56.8 53.6h-41.8V79.1zm15.4 93.3h24.5c34.9 0 42.9-26.5 42.9-39.7C191.7 111.2 178 93 148 93h-23.7v79.4zM88.7 56.8c0 5.5-4.5 10.1-10.1 10.1s-10.1-4.6-10.1-10.1c0-5.6 4.5-10.1 10.1-10.1s10.1 4.6 10.1 10.1z"
								/>
							</svg></a> (<a class="p-org org h-org" href="https://www.w3.org">W3C</a>) </dd>
					<dd class="editor p-author h-card vcard" data-editor-id="65283">
						<span class="p-name fn">Dave Cramer</span> (<span class="p-org org h-org">Invited Expert</span>) </dd>
					<dt> Former editors: </dt>
					<dd class="editor p-author h-card vcard" data-editor-id="92141">
						<span class="p-name fn">Garth Conboy</span> (<a class="p-org org h-org"
							href="https://www.google.com">Google</a>) </dd>
					<dd class="editor p-author h-card vcard" data-editor-id="35713">
						<span class="p-name fn">Marisa DeMeglio</span> (<a class="p-org org h-org"
							href="https://daisy.org">DAISY Consortium</a>) </dd>
					<dd class="editor p-author h-card vcard" data-editor-id="45653">
						<span class="p-name fn">Daniel Weck</span> (<a class="p-org org h-org" href="https://daisy.org"
							>DAISY Consortium</a>) </dd>

					<dt>Feedback:</dt>
					<dd>
						<a href="https://github.com/w3c/epub-specs/">GitHub w3c/epub-specs</a> (<a
							href="https://github.com/w3c/epub-specs/pulls/">pull requests</a>, <a
							href="https://github.com/w3c/epub-specs/issues/new/choose">new issue</a>, <a
							href="https://github.com/w3c/epub-specs/issues/">open issues</a>) </dd>
					<dd><a href="mailto:public-epub-wg@w3.org?subject=%5Bepub-rs-33%5D%20YOUR%20TOPIC%20HERE"
							>public-epub-wg@w3.org</a> with subject line <kbd>[epub-rs-33] <em>… message topic
							…</em></kbd> (<a rel="discussion" href="https://lists.w3.org/Archives/Public/public-epub-wg"
							>archives</a>)</dd>


				</dl>
			</details>


			<p class="copyright">
				<a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 1999-2022 <a
					href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
					href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology"
				>MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr
						title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
					href="https://www.keio.ac.jp/">Keio</a>, <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C <a
					href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
					href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
					rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document"
					title="W3C Software and Document Notice and License">permissive document license</a> rules apply. </p>
			<hr title="Separator for header" />
		</div>
		<section id="abstract" class="introductory">
			<h2>Abstract</h2>
			<p>EPUB® 3 defines a distribution and interchange format for digital publications and documents. The EPUB
				format provides a means of representing, packaging, and encoding structured and semantically enhanced
				web content — including HTML, CSS, SVG and other resources — for distribution in a single-file
				container.</p>
			<p>This specification defines the conformance requirements for EPUB 3 reading systems — the user agents that
				render EPUB publications.</p>
		</section>
		<section id="sotd" class="introductory">
			<h2>Status of This Document</h2>
			<p><em>This section describes the status of this document at the time of its publication. A list of current
						<abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this
					technical report can be found in the <a href="https://www.w3.org/TR/"><abbr
							title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
					https://www.w3.org/TR/.</em></p>
			<p> This document was published by the <a href="https://www.w3.org/groups/wg/epub">EPUB 3 Working Group</a>
				as a Candidate Recommendation Snapshot using the <a
					href="https://www.w3.org/2021/Process-20211102/#recs-and-notes">Recommendation track</a>. </p>
			<p>Publication as a Candidate Recommendation does not imply endorsement by <abbr
					title="World Wide Web Consortium">W3C</abbr> and its Members. A Candidate Recommendation Snapshot
				has received <a href="https://www.w3.org/2021/Process-20211102/#dfn-wide-review">wide review</a>, is
				intended to gather <a href="https://w3c.github.io/epub-specs/epub33/reports/">implementation
					experience</a>, and has commitments from Working Group members to <a
					href="https://www.w3.org/Consortium/Patent-Policy/#sec-Requirements">royalty-free licensing</a> for
				implementations.</p>
			<p> This Candidate Recommendation is not expected to advance to Proposed Recommendation any earlier than 30
				October 2022. </p>
			<p> This document was produced by a group operating under the <a
					href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium"
						>W3C</abbr> Patent Policy</a>. <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a
					rel="disclosure" href="https://www.w3.org/groups/wg/epub/ipr">public list of any patent
					disclosures</a> made in connection with the deliverables of the group; that page also includes
				instructions for disclosing a patent. An individual who has actual knowledge of a patent which the
				individual believes contains <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential"
					>Essential Claim(s)</a> must disclose the information in accordance with <a
					href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the <abbr
						title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>. </p>
			<p> This document is governed by the <a id="w3c_process_revision"
					href="https://www.w3.org/2021/Process-20211102/">2 November 2021 <abbr
						title="World Wide Web Consortium">W3C</abbr> Process Document</a>. </p>
		</section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc">
				<li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li>
				<li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li>
				<li class="tocline"><a class="tocxref" href="#sec-introduction"><bdi class="secno">1.
						</bdi>Introduction</a><ol class="toc">
						<li class="tocline"><a class="tocxref" href="#sec-intro-overview"><bdi class="secno">1.1
								</bdi>Overview</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-terminology"><bdi class="secno">1.2
								</bdi>Terminology</a></li>
						<li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">1.3
								</bdi>Conformance</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-intro-relations"><bdi class="secno">1.4
								</bdi>Relationship to other specifications</a><ol class="toc">
								<li class="tocline"><a class="tocxref" href="#rel"><bdi class="secno">1.4.1
										</bdi>Relationship to HTML</a></li>
								<li class="tocline"><a class="tocxref" href="#sec-overview-relations-svg"><bdi
											class="secno">1.4.2 </bdi>Relationship to SVG</a></li>
							</ol></li>
					</ol></li>
				<li class="tocline"><a class="tocxref" href="#sec-pub-resources"><bdi class="secno">2. </bdi>Publication
						resource processing</a><ol class="toc">
						<li class="tocline"><a class="tocxref" href="#sec-epub-rs-conf-cmt"><bdi class="secno">2.1
								</bdi>Core Media types</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-epub-rs-conf-foreign-res"><bdi class="secno"
									>2.2 </bdi>Foreign resources</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-epub-rs-conf-remote-res"><bdi class="secno"
									>2.3 </bdi>Resource locations</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-epub-rs-conf-data-urls"><bdi class="secno">2.4
								</bdi>Data URLs</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-epub-rs-conf-xml"><bdi class="secno">2.5
								</bdi>XML processing</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-epub-rs-i18n"><bdi class="secno">2.6
								</bdi>Internationalization</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-epub-rs-network-access"><bdi class="secno">2.7
								</bdi>Network access</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-epub-rs-external-links"><bdi class="secno">2.8
								</bdi>External links</a></li>
					</ol></li>
				<li class="tocline"><a class="tocxref" href="#sec-ocf"><bdi class="secno">3. </bdi>Open Container Format
						(OCF) processing</a><ol class="toc">
						<li class="tocline"><a class="tocxref" href="#sec-container-abstract"><bdi class="secno">3.1
								</bdi>OCF abstract container</a><ol class="toc">
								<li class="tocline"><a class="tocxref" href="#sec-container-iri"><bdi class="secno"
											>3.1.1 </bdi>URL of the root directory</a></li>
								<li class="tocline"><a class="tocxref" href="#sec-container-filenames"><bdi
											class="secno">3.1.2 </bdi>File names</a></li>
								<li class="tocline"><a class="tocxref" href="#sec-container-metainf"><bdi class="secno"
											>3.1.3 </bdi><code>META-INF</code> directory</a></li>
							</ol></li>
						<li class="tocline"><a class="tocxref" href="#sec-container-zip"><bdi class="secno">3.2
								</bdi>OCF ZIP container</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-container-fobfus"><bdi class="secno">3.3
								</bdi>Font obfuscation</a></li>
					</ol></li>
				<li class="tocline"><a class="tocxref" href="#sec-package-doc"><bdi class="secno">4. </bdi>Package
						document processing</a><ol class="toc">
						<li class="tocline"><a class="tocxref" href="#sec-pkg-doc-base-dir"><bdi class="secno">4.1
								</bdi>Base direction</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-pkg-doc-pub-identifiers"><bdi class="secno"
									>4.2 </bdi>Unique identifier</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-pkg-doc-metadata"><bdi class="secno">4.3
								</bdi>Metadata</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-pkg-doc-manifest"><bdi class="secno">4.4
								</bdi>Manifest</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-pkg-doc-spine"><bdi class="secno">4.5
								</bdi>Spine</a><ol class="toc">
								<li class="tocline"><a class="tocxref" href="#spine-overrides"><bdi class="secno">4.5.1
										</bdi>Spine overrides</a></li>
							</ol></li>
						<li class="tocline"><a class="tocxref" href="#sec-pkg-doc-collections"><bdi class="secno">4.6
								</bdi>Collections</a></li>
					</ol></li>
				<li class="tocline"><a class="tocxref" href="#sec-contentdocs"><bdi class="secno">5. </bdi>EPUB content
						document processing</a><ol class="toc">
						<li class="tocline"><a class="tocxref" href="#sec-xhtml"><bdi class="secno">5.1 </bdi>XHTML
								content documents</a><ol class="toc">
								<li class="tocline"><a class="tocxref" href="#sec-xhtml-extensions"><bdi class="secno"
											>5.1.1 </bdi>HTML extensions</a><ol class="toc">
										<li class="tocline"><a class="tocxref" href="#sec-xhtml-aria"><bdi class="secno"
													>5.1.1.1 </bdi>ARIA</a></li>
										<li class="tocline"><a class="tocxref" href="#sec-xhtml-structural-semantics"
													><bdi class="secno">5.1.1.2 </bdi>Structural semantics</a></li>
										<li class="tocline"><a class="tocxref" href="#sec-xhtml-rdfa"><bdi class="secno"
													>5.1.1.3 </bdi>RDFa</a></li>
										<li class="tocline"><a class="tocxref" href="#sec-xhtml-microdata"><bdi
													class="secno">5.1.1.4 </bdi>Microdata</a></li>
										<li class="tocline"><a class="tocxref" href="#sec-xhtml-content-switch"><bdi
													class="secno">5.1.1.5 </bdi>Content switching (deprecated)</a></li>
										<li class="tocline"><a class="tocxref" href="#sec-xhtml-epub-trigger"><bdi
													class="secno">5.1.1.6 </bdi>The <code>epub:trigger</code> element
												(deprecated)</a></li>
										<li class="tocline"><a class="tocxref" href="#sec-xhtml-custom-attributes"><bdi
													class="secno">5.1.1.7 </bdi>Custom attributes</a></li>
									</ol></li>
								<li class="tocline"><a class="tocxref" href="#sec-xhtml-deviations"><bdi class="secno"
											>5.1.2 </bdi>HTML deviations and constraints</a><ol class="toc">
										<li class="tocline"><a class="tocxref" href="#sec-xhtml-mathml"><bdi
													class="secno">5.1.2.1 </bdi>MathML</a></li>
										<li class="tocline"><a class="tocxref" href="#sec-xhtml-svg"><bdi class="secno"
													>5.1.2.2 </bdi>Embedded SVG</a><ol class="toc">
												<li class="tocline"><a class="tocxref" href="#sec-xhtml-svg-css"><bdi
															class="secno">5.1.2.2.1 </bdi>Embedded SVG and CSS</a></li>
											</ol></li>
										<li class="tocline"><a class="tocxref" href="#sec-xhtml-forms"><bdi
													class="secno">5.1.2.3 </bdi>Form submission</a></li>
									</ol></li>
							</ol></li>
						<li class="tocline"><a class="tocxref" href="#sec-svg"><bdi class="secno">5.2 </bdi>SVG content
								documents</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-css"><bdi class="secno">5.3 </bdi>Cascading
								Style Sheets (CSS)</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-scripted-content"><bdi class="secno">5.4
								</bdi>Scripting</a><ol class="toc">
								<li class="tocline"><a class="tocxref" href="#sec-local-storage"><bdi class="secno"
											>5.4.1 </bdi>Local storage</a></li>
								<li class="tocline"><a class="tocxref" href="#sec-scripted-content-events"><bdi
											class="secno">5.4.2 </bdi>Event model</a></li>
								<li class="tocline"><a class="tocxref" href="#sec-scripted-content-security"><bdi
											class="secno">5.4.3 </bdi>Security considerations</a></li>
							</ol></li>
					</ol></li>
				<li class="tocline"><a class="tocxref" href="#sec-nav"><bdi class="secno">6. </bdi>Navigation document
						processing</a></li>
				<li class="tocline"><a class="tocxref" href="#sec-rendering-control"><bdi class="secno">7. </bdi>Layout
						rendering control processing</a><ol class="toc">
						<li class="tocline"><a class="tocxref" href="#sec-fixed-layouts"><bdi class="secno">7.1
								</bdi>Fixed-layout documents</a><ol class="toc">
								<li class="tocline"><a class="tocxref" href="#sec-fxl-props"><bdi class="secno">7.1.1
										</bdi>Fixed-layout properties</a><ol class="toc">
										<li class="tocline"><a class="tocxref" href="#layout"><bdi class="secno">7.1.1.1
												</bdi>The <code>rendition:layout</code> property</a></li>
										<li class="tocline"><a class="tocxref" href="#orientation"><bdi class="secno"
													>7.1.1.2 </bdi>The <code>rendition:orientation</code>
											property</a></li>
										<li class="tocline"><a class="tocxref" href="#spread"><bdi class="secno">7.1.1.3
												</bdi>The <code>rendition:spread</code> property</a></li>
										<li class="tocline"><a class="tocxref" href="#page-spread"><bdi class="secno"
													>7.1.1.4 </bdi>The <code>rendition:page-spread-*</code>
												properties</a></li>
									</ol></li>
								<li class="tocline"><a class="tocxref" href="#sec-fxl-dimensions"><bdi class="secno"
											>7.1.2 </bdi>Initial containing block dimensions</a></li>
								<li class="tocline"><a class="tocxref" href="#sec-fxl-viewport"><bdi class="secno">7.1.3
										</bdi>Viewport rendering</a></li>
							</ol></li>
						<li class="tocline"><a class="tocxref" href="#sec-reflowable-layouts"><bdi class="secno">7.2
								</bdi>Reflowable layouts</a><ol class="toc">
								<li class="tocline"><a class="tocxref" href="#flow"><bdi class="secno">7.2.1 </bdi>The
											<code>rendition:flow</code> property</a></li>
								<li class="tocline"><a class="tocxref" href="#align-x-center"><bdi class="secno">7.2.2
										</bdi>The <code>rendition:align-x-center</code> property</a></li>
							</ol></li>
						<li class="tocline"><a class="tocxref" href="#sec-custom-properties"><bdi class="secno">7.3
								</bdi>Custom properties</a></li>
					</ol></li>
				<li class="tocline"><a class="tocxref" href="#sec-media-overlays"><bdi class="secno">8. </bdi>Media
						overlays processing</a><ol class="toc">
						<li class="tocline"><a class="tocxref" href="#sec-behaviors-loading"><bdi class="secno">8.1
								</bdi>Loading the media overlay</a></li>
						<li class="tocline"><a class="tocxref" href="#sec-behaviors-playback"><bdi class="secno">8.2
								</bdi>Basic playback</a><ol class="toc">
								<li class="tocline"><a class="tocxref" href="#sec-rsconf-timing-synch"><bdi
											class="secno">8.2.1 </bdi>Timing and synchronization</a></li>
								<li class="tocline"><a class="tocxref" href="#sec-rsconf-rendering-audio"><bdi
											class="secno">8.2.2 </bdi>Rendering audio</a></li>
								<li class="tocline"><a class="tocxref" href="#sec-rsconf-rendering-text"><bdi
											class="secno">8.2.3 </bdi>Rendering EPUB content document elements</a></li>
							</ol></li>
						<li class="tocline"><a class="tocxref" href="#sec-behaviors-interaction"><bdi class="secno">8.3
								</bdi>Interacting with the EPUB content document</a><ol class="toc">
								<li class="tocline"><a class="tocxref" href="#sec-rsconf-navigation"><bdi class="secno"
											>8.3.1 </bdi>Navigation</a></li>
								<li class="tocline"><a class="tocxref" href="#sec-embedded-media"><bdi class="secno"
											>8.3.2 </bdi>Embedded audio and video</a></li>
								<li class="tocline"><a class="tocxref" href="#sec-text-to-speech"><bdi class="secno"
											>8.3.3 </bdi>Text-to-speech</a></li>
							</ol></li>
						<li class="tocline"><a class="tocxref" href="#sec-behaviors-skip-escape"><bdi class="secno">8.4
								</bdi>Skippability and escapability</a><ol class="toc">
								<li class="tocline"><a class="tocxref" href="#sec-skippability"><bdi class="secno">8.4.1
										</bdi>Skippability</a></li>
								<li class="tocline"><a class="tocxref" href="#sec-escapability"><bdi class="secno">8.4.2
										</bdi>Escapability</a></li>
							</ol></li>
					</ol></li>
				<li class="tocline"><a class="tocxref" href="#sec-structural-semantics"><bdi class="secno">9.
						</bdi>Processing structural semantics</a></li>
				<li class="tocline"><a class="tocxref" href="#sec-vocab-assoc"><bdi class="secno">10. </bdi>Vocabulary
						association mechanisms</a></li>
				<li class="tocline"><a class="tocxref" href="#sec-epub-rs-conf-backward"><bdi class="secno">11.
						</bdi>Backward compatibility</a></li>
				<li class="tocline"><a class="tocxref" href="#sec-epub-rs-conf-forward"><bdi class="secno">12.
						</bdi>Forward compatibility</a></li>
				<li class="tocline"><a class="tocxref" href="#sec-accessibility"><bdi class="secno">13.
						</bdi>Accessibility</a></li>
				<li class="tocline"><a class="tocxref" href="#sec-security-privacy"><bdi class="secno">14.
						</bdi>Security and privacy</a><ol class="toc">
						<li class="tocline"><a class="tocxref" href="#security-privacy-overview"><bdi class="secno">14.1
								</bdi>Overview</a></li>
						<li class="tocline"><a class="tocxref" href="#epub-threat-model"><bdi class="secno">14.2
								</bdi>Threat model</a></li>
						<li class="tocline"><a class="tocxref" href="#security-privacy-recommendations"><bdi
									class="secno">14.3 </bdi>Recommendations</a></li>
					</ol></li>
				<li class="tocline"><a class="tocxref" href="#app-epubReadingSystem"><bdi class="secno">15. </bdi><span
							class="export" data-export="">epubReadingSystem</span> object</a><ol class="toc">
						<li class="tocline"><a class="tocxref" href="#app-ers-idl"><bdi class="secno">15.1
								</bdi>Interface definition</a></li>
						<li class="tocline"><a class="tocxref" href="#app-ers-desc"><bdi class="secno">15.2
								</bdi>Description</a></li>
						<li class="tocline"><a class="tocxref" href="#app-ers-properties"><bdi class="secno">15.3
								</bdi>Properties</a></li>
						<li class="tocline"><a class="tocxref" href="#app-ers-methods"><bdi class="secno">15.4
								</bdi>Methods</a><ol class="toc">
								<li class="tocline"><a class="tocxref" href="#app-ers-hasFeature"><bdi class="secno"
											>15.4.1 </bdi>hasFeature</a><ol class="toc">
										<li class="tocline"><a class="tocxref" href="#app-ers-hasFeature-desc"><bdi
													class="secno">15.4.1.1 </bdi>Description</a></li>
										<li class="tocline"><a class="tocxref" href="#app-ers-hasFeature-features"><bdi
													class="secno">15.4.1.2 </bdi>Features</a></li>
									</ol></li>
							</ol></li>
					</ol></li>
				<li class="tocline"><a class="tocxref" href="#change-log"><bdi class="secno">A. </bdi>Change
					log</a></li>
				<li class="tocline"><a class="tocxref" href="#ack"><bdi class="secno">B. </bdi>Acknowledgements</a></li>
				<li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">C. </bdi>References</a><ol
						class="toc">
						<li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">C.1
								</bdi>Normative references</a></li>
						<li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">C.2
								</bdi>Informative references</a></li>
					</ol></li>
			</ol></nav>
		<section id="sec-introduction">
			<div class="header-wrapper">
				<h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2>
				<a class="self-link" href="#sec-introduction" aria-label="Permalink for Section 1."></a>
			</div>


			<section id="sec-intro-overview" class="informative">
				<div class="header-wrapper">
					<h3 id="x1-1-overview"><bdi class="secno">1.1 </bdi>Overview</h3>
					<a class="self-link" href="#sec-intro-overview" aria-label="Permalink for Section 1.1"></a>
				</div>
				<p><em>This section is non-normative.</em></p>


				<p>The EPUB 3 standard is separated into two distinct concerns: the authoring of <a data-type="dfn"
						data-cite-href="https://www.w3.org/TR/epub-33/#dfn-epub-publication"
						href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publications</a> is defined in
					the <a href="https://www.w3.org/TR/epub-33/#">core specification</a> [<cite><a class="bibref"
							data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>], while this
					specification details the rendering requirements for them in EPUB reading systems.</p>

				<p>An EPUB reading system can take many forms. It might have a visual display area for rendering the
					content to users, for example, or it might only provide audio playback of the content. Therefore,
					there is no single set of rules that applies to all reading systems. Rather, this specification
					breaks down the rendering requirements based on a reading system's capabilities and the features it
					supports.</p>

				<p>Moreover, this specification allows for a great deal of flexibility for developers to create unique
					user interfaces, and requirements for things like metadata processing are intentionally minimal to
					allow for such flexibility.</p>

				<p>So, although this specification identifies the formal requirements for reading systems, it is not
					possible to understand this document in isolation. Developers should also familiarize themselves
					with the full content structure of an EPUB publication in order to understand the complete range of
					information that is available.</p>

				<div class="note" role="note" id="issue-container-generatedID">
					<div role="heading" class="note-title marker" id="h-note" aria-level="4">
						<span>Note</span>
					</div>
					<div class="">
						<p>A conforming reading system is not necessarily a single dedicated program or device but might
							exist as a distributed system.</p>
					</div>
				</div>
			</section>

			<section id="sec-terminology">
				<div class="header-wrapper">
					<h3 id="x1-2-terminology"><bdi class="secno">1.2 </bdi>Terminology</h3>
					<a class="self-link" href="#sec-terminology" aria-label="Permalink for Section 1.2"></a>
				</div>


				<p>This specification uses <a href="https://www.w3.org/TR/epub-33/#sec-terminology">terminology defined
						in EPUB 3.3</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
							title="EPUB 3.3">epub-33</a></cite>].</p>

				<p>It also defines the following term:</p>

				<dl>
					<dt>
						<dfn class="export" data-export="" id="dfn-content-display-area" tabindex="0"
							aria-haspopup="dialog" data-dfn-type="dfn">content display area</dfn>
					</dt>
					<dd>
						<p>The area within the <a data-link-type="dfn" data-type="dfn"
								href="https://www.w3.org/TR/epub-33/#dfn-viewport">viewport</a> dedicated to the display
							of <a data-type="dfn"
								data-cite-href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document"
								href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document">EPUB content
								documents</a>. The content display area excludes any borders, margins, headers, footers,
							or other decoration a <a data-link-type="dfn" data-type="dfn"
								href="https://www.w3.org/TR/epub-33/#dfn-epub-reading-system">EPUB reading system</a>
							might inject into the viewport.</p>
						<p>In the case of <a data-link-type="dfn" data-type="dfn"
								data-cite-href="https://www.w3.org/TR/epub-33/#dfn-synthetic-spread"
								href="https://www.w3.org/TR/epub-33/#dfn-synthetic-spread">synthetic spreads</a>, the
							viewport contains two content display areas.</p>
					</dd>
				</dl>

				<div class="note" role="note" id="issue-container-generatedID-0">
					<div role="heading" class="note-title marker" id="h-note-0" aria-level="4">
						<span>Note</span>
					</div>
					<div class="">
						<p>Only the first instance of a term in a section links to its definition.</p>
					</div>
				</div>
			</section>

			<section id="conformance">
				<div class="header-wrapper">
					<h3 id="x1-3-conformance"><bdi class="secno">1.3 </bdi>Conformance</h3>
					<a class="self-link" href="#conformance" aria-label="Permalink for Section 1.3"></a>
				</div>
				<p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes
					in this specification are non-normative. Everything else in this specification is normative.</p>
				<p> The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, <em class="rfc2119">MUST
						NOT</em>, <em class="rfc2119">OPTIONAL</em>, <em class="rfc2119">RECOMMENDED</em>, <em
						class="rfc2119">SHOULD</em>, and <em class="rfc2119">SHOULD NOT</em> in this document are to be
					interpreted as described in <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
							title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>]
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174"
							title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>] when,
					and only when, they appear in all capitals, as shown here. </p>
			</section>

			<section id="sec-intro-relations" class="informative">
				<div class="header-wrapper">
					<h3 id="x1-4-relationship-to-other-specifications"><bdi class="secno">1.4 </bdi>Relationship to
						other specifications</h3>
					<a class="self-link" href="#sec-intro-relations" aria-label="Permalink for Section 1.4"></a>
				</div>
				<p><em>This section is non-normative.</em></p>


				<section id="rel">
					<div class="header-wrapper">
						<h4 id="x1-4-1-relationship-to-html"><bdi class="secno">1.4.1 </bdi>Relationship to HTML</h4>
						<a class="self-link" href="#rel" aria-label="Permalink for Section 1.4.1"></a>
					</div>


					<p>The [<cite><a class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard"
								>html</a></cite>] standard is continuously evolving — there are no longer versioned
						releases of it. That standard, in turn, references various technologies that continue to evolve,
						such as MathML, SVG, CSS, and JavaScript.</p>

					<p>Reading system developers must keep track of the changes to HTML, and the technologies it
						references, to ensure they keep their systems up to date.</p>

					<p>This specification does not require EPUB reading systems to support scripting, HTML forms or the
						HTML DOM. Reading systems conformant with this specification are only expected to be able to
						process a conforming <a data-link-type="dfn" data-type="dfn"
							href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document">EPUB content document</a>.
						As <a href="#sec-scripted-content">support for scripting and HTML forms</a> is not compulsory, a
						conformant reading system might not be a fully conformant HTML user agent.</p>
				</section>


				<section id="sec-overview-relations-svg">
					<div class="header-wrapper">
						<h4 id="x1-4-2-relationship-to-svg"><bdi class="secno">1.4.2 </bdi>Relationship to SVG</h4>
						<a class="self-link" href="#sec-overview-relations-svg" aria-label="Permalink for Section 1.4.2"
						></a>
					</div>


					<p>This specification does not reference a specific version of [<cite><a class="bibref"
								data-link-type="biblio" href="#bib-svg" title="SVG">svg</a></cite>], but instead uses an
						undated reference. Whenever there is any ambiguity in this reference, the latest recommended
						specification is the authoritative reference.</p>

					<p>This approach ensures that EPUB will always keep pace with changes to the SVG standard. Reading
						system developers must keep track of changes to the SVG standard to ensure that they keep their
						systems up to date.</p>
				</section>
			</section>
		</section>
		<section id="sec-pub-resources">
			<div class="header-wrapper">
				<h2 id="x2-publication-resource-processing"><bdi class="secno">2. </bdi>Publication resource
					processing</h2>
				<a class="self-link" href="#sec-pub-resources" aria-label="Permalink for Section 2."></a>
			</div>


			<p id="confreq-rs-epub-pub-res" class="support" data-tests="#cnt-xhtml-support">Reading systems <em
					class="rfc2119">MUST</em> process <a href="https://www.w3.org/TR/epub-33/#sec-publication-resources"
					>publication resources</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
						title="EPUB 3.3">epub-33</a></cite>].</p>

			<section id="sec-epub-rs-conf-cmt">
				<div class="header-wrapper">
					<h3 id="x2-1-core-media-types"><bdi class="secno">2.1 </bdi>Core Media types</h3>
					<a class="self-link" href="#sec-epub-rs-conf-cmt" aria-label="Permalink for Section 2.1"></a>
				</div>


				<p id="confreq-rs-epub3-images"
					data-tests="#pub-cmt-gif,#pub-cmt-jpg,#pub-cmt-png,#pub-cmt-svg,#pub-cmt-webp">If a reading system
					has a <a data-link-type="dfn" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-viewport"
						>viewport</a>, it <em class="rfc2119">MUST</em> support the <a
						href="https://www.w3.org/TR/epub-33/#cmt-grp-image">image core media type resources</a>
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>].</p>

				<p id="confreq-rs-epub3-mp3-aac" data-tests="#pub-cmt-mp3,#pub-cmt-mp4,#pub-cmt-opus">If it has the
					capability to render prerecorded audio, it <em class="rfc2119">MUST</em> support the <a
						href="https://www.w3.org/TR/epub-33/#cmt-grp-audio">audio core media type resources</a>
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>].</p>

				<div class="note" role="note" id="note-video-codecs">
					<div role="heading" class="note-title marker" id="h-note-1" aria-level="4">
						<span>Note</span>
					</div>
					<p class="">It is recommended that reading systems support at least one of the H.264 [<cite><a
								class="bibref" data-link-type="biblio" href="#bib-h264"
								title="H.264 : Advanced video coding for generic audiovisual services">h264</a></cite>]
						and VP8 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6386"
								title="VP8 Data Format and Decoding Guide">rfc6386</a></cite>] video codecs, but this is
						not a conformance requirement — a reading system may support any video codec, or none at all.
						Reading system developers should take into consideration factors such as breadth of adoption,
						playback quality, and technology royalties when deciding which video formats to support.</p>
				</div>
			</section>

			<section id="sec-epub-rs-conf-foreign-res">
				<div class="header-wrapper">
					<h3 id="x2-2-foreign-resources"><bdi class="secno">2.2 </bdi>Foreign resources</h3>
					<a class="self-link" href="#sec-epub-rs-conf-foreign-res" aria-label="Permalink for Section 2.2"
					></a>
				</div>


				<p id="confreq-rs-foreign"
					data-tests="#pub-foreign_image,#pub-foreign_xml-spine,#pub-foreign_xml-suffix-spine,#pub-foreign_bad-fallback,#pub-foreign_json-spine"
					>Reading systems <em class="rfc2119">MAY</em> support an arbitrary set of <a data-link-type="dfn"
						data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-foreign-resource">foreign resource</a>
					types, and if a foreign resource is not supported, <em class="rfc2119">MUST</em> process fallbacks
					as defined in <a href="https://www.w3.org/TR/epub-33/#sec-foreign-resources">foreign resources</a>
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>].</p>
			</section>

			<section id="sec-epub-rs-conf-remote-res">
				<div class="header-wrapper">
					<h3 id="x2-3-resource-locations"><bdi class="secno">2.3 </bdi>Resource locations</h3>
					<a class="self-link" href="#sec-epub-rs-conf-remote-res" aria-label="Permalink for Section 2.3"></a>
				</div>


				<p id="confreq-rs-remote">Reading systems <em class="rfc2119">SHOULD</em> support <a
						data-link-type="dfn" data-type="dfn"
						data-cite-href="https://www.w3.org/TR/epub-33/#dfn-remote-resource"
						href="https://www.w3.org/TR/epub-33/#dfn-remote-resource">remote resources</a>, as defined in <a
						href="https://www.w3.org/TR/epub-33/#sec-resource-locations">Resource locations</a> [<cite><a
							class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
						>epub-33</a></cite>].</p>
			</section>

			<section id="sec-epub-rs-conf-data-urls">
				<div class="header-wrapper">
					<h3 id="x2-4-data-urls"><bdi class="secno">2.4 </bdi>Data URLs</h3>
					<a class="self-link" href="#sec-epub-rs-conf-data-urls" aria-label="Permalink for Section 2.4"></a>
				</div>


				<p id="confreq-rs-data-urls"
					data-tests="#pub-data-urls_browsing-context,#pub-data-urls_top-level-content">Reading systems <em
						class="rfc2119">MUST</em> prevent data URLs [<cite><a class="bibref" data-link-type="biblio"
							href="#bib-rfc2397" title="The &quot;data&quot; URL scheme">rfc2397</a></cite>] from opening
					in <a data-link-type="dfn" data-type="dfn"
						href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level
						browsing contexts</a>&#160;[<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
							title="HTML Standard">html</a></cite>], except when initiated through a reading system
					affordance such as a context menu. If a reading system does not use a top-level browsing context for
						<a data-link-type="dfn" data-type="dfn"
						data-cite-href="https://www.w3.org/TR/epub-33/#dfn-top-level-content-document"
						href="https://www.w3.org/TR/epub-33/#dfn-top-level-content-document">top-level content
						documents</a>, for example if the top-level content document is an SVG, it <em class="rfc2119"
						>MUST</em> also prevent data URLs from opening as though they are top-level content
					documents.</p>
			</section>

			<section id="sec-epub-rs-conf-xml">
				<div class="header-wrapper">
					<h3 id="x2-5-xml-processing"><bdi class="secno">2.5 </bdi>XML processing</h3>
					<a class="self-link" href="#sec-epub-rs-conf-xml" aria-label="Permalink for Section 2.5"></a>
				</div>


				<p>A reading system <em class="rfc2119">MUST</em> be both of the following:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-rs-xml-nval"
							data-tests="#pub-xml-non-validating_invalid,#pub-xml-non-validating_unclosed">a <a
								href="https://www.w3.org/TR/xml/#proc-types">conformant non-validating XML processor</a>
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-xml"
									title="Extensible Markup Language (XML) 1.0 (Fifth Edition)">xml</a></cite>].</p>
					</li>
					<li>
						<p id="confreq-rs-xml-ns" data-tests="#pub-xml-names">a <a
								href="https://www.w3.org/TR/xml-names/#ProcessorConformance">conformant processor</a> as
							defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-xml-names"
									title="Namespaces in XML 1.0 (Third Edition)">xml-names</a></cite>].</p>
					</li>
				</ul>

				<p id="confreq-rs-xml-extid" data-tests="#pub-xml-external-id">In addition, when processing XML
					documents, a reading system <em class="rfc2119">MUST NOT</em> resolve <a
						href="https://www.w3.org/TR/xml/#NT-ExternalID">external identifiers</a> in DOCTYPE, ENTITY and
					NOTATION declarations [<cite><a class="bibref" data-link-type="biblio" href="#bib-xml"
							title="Extensible Markup Language (XML) 1.0 (Fifth Edition)">xml</a></cite>].</p>
			</section>

			<section id="sec-epub-rs-i18n">
				<div class="header-wrapper">
					<h3 id="x2-6-internationalization"><bdi class="secno">2.6 </bdi>Internationalization</h3>
					<a class="self-link" href="#sec-epub-rs-i18n" aria-label="Permalink for Section 2.6"></a>
				</div>


				<p>A reading system <em class="rfc2119">MUST</em> process, for all <a data-link-type="dfn"
						data-type="dfn" data-cite-href="https://www.w3.org/TR/epub-33/#dfn-publication-resource"
						href="https://www.w3.org/TR/epub-33/#dfn-publication-resource">publication resources</a>, the
					attributes that set the language for the documents' contents, when applicable. This includes:</p>

				<ul>
					<li>the <a href="https://www.w3.org/TR/xml/#sec-lang-tag"><code>xml:lang</code> attribute</a>
								[<cite><a class="bibref" data-link-type="biblio" href="#bib-xml"
								title="Extensible Markup Language (XML) 1.0 (Fifth Edition)">xml</a></cite>] for all XML
						documents (e.g., the <a data-link-type="dfn" data-type="dfn"
							href="https://www.w3.org/TR/epub-33/#dfn-package-document">package document</a>, <a
							data-link-type="dfn" data-type="dfn"
							data-cite-href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document"
							href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document">XHTML content
						documents</a>, <a data-type="dfn"
							data-cite-href="https://www.w3.org/TR/epub-33/#dfn-svg-content-document"
							href="https://www.w3.org/TR/epub-33/#dfn-svg-content-document">SVG content documents</a>,
						and <a data-link-type="dfn" data-type="dfn"
							data-cite-href="https://www.w3.org/TR/epub-33/#dfn-media-overlay-document"
							href="https://www.w3.org/TR/epub-33/#dfn-media-overlay-document">media overlay
						documents</a>).</li>

					<li>the <code>lang</code> attribute for&#160;XHTML content documents and SVG content documents.
						(Refer to respective "The 'lang' and 'xml:lang' attributes" sections in [<cite><a class="bibref"
								data-link-type="biblio" href="#bib-html" title="HTML Standard">html</a></cite>] and
								[<cite><a class="bibref" data-link-type="biblio" href="#bib-svg" title="SVG"
							>svg</a></cite>] for more information.)</li>
				</ul>

				<p>Similarly, a reading system <em class="rfc2119">MUST</em> process, for all <a data-link-type="dfn"
						data-type="dfn" data-cite-href="https://www.w3.org/TR/epub-33/#dfn-publication-resource"
						href="https://www.w3.org/TR/epub-33/#dfn-publication-resource">publication resources</a>, the
					attributes that set the base direction for the documents' contents, when applicable. This
					includes:</p>

				<ul>
					<li id="confreq-rs-pkg-dir-intro"
						data-tests="#pkg-dir_creator-rtl,#pkg-dir_rtl-root-ltr,#pkg-dir_rtl-root-unset,#pkg-dir_unset-root-rtl,#pkg-dir_unset-root-unset,#pkg-dir-auto_root-rtl,#pkg-dir-auto_root-unset"
						>the <a href="https://www.w3.org/TR/epub-33/#attrdef-dir"><code>dir</code></a>
								attribute&#160;[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
								title="EPUB 3.3">epub-33</a></cite>] for the <a data-link-type="dfn" data-type="dfn"
							href="https://www.w3.org/TR/epub-33/#dfn-package-document">package document</a>. (See also
							<a href="#sec-pkg-doc-base-dir" class="sec-ref"><bdi class="secno">4.1 </bdi>Base
							direction</a> for further details.)</li>
					<li>the [<cite><a class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard"
								>html</a></cite>] <code><a data-type="element-attr"
								href="https://html.spec.whatwg.org/multipage/dom.html#attr-dir">dir</a></code> attribute
						for XHTML content documents.</li>
					<li>the [<cite><a class="bibref" data-link-type="biblio" href="#bib-svg" title="SVG">svg</a></cite>]
							<a href="https://www.w3.org/TR/SVG/text.html#DirectionProperty"><code>direction</code></a>
						attribute for SVG content documents.</li>
				</ul>

				<p id="confreq-rs-pkg-lang-no-content"
					data-tests="#pgk-lang_pkg_non_content_dir,#pgk-lang_pkg_non_content">In the absence of this
					information in a <a data-link-type="dfn" data-type="dfn"
						href="https://www.w3.org/TR/epub-33/#dfn-publication-resource">publication resource</a>, reading
					systems <em class="rfc2119">MUST NOT</em> assume either the the language or the base direction of
					that resource from information expressed in the package document (i.e., in <a
						href="https://www.w3.org/TR/epub-33/#attrdef-xml-lang"><code>xml:lang</code></a> and <a
						href="https://www.w3.org/TR/epub-33/#attrdef-dir"><code>dir</code></a> attributes, in <a
						href="https://www.w3.org/TR/epub-33/#attrdef-hreflang"><code>hreflang</code> attributes</a> on
						<span data-cite="epub-33"><code><a data-type="element"
								href="https://www.w3.org/TR/epub-33/#dfn-link">link</a></code></span> elements, or from
							<code><a data-type="element" href="https://www.w3.org/TR/epub-33/#dfn-dc-language"
							>dc:language</a></code> elements [<cite><a class="bibref" data-link-type="biblio"
							href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>]). Refer to a resource's formal
					specification for more information about to handle the absence of explicit language or direction
					information.</p>
			</section>

			<section id="sec-epub-rs-network-access">
				<div class="header-wrapper">
					<h3 id="x2-7-network-access"><bdi class="secno">2.7 </bdi>Network access</h3>
					<a class="self-link" href="#sec-epub-rs-network-access" aria-label="Permalink for Section 2.7"></a>
				</div>


				<p>Reading systems <em class="rfc2119">MAY</em> support network access to <a
						href="#sec-epub-rs-conf-remote-res">retrieve remote resources</a> and to allow <a
						data-link-type="dfn" data-type="dfn"
						data-cite-href="https://www.w3.org/TR/epub-33/#dfn-scripted-content-document"
						href="https://www.w3.org/TR/epub-33/#dfn-scripted-content-document">scripted content
						documents</a> to <a href="#confreq-rs-scripted-limit">communicate with web-hosted APIs and
						retrieve resources</a>.</p>

				<p>Providing network access, however, increases both the security risks to the reading systems and the
					security and privacy risks to users. These risks are often unique to reading systems and the
					platforms they run on — the browser cores that most reading systems are built on do not offer the
					same security and privacy controls as web browsers themselves. Consequently, developers need to use
					extra caution when allowing network access, and more thoroughly test that their reading systems are
					not vulnerable to attacks. More information about these risks is provided in <a
						href="#sec-security-privacy" class="sec-ref"><bdi class="secno">14. </bdi>Security and
						privacy</a>.</p>

				<p>If reading system developers allow network access, it is strongly <em class="rfc2119"
						>RECOMMENDED</em> both that they:</p>

				<ul>
					<li>notify users when network activity occurs; and</li>
					<li>let users block access to the network (e.g., disable network access for the reading system
						globally or for a particular EPUB publication).</li>
				</ul>
			</section>

			<section id="sec-epub-rs-external-links">
				<div class="header-wrapper">
					<h3 id="x2-8-external-links"><bdi class="secno">2.8 </bdi>External links</h3>
					<a class="self-link" href="#sec-epub-rs-external-links" aria-label="Permalink for Section 2.8"></a>
				</div>


				<p data-tests="#pub-external-links">Reading systems <em class="rfc2119">SHOULD</em> open links that
					resolve outside the <a data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-publication"
						>EPUB publication</a> in a new browser instance to ensure that the browser's security and
					privacy controls are available to users.</p>

				<p>Although links to external web sites and resources are commonly found in <a data-type="dfn"
						data-cite-href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document"
						href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document">EPUB content documents</a>,
					these are not the only sources. For example, if a reading system provides access to <a
						href="https://www.w3.org/TR/epub-33/#sec-link-elem">linked records</a> [<cite><a class="bibref"
							data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] in the <a
						data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-package-document">package document</a>
					metadata, it should similarly open the links in a new browser instance.</p>

				<div class="note" role="note" id="issue-container-generatedID-1">
					<div role="heading" class="note-title marker" id="h-note-2" aria-level="4">
						<span>Note</span>
					</div>
					<div class="">
						<p>For more information about security and privacy issues with external links, see <a
								href="#epub-threat-model" class="sec-ref"><bdi class="secno">14.2 </bdi>Threat
							model</a>.</p>
					</div>
				</div>
			</section>
		</section>
		<section id="sec-ocf">
			<div class="header-wrapper">
				<h2 id="x3-open-container-format-ocf-processing"><bdi class="secno">3. </bdi>Open Container Format (OCF)
					processing</h2>
				<a class="self-link" href="#sec-ocf" aria-label="Permalink for Section 3."></a>
			</div>


			<p id="confreq-rs-epub3-ocf" class="support" data-tests="#ocf-package_arbitrary">Reading systems <em
					class="rfc2119">MUST</em> process the <a href="https://www.w3.org/TR/epub-33/#sec-ocf">EPUB
					container</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
						>epub-33</a></cite>].</p>

			<div class="note" role="note" id="issue-container-generatedID-2">
				<div role="heading" class="note-title marker" id="h-note-3" aria-level="3">
					<span>Note</span>
				</div>
				<div class="">
					<p>An application that processes EPUB containers does not have to be a full-fledged reading system
						(e.g., an application might only extract the content of a container or check the validity of the
						packaged content). In these cases, developers of such applications can ignore the rendering
						requirements for reading systems defined in this section.</p>
				</div>
			</div>

			<section id="sec-container-abstract">
				<div class="header-wrapper">
					<h3 id="x3-1-ocf-abstract-container"><bdi class="secno">3.1 </bdi>OCF abstract container</h3>
					<a class="self-link" href="#sec-container-abstract" aria-label="Permalink for Section 3.1"></a>
				</div>


				<section id="sec-container-iri">
					<div class="header-wrapper">
						<h4 id="x3-1-1-url-of-the-root-directory"><bdi class="secno">3.1.1 </bdi>URL of the root
							directory</h4>
						<a class="self-link" href="#sec-container-iri" aria-label="Permalink for Section 3.1.1"></a>
					</div>


					<p id="sec-container-iri-root"
						data-tests="#ocf-url_manifest,#ocf-url_relative,#ocf-url_link-relative">Reading systems <em
							class="rfc2119">MUST</em> assign a URL&#160;[<cite><a class="bibref" data-link-type="biblio"
								href="#bib-url" title="URL Standard">url</a></cite>] to the <a data-link-type="dfn"
							data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-root-directory">root directory</a>
						of the <a data-link-type="dfn" data-type="dfn"
							href="https://www.w3.org/TR/epub-33/#dfn-ocf-abstract-container">OCF abstract container</a>.
						This URL is called the <a data-link-type="dfn" data-type="dfn"
							href="https://www.w3.org/TR/epub-33/#dfn-container-root-url">container root URL</a>. It is
						implementation specific, but the implementation <em class="rfc2119">MUST</em> have the following
						properties:</p>

					<ul>
						<li id="sec-container-iri-root-parse"
							data-tests="#ocf-url_link-path-absolute,#ocf-url_parse-path-absolute">The result of <a
								data-lt="url parser" data-type="dfn"
								href="https://url.spec.whatwg.org/#concept-url-parser">parsing</a>&#160;[<cite><a
									class="bibref" data-link-type="biblio" href="#bib-url" title="URL Standard"
								>url</a></cite>] "<code>/</code>" with the <a data-type="dfn"
								href="https://www.w3.org/TR/epub-33/#dfn-container-root-url">container root URL</a> as
								<a href="https://url.spec.whatwg.org/#concept-base-url"><var>base</var></a> is the <a
								data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-container-root-url">container
								root URL</a>.</li>
						<li id="sec-container-iri-step-parse"
							data-tests="#ocf-url_link-leaking-relative,#ocf-url_parse-leaking-relative">The result of <a
								data-lt="url parser" data-type="dfn"
								href="https://url.spec.whatwg.org/#concept-url-parser">parsing</a>&#160;[<cite><a
									class="bibref" data-link-type="biblio" href="#bib-url" title="URL Standard"
								>url</a></cite>] "<code>..</code>" with the <a data-type="dfn"
								href="https://www.w3.org/TR/epub-33/#dfn-container-root-url">container root URL</a> as
								<a href="https://url.spec.whatwg.org/#concept-base-url"><var>base</var></a> is the <a
								data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-container-root-url">container
								root URL</a>.</li>

						<li id="sec-container-iri-origin" data-tests="#ocf-url_origin">The <a data-link-type="dfn"
								data-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin"
								>origin</a> of the <a data-link-type="dfn" data-type="dfn"
								href="https://www.w3.org/TR/epub-33/#dfn-container-root-url">container root URL</a> is
							unique for each user-specific instance of an <a data-type="dfn"
								href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publication</a> in a
							reading system.</li>
					</ul>

					<div class="note" role="note" id="issue-container-generatedID-3">
						<div role="heading" class="note-title marker" id="h-note-4" aria-level="5">
							<span>Note</span>
						</div>
						<p class="">The unicity of the <a data-link-type="dfn" data-type="dfn"
								href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin">origin</a> per
							each user-specific instance of an EPUB publication in a reading system means that if two
							different users acquire a copy of the same EPUB publication, the origins will be different
							for the two users on those copies even if the same reading system is used.</p>
					</div>

					<div class="note" role="note" id="issue-container-generatedID-4">
						<div role="heading" class="note-title marker" id="h-note-5" aria-level="5">
							<span>Note</span>
						</div>
						<div class="">
							<p>The properties of the <a data-link-type="dfn" data-type="dfn"
									href="https://www.w3.org/TR/epub-33/#dfn-container-root-url">container root URL</a>
								are such that a conforming reading system will parse any relative URL string to a <a
									data-link-type="dfn" data-type="dfn"
									href="https://www.w3.org/TR/epub-33/#dfn-content-url">content URL</a>. In other
								words, relative links do not "leak" outside the container content, which is an important
								feature for security.</p>

							<p>In practice, the container root URL behaves similarly to a URL defined as follows:</p>

							<table class="zebra">
								<thead>
									<tr>
										<td style="font-weight: bold; text-align: center;">URL component</td>
										<td style="font-weight: bold; text-align: center;">Values</td>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>scheme</td>
										<td><code>http</code> or <code>https</code></td>
									</tr>
									<tr>
										<td>host</td>
										<td><code>localhost</code></td>
									</tr>
									<tr>
										<td>port</td>
										<td>a dynamic port uniquely assigned to the EPUB instance</td>
									</tr>
								</tbody>
							</table>

							<p>for example:</p>

							<table class="zebra">
								<thead>
									<tr>
										<td style="font-weight: bold; text-align: center;">Container&#160;File</td>
										<td style="font-weight: bold; text-align: center;">File&#160;Path</td>
										<td style="font-weight: bold; text-align: center;">URL</td>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>Root directory</td>
										<td>
											<var>empty string</var>
										</td>
										<td>
											<code>http://localhost:49152/</code>
										</td>
									</tr>
									<tr>
										<td>Package document</td>
										<td>
											<code>EPUB/package.opf</code>
										</td>
										<td>
											<code>http://localhost:49152/EPUB/package.opf</code>
										</td>
									</tr>
									<tr>
										<td>EPUB content document</td>
										<td>
											<code>HTML/file&#160;name.xhtml</code>
										</td>
										<td>
											<code>http://localhost:49152/HTML/file%20name.xhtml</code>
										</td>
									</tr>
								</tbody>
							</table>

							<table class="zebra">
								<thead>
									<tr>
										<td style="font-weight: bold; text-align: center;">URL string<br />(found for
											example in the package document)</td>
										<td style="font-weight: bold; text-align: center;">content URL</td>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>
											<code>../HTML/file%20name.xhtml</code>
										</td>
										<td>
											<code>http://localhost:49152/HTML/file%20name.xhtml</code>
										</td>
									</tr>
									<tr>
										<td>
											<code>/Media/img.png</code>
										</td>
										<td>
											<code>http://localhost:49152/Media/img.png</code>
										</td>
									</tr>
									<tr>
										<td>
											<code>../../../Media/img.png</code>
										</td>
										<td>
											<code>http://localhost:49152/Media/img.png</code>
										</td>
									</tr>
								</tbody>
							</table>

							<p>Note that the last two links are <a
									href="https://www.w3.org/TR/epub-33/#urls-in-ocf-constraints">disallowed</a> in an
								EPUB publications to ensure better interoperability with non-conforming or legacy
								reading systems and toolchains.</p>
						</div>
					</div>

					<div class="note" role="note" id="issue-container-generatedID-5">
						<div role="heading" class="note-title marker" id="h-note-6" aria-level="5">
							<span>Note</span>
						</div>
						<div class="">
							<p>Some language specifications reference <a href="https://www.ietf.org/standards/rfcs/"
									>Requests For Comments</a> that preceded [<cite><a class="bibref"
										data-link-type="biblio" href="#bib-url" title="URL Standard">url</a></cite>], in
								which case the earlier RFC applies for content in that particular language.</p>
						</div>
					</div>

					<div class="note" role="note" id="issue-container-generatedID-6">
						<div role="heading" class="note-title marker" id="h-note-7" aria-level="5">
							<span>Note</span>
						</div>
						<div class="">
							<p>Unlike most language specifications, reading systems must use the <a data-link-type="dfn"
									data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-container-root-url"
									>container root URL</a> as the <a
									href="https://url.spec.whatwg.org/#concept-base-url">base URL</a>&#160;[<cite><a
										class="bibref" data-link-type="biblio" href="#bib-url" title="URL Standard"
										>url</a></cite>] for all files within the <code>META-INF</code> directory. See
								also the section on <a href="https://www.w3.org/TR/epub-33/#sec-parsing-urls-metainf"
									>Parsing URLs in the <code>META-INF</code> directory</a> in [<cite><a class="bibref"
										data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
								>epub-33</a></cite>].</p>
						</div>
					</div>
				</section>

				<section id="sec-container-filenames">
					<div class="header-wrapper">
						<h4 id="x3-1-2-file-names"><bdi class="secno">3.1.2 </bdi>File names</h4>
						<a class="self-link" href="#sec-container-filenames" aria-label="Permalink for Section 3.1.2"
						></a>
					</div>


					<p>Although EPUB creators are required to follow various <a
							href="https://www.w3.org/TR/epub-33/#sec-container-filenames">File name and file path
							restrictions</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
								title="EPUB 3.3">epub-33</a></cite>] for maximum interoperability, reading systems <em
							class="rfc2119">SHOULD</em> attempt to process file names and paths that do not adhere to
						these requirements. Invalid file names and paths may only be problematic on some operating
						systems.</p>

					<p>This specification does not specify how a reading system that is unable to represent OCF file
						names and paths would handle this incompatibility.</p>
				</section>

				<section id="sec-container-metainf">
					<div class="header-wrapper">
						<h4 id="x3-1-3-meta-inf-directory"><bdi class="secno">3.1.3 </bdi><code>META-INF</code>
							directory</h4>
						<a class="self-link" href="#sec-container-metainf" aria-label="Permalink for Section 3.1.3"></a>
					</div>


					<dl class="conformance-list">
						<dt id="sec-container-metainf-container.xml">Container file (<code>container.xml</code>)</dt>
						<dd>
							<p id="container-default-rendition"
								data-tests="#ocf-package_arbitrary,#ocf-package_multiple">A reading system <em
									class="rfc2119">MUST</em>, by default, use the <a data-link-type="dfn"
									data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-package-document">package
									document</a> referenced the from first <a
									href="https://www.w3.org/TR/epub-33/#sec-container.xml-rootfile-elem"
										><code>rootfile</code> element</a> [<cite><a class="bibref"
										data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>]
								to render the <a data-link-type="dfn" data-type="dfn"
									href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publication</a>. If
								the reading system recognizes a means of selecting from the other available options, it
									<em class="rfc2119">MAY</em> choose a more appropriate package document.</p>
						</dd>

						<dt id="sec-container-metainf-metadata.xml">Metadata file (<code>metadata.xml</code>)</dt>
						<dd>
							<p>Reading systems <em class="rfc2119">SHOULD</em> ignore <a
									href="https://www.w3.org/TR/epub-33/#sec-container-metainf-metadata.xml"
										><code>metadata.xml</code> files</a> [<cite><a class="bibref"
										data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>]
								with unrecognized root elements.</p>
						</dd>

						<dt id="sec-container-metainf-manifest.xml">Manifest file (<code>manifest.xml</code>)</dt>
						<dd>
							<p>Reading systems <em class="rfc2119">MUST NOT</em> use ancillary manifest information
								contained in the ZIP archive or in the <a
									href="https://www.w3.org/TR/epub-33/#sec-container-metainf-manifest.xml"
										><code>manifest.xml</code> file</a> [<cite><a class="bibref"
										data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>]
								for processing an <a data-type="dfn"
									href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publication</a>.</p>
						</dd>

						<dt id="sec-container-metainf-signatures.xml">Digital signatures file
								(<code>signatures.xml</code>)</dt>
						<dd>
							<p>Before computing the digest used to validate the signature in the <a
									href="https://www.w3.org/TR/epub-33/#sec-container-metainf-signatures.xml"
										><code>signatures.xml</code> file</a> [<cite><a class="bibref"
										data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
								>epub-33</a></cite>], reading systems <em class="rfc2119">MUST</em> decrypt any data
								encrypted after signing — data encrypted before signing <em class="rfc2119">MUST
									NOT</em> be decrypted.</p>
							<p>Refer to Decryption Transform for XML Signature [<cite><a class="bibref"
										data-link-type="biblio" href="#bib-xmlenc-decrypt"
										title="Decryption Transform for XML Signature">xmlenc-decrypt</a></cite>] for
								more information about identifying data encrypted after signing.</p>
						</dd>

						<dt id="sec-container-metainf-inc">Other files</dt>
						<dd>
							<p>Reading systems <em class="rfc2119">MUST NOT</em> fail when encountering configuration
								files in the <code class="filename">META-INF</code> directory not listed in <a
									href="https://www.w3.org/TR/epub-33/#sec-container-metainf-files">Reserved files</a>
										[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
										title="EPUB 3.3">epub-33</a></cite>].</p>
						</dd>
					</dl>
				</section>
			</section>

			<section id="sec-container-zip">
				<div class="header-wrapper">
					<h3 id="x3-2-ocf-zip-container"><bdi class="secno">3.2 </bdi>OCF ZIP container</h3>
					<a class="self-link" href="#sec-container-zip" aria-label="Permalink for Section 3.2"></a>
				</div>


				<p>A reading system:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-zip-mult"><em class="rfc2119">MUST</em> treat any OCF containers that specify the
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-zip"
									title=".ZIP File Format Specification">zip</a></cite>] file is split across multiple
							storage media as in error.</p>
					</li>
					<li>
						<p id="confreq-zip-comp"><em class="rfc2119">MUST</em> treat any OCF containers that use
							compression techniques other than Deflate [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-rfc1951" title="DEFLATE Compressed Data Format Specification version 1.3"
									>rfc1951</a></cite>] as in error.</p>
					</li>
					<li>
						<p id="confreq-zip-64"><em class="rfc2119">MUST</em> support the ZIP64 extensions defined as
							"Version 1" [<cite><a class="bibref" data-link-type="biblio" href="#bib-zip"
									title=".ZIP File Format Specification">zip</a></cite>].</p>
					</li>
					<li>
						<p id="confreq-zip-enc"><em class="rfc2119">MUST</em> treat OCF ZIP containers that use
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-zip"
									title=".ZIP File Format Specification">zip</a></cite>] encryption features as in
							error.</p>
					</li>
					<li>
						<p id="confreq-zip-rootdir"><em class="rfc2119">MAY</em> generate a physical directory for the
								<a data-link-type="dfn" data-type="dfn"
								href="https://www.w3.org/TR/epub-33/#dfn-root-directory">root directory</a> of the OCF
							abstract container if it unzips the contents.</p>
					</li>
					<li>
						<p id="confreq-zip-preserve">does not have to preserve information from an OCF ZIP container
							through load and save operations outside the context of the OCF abstract container. In
							particular, a reading system does not have to preserve CRC values, comment fields or fields
							that hold file system information corresponding to a particular operating system (e.g., <em
								class="firstterm">External file attributes</em> and <em class="firstterm">Extra
								field</em>).</p>
					</li>
				</ul>

				<p>With respect to specific fields in the OCF ZIP container archive, the reading system:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-zip-fld-version"><em class="rfc2119">MUST</em> treat <code>version needed to
								extract</code> field values other than <code>10</code>, <code>20</code> or
								<code>45</code> in the local file header table [<cite><a class="bibref"
									data-link-type="biblio" href="#bib-zip" title=".ZIP File Format Specification"
									>zip</a></cite>] as being in error.</p>
					</li>
					<li>
						<p id="confreq-zip-fld-comp"><em class="rfc2119">MUST</em> treat <code>compression</code> method
							field values other than <code>0</code> or <code>8</code> in the local file header table
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-zip"
									title=".ZIP File Format Specification">zip</a></cite>] as being in error.</p>
					</li>
					<li>
						<p id="confreq-zip-fld-er"><em class="rfc2119">MUST</em> treat OCF ZIP containers with an
								<code>Archive decryption header</code> or an <code>Archive extra data record</code>
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-zip"
									title=".ZIP File Format Specification">zip</a></cite>] as being in error.</p>
					</li>
				</ul>
			</section>

			<section id="sec-container-fobfus">
				<div class="header-wrapper">
					<h3 id="x3-3-font-obfuscation"><bdi class="secno">3.3 </bdi>Font obfuscation</h3>
					<a class="self-link" href="#sec-container-fobfus" aria-label="Permalink for Section 3.3"></a>
				</div>


				<p id="confreq-ocf-fobfus">Reading systems <em class="rfc2119">SHOULD</em> support deobfuscation of
					fonts as defined in <a href="https://www.w3.org/TR/epub-33/#sec-font-obfuscation">Font
						obfuscation</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
							title="EPUB 3.3">epub-33</a></cite>].</p>

				<p>To restore the original data, reading systems should simply reverse the process: the source file
					becomes the obfuscated data, and the destination file contains the raw data.</p>

				<div class="note" role="note" id="issue-container-generatedID-7">
					<div role="heading" class="note-title marker" id="h-note-8" aria-level="4">
						<span>Note</span>
					</div>
					<div class="">
						<p>EPUB 3 allowed font obfuscation prior to EPUB 3.0.1, but did not specify the order of
							obfuscation and compression. As a result, reading systems might encounter invalid fonts
							after decompression and deobfuscation. In such instances, deobfuscating the data before
							inflating it may return a valid font. Reading systems do not have to support this method of
							retrieval, but developers should consider it when supporting EPUB 3 content generally.</p>
					</div>
				</div>
			</section>
		</section>
		<section id="sec-package-doc">
			<div class="header-wrapper">
				<h2 id="x4-package-document-processing"><bdi class="secno">4. </bdi>Package document processing</h2>
				<a class="self-link" href="#sec-package-doc" aria-label="Permalink for Section 4."></a>
			</div>


			<p id="confreq-rs-epub-pub" class="support">Reading systems <em class="rfc2119">MUST</em> process the <a
					href="https://www.w3.org/TR/epub-33/#sec-package-doc">package document</a> [<cite><a class="bibref"
						data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>].</p>

			<section id="sec-pkg-doc-base-dir">
				<div class="header-wrapper">
					<h3 id="x4-1-base-direction"><bdi class="secno">4.1 </bdi>Base direction</h3>
					<a class="self-link" href="#sec-pkg-doc-base-dir" aria-label="Permalink for Section 4.1"></a>
				</div>


				<p id="confreq-rs-pkg-dir"
					data-tests="#pkg-dir_creator-rtl,#pkg-dir_rtl-root-ltr,#pkg-dir_rtl-root-unset,#pkg-dir_unset-root-rtl,#pkg-dir_unset-root-unset,#pkg-dir-auto_root-rtl"
					>If the <a href="https://www.w3.org/TR/epub-33/#attrdef-dir"><code>dir</code> attribute</a>
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>] is set and indicates a base direction of <code>ltr</code> or
						<code>rtl</code>, reading systems <em class="rfc2119">MUST</em> override the bidi algorithm per
						<a href="https://www.unicode.org/reports/tr9/tr9-44.html#Higher-Level_Protocols">the
						higher-level protocols</a> defined in [<cite><a class="bibref" data-link-type="biblio"
							href="#bib-bidi" title="Unicode Bidirectional Algorithm">bidi</a></cite>], setting the
					paragraph embedding level to 0 if the base direction is <code>ltr</code>, or 1 if the base direction
					is <code>rtl</code>.</p>

				<p id="confreq-rs-pkg-dir-auto" data-tests="#pkg-dir-auto_root-rtl,#pkg-dir-auto_root-unset">Otherwise
					the base direction is <code>auto</code>, in which case reading systems <em class="rfc2119">MUST</em>
					determine the text's direction by applying the Unicode Bidi Algorithm, beginning with <a
						href="https://www.unicode.org/reports/tr9/tr9-44.html#P2">Rule P2</a> of [<cite><a
							class="bibref" data-link-type="biblio" href="#bib-bidi"
							title="Unicode Bidirectional Algorithm">bidi</a></cite>].</p>
			</section>

			<section id="sec-pkg-doc-pub-identifiers">
				<div class="header-wrapper">
					<h3 id="x4-2-unique-identifier"><bdi class="secno">4.2 </bdi>Unique identifier</h3>
					<a class="self-link" href="#sec-pkg-doc-pub-identifiers" aria-label="Permalink for Section 4.2"></a>
				</div>


				<p id="confreq-rs-pkg-unique-id" data-tests="#pkg-unique-id">Reading systems <em class="rfc2119">SHOULD
						NOT</em> depend on the <a data-link-type="dfn" data-type="dfn"
						href="https://www.w3.org/TR/epub-33/#dfn-unique-identifier">unique identifier</a> being unique
					to one and only one EPUB publication. Determining whether two EPUB publications with the same Unique
					Identifier represent different versions of the same publication, or different publications, may
					require inspecting other metadata, such as their last modification dates, titles, and authors.</p>
			</section>

			<section id="sec-pkg-doc-metadata">
				<div class="header-wrapper">
					<h3 id="x4-3-metadata"><bdi class="secno">4.3 </bdi>Metadata</h3>
					<a class="self-link" href="#sec-pkg-doc-metadata" aria-label="Permalink for Section 4.3"></a>
				</div>


				<dl class="conformance-list">
					<dt id="conf-meta-ws">White Space</dt>
					<dd>
						<p id="confreq-rs-pkg-whitespace" data-tests="#pkg-meta-whitespace">Reading systems <em
								class="rfc2119">MUST</em>
							<a data-link-type="dfn" data-type="dfn"
								href="https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace">strip and
								collapse ASCII whitespace</a>&#160;[<cite><a class="bibref" data-link-type="biblio"
									href="#bib-infra" title="Infra Standard">infra</a></cite>] from Dublin Core
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-dcterms"
									title="DCMI Metadata Terms">dcterms</a></cite>] and <span data-cite="epub-33"
										><code><a data-type="element" href="https://www.w3.org/TR/epub-33/#dfn-meta"
										>meta</a></code></span> element <a
								href="https://www.w3.org/TR/epub-33/#dfn-value">values</a> [<cite><a class="bibref"
									data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>]
							before processing.</p>
					</dd>

					<dt id="dc-identifier">The <code>dc:identifier</code> element</dt>
					<dd>
						<p>To determine whether the value of a <code><a data-type="element"
									href="https://www.w3.org/TR/epub-33/#dfn-dc-identifier">dc:identifier</a></code>
							element [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>] conforms to an established system or has been
							granted by an issuing authority, reading systems <em class="rfc2119">SHOULD</em> check for
							an <a href="https://www.w3.org/TR/epub-33/#identifier-type"><code>identifier-type</code>
								property</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>].</p>
					</dd>

					<dt id="dc-title">The <code>dc:title</code> element</dt>
					<dd>
						<p id="title-order" data-tests="#pkg-title-order">Reading systems <em class="rfc2119">MUST</em>
							recognize the first <code><a data-type="element"
									href="https://www.w3.org/TR/epub-33/#dfn-dc-title">dc:title</a></code> element
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>] in document order as the main title of the EPUB
							publication and present it to users before other title elements.</p>
						<p>This specification does not define how to process additional <code>dc:title</code>
							elements.</p>
					</dd>

					<dt id="sec-opf-dclanguage">The <code>dc:language</code> element</dt>
					<dd>
						<p>The language(s) of the <a data-link-type="dfn" data-type="dfn"
								href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publication</a>
							specified in <code><a data-type="element"
									href="https://www.w3.org/TR/epub-33/#dfn-dc-language">dc:language</a></code>
							elements are informational. Some uses of this information include:</p>
						<ul>
							<li>exposing it to the user through the reading system user interface</li>
							<li>using it to enhance functionality in a bookshelf (e.g., sorting by language)</li>
							<li>using it to optimize the reading interface (e.g., to preload text-to-speech
								languages)</li>
						</ul>
						<p>See <a href="#sec-epub-rs-i18n" class="sec-ref"><bdi class="secno">2.6
								</bdi>Internationalization</a> for more details on how to determine the language of a <a
								data-link-type="dfn" data-type="dfn"
								href="https://www.w3.org/TR/epub-33/#dfn-publication-resource">publication
							resource</a>.</p>
					</dd>

					<dt id="dc-creator">The <code>dc:creator</code> element</dt>
					<dd>
						<p id="confreq-rs-pkg-creator-order" data-tests="#pkg-creator-order">When determining display
							priority, reading systems <em class="rfc2119">MUST</em> use the document order of <code><a
									data-type="element" href="https://www.w3.org/TR/epub-33/#dfn-dc-creator"
									>dc:creator</a></code> elements [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] in the
								<code>metadata</code> section, where the first <code>creator</code> element encountered
							is the primary creator. If a reading system exposes creator metadata to the user, it <em
								class="rfc2119">SHOULD</em> include all the creators listed in the <code>metadata</code>
							section whenever possible (e.g., when not constrained by display considerations).</p>
					</dd>

					<dt id="meta">The <code>meta</code> element</dt>
					<dd>
						<p data-cite="epub-33">Reading systems <em class="rfc2119">SHOULD</em> ignore all <code><a
									data-type="element" href="https://www.w3.org/TR/epub-33/#dfn-meta">meta</a></code>
							elements whose <a href="https://www.w3.org/TR/epub-33/#attrdef-meta-property"
									><code>property</code> attributes</a> [<cite><a class="bibref"
									data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>]
							define expressions they do not recognize. <span id="confreq-rs-pkg-meta-unknown"
								data-tests="#pkg-meta-unknown">A reading system <em class="rfc2119">MUST NOT</em> fail
								when encountering unknown expressions.</span></p>
						<p>If the <code>property</code> attribute's value does not include a <a
								href="https://www.w3.org/TR/epub-33/#property.ebnf.prefix">prefix</a> [<cite><a
									class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
									>epub-33</a></cite>], reading systems <em class="rfc2119">MUST</em> use the prefix
							URL "<code>http://idpf.org/epub/vocab/package/meta/#</code>" to <a
								href="#sec-property-datatype">expand the value</a>.</p>
						<p>If a reading system does not recognize the <a
								href="https://www.w3.org/TR/epub-33/#attrdef-scheme"><code>scheme</code> attribute</a>
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>] value, it <em class="rfc2119">SHOULD</em> treat
							the value of the element as a string.</p>
					</dd>

					<dt id="conf-metadata-link">The <code>link</code> element</dt>
					<dd>
						<p>Retrieval and support of <a data-link-type="dfn" data-type="dfn"
								data-cite-href="https://www.w3.org/TR/epub-33/#dfn-linked-resource"
								href="https://www.w3.org/TR/epub-33/#dfn-linked-resource">linked resources</a> is <em
								class="rfc2119">OPTIONAL</em>.</p>
						<p>The language identified in an <a href="https://www.w3.org/TR/epub-33/#attrdef-hreflang"
									><code>hreflang</code> attribute</a> is purely advisory. Upon fetching the resource,
							a reading system <em class="rfc2119">MUST</em> use the language information associated with
							the resource to determine its language, not the metadata included in the link to the
							resource.</p>
						<p id="sec-linked-records" data-tests="#pkg-linked-records">In the case of a <a
								href="https://www.w3.org/TR/epub-33/#record">linked metadata record</a> [<cite><a
									class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
									>epub-33</a></cite>], reading systems <em class="rfc2119">MUST NOT</em> skip
							processing the metadata expressed in the package document (i.e., use only the information
							expressed in the record). Reading systems <em class="rfc2119">MAY</em> compile metadata from
							multiple linked records.</p>
						<p>When resolving discrepancies and conflicts between metadata expressed in the package document
							and in linked metadata records, reading systems <em class="rfc2119">MUST</em> use the
							document order of <span data-cite="epub-33"><code><a data-type="element"
										href="https://www.w3.org/TR/epub-33/#dfn-link">link</a></code></span> elements
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>] in the package document to establish precedence
							(i.e., metadata in the first linked record has the highest precedence and metadata in the
							package document the lowest, regardless of whether the <code>link</code> elements occur
							before, within, or after the package metadata elements).</p>
						<p>Reading systems <em class="rfc2119">MUST</em> ignore any instructions contained in linked
							resources related to the layout and rendering of the EPUB publication.</p>
						<p>If any of the <a href="https://www.w3.org/TR/epub-33/#attrdef-link-rel"><code>rel</code></a>
							or <a href="https://www.w3.org/TR/epub-33/#attrdef-properties"><code>properties</code></a>
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>] attributes' values do not include a <a
								href="https://www.w3.org/TR/epub-33/#property.ebnf.prefix">prefix</a>, reading systems
								<em class="rfc2119">MUST</em> use the prefix URL
								"<code>http://idpf.org/epub/vocab/package/link/#</code>" to <a
								href="#sec-property-datatype">expand the values</a>.</p>
					</dd>
				</dl>
			</section>

			<section id="sec-pkg-doc-manifest">
				<div class="header-wrapper">
					<h3 id="x4-4-manifest"><bdi class="secno">4.4 </bdi>Manifest</h3>
					<a class="self-link" href="#sec-pkg-doc-manifest" aria-label="Permalink for Section 4.4"></a>
				</div>


				<p id="confreq-rs-pkg-manifest-unknown" data-tests="#pkg-manifest-unknown">Reading systems <em
						class="rfc2119">MUST</em> ignore values of the <a
						href="https://www.w3.org/TR/epub-33/#sec-item-resource-properties"><code>properties</code>
						attribute</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
							title="EPUB 3.3">epub-33</a></cite>] they do not recognize.</p>

				<p id="confreq-rendition-rs-manifest" data-tests="#pkg-manifest-unlisted-resource">Reading systems <em
						class="rfc2119">SHOULD NOT</em> use <a data-link-type="dfn" data-type="dfn"
						data-cite-href="https://www.w3.org/TR/epub-33/#dfn-linked-resource"
						href="https://www.w3.org/TR/epub-33/#dfn-linked-resource">linked resources</a> in the rendering
					of an EPUB publication due to the inherent limitations and risks involved (e.g., lack of information
					about the resource and how to process it, security risks from remotely-hosted sources, lack of
					fallbacks, etc.).</p>

				<p>A reading system that does not support the MIME media type [<cite><a class="bibref"
							data-link-type="biblio" href="#bib-rfc2046"
							title="Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types"
						>rfc2046</a></cite>] of a given publication resource <em class="rfc2119">MUST</em> traverse the
						<a href="https://www.w3.org/TR/epub-33/#sec-manifest-fallbacks">manifest fallback chain</a>
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>] until it identifies a supported publication resource to use in place of
					the unsupported resource. If the reading system supports multiple publication resources in the
					fallback chain, it <em class="rfc2119">MAY</em> select the resource to use based on the resource's
						<a href="https://www.w3.org/TR/epub-33/#attrdef-item-properties"><code>properties</code>
						attribute</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
							title="EPUB 3.3">epub-33</a></cite>] values, otherwise it <em class="rfc2119">SHOULD</em>
					honor the EPUB creator's preferred fallback order. If a reading system does not support any resource
					in the fallback chain, it <em class="rfc2119">MUST</em> alert the reader that it could not display
					the content.</p>

				<p>When <a href="https://www.w3.org/TR/epub-33/#sec-manifest-fallbacks">manifest fallbacks</a> [<cite><a
							class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
						>epub-33</a></cite>] are provided for <a data-link-type="dfn" data-type="dfn"
						data-cite-href="https://www.w3.org/TR/epub-33/#dfn-top-level-content-document"
						href="https://www.w3.org/TR/epub-33/#dfn-top-level-content-document">top-level content
						documents</a>, reading systems <em class="rfc2119">MAY</em> choose from the available options to
					find the optimal version to render in a given context (e.g., by inspecting the properties attribute
					for each).</p>

				<p>A reading system <em class="rfc2119">MUST</em> terminate the fallback chain at the first reference to
					a manifest item it has already encountered.</p>

				<p>If any of the <code>properties</code> attribute's values do not include a <a
						href="https://www.w3.org/TR/epub-33/#property.ebnf.prefix">prefix</a> [<cite><a class="bibref"
							data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>], reading
					systems <em class="rfc2119">MUST</em> use the prefix URL
						"<code>http://idpf.org/epub/vocab/package/item/#</code>" to <a href="#sec-property-datatype"
						>expand the values</a>.</p>
			</section>

			<section id="sec-pkg-doc-spine">
				<div class="header-wrapper">
					<h3 id="x4-5-spine"><bdi class="secno">4.5 </bdi>Spine</h3>
					<a class="self-link" href="#sec-pkg-doc-spine" aria-label="Permalink for Section 4.5"></a>
				</div>


				<p id="confreq-rs-spine-order" data-tests="#pkg-spine-order">Reading systems <em class="rfc2119"
						>MUST</em> provide a means of rendering the EPUB publication in the order defined in the
							<code><a data-type="element" href="https://www.w3.org/TR/epub-33/#dfn-spine"
						>spine</a></code> element [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
							title="EPUB 3.3">epub-33</a></cite>], which includes:</p>
				<ul>
					<li>recognizing the first <a href="https://www.w3.org/TR/epub-33/#attrdef-itemref-linear">primary
							(linear) <code>itemref</code></a> [<cite><a class="bibref" data-link-type="biblio"
								href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] as the beginning of the default
						reading order; and,</li>
					<li>rendering successive primary items in the order given in the <code>spine</code>.</li>
				</ul>

				<p id="confreq-rendition-rs-spine-nonlinear">When a user traverses the default reading order defined in
					the <code>spine</code> element, a reading system <em class="rfc2119">MAY</em> automatically skip <a
						href="https://www.w3.org/TR/epub-33/#attrdef-itemref-linear">non-linear <code>itemref</code>
						elements</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
							title="EPUB 3.3">epub-33</a></cite>]. <span id="confreq-rs-spine-nonlinear-activation"
						data-tests="#pkg-spine-nonlinear-activation">When a user activates a hyperlink to a non-linear
						resource, however, reading systems <em class="rfc2119">MUST</em> render the referenced resource
						or a designated fallback.</span> Reading systems <em class="rfc2119">MAY</em> also provide the
					option for users to skip non-linear content by default or not.</p>

				<p id="confreq-rs-spine-progression-default" data-tests="#pkg-spine-progression-default">If the EPUB
					creator has not specified the <a
						href="https://www.w3.org/TR/epub-33/#attrdef-spine-page-progression-direction"
							><code>page-progression-direction</code> attribute</a> [<cite><a class="bibref"
							data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>], the
					reading system <em class="rfc2119">MUST</em> assume the value of <code>default</code>. When
						<code>page-progression-direction</code> value is <code>default</code>, the reading system can
					choose the rendering direction.</p>

				<p id="confreq-rs-spine-progression-pre-paginated" data-tests="#pkg-spine-progression-pre-paginated">If
					the <code>page-progression-direction</code> attribute has a value other than <code>default</code>,
					the reading system <em class="rfc2119">MUST</em> ignore any directionality computed from <a
						href="#layout"><code>pre-paginated</code></a>
					<a data-link-type="dfn" data-type="dfn"
						data-cite-href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document"
						href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document">XHTML content
					documents</a>.</p>

				<p>If any values of the <a href="https://www.w3.org/TR/epub-33/#attrdef-properties"
							><code>properties</code> attribute</a> do not include a <a
						href="https://www.w3.org/TR/epub-33/#property.ebnf.prefix">prefix</a> [<cite><a class="bibref"
							data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>], reading
					systems <em class="rfc2119">MUST</em> use the prefix URL
						"<code>http://idpf.org/epub/vocab/package/itemref/#</code>" to <a href="#sec-property-datatype"
						>expand the values</a>.</p>

				<p id="confreq-rs-pkg-spine-unknown" data-tests="#pkg-spine-unknown">Reading systems <em class="rfc2119"
						>MUST</em> ignore all values expressed in spine <code>itemref</code>
					<code>properties</code> attributes that they do not recognize.</p>

				<p>
					<span id="confreq-rs-pkg-duplicate-item-rendering" data-tests="#pkg-spine-duplicate-item-rendering">
						Reading systems <em class="rfc2119">MUST NOT</em> skip spine references to duplicate manifest
						items when rendering the linear reading order.</span>
					<span id="confreq-rs-pkg-duplicate-item-ui" data-tests="#pkg-spine-duplicate-item-ui">The reading
						system <em class="rfc2119">MUST</em> treat these as distinct items for user interface (UI)
						purposes (for example, each occurrence could be independently bookmarked or annotated).</span>
					<span id="confreq-rs-pkg-duplicate-item-hyperlink" data-tests="#pkg-spine-duplicate-item-hyperlink"
						>When a reading system follows a hyperlink to a resource referenced multiple times in the spine,
						the reading system <em class="rfc2119">MUST</em> navigate to the first occurrence of the
						document in the linear reading order.</span>
				</p>

				<section id="spine-overrides">
					<div class="header-wrapper">
						<h4 id="x4-5-1-spine-overrides"><bdi class="secno">4.5.1 </bdi>Spine overrides</h4>
						<a class="self-link" href="#spine-overrides" aria-label="Permalink for Section 4.5.1"></a>
					</div>


					<p>When a spine <code><a data-type="element" href="https://www.w3.org/TR/epub-33/#dfn-itemref"
								>itemref</a></code> element's <a
							href="https://www.w3.org/TR/epub-33/#attrdef-properties"><code>properties</code>
							attribute</a> overrides a <a href="https://www.w3.org/TR/epub-33/#app-rendering-vocab"
							>global rendering property</a> [<cite><a class="bibref" data-link-type="biblio"
								href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>], reading systems <em
							class="rfc2119">MUST</em> follow the requirements for the override's global value to display
						that spine item.</p>

					<p>For example, a spine item that contains the <a
							href="https://www.w3.org/TR/epub-33/#layout-overrides"><code>layout-pre-paginated</code>
							override</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
								title="EPUB 3.3">epub-33</a></cite>] is rendered following the requirements of the
						global <a href="#def-layout-pre-paginated"><code>pre-paginated</code> value</a>.</p>

					<p>If more than one override for the same property is specified in a <code>properties</code>
						attribute, reading systems <em class="rfc2119">MUST</em> use only the first value.</p>
				</section>
			</section>

			<section id="sec-pkg-doc-collections">
				<div class="header-wrapper">
					<h3 id="x4-6-collections"><bdi class="secno">4.6 </bdi>Collections</h3>
					<a class="self-link" href="#sec-pkg-doc-collections" aria-label="Permalink for Section 4.6"></a>
				</div>


				<p>In the context of this specification, support for <a
						href="https://www.w3.org/TR/epub-33/#sec-collection-elem">collections</a> [<cite><a
							class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
						>epub-33</a></cite>] in reading systems is <em class="rfc2119">OPTIONAL</em>. <span
						id="confreq-rs-pkg-collections-unknown" data-tests="#pkg-collections-unknown">Reading systems
							<em class="rfc2119">MUST</em> ignore <code>collection</code> elements that define
						unrecognized roles.</span></p>
			</section>
		</section>
		<section id="sec-contentdocs">
			<div class="header-wrapper">
				<h2 id="x5-epub-content-document-processing"><bdi class="secno">5. </bdi>EPUB content document
					processing</h2>
				<a class="self-link" href="#sec-contentdocs" aria-label="Permalink for Section 5."></a>
			</div>


			<p>The definition of <a href="https://www.w3.org/TR/epub-33/#sec-contentdocs">EPUB content documents</a>
						[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
						>epub-33</a></cite>] includes various authoring restrictions to optimize the cross-compatibility
				of content (e.g., <a href="https://www.w3.org/TR/epub-33/#sec-css-req">prohibiting CSS for setting
					language and direction</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
						title="EPUB 3.3">epub-33</a></cite>]). Unless stated otherwise in this specification, reading
				systems <em class="rfc2119">MAY</em> support these restricted features.</p>

			<section id="sec-xhtml">
				<div class="header-wrapper">
					<h3 id="x5-1-xhtml-content-documents"><bdi class="secno">5.1 </bdi>XHTML content documents</h3>
					<a class="self-link" href="#sec-xhtml" aria-label="Permalink for Section 5.1"></a>
				</div>


				<p id="confreq-rs-epub3-xhtml" class="support" data-tests="#cnt-xhtml-support">Reading systems <em
						class="rfc2119">MUST</em> process <a href="https://www.w3.org/TR/epub-33/#sec-xhtml">XHTML
						content documents</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
							title="EPUB 3.3">epub-33</a></cite>].</p>

				<p id="confreq-html-rs-behavior">Unless explicitly defined in this section as overridden, reading
					systems <em class="rfc2119">MUST</em> process XHTML content documents using semantics defined by the
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard"
							>html</a></cite>] specification and honor any applicable user agent conformance constraints
					expressed therein.</p>

				<section id="sec-xhtml-extensions">
					<div class="header-wrapper">
						<h4 id="x5-1-1-html-extensions"><bdi class="secno">5.1.1 </bdi>HTML extensions</h4>
						<a class="self-link" href="#sec-xhtml-extensions" aria-label="Permalink for Section 5.1.1"></a>
					</div>


					<section id="sec-xhtml-aria">
						<div class="header-wrapper">
							<h5 id="x5-1-1-1-aria"><bdi class="secno">5.1.1.1 </bdi>ARIA</h5>
							<a class="self-link" href="#sec-xhtml-aria" aria-label="Permalink for Section 5.1.1.1"></a>
						</div>


						<p id="confreq-html-rs-a11y">Reading systems <em class="rfc2119">SHOULD</em> recognize embedded
							ARIA markup and support exposure of any given ARIA roles, states and properties to platform
							accessibility APIs [<cite><a class="bibref" data-link-type="biblio" href="#bib-wai-aria"
									title="Accessible Rich Internet Applications (WAI-ARIA) 1.0"
							>wai-aria</a></cite>].</p>
					</section>

					<section id="sec-xhtml-structural-semantics">
						<div class="header-wrapper">
							<h5 id="x5-1-1-2-structural-semantics"><bdi class="secno">5.1.1.2 </bdi>Structural
								semantics</h5>
							<a class="self-link" href="#sec-xhtml-structural-semantics"
								aria-label="Permalink for Section 5.1.1.2"></a>
						</div>


						<p id="confreq-rs-epubtype-head">In addition to the requirements in <a
								href="#sec-structural-semantics" class="sec-ref"><bdi class="secno">9. </bdi>Processing
								structural semantics</a>, a reading system <em class="rfc2119">MUST</em> ignore
							semantics expressed on the [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
									title="HTML Standard">html</a></cite>] <span data-cite="html"><code><a
										data-type="element"
										href="https://html.spec.whatwg.org/multipage/semantics.html#the-head-element"
										>head</a></code></span> element or its descendants.</p>
					</section>

					<section id="sec-xhtml-rdfa">
						<div class="header-wrapper">
							<h5 id="x5-1-1-3-rdfa"><bdi class="secno">5.1.1.3 </bdi>RDFa</h5>
							<a class="self-link" href="#sec-xhtml-rdfa" aria-label="Permalink for Section 5.1.1.3"></a>
						</div>


						<p>Reading system support for the <a href="https://www.w3.org/TR/rdfa-core/#s_model">attribute
								processing model</a> [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-rdfa-core" title="RDFa Core 1.1 - Third Edition">rdfa-core</a></cite>] is
								<em class="rfc2119">OPTIONAL</em>.</p>
					</section>

					<section id="sec-xhtml-microdata">
						<div class="header-wrapper">
							<h5 id="x5-1-1-4-microdata"><bdi class="secno">5.1.1.4 </bdi>Microdata</h5>
							<a class="self-link" href="#sec-xhtml-microdata" aria-label="Permalink for Section 5.1.1.4"
							></a>
						</div>


						<p>Reading system support for the <a
								href="https://html.spec.whatwg.org/multipage/microdata.html#encoding-microdata"
								>attribute processing model</a> is <em class="rfc2119">OPTIONAL</em>, as is the <a
								href="https://html.spec.whatwg.org/multipage/microdata.html#json">conversion to JSON</a>
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
									title="HTML Standard">html</a></cite>].</p>
					</section>

					<section id="sec-xhtml-content-switch">
						<div class="header-wrapper">
							<h5 id="x5-1-1-5-content-switching-deprecated"><bdi class="secno">5.1.1.5 </bdi>Content
								switching (deprecated)</h5>
							<a class="self-link" href="#sec-xhtml-content-switch"
								aria-label="Permalink for Section 5.1.1.5"></a>
						</div>


						<p>Use of the <code>switch</code> element is <a href="https://www.w3.org/TR/epub-33/#deprecated"
								>deprecated</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>]. Refer to its definition in [<cite><a
									class="bibref" data-link-type="biblio" href="#bib-epubcontentdocs-301"
									title="EPUB Content Documents 3.0.1">epubcontentdocs-301</a></cite>] for
							implementation information.</p>
					</section>

					<section id="sec-xhtml-epub-trigger">
						<div class="header-wrapper">
							<h5 id="x5-1-1-6-the-epub-trigger-element-deprecated"><bdi class="secno">5.1.1.6 </bdi>The
									<code>epub:trigger</code> element (deprecated)</h5>
							<a class="self-link" href="#sec-xhtml-epub-trigger"
								aria-label="Permalink for Section 5.1.1.6"></a>
						</div>


						<p>Use of the <code>trigger</code> element is <a
								href="https://www.w3.org/TR/epub-33/#deprecated">deprecated</a> [<cite><a class="bibref"
									data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>].
							Refer to its definition in [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-epubcontentdocs-301" title="EPUB Content Documents 3.0.1"
									>epubcontentdocs-301</a></cite>] for implementation information.</p>
					</section>

					<section id="sec-xhtml-custom-attributes">
						<div class="header-wrapper">
							<h5 id="x5-1-1-7-custom-attributes"><bdi class="secno">5.1.1.7 </bdi>Custom attributes</h5>
							<a class="self-link" href="#sec-xhtml-custom-attributes"
								aria-label="Permalink for Section 5.1.1.7"></a>
						</div>


						<p>Reading systems <em class="rfc2119">MAY</em> support custom attributes provided the
							attributes do not modify the requirements of this specification.</p>
					</section>
				</section>

				<section id="sec-xhtml-deviations">
					<div class="header-wrapper">
						<h4 id="x5-1-2-html-deviations-and-constraints"><bdi class="secno">5.1.2 </bdi>HTML deviations
							and constraints</h4>
						<a class="self-link" href="#sec-xhtml-deviations" aria-label="Permalink for Section 5.1.2"></a>
					</div>


					<section id="sec-xhtml-mathml">
						<div class="header-wrapper">
							<h5 id="x5-1-2-1-mathml"><bdi class="secno">5.1.2.1 </bdi>MathML</h5>
							<a class="self-link" href="#sec-xhtml-mathml" aria-label="Permalink for Section 5.1.2.1"
							></a>
						</div>


						<p>To support MathML [<cite><a class="bibref" data-link-type="biblio" href="#bib-mathml3"
									title="Mathematical Markup Language (MathML) Version 3.0 2nd Edition"
								>mathml3</a></cite>] embedded in <a data-link-type="dfn" data-type="dfn"
								data-cite-href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document"
								href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document">XHTML content
								documents</a>, a reading system:</p>

						<ul class="conformance-list">
							<li>
								<p id="confreq-mathml-rs-behavior" data-tests="#cnt-mathml-support"><em class="rfc2119"
										>MUST</em> be an <a
										href="https://www.w3.org/TR/MathML3/chapter2.html#fund.mathmlconf"
										>input-compliant processor</a> for <a
										href="https://www.w3.org/TR/MathML3/chapter3.html#">Presentation MathML</a>, as
									defined in the [<cite><a class="bibref" data-link-type="biblio" href="#bib-mathml3"
											title="Mathematical Markup Language (MathML) Version 3.0 2nd Edition"
											>mathml3</a></cite>] specification.</p>
							</li>
							<li>
								<p id="confreq-mathml-rs-render" data-tests="#cnt-mathml-support"><em class="rfc2119"
										>MUST</em>, if it has a <a data-link-type="dfn" data-type="dfn"
										href="https://www.w3.org/TR/epub-33/#dfn-viewport">viewport</a>, support visual
									rendering of Presentation MathML.</p>
							</li>
							<li>
								<p id="confreq-mathml-rs-anno"><em class="rfc2119">MAY</em> support rendering of <a
										href="https://www.w3.org/TR/MathML3/chapter4.html#">Content MathML</a> found in
										<a
										href="https://www.w3.org/TR/MathML3/chapter5.html#mixing.elements.annotation.xml"
											><code>annotation-xml</code> elements</a> [<cite><a class="bibref"
											data-link-type="biblio" href="#bib-mathml3"
											title="Mathematical Markup Language (MathML) Version 3.0 2nd Edition"
											>mathml3</a></cite>].</p>
							</li>
						</ul>

						<div class="note" role="note" id="issue-container-generatedID-8">
							<div role="heading" class="note-title marker" id="h-note-9" aria-level="6">
								<span>Note</span>
							</div>
							<p class="">Reading systems may choose to use third-party libraries such as <a
									href="https://www.mathjax.org/">MathJax</a> to provide MathML rendering.</p>
						</div>
					</section>

					<section id="sec-xhtml-svg">
						<div class="header-wrapper">
							<h5 id="x5-1-2-2-embedded-svg"><bdi class="secno">5.1.2.2 </bdi>Embedded SVG</h5>
							<a class="self-link" href="#sec-xhtml-svg" aria-label="Permalink for Section 5.1.2.2"></a>
						</div>


						<p id="confreq-svg-rs-embed" data-tests="#cnt-svg-embedded">Reading systems <em class="rfc2119"
								>MUST</em> process SVG embedded in <a data-link-type="dfn" data-type="dfn"
								data-cite-href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document"
								href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document">XHTML content
								documents</a> as defined in <a href="#sec-svg" class="sec-ref"><bdi class="secno">5.2
								</bdi>SVG content documents</a>.</p>

						<section id="sec-xhtml-svg-css">
							<div class="header-wrapper">
								<h6 id="x5-1-2-2-1-embedded-svg-and-css"><bdi class="secno">5.1.2.2.1 </bdi>Embedded SVG
									and CSS</h6>
								<a class="self-link" href="#sec-xhtml-svg-css"
									aria-label="Permalink for Section 5.1.2.2.1"></a>
							</div>


							<p id="confreq-svg-rs-css-embed-ref" data-tests="#cnt-svg-css-reference">For the purposes of
								styling SVG embedded in <a data-link-type="dfn" data-type="dfn"
									data-cite-href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document"
									href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document">XHTML content
									documents</a>
								<em>by reference</em>, reading systems <em class="rfc2119">MUST NOT</em> apply CSS style
								rules of the containing document to the referenced SVG document.</p>

							<p id="confreq-svg-rs-css-embed-inc" data-tests="#cnt-svg-css-inclusion">For the purposes of
								styling SVG embedded in XHTML content documents <em>by inclusion</em>, reading systems
									<em class="rfc2119">MUST</em> apply applicable CSS rules of the containing document
								to the included SVG elements.</p>

							<div class="note" role="note" id="issue-container-generatedID-9">
								<div role="heading" class="note-title marker" id="h-note-10" aria-level="7">
									<span>Note</span>
								</div>
								<div class="">
									<p>SVG included <em>by reference</em> is processed as a separate document, and can
										include its own CSS style rules just like an <a data-link-type="dfn"
											data-type="dfn"
											href="https://www.w3.org/TR/epub-33/#dfn-svg-content-document">SVG content
											document</a> would. Note that this is consistent with situations where an
												[<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
												title="HTML Standard">html</a></cite>] <a data-lt="object"
											data-type="element"
											href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-object-element"
												><code>object</code> element</a> references an external [<cite><a
												class="bibref" data-link-type="biblio" href="#bib-html"
												title="HTML Standard">html</a></cite>] element.</p>
								</div>
							</div>
						</section>
					</section>

					<section id="sec-xhtml-forms">
						<div class="header-wrapper">
							<h5 id="x5-1-2-3-form-submission"><bdi class="secno">5.1.2.3 </bdi>Form submission</h5>
							<a class="self-link" href="#sec-xhtml-forms" aria-label="Permalink for Section 5.1.2.3"></a>
						</div>


						<p>Reading system support for the submission of [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-html" title="HTML Standard">html</a></cite>] forms is <em class="rfc2119"
								>OPTIONAL</em>. A reading system might, for example, prevent form submissions by
							limiting access to networking.</p>
					</section>
				</section>
			</section>

			<section id="sec-svg">
				<div class="header-wrapper">
					<h3 id="x5-2-svg-content-documents"><bdi class="secno">5.2 </bdi>SVG content documents</h3>
					<a class="self-link" href="#sec-svg" aria-label="Permalink for Section 5.2"></a>
				</div>


				<p id="confreq-rs-epub3-svg" class="support" data-tests="#cnt-svg-support">Reading systems <em
						class="rfc2119">MUST</em> process <a href="https://www.w3.org/TR/epub-33/#sec-svg">SVG content
						documents</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
							title="EPUB 3.3">epub-33</a></cite>].</p>

				<p>To process SVG content documents and <a href="#sec-xhtml-svg">SVG embedded in XHTML content
						documents</a>, a reading system:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-svg-rs-behavior"><em class="rfc2119">MUST</em> process SVG content documents
							using semantics defined by the [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-svg" title="SVG">svg</a></cite>] specification, and honor any applicable
							user agent conformance constraints expressed therein, unless explicitly defined by this
							specification as overridden.</p>
					</li>
					<li>
						<p id="confreq-svg-rs-scrpt"><em class="rfc2119">MUST</em> meet the conformance criteria defined
							in <a href="#sec-scripted-content" class="sec-ref"><bdi class="secno">5.4
								</bdi>Scripting</a>.</p>
					</li>
					<li>
						<p id="confreq-svg-rs-css"><em class="rfc2119">MUST</em>, if it has a <a data-link-type="dfn"
								data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-viewport">viewport</a>, support
							the visual rendering of SVG using CSS as defined in <a
								href="https://www.w3.org/TR/SVG/styling.html#">Styling</a> [<cite><a class="bibref"
									data-link-type="biblio" href="#bib-svg" title="SVG">svg</a></cite>] and it <em
								class="rfc2119">SHOULD</em> support all properties defined in the <a
								href="https://www.w3.org/TR/SVG/propidx.html#">Property Index</a> [<cite><a
									class="bibref" data-link-type="biblio" href="#bib-svg" title="SVG">svg</a></cite>].
							In the case of embedded SVG, a reading system <em class="rfc2119">MUST</em> also conform to
							the constraints defined in <a href="#sec-xhtml-svg-css" class="sec-ref"><bdi class="secno"
									>5.1.2.2.1 </bdi>Embedded SVG and CSS</a>.</p>
					</li>
				</ul>
			</section>

			<section id="sec-css">
				<div class="header-wrapper">
					<h3 id="x5-3-cascading-style-sheets-css"><bdi class="secno">5.3 </bdi>Cascading Style Sheets
						(CSS)</h3>
					<a class="self-link" href="#sec-css" aria-label="Permalink for Section 5.3"></a>
				</div>


				<p id="confreq-rs-epub3-css" class="support">If a reading system has a <a data-link-type="dfn"
						data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-viewport">viewport</a>, it <em
						class="rfc2119">MUST</em> support the <a href="https://www.w3.org/TR/epub-33/#sec-css">visual
						rendering of XHTML content documents via CSS</a> [<cite><a class="bibref"
							data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>].</p>

				<p>To support CSS, a reading system:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-css-rs-support" data-tests="#cnt-css-support"><em class="rfc2119">MUST</em>
							support the official definition of CSS as described in the [<cite><a class="bibref"
									data-link-type="biblio" href="#bib-csssnapshot" title="CSS Snapshot"
								>csssnapshot</a></cite>].</p>
					</li>
					<li>
						<p id="confreq-css-rs-modules"><em class="rfc2119">SHOULD</em> support all applicable modules in
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-csssnapshot"
									title="CSS Snapshot">csssnapshot</a></cite>] that have reached at least <a
								href="https://www.w3.org/Consortium/Process/#RecsCR">Candidate Recommendation</a> status
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-w3cprocess"
									title="W3C Process Document">w3cprocess</a></cite>] (and are widely
							implemented).</p>
					</li>
					<li>
						<p id="confreq-css-rs-fonts"><em class="rfc2119">MUST</em> support [<cite><a class="bibref"
									data-link-type="biblio" href="#bib-truetype" title="TrueType™ Reference Manual"
									>truetype</a></cite>], [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-opentype" title="OpenType specification">opentype</a></cite>], [<cite><a
									class="bibref" data-link-type="biblio" href="#bib-woff" title="WOFF File Format 1.0"
									>woff</a></cite>] and [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-woff2" title="WOFF File Format 2.0">woff2</a></cite>] font resources
							referenced from <a href="https://www.w3.org/TR/css-fonts-4/#font-face-rule"
									><code>@font-face</code> rules</a> [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-css-fonts-4" title="CSS Fonts Module Level 4"
							>css-fonts-4</a></cite>].</p>
					</li>
					<li>
						<p id="confreq-css-rs-prefixed"
							data-tests="#css-epub-hyphens, #css-epub-line-break, #css-epub-text-align-last, #css-epub-text-combine-horizontal, #css-epub-text-emphasis, #css-epub-text-orientation, #css-epub-text-transform, #css-epub-text-underline-position, #css-epub-word-break, #css-epub-writing-mode"
								><em class="rfc2119">MUST</em> support all prefixed properties defined in <a
								href="https://www.w3.org/TR/epub-33/#sec-css-prefixed">CSS Style Sheets — Prefixed
								properties</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>].</p>
					</li>
					<li>
						<p id="confreq-css-creator-styles"><em class="rfc2119">SHOULD</em> apply <a data-link-type="dfn"
								data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-creator">EPUB creator</a>
							style sheets as written to <a data-link-type="dfn" data-type="dfn"
								data-cite-href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document"
								href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document">EPUB content
								documents</a>.</p>
					</li>
					<li>
						<p id="confreq-css-overrides"><em class="rfc2119">SHOULD NOT</em> override the EPUB creator's
							style sheets, but <em class="rfc2119">SHOULD</em> do so in a way that preserves the Cascade
							when necessary: through a user agent style sheet, the <a
								href="https://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-OverrideAndComputed"
									><code>getOverrideStyle</code></a> method [<cite><a class="bibref"
									data-link-type="biblio" href="#bib-dom-level-2-style"
									title="Document Object Model (DOM) Level 2 Style Specification"
									>dom-level-2-style</a></cite>], or [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-html" title="HTML Standard">html</a></cite>] <code><a
									data-type="element-attr"
									href="https://html.spec.whatwg.org/multipage/dom.html#attr-style">style</a></code>
							attributes.</p>
					</li>
					<li>
						<p id="confreq-css-user-styles">It <em class="rfc2119">MAY</em> override parts of the EPUB
							creator's style sheet because of user interaction.</p>
					</li>
				</ul>

				<p id="confreq-css-rs-html-default">In addition to supporting CSS properties as defined above, a reading
					system's user agent style sheet <em class="rfc2119">SHOULD</em> support the [<cite><a class="bibref"
							data-link-type="biblio" href="#bib-html" title="HTML Standard">html</a></cite>] <a
						href="https://html.spec.whatwg.org/multipage/#rendering">suggested default rendering</a>.</p>

				<p>Reading system developers should implement CSS support at the level of major browsers and publicly
					document their user agent style sheets and how they interact with EPUB creator's style sheets.</p>
			</section>

			<section id="sec-scripted-content">
				<div class="header-wrapper">
					<h3 id="x5-4-scripting"><bdi class="secno">5.4 </bdi>Scripting</h3>
					<a class="self-link" href="#sec-scripted-content" aria-label="Permalink for Section 5.4"></a>
				</div>


				<p id="confreq-rs-scripted" class="support"
					data-test="#scr-support,#scr-support_iframe,#scr-support_svg">Reading systems <em class="rfc2119"
						>SHOULD</em> support <a href="https://www.w3.org/TR/epub-33/#sec-scripted-content">scripting</a>
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>].</p>

				<p>Reading system support for scripting depends on its usage context:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-rs-scripted-reflow-support">Reading systems <em class="rfc2119">SHOULD</em>
							support <a href="https://www.w3.org/TR/epub-33/#sec-scripted-container-constrained"
								>container-constrained scripting</a> [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] in reflowable EPUB content
							documents.</p>
					</li>
					<li>
						<p id="confreq-rs-scripted-fxl-support">Reading systems <em class="rfc2119">SHOULD</em> support
								<a href="https://www.w3.org/TR/epub-33/#sec-scripted-spine">spine-level scripting</a>
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>] in <a
								href="https://www.w3.org/TR/epub-33/#sec-fixed-layouts">fixed-layout documents</a>
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>].</p>
					</li>
					<li>
						<p id="confreq-rs-scripted-scrolled">Reading systems <em class="rfc2119">SHOULD</em> support
							spine-level scripting in reflowable EPUB content documents that use the <a
								href="https://www.w3.org/TR/epub-33/#flow-scrolled-doc">"<code>scrolled-doc</code>"</a>
							or <a href="https://www.w3.org/TR/epub-33/#flow-scrolled-continuous"
									>"<code>scrolled-continuous</code>"</a> [<cite><a class="bibref"
									data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>]
							presentation modes defined by <a href="#flow">the <code>rendition:flow</code> property</a>.
							Similarly, if it supports spine-level scripting in reflowable EPUB content documents, it <em
								class="rfc2119">MUST</em> implement the "<code>scrolled-doc</code>" presentation mode
							and <em class="rfc2119">SHOULD</em> implement the "<code>scrolled-continuous</code>"
							presentation mode.</p>
					</li>
					<li>
						<p id="confreq-rs-scripted-optional-support">Reading systems <em class="rfc2119">MAY</em>
							support scripting in other contexts, but this specification does not address such scripting.
							As a result, the use of scripting in these contexts may not be consistent across reading
							systems.</p>
					</li>
				</ul>

				<p>If a reading system supports scripting:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-rs-scripted-ua">It <em class="rfc2119">MAY</em> render <a data-link-type="dfn"
								data-type="dfn"
								data-cite-href="https://www.w3.org/TR/epub-33/#dfn-scripted-content-document"
								href="https://www.w3.org/TR/epub-33/#dfn-scripted-content-document">scripted content
								documents</a> as an interactive, scripted user agent according to [<cite><a
									class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard"
									>html</a></cite>].</p>
					</li>

					<li>
						<p id="confreq-rs-scripted-origin">
							<span id="confreq-rs-scripted-origin-shared" data-tests="#scr-support_origin">It <em
									class="rfc2119">MUST</em> assign a unique <a data-link-type="dfn" data-type="dfn"
									href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin"
										>origin</a>&#160;[<cite><a class="bibref" data-link-type="biblio"
										href="#bib-url" title="URL Standard">url</a></cite>], shared by all <a
									href="https://www.w3.org/TR/epub-33/#sec-scripted-spine">spine-level scripts</a> of
								the EPUB publication.</span>
							<span id="confreq-rs-scripted-origin-user" data-tests="#ocf-url_origin">That <a
									data-link-type="dfn" data-type="dfn"
									href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin"
										>origin</a>&#160;[<cite><a class="bibref" data-link-type="biblio"
										href="#bib-url" title="URL Standard">url</a></cite>] <em class="rfc2119"
									>MUST</em> be <em>unique</em> for each user-specific instance of an EPUB publication
								in a reading system.</span>
						</p>
					</li>

					<li>
						<p id="confreq-rs-scripted-container">It <em class="rfc2119">MUST NOT</em> allow a
							container-constrained script to modify the [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-dom" title="DOM Standard">dom</a></cite>] of the host EPUB content
							document or other contents in the EPUB publication and <em class="rfc2119">MUST NOT</em>
							allow it to manipulate the size of its containing rectangle. (Note: Even if a script is not
							container-constrained, the reading system <em class="rfc2119">MAY</em> impose restrictions
							on modifications (see also the <a href="#feature-dom-manipulation">dom-manipulation
								feature</a>).)</p>
					</li>
					<li>
						<p id="confreq-rs-scripted-limit">It <em class="rfc2119">MAY</em> place additional limitations
							on the capabilities provided to scripts during execution (e.g., limiting networking).</p>
					</li>
					<li>
						<p id="confreq-rs-scripted-readingsystem-object"
							data-tests="#scr-readingsystem-features,#scr-readingsystem-support,#scr-readingsystem-support_svg"
							>It <em class="rfc2119">MUST</em> extend the <a
								href="https://html.spec.whatwg.org/multipage/#the-navigator-object">navigator object</a>
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
									title="HTML Standard">html</a></cite>] with the <code>epubReadingSystem</code>
							interface defined in <a href="#app-epubReadingSystem" class="sec-ref"><bdi class="secno">15.
									</bdi><span>epubReadingSystem</span> object</a>. It also <em class="rfc2119"
								>MUST</em> support the <code>dom-manipulation</code> and <code>layout-change</code>
							features defined in <a href="#app-ers-hasFeature-features" class="sec-ref"><bdi
									class="secno">15.4.1.2 </bdi>Features</a> in container-constrained scripting
							contexts.</p>
					</li>
				</ul>

				<div class="note" id="issue-container-generatedID-10">
					<div role="heading" class="ednote-title marker" id="h-ednote" aria-level="4">
						<span>Editor's note</span>
					</div>
					<p class="">Note that the definition of <code>epubReadingSystem</code> is currently marked as "at
						risk". If, in the final version of this document, the object becomes non-normative, then each
							"<em class="rfc2119">MUST</em>" statement in the last bullet item would become a "<em
							class="rfc2119">MAY</em>".</p>
				</div>

				<p id="confreq-rs-scripted-flbk">If a reading system does not support scripting, it <em class="rfc2119"
						>MUST</em> process fallbacks for scripted content as defined in <a
						href="https://www.w3.org/TR/epub-33/#confreq-cd-scripted-flbk">Fallbacks for scripted content
						documents</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
							title="EPUB 3.3">epub-33</a></cite>].</p>

				<section id="sec-local-storage">
					<div class="header-wrapper">
						<h4 id="x5-4-1-local-storage"><bdi class="secno">5.4.1 </bdi>Local storage</h4>
						<a class="self-link" href="#sec-local-storage" aria-label="Permalink for Section 5.4.1"></a>
					</div>


					<p>Scripts may save persistent data through <a
							href="https://html.spec.whatwg.org/multipage/#dom-document-cookie">cookies</a> and <a
							href="https://html.spec.whatwg.org/multipage/#webstorage">web storage</a> [<cite><a
								class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard"
							>html</a></cite>], but reading systems <em class="rfc2119">MAY</em> block such attempts.
						Reading systems that allow users to store data <em class="rfc2119">MUST</em> ensure they do not
						make that data available to other unrelated documents (e.g., ones that could be spoofed). In
						particular, checking for a matching document identifier (or similar metadata) is not a valid
						method to control access to persistent data.</p>

					<p>Reading systems that allow <a href="https://html.spec.whatwg.org/multipage/#dom-localstorage"
							>local storage</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
								title="HTML Standard">html</a></cite>] <em class="rfc2119">SHOULD</em> provide methods
						for users to inspect or delete that data.</p>
				</section>

				<section id="sec-scripted-content-events">
					<div class="header-wrapper">
						<h4 id="x5-4-2-event-model"><bdi class="secno">5.4.2 </bdi>Event model</h4>
						<a class="self-link" href="#sec-scripted-content-events"
							aria-label="Permalink for Section 5.4.2"></a>
					</div>


					<p>Reading systems <em class="rfc2119">SHOULD</em> follow the DOM Event model as per [<cite><a
								class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard"
							>html</a></cite>] and pass UI events to the scripting environment before performing any
						default action associated with these events.</p>

					<p>Reading system developers must ensure that scripts cannot disable critical functionality (such as
						navigation) to constrain the extent to which a <a href="#sec-scripted-content-security"
							>potentially malicious</a> script could impact their reading systems. As a result, although
						the scripting environment should be able to cancel the default action of any event, some events
						either might not be passed through or might not be cancelable.</p>
				</section>

				<section id="sec-scripted-content-security" class="informative">
					<div class="header-wrapper">
						<h4 id="x5-4-3-security-considerations"><bdi class="secno">5.4.3 </bdi>Security
							considerations</h4>
						<a class="self-link" href="#sec-scripted-content-security"
							aria-label="Permalink for Section 5.4.3"></a>
					</div>
					<p><em>This section is non-normative.</em></p>


					<p>Reading system developers who also support scripting must be aware of the security issues that
						arise when reading systems execute scripted content. As the underlying scripting model employed
						by reading systems and browsers is the same, developers must take into consideration the same
						kinds of issues encountered in web contexts.</p>

					<p>Each reading system must establish if it can trust the scripts in a particular document. Reading
						systems should treat all scripts as untrusted (and potentially malicious), and developers should
						examine all vectors of attack and protect against them. In particular, developers should
						consider the following:</p>

					<ul>
						<li>
							<p>an attack against the runtime environment (e.g., stealing files from a user's hard
								drive);</p>
						</li>
						<li>
							<p>an attack against the reading system itself (e.g., stealing a list of a user's books or
								causing unexpected behavior);</p>
						</li>
						<li>
							<p>an attack of one EPUB content document against another (e.g., stealing data that
								originated in a different document);</p>
						</li>
						<li>
							<p>an attack of an unencrypted script against an encrypted portion of a document (e.g., an
								injected malicious script extracting protected content);</p>
						</li>
						<li>
							<p>an attack against the local network (e.g., stealing data from a server behind a
								firewall).</p>
						</li>
					</ul>

					<p>To limit the possible damage of untrusted scripts, this specification recommends that reading
						systems establish a unique <a data-link-type="dfn" data-type="dfn"
							href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin"
								>origin</a>&#160;[<cite><a class="bibref" data-link-type="biblio" href="#bib-url"
								title="URL Standard">url</a></cite>] allocated to each <a data-link-type="dfn"
							data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB
							publication</a> (see <a href="#sec-container-iri" class="sec-ref"><bdi class="secno">3.1.1
							</bdi>URL of the root directory</a>). Assigning a unique origin ensures that <a
							href="https://www.w3.org/TR/epub-33/#sec-scripted-spine">spine-level scripts</a> [<cite><a
								class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>] are isolated from other EPUB publications, and limits access to <a
							href="https://html.spec.whatwg.org/multipage/#dom-document-cookie">cookies</a> [<cite><a
								class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard"
							>html</a></cite>], <a href="https://html.spec.whatwg.org/multipage/#webstorage">web
							storage</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
								title="HTML Standard">html</a></cite>], etc.</p>

					<p>Examples of web APIs that are tied to the concept of "origin" include web storage [<cite><a
								class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard"
							>html</a></cite>] and IndexedDB&#160;[<cite><a class="bibref" data-link-type="biblio"
								href="#bib-indexeddb" title="Indexed Database API">indexeddb</a></cite>], which EPUB
						content documents can interact with via scripting. Reading systems that allow users to
						add/remove publications from a managed library (their "bookshelf") may maintain the
						publication's unique origin when the publication is removed and subsequently re-imported into
						the content library. Conversely, reading systems may create a new unique origin for every newly
						added publication.</p>

					<p>This specification also recommends that <a
							href="https://www.w3.org/TR/epub-33/#sec-scripted-container-constrained"
							>container-constrained scripts</a> [<cite><a class="bibref" data-link-type="biblio"
								href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] not be allowed to modify the
						DOM of the host EPUB content document and/or manipulate the containing rectangle (see <a
							href="#sec-scripted-content" class="sec-ref"><bdi class="secno">5.4
						</bdi>Scripting</a>).</p>

					<p>Note that compliance with these recommendations does not guarantee protection from the possible
						attacks listed above; developers must examine each potential vulnerability within the context of
						their reading system.</p>
				</section>
			</section>
		</section>
		<section id="sec-nav">
			<div class="header-wrapper">
				<h2 id="x6-navigation-document-processing"><bdi class="secno">6. </bdi>Navigation document
					processing</h2>
				<a class="self-link" href="#sec-nav" aria-label="Permalink for Section 6."></a>
			</div>


			<p id="sec-nav-rs-conf" class="support" data-tests="#nav-spine_in-spine">Reading systems <em class="rfc2119"
					>MUST</em> process <a href="https://www.w3.org/TR/epub-33/#sec-nav">EPUB navigation documents</a>
						[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
						>epub-33</a></cite>].</p>

			<p>To process the EPUB navigation document, a reading system:</p>

			<ul class="conformance-list">
				<li>
					<p id="confreq-nav-toc-access" data-tests="#nav-access"><em class="rfc2119">MUST</em> provide users
						access to the <a href="https://www.w3.org/TR/epub-33/#confreq-nav-a">links and headings</a> in
						the <a href="https://www.w3.org/TR/epub-33/#sec-nav-toc"><code>toc nav</code> element</a>
								[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
								>epub-33</a></cite>].</p>
				</li>
				<li>
					<p id="confreq-nav-pagelist-access"><em class="rfc2119">SHOULD</em> provide a method to navigate to
						the listed page breaks when a <a href="https://www.w3.org/TR/epub-33/#sec-nav-pagelist"
								><code>page-list nav</code> element</a> [<cite><a class="bibref" data-link-type="biblio"
								href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] is present.</p>
				</li>
				<li>
					<p id="confreq-nav-landmarks-access"><em class="rfc2119">MAY</em> provide users access to the links
						in the <a href="https://www.w3.org/TR/epub-33/#sec-nav-landmarks"><code>landmarks nav</code>
							element</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
								title="EPUB 3.3">epub-33</a></cite>] and <em class="rfc2119">MAY</em> use the links to
						enable functionality in the application.</p>
				</li>
				<li>
					<p id="confreq-nav-other-access"><em class="rfc2119">MAY</em> provide access to <code>nav</code>
						elements that do not specify an <code><a data-type="element-attr"
								href="https://www.w3.org/TR/epub-33/#dfn-epub-type">epub:type</a></code> attribute or
						that <a href="https://www.w3.org/TR/epub-33/#sec-nav-def-types-other">declare an unknown
							value</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
								title="EPUB 3.3">epub-33</a></cite>].</p>
				</li>
				<li>
					<p id="confreq-nav-activation" data-tests="#nav-activation"><em class="rfc2119">MUST</em> relocate
						the current reading position to the destination identified by an activated link when the link is
						to a <a data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-publication-resource"
							>publication resource</a>.</p>
				</li>
				<li>
					<p id="confreq-nav-ol-style" data-tests="#nav-spine_in-spine-no-list-style"><em class="rfc2119">MUST
							NOT</em> show list item numbering on <code>nav</code> elements when presenting them outside
						of the spine, regardless of support for CSS, as the default display style of list items is
						equivalent to the <a href="https://www.w3.org/TR/CSS2/generate.html#propdef-list-style"
								><code>list-style: none</code> property</a> [<cite><a class="bibref"
								data-link-type="biblio" href="#bib-csssnapshot" title="CSS Snapshot"
							>csssnapshot</a></cite>].).</p>
				</li>
			</ul>

			<p id="confreq-nav-spine" data-tests="#nav-spine_in-spine,#nav-spine_not-in-spine">Reading systems <em
					class="rfc2119">MUST</em> honor the above requirements irrespective of whether the EPUB navigation
				document is part of the <a data-link-type="dfn" data-lt="EPUB spine" data-type="dfn"
					href="https://www.w3.org/TR/epub-33/#dfn-epub-spine">spine</a>.</p>
		</section>
		<section id="sec-rendering-control">
			<div class="header-wrapper">
				<h2 id="x7-layout-rendering-control-processing"><bdi class="secno">7. </bdi>Layout rendering control
					processing</h2>
				<a class="self-link" href="#sec-rendering-control" aria-label="Permalink for Section 7."></a>
			</div>


			<section id="sec-fixed-layouts">
				<div class="header-wrapper">
					<h3 id="x7-1-fixed-layout-documents"><bdi class="secno">7.1 </bdi>Fixed-layout documents</h3>
					<a class="self-link" href="#sec-fixed-layouts" aria-label="Permalink for Section 7.1"></a>
				</div>


				<p id="confreq-rs-epub3-fxl" class="support">Reading systems <em class="rfc2119">MUST</em> support the
					rendering of <a href="https://www.w3.org/TR/epub-33/#sec-fixed-layouts">fixed-layout documents</a>
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>].</p>

				<section id="sec-fxl-props">
					<div class="header-wrapper">
						<h4 id="x7-1-1-fixed-layout-properties"><bdi class="secno">7.1.1 </bdi>Fixed-layout
							properties</h4>
						<a class="self-link" href="#sec-fxl-props" aria-label="Permalink for Section 7.1.1"></a>
					</div>


					<section id="layout">
						<div class="header-wrapper">
							<h5 id="x7-1-1-1-the-rendition-layout-property"><bdi class="secno">7.1.1.1 </bdi>The
									<code>rendition:layout</code> property</h5>
							<a class="self-link" href="#layout" aria-label="Permalink for Section 7.1.1.1"></a>
						</div>


						<p data-cite="epub-33">The default value <code>reflowable</code>
							<em class="rfc2119">MUST</em> be assumed by EPUB reading systems as the global value if no
									<code><a data-type="element" href="https://www.w3.org/TR/epub-33/#dfn-meta"
								>meta</a></code> element carrying the <a href="https://www.w3.org/TR/epub-33/#layout"
									><code>rendition:layout</code> property</a> occurs in the <a
								href="https://www.w3.org/TR/epub-33/#elemdef-opf-metadata">package document metadata</a>
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>].</p>

						<p id="layout-pre-paginated" data-tests="#fxl-layout-pre-paginated-spreads">When the
								<code>rendition:layout</code> property is set to <code>pre-paginated</code>, reading
							systems <em class="rfc2119">MUST NOT</em> include space between the adjacent content slots
							when rendering <a data-link-type="dfn" data-type="dfn"
								data-cite-href="https://www.w3.org/TR/epub-33/#dfn-synthetic-spread"
								href="https://www.w3.org/TR/epub-33/#dfn-synthetic-spread">synthetic spreads</a>.</p>

						<p>The <code>rendition:layout</code> property values have the following processing
							requirements:</p>

						<dl class="variablelist">
							<dt id="def-layout-reflowable">reflowable</dt>
							<dd>
								<p>Reading systems <em class="rfc2119">MAY</em> apply dynamic pagination when
									rendering.</p>
							</dd>
							<dt id="def-layout-pre-paginated" data-tests="#fxl-layout-pre-paginated">pre-paginated</dt>
							<dd>
								<p>Reading systems <em class="rfc2119">MUST</em> produce exactly one page per spine
											<code><a data-type="element"
											href="https://www.w3.org/TR/epub-33/#dfn-itemref">itemref</a></code>
											[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
											title="EPUB 3.3">epub-33</a></cite>] when rendering.</p>
							</dd>
						</dl>

						<p>When a spine <code>itemref</code> element's <a
								href="https://www.w3.org/TR/epub-33/#attrdef-properties"><code>properties</code>
								attribute</a> contains an <a href="https://www.w3.org/TR/epub-33/#layout-overrides"
								>override of the global rendition:layout property</a> [<cite><a class="bibref"
									data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>],
							reading systems <em class="rfc2119">MUST</em> follow the requirements for the override's
							global value when displaying that spine item (e.g., a spine item that specifies
								<code>layout-prepaginated</code> is rendered following the requirements of the global
								<code>pre-paginated</code> value).</p>
					</section>

					<section id="orientation">
						<div class="header-wrapper">
							<h5 id="x7-1-1-2-the-rendition-orientation-property"><bdi class="secno">7.1.1.2 </bdi>The
									<code>rendition:orientation</code> property</h5>
							<a class="self-link" href="#orientation" aria-label="Permalink for Section 7.1.1.2"></a>
						</div>


						<p id="fxl-orientation-default" data-tests="#fxl-orientation-default" data-cite="epub-33">The
							default value <code>auto</code>
							<em class="rfc2119">MUST</em> be assumed by EPUB reading systems as the global value if no
									<code><a data-type="element" href="https://www.w3.org/TR/epub-33/#dfn-meta"
								>meta</a></code> element carrying the <a
								href="https://www.w3.org/TR/epub-33/#orientation"><code>rendition:orientation</code>
								property</a> occurs in the <a href="https://www.w3.org/TR/epub-33/#elemdef-opf-metadata"
								>package document metadata</a> [<cite><a class="bibref" data-link-type="biblio"
									href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>].</p>

						<p>The <code>rendition:orientation</code> property values have the following processing
							requirements:</p>

						<dl class="variablelist">
							<dt id="def-orientation-auto">auto</dt>
							<dd>
								<p>The reading system determines the orientation in which to render the content.</p>
							</dd>

							<dt id="def-orientation-landscape" data-tests="#fxl-orientation-landscape">landscape</dt>
							<dd>
								<p>Reading systems that support multiple orientations <em class="rfc2119">SHOULD</em>
									render the content in landscape orientation.</p>
							</dd>

							<dt id="def-orientation-portrait">portrait</dt>
							<dd>
								<p>Reading systems that support multiple orientations <em class="rfc2119">SHOULD</em>
									render the content in portrait orientation.</p>
							</dd>
						</dl>

						<p>The means by which they convey the intent is implementation specific.</p>
					</section>

					<section id="spread">
						<div class="header-wrapper">
							<h5 id="x7-1-1-3-the-rendition-spread-property"><bdi class="secno">7.1.1.3 </bdi>The
									<code>rendition:spread</code> property</h5>
							<a class="self-link" href="#spread" aria-label="Permalink for Section 7.1.1.3"></a>
						</div>


						<p id="fxl-spread-default" data-tests="#fxl-spread-default" data-cite="epub-33">The default
							value <code>auto</code>
							<em class="rfc2119">MUST</em> be assumed by EPUB reading systems as the global value if no
									<code><a data-type="element" href="https://www.w3.org/TR/epub-33/#dfn-meta"
								>meta</a></code> element carrying the <a href="https://www.w3.org/TR/epub-33/#spread"
									><code>rendition:spread</code></a> property occurs in the <a
								href="https://www.w3.org/TR/epub-33/#elemdef-opf-metadata">package document metadata</a>
									[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>].</p>

						<p>The <code>rendition:spread</code> property values have the following processing
							requirements:</p>

						<dl class="variablelist">
							<dt id="def-spread-none" data-tests="#fxl-spread-none">none</dt>
							<dd>
								<p>Reading systems <em class="rfc2119">MUST NOT</em> incorporate spine items in a <a
										data-link-type="dfn" data-type="dfn"
										href="https://www.w3.org/TR/epub-33/#dfn-synthetic-spread">synthetic spread</a>.
									Reading systems <em class="rfc2119">SHOULD</em> create a single <a
										data-link-type="dfn" data-type="dfn"
										href="https://www.w3.org/TR/epub-33/#dfn-viewport">viewport</a> positioned at
									the center of the screen.</p>
							</dd>
							<dt id="def-spread-landscape" data-tests="#fxl-spread-landscape">landscape</dt>
							<dd>
								<p>Reading systems <em class="rfc2119">SHOULD</em> render a synthetic spread for spine
									items only when the device is in landscape orientation.</p>
							</dd>
							<dt id="def-spread-portrait">portrait (deprecated)</dt>
							<dd>
								<p>Reading systems <em class="rfc2119">SHOULD</em> treat the value
										"<code>portrait</code>" as a synonym of "<code>both</code>" and create spreads
									regardless of orientation.</p>
							</dd>
							<dt id="def-spread-both" data-tests="#fxl-spread-both">both</dt>
							<dd>
								<p>Reading systems <em class="rfc2119">SHOULD</em> render a synthetic spread regardless
									of device orientation.</p>
							</dd>
							<dt id="def-spread-auto" data-tests="#fxl-spread-auto">auto</dt>
							<dd>
								<p>Reading systems <em class="rfc2119">MAY</em> use synthetic spreads in specific or all
									device orientations as part of a <a data-link-type="dfn"
										href="#dfn-content-display-area" class="internalDFN"
										id="ref-for-dfn-content-display-area-1">content display area</a> utilization
									optimization process.</p>
							</dd>
						</dl>
					</section>

					<section id="page-spread">
						<div class="header-wrapper">
							<h5 id="x7-1-1-4-the-rendition-page-spread-properties"><bdi class="secno">7.1.1.4 </bdi>The
									<code>rendition:page-spread-*</code> properties</h5>
							<a class="self-link" href="#page-spread" aria-label="Permalink for Section 7.1.1.4"></a>
						</div>


						<p>The <a href="https://www.w3.org/TR/epub-33/#fxl-page-spread-left"><span id="page-spread-left"
									data-tests="#fxl-page-spread-left"><code>rendition:page-spread-left</code></span>
								property</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>] indicates that the given spine item <em
								class="rfc2119">SHOULD</em> be rendered in the left-hand slot in the spread, and <a
								href="https://www.w3.org/TR/epub-33/#fxl-page-spread-right"><span id="page-spread-right"
										><code>rendition:page-spread-right</code></span> property</a> [<cite><a
									class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
									>epub-33</a></cite>] that it <em class="rfc2119">SHOULD</em> be rendered in the
							right-hand slot.</p>

						<p>Reading systems that support the <a href="#def-spread-none"><code>spread-none</code>
								property</a>
							<em class="rfc2119">MUST</em> recognize the <a
								href="https://www.w3.org/TR/epub-33/#page-spread-center"><span id="page-spread-center"
										><code>rendition:page-spread-center</code></span> property</a> as an alias for
							it, otherwise they <em class="rfc2119">MUST</em> ignore the
								<code>rendition:page-spread-center</code> property.</p>

						<p>The <code>rendition:page-spread-left</code> and <code>rendition:page-spread-right</code>
							properties apply to both pre-paginated and reflowable content, and they only apply when the
							reading system is creating synthetic spreads.</p>

						<p>The <code id="page-break-precedence">rendition:page-spread-*</code> properties <em
								class="rfc2119">MUST</em> take precedence over whatever value of the <a
								href="https://www.w3.org/TR/CSS2/page.html#propdef-page-break-before"
									><code>page-break-before</code> property</a> [<cite><a class="bibref"
									data-link-type="biblio" href="#bib-csssnapshot" title="CSS Snapshot"
								>csssnapshot</a></cite>] has been set for an <a data-link-type="dfn" data-type="dfn"
								href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document">XHTML content
								document</a>.</p>

						<p id="page-layout-both" data-tests="#page-layout-both">When a <a href="#def-layout-reflowable"
								>reflowable</a> spine item follows a <a href="#def-layout-pre-paginated"
								>pre-paginated</a> one, the reflowable one <em class="rfc2119">SHOULD</em> start on the
							next page — as defined by the <a
								href="https://www.w3.org/TR/epub-33/#attrdef-spine-page-progression-direction"
									><code>page-progression-direction</code> attribute</a> [<cite><a class="bibref"
									data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] —
							when it lacks a <code>rendition:page-spread-*</code> property value.</p>

						<p id="page-spread-flow" data-tests="#page-layout-both-flow">If the reflowable spine item has a
								<code>rendition:page-spread-*</code> specification, it <em class="rfc2119">MUST</em> be
							honored (e.g., by inserting a blank page).</p>

						<p>Similarly, when a pre-paginated spine item follows a reflowable one, the pre-paginated one
								<em class="rfc2119">SHOULD</em> start on the next page (as defined by the
								<code>page-progression-direction</code> attribute) when it lacks a
								<code>rendition:page-spread-*</code> property value. If the pre-paginated spine item has
							a <code>rendition:page-spread-*</code> specification, it <em class="rfc2119">MUST</em> be
							honored (e.g., by inserting a blank page).</p>

						<p id="fxl-page-spread-combined" data-tests="#fxl-page-spread-combined">When a reading system
							encounters two spine items that represent a true spread (i.e., two adjacent spine items with
							the <code>rendition:page-spread-left</code> and <code>rendition:page-spread-right</code>
							properties), it <em class="rfc2119">SHOULD</em> create the spread with no space between the
							adjacent pages.</p>
					</section>
				</section>

				<section id="sec-fxl-dimensions">
					<div class="header-wrapper">
						<h4 id="x7-1-2-initial-containing-block-dimensions"><bdi class="secno">7.1.2 </bdi>Initial
							containing block dimensions</h4>
						<a class="self-link" href="#sec-fxl-dimensions" aria-label="Permalink for Section 7.1.2"></a>
					</div>


					<dl>
						<dt>XHTML</dt>
						<dd>
							<p>Reading systems <em class="rfc2119">MUST</em> use the width and height expressions as
								defined in <a href="https://www.w3.org/TR/epub-33/#sec-fxl-icb-html">Expressing in
									HTML</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
										title="EPUB 3.3">epub-33</a></cite>] to render <a data-link-type="dfn"
									data-type="dfn"
									data-cite-href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document"
									href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document">XHTML content
									documents</a>.</p>
							<p id="confreq-fxl-rs-xhtml-icb" data-tests="#fxl-xhtml-icb">Reading systems <em
									class="rfc2119">MUST</em> clip XHTML content to the initial containing block (ICB)
								dimensions declared in the <code>viewport</code>
								<code>meta</code> tag — content positioned outside of the initial containing block will
								not be visible. When the ICB aspect ratio does not match the aspect ratio of the reading
								system <a data-link-type="dfn" href="#dfn-content-display-area" class="internalDFN"
									id="ref-for-dfn-content-display-area-2">content display area</a>, reading systems
									<em class="rfc2119">MAY</em> position the ICB inside the area to accommodate the
								user interface; in other words, added letter-boxing space <em class="rfc2119">MAY</em>
								appear on either side (or both) of the content.</p>
						</dd>

						<dt>SVG</dt>
						<dd>
							<p id="confreq-fxl-rs-svg">Reading systems <em class="rfc2119">MUST</em> use the dimensions
								as defined in <a href="https://www.w3.org/TR/epub-33/#sec-fxl-icb-svg">Expressing the
									ICB in SVG</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
										title="EPUB 3.3">epub-33</a></cite>] to render <a data-link-type="dfn"
									data-type="dfn"
									data-cite-href="https://www.w3.org/TR/epub-33/#dfn-svg-content-document"
									href="https://www.w3.org/TR/epub-33/#dfn-svg-content-document">SVG content
									documents</a>.</p>
						</dd>
					</dl>
				</section>

				<section id="sec-fxl-viewport">
					<div class="header-wrapper">
						<h4 id="x7-1-3-viewport-rendering"><bdi class="secno">7.1.3 </bdi>Viewport rendering</h4>
						<a class="self-link" href="#sec-fxl-viewport" aria-label="Permalink for Section 7.1.3"></a>
					</div>


					<p>When rendering <a data-link-type="dfn" data-type="dfn"
							data-cite-href="https://www.w3.org/TR/epub-33/#dfn-fixed-layout-document"
							href="https://www.w3.org/TR/epub-33/#dfn-fixed-layout-document">fixed-layout documents</a>,
						the default intent is that the <a href="#dfn-content-display-area" class="internalDFN"
							data-link-type="dfn" id="ref-for-dfn-content-display-area-3">content display area</a>
						<em class="rfc2119">SHOULD</em> occupy as much of the available <a data-link-type="dfn"
							data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-viewport">viewport</a> area as
						possible. Reading systems <em class="rfc2119">SHOULD NOT</em> inject additional content such as
						border, margins, headers, or footers into the viewport.</p>

					<div class="note" role="note" id="issue-container-generatedID-11">
						<div role="heading" class="note-title marker" id="h-note-11" aria-level="5">
							<span>Note</span>
						</div>
						<div class="">
							<p>This specification does not define how the <a
									href="https://www.w3.org/TR/CSS2/visudet.html#containing-block-details">initial
									containing block</a> [<cite><a class="bibref" data-link-type="biblio"
										href="#bib-css2"
										title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification"
										>css2</a></cite>] is placed within the reading system <a
									href="#dfn-content-display-area" class="internalDFN" data-link-type="dfn"
									id="ref-for-dfn-content-display-area-4">content display area</a>.</p>
						</div>
					</div>

					<div class="note" role="note" id="issue-container-generatedID-12">
						<div role="heading" class="note-title marker" id="h-note-12" aria-level="5">
							<span>Note</span>
						</div>
						<div class="">
							<p>The exposure of reading system control widgets to the user is implementation-specific and
								not included in the above behavioral expectations.</p>
						</div>
					</div>
				</section>
			</section>

			<section id="sec-reflowable-layouts">
				<div class="header-wrapper">
					<h3 id="x7-2-reflowable-layouts"><bdi class="secno">7.2 </bdi>Reflowable layouts</h3>
					<a class="self-link" href="#sec-reflowable-layouts" aria-label="Permalink for Section 7.2"></a>
				</div>


				<p id="confreq-rs-epub3-presentational-meta" class="support">Reading systems <em class="rfc2119"
						>SHOULD</em> process the <a href="https://www.w3.org/TR/epub-33/#sec-reflowable-layouts"
						>reflowable layout properties</a> [<cite><a class="bibref" data-link-type="biblio"
							href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>].</p>

				<section id="flow">
					<div class="header-wrapper">
						<h4 id="x7-2-1-the-rendition-flow-property"><bdi class="secno">7.2.1 </bdi>The
								<code>rendition:flow</code> property</h4>
						<a class="self-link" href="#flow" aria-label="Permalink for Section 7.2.1"></a>
					</div>


					<p>If a reading system supports the specified rendering, it <em class="rfc2119">SHOULD</em> use that
						method to handle overflow content, but <em class="rfc2119">MAY</em> provide the option for users
						to override the requested rendering.</p>

					<p>The default global value is <code>auto</code> if no <code>meta</code> element carrying this
						property occurs in the <a href="https://www.w3.org/TR/epub-33/#elemdef-opf-metadata"
								><code>metadata</code> section</a> [<cite><a class="bibref" data-link-type="biblio"
								href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>]. Reading systems <em
							class="rfc2119">MAY</em> support only this default value.</p>

					<p>The <code>rendition:flow</code> property values have the following processing requirements:</p>

					<dl class="variablelist">
						<dt id="paginated">paginated</dt>
						<dd id="paginated-dd" data-tests="#pkg-flow-paginated">
							<p>The reading system <em class="rfc2119">SHOULD</em> dynamically paginate all overflow
								content.</p>
						</dd>

						<dt id="scrolled-continuous">scrolled-continuous</dt>
						<dd id="scrolled-continuous-dd" data-tests="#pkg-flow-scrolled-continuous">
							<p>The reading system <em class="rfc2119">SHOULD</em> render all EPUB content documents such
								that overflow content is scrollable, and <em class="rfc2119">SHOULD</em> present the
								EPUB publication as one continuous scroll from spine item to spine item (except where <a
									href="https://www.w3.org/TR/epub-33/#layout-property-flow-overrides">locally
									overridden</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
										title="EPUB 3.3">epub-33</a></cite>]).</p>
						</dd>

						<dt id="scrolled-doc">scrolled-doc</dt>
						<dd id="scrolled-doc-dd" data-tests="#pkg-flow-scrolled-doc">
							<p>The reading system <em class="rfc2119">SHOULD</em> render all EPUB content documents such
								that users can scroll overflow content, and <em class="rfc2119">SHOULD</em> present each
								spine item as a separate scrollable document.</p>
						</dd>

						<dt id="auto">auto</dt>
						<dd>
							<p>The reading system <em class="rfc2119">MAY</em> render overflow content using its default
								method or a user preference, whichever is applicable.</p>
						</dd>
					</dl>

					<p>For the <code>rendition:flow-scrolled-continuous</code> property, the scroll direction <em
							class="rfc2119">MUST</em> be defined relative to the block flow direction of the root
						element of the XHTML content document referenced by the <code><a data-type="element"
								href="https://www.w3.org/TR/epub-33/#dfn-itemref">itemref</a></code> element [<cite><a
								class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>]. The scroll direction <em class="rfc2119">MUST</em> be vertical if the
						block flow direction is downward (top-to-bottom). It <em class="rfc2119">MUST</em> be horizontal
						if the block flow direction of the root element is rightward (left-to-right) or leftward
						(right-to-left).</p>

					<p>Reading systems <em class="rfc2119">MUST</em> ignore the <code>rendition:flow</code> property and
						its overrides when processing <a href="https://www.w3.org/TR/epub-33/#def-layout-pre-paginated"
							>pre-paginated spine items</a> [<cite><a class="bibref" data-link-type="biblio"
								href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>].</p>
				</section>

				<section id="align-x-center">
					<div class="header-wrapper">
						<h4 id="x7-2-2-the-rendition-align-x-center-property"><bdi class="secno">7.2.2 </bdi>The
								<code>rendition:align-x-center</code> property</h4>
						<a class="self-link" href="#align-x-center" aria-label="Permalink for Section 7.2.2"></a>
					</div>


					<p>When the <a href="#align-x-center"><code>rendition:align-x-center</code> property</a> is set on a
						spine item, reading systems <em class="rfc2119">SHOULD</em> render the content centered
						horizontally within the <a data-link-type="dfn" data-type="dfn"
							href="https://www.w3.org/TR/epub-33/#dfn-viewport">viewport</a> or spread, as applicable.
						This property does not affect the rendering of the spine item, only the placement of the
						resulting content box.</p>

					<p>For reflowable content, reading systems that support this property <em class="rfc2119">MUST</em>
						center each virtual page.</p>

					<p>This specification does not define a default rendering behavior when reading systems do not
						support this property or EPUB creators do not specify it. Reading systems <em class="rfc2119"
							>MAY</em> render spine items by their own design.</p>
				</section>
			</section>

			<section id="sec-custom-properties">
				<div class="header-wrapper">
					<h3 id="x7-3-custom-properties"><bdi class="secno">7.3 </bdi>Custom properties</h3>
					<a class="self-link" href="#sec-custom-properties" aria-label="Permalink for Section 7.3"></a>
				</div>


				<p>Reading systems <em class="rfc2119">MAY</em> support custom properties provided they do not introduce
					expressions that conflict behaviorally with the properties defined in the <a
						href="https://www.w3.org/TR/epub-33/#app-rendering-vocab">Package rendering vocabulary</a>
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>].</p>
			</section>
		</section>
		<section id="sec-media-overlays">
			<div class="header-wrapper">
				<h2 id="x8-media-overlays-processing"><bdi class="secno">8. </bdi>Media overlays processing</h2>
				<a class="self-link" href="#sec-media-overlays" aria-label="Permalink for Section 8."></a>
			</div>


			<p id="confreq-rs-epub3-mo" class="support">Reading systems with the capability to render prerecorded audio
					<em class="rfc2119">SHOULD</em> support <a href="https://www.w3.org/TR/epub-33/#sec-media-overlays"
					>media overlays</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
						title="EPUB 3.3">epub-33</a></cite>].</p>

			<p>If a reading system does not support media overlays, it <em class="rfc2119">MUST</em> ignore both:</p>

			<ul>
				<li>the <a href="https://www.w3.org/TR/epub-33/#attrdef-item-media-overlay"><code>media-overlay</code>
						attribute</a> on <a data-link-type="dfn" data-lt="EPUB manifest" data-type="dfn"
						href="https://www.w3.org/TR/epub-33/#dfn-epub-manifest">manifest</a>
					<code><a data-type="element" href="https://www.w3.org/TR/epub-33/#dfn-item">item</a></code> elements
							[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>]; and</li>
				<li><code>item</code> elements where the <code>media-type</code> attribute value equals
						<code>application/smil+xml</code>.</li>
			</ul>

			<section id="sec-behaviors-loading">
				<div class="header-wrapper">
					<h3 id="x8-1-loading-the-media-overlay"><bdi class="secno">8.1 </bdi>Loading the media overlay</h3>
					<a class="self-link" href="#sec-behaviors-loading" aria-label="Permalink for Section 8.1"></a>
				</div>


				<p>When a reading system loads a <a data-link-type="dfn" data-type="dfn"
						href="https://www.w3.org/TR/epub-33/#dfn-package-document">package document</a>, it <em
						class="rfc2119">MUST</em> refer to the <a data-link-type="dfn" data-lt="EPUB manifest"
						data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-manifest">manifest</a>
					<code><a data-type="element" href="https://www.w3.org/TR/epub-33/#dfn-item">item</a></code>
					elements' [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>] <code>media-overlay</code> attributes to discover the corresponding
					media overlays for <a data-link-type="dfn" data-type="dfn"
						data-cite-href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document"
						href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document">EPUB content documents</a>.</p>

				<p id="confreq-rs-xhtml-svg">Reading systems <em class="rfc2119">MUST</em> support playback for <a
						data-link-type="dfn" data-type="dfn"
						data-cite-href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document"
						href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document">XHTML content documents</a>,
					and <em class="rfc2119">MAY</em> support <a data-link-type="dfn" data-type="dfn"
						data-cite-href="https://www.w3.org/TR/epub-33/#dfn-svg-content-document"
						href="https://www.w3.org/TR/epub-33/#dfn-svg-content-document">SVG content documents</a>.</p>

				<p>Playback <em class="rfc2119">MUST</em> start at the media overlay element which corresponds to the
					desired EPUB content document starting point. Note that the start of an EPUB content document <em
						class="rfc2119">MAY</em> correspond to an element at the start or in the middle of a media
					overlay. When the media overlay document finishes playing, the reading system <em class="rfc2119"
						>SHOULD</em> load the next EPUB content document (as specified in the package document <a
						data-link-type="dfn" data-lt="EPUB spine" data-type="dfn"
						href="https://www.w3.org/TR/epub-33/#dfn-epub-spine">spine</a>) and also load its corresponding
					media overlay document, provided that one is given.</p>
			</section>

			<section id="sec-behaviors-playback">
				<div class="header-wrapper">
					<h3 id="x8-2-basic-playback"><bdi class="secno">8.2 </bdi>Basic playback</h3>
					<a class="self-link" href="#sec-behaviors-playback" aria-label="Permalink for Section 8.2"></a>
				</div>


				<section id="sec-rsconf-timing-synch">
					<div class="header-wrapper">
						<h4 id="x8-2-1-timing-and-synchronization"><bdi class="secno">8.2.1 </bdi>Timing and
							synchronization</h4>
						<a class="self-link" href="#sec-rsconf-timing-synch" aria-label="Permalink for Section 8.2.1"
						></a>
					</div>


					<p id="mol-timing-sync"
						data-tests="#mol-timing-synchronization,#mol-css,#mol-timing-synchronization_fxl,#mol-timing-synchronization_svg,#mol-timing-synchronization_multiple_audio"
						>Reading systems <em class="rfc2119">MUST</em> render immediate children of the <a
							href="https://www.w3.org/TR/epub-33/#elemdef-smil-body"><code>body</code> element</a>
								[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
								>epub-33</a></cite>] in a sequence. A <a
							href="https://www.w3.org/TR/epub-33/#elemdef-smil-seq"><code>seq</code> element's</a>
								[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
								>epub-33</a></cite>] children <em class="rfc2119">MUST</em> be rendered in sequence, and
						playback completes when the last child finishes playing. Reading system <em class="rfc2119"
							>MUST</em> render a <a href="https://www.w3.org/TR/epub-33/#elemdef-smil-par"
								><code>par</code> element's</a> [<cite><a class="bibref" data-link-type="biblio"
								href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] children in parallel (with each
						starting at the same time), and playback completes when all the children finish playing. Reading
						system playback of the media overlay document completes when the <code>body</code> element's
						last child finishes playing.</p>
				</section>

				<section id="sec-rsconf-rendering-audio">
					<div class="header-wrapper">
						<h4 id="x8-2-2-rendering-audio"><bdi class="secno">8.2.2 </bdi>Rendering audio</h4>
						<a class="self-link" href="#sec-rsconf-rendering-audio" aria-label="Permalink for Section 8.2.2"
						></a>
					</div>


					<p>When presented with a media overlay <a href="https://www.w3.org/TR/epub-33/#elemdef-smil-audio"
								><code>audio</code> element</a>, reading systems <em class="rfc2119">MUST</em> play the
						audio resource referenced by the <code>src</code> attribute, starting at the clip offset time
						given by the <a href="https://www.w3.org/TR/epub-33/#attrdef-smil-clipBegin"
								><code>clipBegin</code> attribute</a> and ending at the clip offset time given by the <a
							href="https://www.w3.org/TR/epub-33/#attrdef-smil-clipEnd"><code>clipEnd</code>
							attribute</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
								title="EPUB 3.3">epub-33</a></cite>].</p>

					<p>In addition:</p>

					<ul>
						<li id="mol-audio-no-clipbegin" data-tests="#mol-audio-no-clipbegin">
							<p>If the EPUB creator has not specified a <code>clipBegin</code> attribute, reading systems
									<em class="rfc2119">MUST</em> assume the value "<code>0</code>".</p>
						</li>
						<li id="mol-audio-no-clipend" data-tests="#mol-audio-no-clipend">
							<p>If the EPUB creator has not specified a <code>clipEnd</code> attribute, reading systems
									<em class="rfc2119">MUST</em> assume the value to be the full duration of the
								physical media.</p>
						</li>
						<li id="mol-audio-exceeding-clipend" data-tests="#mol-audio-exceeding-clipend">
							<p>If the value of <code>clipEnd</code> exceeds the full duration of the physical media,
								reading systems <em class="rfc2119">MUST</em> assume its value to be the full duration
								of the physical media.</p>
						</li>
					</ul>

					<p>User-controllable audio playback options <em class="rfc2119">SHOULD</em> include timescale
						modification, in which the user can alter the playback rate without distorting the pitch. The
						suggested range is half-speed to double-speed.</p>

				</section>

				<section id="sec-rsconf-rendering-text">
					<div class="header-wrapper">
						<h4 id="x8-2-3-rendering-epub-content-document-elements"><bdi class="secno">8.2.3
							</bdi>Rendering EPUB content document elements</h4>
						<a class="self-link" href="#sec-rsconf-rendering-text" aria-label="Permalink for Section 8.2.3"
						></a>
					</div>


					<p>When presented with a media overlay <a href="https://www.w3.org/TR/epub-33/#elemdef-smil-text"
								><code>text</code> element</a> [<cite><a class="bibref" data-link-type="biblio"
								href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] whose <code>src</code>
						attribute contains a <a data-type="dfn" href="https://url.spec.whatwg.org/#url-fragment-string"
							>URL-fragment string</a> referencing a specific part of an EPUB content document, reading
						systems <em class="rfc2119">SHOULD</em> ensure the referenced portion is visible in the <a
							data-link-type="dfn" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-viewport"
							>viewport</a>. In addition to [<cite><a class="bibref" data-link-type="biblio"
								href="#bib-html" title="HTML Standard">html</a></cite>] element ID references and <a
							href="https://www.w3.org/TR/SVG/linking.html#SVGFragmentIdentifiers">SVG Fragment
							Identifiers</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-svg" title="SVG"
								>svg</a></cite>], reading systems <em class="rfc2119">MAY</em> support other fragment
						identifier schemes.</p>

					<p id="mol-rendering-with-styling"
						data-tests="#mol-css,#mol-timing-synchronization_fxl,#mol-timing-synchronization_svg">During
						media overlays playback, reading systems with a viewport <em class="rfc2119">SHOULD</em> add the
						class names given by the metadata properties <a
							href="https://www.w3.org/TR/epub-33/#active-class"><code>active-class</code></a> and <a
							href="https://www.w3.org/TR/epub-33/#playback-active-class"
								><code>playback-active-class</code></a> [<cite><a class="bibref" data-link-type="biblio"
								href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] to the appropriate elements,
						when specified, in the EPUB content document. Conversely, the class names <em class="rfc2119"
							>SHOULD</em> be removed when the playback state changes, as described in <a
							href="https://www.w3.org/TR/epub-33/#sec-docs-assoc-style">Associating style information</a>
								[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
								>epub-33</a></cite>].</p>

					<p>The <code>active-class</code> and <code>playback-active-class</code> metadata properties are <em
							class="rfc2119">OPTIONAL</em>, and if omitted, reading system behavior is
						implementation-specific.</p>

					<p>Reading system behavior when a <a
							href="https://www.w3.org/TR/epub-33/#sec-media-overlays-fragids">fragment identifier</a>
								[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
								>epub-33</a></cite>] does not reference an element is also implementation-specific.</p>
				</section>
			</section>

			<section id="sec-behaviors-interaction">
				<div class="header-wrapper">
					<h3 id="x8-3-interacting-with-the-epub-content-document"><bdi class="secno">8.3 </bdi>Interacting
						with the EPUB content document</h3>
					<a class="self-link" href="#sec-behaviors-interaction" aria-label="Permalink for Section 8.3"></a>
				</div>


				<section id="sec-rsconf-navigation">
					<div class="header-wrapper">
						<h4 id="x8-3-1-navigation"><bdi class="secno">8.3.1 </bdi>Navigation</h4>
						<a class="self-link" href="#sec-rsconf-navigation" aria-label="Permalink for Section 8.3.1"></a>
					</div>


					<p>Because the media overlay is closely linked to the <a data-link-type="dfn" data-type="dfn"
							href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document">EPUB content document</a>,
						it is very easy for reading systems to locate a position in the EPUB content document based on
						the current position in the media overlay playback. If the user pauses synchronized playback and
						navigates to a different part of the <a data-link-type="dfn" data-type="dfn"
							href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publication</a>,
						synchronized playback <em class="rfc2119">MUST</em> resume at that point. For example, if a
						specific page number in the EPUB content document is the desired location, then this same point
						is located in the media overlay and playback started there.</p>

					<p>This same approach allows for synchronizing the media overlay playback with user selection of a
						navigation point in the <a data-link-type="dfn" data-type="dfn"
							href="https://www.w3.org/TR/epub-33/#dfn-epub-navigation-document">EPUB navigation
							document</a>. The reading system loads the media overlay for that file and finds the correct
						point for starting playback based on the ID of the navigation point target.</p>

					<div class="note" role="note" id="issue-container-generatedID-13">
						<div role="heading" class="note-title marker" id="h-note-13" aria-level="5">
							<span>Note</span>
						</div>
						<div class="">
							<p>EPUB creators may associate a media overlay document directly with an <a data-type="dfn"
									href="https://www.w3.org/TR/epub-33/#dfn-epub-navigation-document">EPUB navigation
									document</a>t in order to provide synchronized playback of its contents, regardless
								of whether the <a data-link-type="dfn" data-type="dfn"
									href="https://www.w3.org/TR/epub-33/#dfn-xhtml-content-document">XHTML content
									document</a> in which it resides is included in the <a data-link-type="dfn"
									data-lt="EPUB spine" data-type="dfn"
									href="https://www.w3.org/TR/epub-33/#dfn-epub-spine">spine</a>. See <a
									href="https://www.w3.org/TR/epub-33/#sec-mo-nav-doc">EPUB navigation document</a>
										[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
										title="EPUB 3.3">epub-33</a></cite>] for more information.</p>
						</div>
					</div>

					<div class="note" role="note" id="note-table-reading-mode">
						<div role="heading" class="note-title marker" id="h-note-14" aria-level="5">
							<span>Note</span>
						</div>
						<div class="">
							<p>EPUB creators may associate media overlay document elements with EPUB content document
								structures such as tables. Reading systems should ensure that media overlay playback
								remains synchronized with user navigation of table rows and cells. The reading system
								might also play the corresponding table header preceding the contents of the cell.</p>
						</div>
					</div>
				</section>

				<section id="sec-embedded-media">
					<div class="header-wrapper">
						<h4 id="x8-3-2-embedded-audio-and-video"><bdi class="secno">8.3.2 </bdi>Embedded audio and
							video</h4>
						<a class="self-link" href="#sec-embedded-media" aria-label="Permalink for Section 8.3.2"></a>
					</div>


					<p>An <a data-link-type="dfn" data-type="dfn"
							href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document">EPUB content document</a>
						with which a media overlay is associated <em class="rfc2119">MAY</em> itself contain embedded
						video and audio media. The media overlay elements <em class="rfc2119">MAY</em> point to these
						elements. Unlike text and images, video and audio media have an intrinsic duration. <span
							id="mol-embed-override" data-tests="#mol-embed,#mol-embed_fxl">Consequently, when a reading
							system renders the synchronization described by a media overlay, it <em class="rfc2119"
								>MUST</em> override the default playback behavior of audio and video media embedded
							within the associated EPUB content document.</span></p>

					<p>Note that the rules below apply only to <em>referenced</em> [<cite><a class="bibref"
								data-link-type="biblio" href="#bib-html" title="HTML Standard">html</a></cite>] <span
							data-cite="html"><code><a data-type="element"
									href="https://html.spec.whatwg.org/multipage/media.html#video">video</a></code> or
									<code><a data-type="element"
									href="https://html.spec.whatwg.org/multipage/media.html#audio"
							>audio</a></code></span> elements within the associated EPUB content document. That is to
						say, the rules apply to only those elements pointed to by <code><a data-type="element"
								href="https://www.w3.org/TR/epub-33/#dfn-text">text</a></code> elements [<cite><a
								class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>] within the media overlay (i.e., via the <code>src</code> attribute).
						These rules do not apply to embedded media not referenced by media overlay elements.</p>

					<ul>
						<li>
							<p id="mol-embed-deactivate-playback" data-tests="#mol-embed_deactivate_playback">Reading
								systems <em class="rfc2119">MUST</em> deactivate the public playback interface for all
								referenced audio and video media embedded within an EPUB content document (typically:
								play/pause control, time slider, volume level, etc.). This behavior avoids interference
								between the scheduled playback sequence defined by the media overlay, and the arbitrary
								playback behavior due to user interaction or script execution. As a result, when the
								reading system is in playback mode, it <em class="rfc2119">SHOULD</em>:</p>
							<ul>
								<li>
									<p>Hide the individual video/audio UI controls from the page, which overrides the
										default behavior defined by the [<cite><a class="bibref" data-link-type="biblio"
												href="#bib-html" title="HTML Standard">html</a></cite>] <code><a
												data-type="element-attr"
												href="https://html.spec.whatwg.org/multipage/media.html#attr-media-controls"
												>controls</a></code> attribute.</p>
								</li>
								<li>
									<p>Prevent scripts embedded within the EPUB content document from invoking the
										JavaScript audio/video playback API (i.e., authored as part of the default
										behavior).</p>
								</li>
							</ul>
						</li>
						<li id="mol-embed-init-to-stop" data-tests="#mol-embed,#mol-embed_fxl">
							<p>Reading systems <em class="rfc2119">MUST</em> initialize all referenced audio and video
								media embedded within an EPUB content document to their "stopped" state, and ready them
								to play from the zero-position within their content stream (possibly displaying the
								image specified using the [<cite><a class="bibref" data-link-type="biblio"
										href="#bib-html" title="HTML Standard">html</a></cite>] <code><a
										data-type="element-attr"
										href="https://html.spec.whatwg.org/multipage/media.html#attr-video-poster"
										>poster</a></code> attribute. This requirement overrides the default behavior
								defined by the [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
										title="HTML Standard">html</a></cite>] <code><a data-type="element-attr"
										href="https://html.spec.whatwg.org/multipage/media.html#attr-media-autoplay"
										>autoplay</a></code> attribute.</p>
						</li>
						<li>
							<p>When an EPUB content document element becomes active, the CSS Style Sheet visual
								highlighting rules apply regardless of the content type referred to by that element's
									<code>src</code> attribute (e.g., the CSS class name defined by the <a
									href="https://www.w3.org/TR/epub-33/#active-class"><code>active-class</code>
									metadata property</a> [<cite><a class="bibref" data-link-type="biblio"
										href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] <em class="rfc2119"
									>SHOULD</em> be applied to visible video and audio player controls within the host
								EPUB content document).</p>
						</li>
						<li>
							<p id="mol-embed-start-and-stop" data-tests="#mol-embed,#mol-embed_fxl">In addition to the
								default behavior of media overlay activation for textual fragments and images, audio and
								video playback <em class="rfc2119">MUST</em> be started and stopped according to the
								duration implied by the authored media overlay synchronization (as per the standard
										[<cite><a class="bibref" data-link-type="biblio" href="#bib-smil3"
										title="Synchronized Multimedia Integration Language (SMIL 3.0)"
								>smil3</a></cite>] timing model). There are two possible scenarios:</p>
							<ul>
								<li>
									<p>When a media overlay <code>text</code> element has no <a
											href="https://www.w3.org/TR/epub-33/#elemdef-smil-audio"
											><code>audio</code></a> [<cite><a class="bibref" data-link-type="biblio"
												href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] sibling within
										its <a href="https://www.w3.org/TR/epub-33/#elemdef-smil-par"
											><code>par</code></a> [<cite><a class="bibref" data-link-type="biblio"
												href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] parent
										container, the referenced EPUB content document audio or video media <em
											class="rfc2119">MUST</em> play until it ends, at which point the
											<code>text</code> element's lifespan terminates. In this case, the implicit
										duration of the <code>text</code> element (and by inference, of the parent
											<code>par</code> container) is that of the referenced audio or video
										clip.</p>
								</li>
								<li>
									<p>When a media overlay <code>text</code> element has an <code>audio</code> sibling
										within its <code>par</code> parent container, reading systems <em
											class="rfc2119">MUST</em> constrain the playback duration of the referenced
										EPUB content document audio or video media by the duration of the
											<code>audio</code> sibling. In this case, the actual duration of the parent
											<code>par</code> container is that of the child audio clip, regardless of
										the duration of the video or audio media pointed to by the <code>text</code>
										element. This behavior can result in embedded video or audio media ending
										playback prematurely (before reaching its full duration), or ending before the
										playback of the parallel media overlay <code>audio</code> is finished (in which
										case the last-played video frame <em class="rfc2119">SHOULD</em> remain visible
										until the parent <code>par</code> container finally ends). This behavior is
										equivalent of the media overlay <code>audio</code> element implicitly carrying
										the behavior of the [<cite><a class="bibref" data-link-type="biblio"
												href="#bib-smil3"
												title="Synchronized Multimedia Integration Language (SMIL 3.0)"
												>smil3</a></cite>] <a
											href="https://www.w3.org/TR/SMIL3/smil-timing.html#adef-endsync"
												><code>endsync</code></a> attribute.</p>
									<p>Furthermore, reading systems <em class="rfc2119">SHOULD</em> expose user controls
										for the volume levels of each independent audio track (i.e., from the
											<code>audio</code> element of the media overlay, and from the embedded audio
										or video media within the EPUB content document), so that users can adjust the
										audio output to match their requirements. Note that having overlapping audio
										tracks is typically an authoring-time concern: content producers usually add a
										layer of audio information over a video track for description purposes. Reading
										systems handling of simultaneous volume levels in any specific way is <em
											class="rfc2119">OPTIONAL</em>.</p>
								</li>
							</ul>
						</li>
						<li>
							<p>When a <code>text</code> element becomes inactive in the media overlay, and when it
								points to embedded video or audio media, that referenced media <em class="rfc2119"
									>MUST</em> be reset to its initial "stopped" state, ready to be played from the
								zero-position within their content stream (possibly displaying the poster image
								specified using the [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
										title="HTML Standard">html</a></cite>] markup).</p>
						</li>
					</ul>
				</section>

				<section id="sec-text-to-speech">
					<div class="header-wrapper">
						<h4 id="x8-3-3-text-to-speech"><bdi class="secno">8.3.3 </bdi>Text-to-speech</h4>
						<a class="self-link" href="#sec-text-to-speech" aria-label="Permalink for Section 8.3.3"></a>
					</div>


					<p id="mol-tts" data-tests="#mol-tts_multi,#mol-tts_single">When a media overlay <a
							href="https://www.w3.org/TR/epub-33/#elemdef-smil-text"><code>text</code> element</a>
								[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
								>epub-33</a></cite>] with no <a href="https://www.w3.org/TR/epub-33/#elemdef-smil-audio"
								><code>audio</code></a> [<cite><a class="bibref" data-link-type="biblio"
								href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] sibling element references text
						within the target <a data-link-type="dfn" data-type="dfn"
							href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document">EPUB content document</a>,
						reading systems capable of text-to-speech (TTS) playback <em class="rfc2119">SHOULD</em> render
						the referenced text using TTS.</p>

					<p>Reading systems <em class="rfc2119">SHOULD</em> use the speech-related information provided in
						the target EPUB content document to play the audio stream as part of the media overlay
						rendering.</p>

					<div class="note" role="note" id="issue-container-generatedID-14">
						<div role="heading" class="note-title marker" id="h-note-15" aria-level="5">
							<span>Note</span>
						</div>
						<div class="">
							<p>See <a href="https://www.w3.org/TR/epub-tts-10/#">EPUB 3 Text-to-Speech Support</a>
										[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-tts-10"
										title="EPUB 3 Text-to-Speech Enhancements 1.0">epub-tts-10</a></cite>] for more
								information about supporting TTS technologies in EPUB publications.</p>
						</div>
					</div>

					<p>The media overlay <code>text</code> element's lifespan corresponds to the rendering time of the
						associated speech synthesis. The implicit duration of the <code>text</code> element (and by
						inference, of the parent <code>par</code> element) is therefore determined by the execution of
						the Text-to-Speech engine, and cannot be known at authoring time (factors like speech rate,
						pauses and other prosody parameters influence the audio output). This also means that reading
						systems should treat the <a href="https://www.w3.org/TR/epub-33/#duration"
							><code>duration</code></a> property values set in the package document as approximative when
						making use of them.</p>
				</section>
			</section>

			<section id="sec-behaviors-skip-escape">
				<div class="header-wrapper">
					<h3 id="x8-4-skippability-and-escapability"><bdi class="secno">8.4 </bdi>Skippability and
						escapability</h3>
					<a class="self-link" href="#sec-behaviors-skip-escape" aria-label="Permalink for Section 8.4"></a>
				</div>


				<section id="sec-skippability">
					<div class="header-wrapper">
						<h4 id="x8-4-1-skippability"><bdi class="secno">8.4.1 </bdi>Skippability</h4>
						<a class="self-link" href="#sec-skippability" aria-label="Permalink for Section 8.4.1"></a>
					</div>


					<p>Reading systems <em class="rfc2119">SHOULD</em> use the semantic information provided by media
						overlay elements' <code><a data-type="element-attr"
								href="https://www.w3.org/TR/epub-33/#dfn-epub-type">epub:type</a></code> attribute to
						offer users the option of skipping content.</p>

					<p>When skipping of content is enabled, reading systems <em class="rfc2119">MUST</em> suppress
						playback of any <code>par</code> and <code>seq</code> elements whose <code>epub:type</code>
						attribute contains a semantic that matches a skippable structure.</p>
				</section>

				<section id="sec-escapability">
					<div class="header-wrapper">
						<h4 id="x8-4-2-escapability"><bdi class="secno">8.4.2 </bdi>Escapability</h4>
						<a class="self-link" href="#sec-escapability" aria-label="Permalink for Section 8.4.2"></a>
					</div>


					<p>Reading systems <em class="rfc2119">SHOULD</em> allow escaping of nested structures. Reading
						systems <em class="rfc2119">MUST</em> determine the start of nested structures by the value of
						the <code><a data-type="element-attr" href="https://www.w3.org/TR/epub-33/#dfn-epub-type"
								>epub:type</a></code> attribute and <em class="rfc2119">SHOULD</em> offer users the
						option to skip playback of that structure and resume with whatever content comes after it.</p>
				</section>
			</section>
		</section>
		<section id="sec-structural-semantics">
			<div class="header-wrapper">
				<h2 id="x9-processing-structural-semantics"><bdi class="secno">9. </bdi>Processing structural
					semantics</h2>
				<a class="self-link" href="#sec-structural-semantics" aria-label="Permalink for Section 9."></a>
			</div>


			<p id="confreq-rs-epub-epub-type" class="support">Reading systems <em class="rfc2119">MAY</em> support <a
					href="https://www.w3.org/TR/epub-33/#app-structural-semantics">structural semantics</a> [<cite><a
						class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>]
				in <a data-type="dfn" data-cite-href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document"
					href="https://www.w3.org/TR/epub-33/#dfn-epub-content-document">EPUB content documents</a>.</p>

			<p>When processing the <code><a data-type="element-attr" href="https://www.w3.org/TR/epub-33/#dfn-epub-type"
						>epub:type</a></code> attribute, a reading system:</p>

			<ul class="conformance-list">
				<li>
					<p id="confreq-rs-epubtype-beh"><em class="rfc2119">MAY</em> associate behaviors with none, some or
						all of the terms defined in the <a href="https://www.w3.org/TR/epub-33/#sec-epub-type-attribute"
							>default vocabulary</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
								title="EPUB 3.3">epub-33</a></cite>].</p>
				</li>
				<li>
					<p id="confreq-rs-epubtype-oth"><em class="rfc2119">MAY</em> associate behaviors with terms from
						other vocabularies.</p>
				</li>
				<li>
					<p id="confreq-rs-epubtype-ign"><em class="rfc2119">MUST</em> ignore terms that it does not
						recognize.</p>
				</li>
				<li>
					<p id="confreq-rs-epubtype-conflict"><em class="rfc2119">MUST</em>
						<a href="#confreq-rs-epubtype-prec">ignore structural semantics</a> that conflict with the
						carrying element.</p>
				</li>
			</ul>

			<p id="confreq-rs-epubtype-prec">When the Reading system behavior associated with a given
					<code>epub:type</code> value conflicts with an element's native behavior, the behavior associated
				with the element <em class="rfc2119">MUST</em> be given precedence.</p>
		</section>
		<section id="sec-vocab-assoc">
			<div class="header-wrapper">
				<h2 id="x10-vocabulary-association-mechanisms"><bdi class="secno">10. </bdi>Vocabulary association
					mechanisms</h2>
				<a class="self-link" href="#sec-vocab-assoc" aria-label="Permalink for Section 10."></a>
			</div>


			<p id="confreq-res-epub-vocab-assoc" class="support">Reading systems <em class="rfc2119">MUST</em> support
					<a href="https://www.w3.org/TR/epub-33/#sec-vocab-assoc">vocabulary association mechanisms</a>
						[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
						>epub-33</a></cite>].</p>

			<dl class="conformance-list">
				<dt id="sec-metadata-reserved-prefixes">Reserved Prefixes</dt>
				<dd>
					<p>Reading systems <em class="rfc2119">MUST</em> resolve all <a
							href="https://www.w3.org/TR/epub-33/#sec-reserved-prefixes">reserved prefixes</a> [<cite><a
								class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
							>epub-33</a></cite>] used in package documents using their predefined URLs unless the EPUB
						creator declares a local <a href="#sec-prefix-attr">prefix</a>. Reading systems <em
							class="rfc2119">MUST</em> use the URLs defined for locally overridden prefixes (using the
							<code>prefix</code> attribute) when encountered.</p>
					<p>As changes to the reserved prefixes and updates to reading systems are not always going happen in
						synchrony, reading systems <em class="rfc2119">MUST NOT</em> fail when encountering unrecognized
						prefixes (i.e., not reserved and not declared using the <code>prefix</code> attribute).</p>
				</dd>

				<dt id="sec-prefix-attr">The <code>prefix</code> attribute</dt>
				<dd>
					<p>If the <code>prefix</code> attribute includes a declaration for a <a
							href="#sec-metadata-reserved-prefixes">predefined prefix</a>, reading systems <em
							class="rfc2119">MUST</em> use the URL mapping defined in the <code>prefix</code> attribute,
						regardless of whether of it maps to the same URL as the predefined prefix.</p>
				</dd>

				<dt id="sec-property-datatype">Expanding <code>property</code> Data Types</dt>
				<dd>
					<p>Reading systems <em class="rfc2119">MUST</em> expand <a
							href="https://www.w3.org/TR/epub-33/#sec-property-datatype"><code>property</code> values</a>
								[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
								>epub-33</a></cite>] as follows:</p>
					<ul>
						<li>
							<p>If the property consists only of a reference, concatenate the prefix URL associated with
								the <a href="https://www.w3.org/TR/epub-33/#sec-default-vocab">default vocabulary</a>
										[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
										title="EPUB 3.3">epub-33</a></cite>] to the reference.</p>
						</li>
						<li>
							<p>If the property consists of a prefix and reference, concatenate the URL defined for the
								prefix to the reference. If the EPUB creator has not defined a matching prefix, and it
								is not a <a href="https://www.w3.org/TR/epub-33/#sec-reserved-prefixes">reserved
									prefix</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
										title="EPUB 3.3">epub-33</a></cite>], the property is invalid and reading
								systems <em class="rfc2119">MUST</em> ignore it.</p>
						</li>
						<li>
							<p>If the property consists only of a prefix (i.e., there is no reference after the colon),
								the property is invalid and reading systems <em class="rfc2119">MUST</em> ignore it.</p>
						</li>
					</ul>
					<p>The result <em class="rfc2119">MUST</em> be a <a data-link-type="dfn" data-type="dfn"
							href="https://url.spec.whatwg.org/#valid-url-string">valid URL string</a> [<cite><a
								class="bibref" data-link-type="biblio" href="#bib-url" title="URL Standard"
							>url</a></cite>]. If the process results in an invalid URL, reading systems <em
							class="rfc2119">MUST</em> ignore the property.</p>
					<p>Reading systems do not have to <a data-link-type="dfn" data-lt="url parser" data-type="dfn"
							href="https://url.spec.whatwg.org/#concept-url-parser">parse the resulting URL</a> [<cite><a
								class="bibref" data-link-type="biblio" href="#bib-url" title="URL Standard"
							>url</a></cite>] or attempt to dereference the resource.</p>
				</dd>
			</dl>
		</section>
		<section id="sec-epub-rs-conf-backward">
			<div class="header-wrapper">
				<h2 id="x11-backward-compatibility"><bdi class="secno">11. </bdi>Backward compatibility</h2>
				<a class="self-link" href="#sec-epub-rs-conf-backward" aria-label="Permalink for Section 11."></a>
			</div>


			<p id="confreq-rs-backward-epub" data-tests="#pkg-version-backward">Reading systems <em class="rfc2119"
					>MUST</em> attempt to process an <a data-link-type="dfn" data-type="dfn"
					href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publication</a> whose <a
					data-link-type="dfn" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-package-document"
					>package document</a>
				<a href="https://www.w3.org/TR/epub-33/#attrdef-package-version"><code>version</code> attribute</a>
						[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
						>epub-33</a></cite>] is less than "<code>3.0</code>".</p>

			<p id="confreq-rs-backward-conf">EPUB publications with older version numbers will not always render exactly
				as intended unless processed according to their respective specifications. Reading systems <em
					class="rfc2119">SHOULD</em> support such EPUB publications as defined by those specifications.</p>
		</section>
		<section id="sec-epub-rs-conf-forward">
			<div class="header-wrapper">
				<h2 id="x12-forward-compatibility"><bdi class="secno">12. </bdi>Forward compatibility</h2>
				<a class="self-link" href="#sec-epub-rs-conf-forward" aria-label="Permalink for Section 12."></a>
			</div>


			<p id="confreq-rs-forward-epubn">Reading systems <em class="rfc2119">SHOULD</em> attempt to process an <a
					data-link-type="dfn" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB
					publication</a> whose <a data-link-type="dfn" data-type="dfn"
					href="https://www.w3.org/TR/epub-33/#dfn-package-document">package document</a>
				<a href="https://www.w3.org/TR/epub-33/#attrdef-package-version"><code>version</code> attribute</a>
						[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
						>epub-33</a></cite>] is greater than "<code>3.0</code>".</p>
		</section>
		<section id="sec-accessibility" class="informative">
			<div class="header-wrapper">
				<h2 id="x13-accessibility"><bdi class="secno">13. </bdi>Accessibility</h2>
				<a class="self-link" href="#sec-accessibility" aria-label="Permalink for Section 13."></a>
			</div>
			<p><em>This section is non-normative.</em></p>


			<p>Although the primary focus of this specification is on how to process and render <a data-link-type="dfn"
					data-type="dfn" data-cite-href="https://www.w3.org/TR/epub-33/#dfn-epub-publication"
					href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publications</a> it does not mandate
				specific user interfaces that all reading systems must offer. This does not mean that there are not
				common accessibility issues that all reading systems developers should be aware of, or seek to avoid in
				their applications.</p>

			<p>The <abbr title="World Wide Web Consortium">W3C</abbr>'s User Agent Accessibility Guidelines [<cite><a
						class="bibref" data-link-type="biblio" href="#bib-uaag20"
						title="User Agent Accessibility Guidelines (UAAG) 2.0">uaag20</a></cite>] provides many useful
				practices developers should apply to improve their reading systems as many browser accessibility issues
				have parallels in EPUB-specific user agents.</p>

			<p>The following list outlines some additional EPUB-specific areas where a lack of accessibility impacts the
				reading experience for users:</p>

			<ul>
				<li>Bookshelf — Ensure that the process for accessing and opening the user's content is accessible. For
					example, do not rely on a visual-only display like cover images. Exposing text representations of
					the title(s) and author(s), including the language they are expressed in, allows assistive
					technologies to properly announce the content.</li>
				<li>User Interface Controls — Ensure that all controls (e.g., search boxes, annotation controls, and
					buttons to load features such as the table of contents) are exposed to assistive technologies and
					that their actions do not rely on specific modalities (e.g., they only operate through touch or a
					mouse).</li>
				<li>Search — Search access to the full text content of all EPUB content documents is necessary to ensure
					users can locate information easily.</li>
				<li>Display Control — Provide methods for users to tailor the styling of the content to their
					preferences (e.g., to change and increase fonts, increase line and word spacing, and apply alternate
					contrasts).</li>
				<li>Zoom — Allow users to zoom the content to better size it to their needs, especially for <a
						data-link-type="dfn" data-type="dfn"
						data-cite-href="https://www.w3.org/TR/epub-33/#dfn-fixed-layout-document"
						href="https://www.w3.org/TR/epub-33/#dfn-fixed-layout-document">fixed-layout documents</a>.</li>
				<li>Reading Control — Ensure that the ability to read from page-to-page and document-to-document does
					not depend on physical interaction (i.e., users of assistive technologies can read the content
					without getting trapped at the end of pages or documents).</li>
				<li>API Integration — Ensure that the accessibility tree, including support for roles, states and
					properties [<cite><a class="bibref" data-link-type="biblio" href="#bib-wai-aria-11"
							title="Accessible Rich Internet Applications (WAI-ARIA) 1.1">wai-aria-11</a></cite>], is
					exposed to the underlying operating system's accessibility API so that users can fully interact with
					the content when using assistive technologies.</li>
				<li>Document Object Model (DOM) — Provide access to the [<cite><a class="bibref" data-link-type="biblio"
							href="#bib-dom" title="DOM Standard">dom</a></cite>] of EPUB content documents so that users
					can investigate the semantics and structure expressed in the source.</li>
				<li>Table of Contents — Ensure that users can access the link text, including <a
						href="https://www.w3.org/TR/epub-33/#confreq-nav-a-title">text alternatives for visual
						content</a>. Activating the table of contents links should be possible using different
					inputs.</li>
			</ul>

			<p>The DAISY Consortium maintains an <a href="https://epubtest.org/test-books">accessibility test suite</a>
				to aid in evaluating these issues and more.</p>
		</section>
		<section id="sec-security-privacy" class="informative">
			<div class="header-wrapper">
				<h2 id="x14-security-and-privacy"><bdi class="secno">14. </bdi>Security and privacy</h2>
				<a class="self-link" href="#sec-security-privacy" aria-label="Permalink for Section 14."></a>
			</div>
			<p><em>This section is non-normative.</em></p>


			<section id="security-privacy-overview">
				<div class="header-wrapper">
					<h3 id="x14-1-overview"><bdi class="secno">14.1 </bdi>Overview</h3>
					<a class="self-link" href="#security-privacy-overview" aria-label="Permalink for Section 14.1"></a>
				</div>


				<p>The particularity of an <a data-link-type="dfn" data-type="dfn"
						href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publication</a> is its
					structure. The EPUB format provides a means of representing, packaging, and encoding structured and
					semantically enhanced web content&#160;—&#160;including HTML, CSS, SVG, and other
					resources&#160;—&#160;for distribution in a single-file container.</p>

				<p>For reading systems, this means that the security and privacy issues are primarily based on the
					features of those formats, and closely mirror the threats presented by web content generally.</p>

				<p>Reading system developers also have a dual responsibility of both ensuring the security and privacy
					of their applications and helping limit the threats to users from the content that renders within
					them. The rest of this section explores the risk model of EPUB 3 with the aim of helping developers
					recognize and mitigate these risks.</p>

				<div class="note" role="note" id="issue-container-generatedID-15">
					<div role="heading" class="note-title marker" id="h-note-16" aria-level="4">
						<span>Note</span>
					</div>
					<div class="">
						<p>For the risks associated with the authoring of EPUB publications, refer to the <a
								href="https://www.w3.org/TR/epub-33/#sec-security-privacy">security and privacy
								section</a> of [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
									title="EPUB 3.3">epub-33</a></cite>].</p>
					</div>
				</div>
			</section>

			<section id="epub-threat-model">
				<div class="header-wrapper">
					<h3 id="x14-2-threat-model"><bdi class="secno">14.2 </bdi>Threat model</h3>
					<a class="self-link" href="#epub-threat-model" aria-label="Permalink for Section 14.2"></a>
				</div>


				<p>The greatest threats to users come from the <a
						href="https://www.w3.org/TR/epub-33/#epub-threat-model">content they read</a> [<cite><a
							class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
						>epub-33</a></cite>], and the first line of defense against these attacks is the reading systems
					they use. Users expect that reading systems act as safeguards against malicious content and are
					often unaware that EPUB publications are susceptible to the same security risks as web sites.</p>

				<p>But although reading systems are relied on to provide security and privacy, they can also pose
					unintended threats to users depending on how information is handled. Tracking user information to
					optimize experiences is a common need, for example, but done without user permission and reading
					systems can run afoul of legal privacy requirements.</p>

				<p>This section outlines some of the key threats that reading system developers must take into
					consideration, with further details and recommendations in the following sections.</p>

				<dl>
					<dt>Scripting</dt>
					<dd>
						<p>Malicious scripts present several attack vectors against reading systems. If local storage is
							not secure, for example, they can attempt to compromise the user's data. Provided with
							network access, they may attempt unauthorized collection of user data.</p>
						<p>More detailed discussion of these issues and how to mitigate them is provided in <a
								href="#sec-scripted-content-security" class="sec-ref"><bdi class="secno">5.4.3
								</bdi>Security considerations</a>.</p>
					</dd>

					<dt>Malicious content</dt>
					<dd>
						<p>EPUB publications may contain resources designed to exploit security flaws in reading systems
							or the operating systems they run on.</p>
					</dd>

					<dt>Remote resources</dt>
					<dd>
						<p><a data-link-type="dfn" data-type="dfn"
								data-cite-href="https://www.w3.org/TR/epub-33/#dfn-remote-resource"
								href="https://www.w3.org/TR/epub-33/#dfn-remote-resource">Remote resources</a> present
							the same risks as any EPUB publication loaded from an untrusted source. Even if the
							publisher of the EPUB publication is trusted, remote resources may be compromised.</p>
						<p>Calls to remote resources can also be used to track information about users (e.g., through
							server logs). Reading systems should limit the information they expose through HTTP requests
							to only what is essential to obtain the resource.</p>
						<p>The <a href="#sec-container-iri">origin</a> of an EPUB is both unknown to the EPUB creator
							and specific to each reading system implementation. Consequently, if the EPUB creator hosts
							remote resources on a web server they control, the server effectively cannot use security
							features that require specifying allowable origins, such as headers for <a
								href="https://fetch.spec.whatwg.org/#cors-protocol">CORS</a>, <a
								href="https://www.w3.org/TR/CSP2/#content-security-policy-header-field"
									><code>Content-Security-Policy</code></a>, or <a
								href="https://www.rfc-editor.org/rfc/rfc7034"><code>X-Frame-Options</code></a>.</p>
					</dd>

					<dt>External links</dt>
					<dd>
						<p>Like remote resources, external links may be used to trick unwitting users into opening
							malicious resources on the web designed to exploit the reading system or operating
							system.</p>
						<p>Likewise, reading systems should also avoid exposing potentially identifying information
							about users through the traversal of links (e.g., not using tracking identifiers or exposing
							unnecessary information about the user's environment).</p>
					</dd>

					<dt>User-generated content</dt>
					<dd>
						<p>User-generated content within a reading experience, for example through text areas or other
							interactive components, could pose a threat to reading system security or user privacy if
							the content is not properly secured. More details on scripting security are provided in <a
								href="#sec-scripted-content-security" class="sec-ref"><bdi class="secno">5.4.3
								</bdi>Security considerations</a>.</p>
					</dd>

					<dt>Collection of user data</dt>
					<dd>
						<p>Collecting information about the user and their reading habits without obtaining their
							permission can violate privacy laws, even if the information is only intended for internal
							use.</p>
						<p>Attempting to profile users based on their reading habits or through metadata in their
							publication (e.g., accessibility preferences) can expose users to unintended harms.</p>
					</dd>
				</dl>

				<p>Additionally, the security considerations that apply to [<cite><a class="bibref"
							data-link-type="biblio" href="#bib-xml"
							title="Extensible Markup Language (XML) 1.0 (Fifth Edition)">xml</a></cite>] and [<cite><a
							class="bibref" data-link-type="biblio" href="#bib-zip"
							title=".ZIP File Format Specification">zip</a></cite>] files also apply to the <a
						href="https://www.w3.org/TR/epub-33/#sec-package-doc">package document</a> and the <a
						href="https://www.w3.org/TR/epub-33/#sec-ocf">Open Container Format</a>, respectively. See the
					"Security Consideration" sections of the Media Type registrations for the <a
						href="https://www.w3.org/TR/epub-33/#app-media-type-app-oebps-package"
							><code>application/oebps-package+xml</code></a> and the <a
						href="https://www.w3.org/TR/epub-33/#app-media-type"><code>application/epub+zip</code></a>
					formats for further details.</p>
			</section>

			<section id="security-privacy-recommendations">
				<div class="header-wrapper">
					<h3 id="x14-3-recommendations"><bdi class="secno">14.3 </bdi>Recommendations</h3>
					<a class="self-link" href="#security-privacy-recommendations"
						aria-label="Permalink for Section 14.3"></a>
				</div>


				<p>The strongest measure that reading system developers can take for privacy is to specify the data they
					intend to collect and use about the user and/or their reading behavior and seek the consent of users
					to obtain it. They should also allow personalization and control over this information.</p>

				<p>If a reading system allows users to store persistent data, especially personally identifiable
					information, it must treat that data as sensitive.</p>

				<p>It is understood that the collection of some user data may be required for the sale, delivery, and
					operation of an EPUB publication, particularly on platforms where the sale of an EPUB publication
					and the method of reading it are connected. In these cases, it is recommended that the reading
					system or retailer be clear about the data being collected, how it is used, and allow for user
					opt-outs where possible. Anonymization of data is strongly recommended for the privacy and the
					security of the user and reading system.</p>

				<p>It is also understood that user data may be required or helpful for some reading system affordances.
					In these cases, anonymization is strongly recommended. It is also recommended that reading systems
					inform users of what data is needed, what it is to be used for, and to provide methods to
					opt-out.</p>

				<p>Content processors — defined as entities that handle the ingestion of EPUB content for distribution,
					display, or sale — should also be aware of the potential risks in ingestion. It is advised that
					content processors check content for malicious content on ingestion, in addition to the validation
					steps that usually occur. This could include running virus scans, validating external links and
					remote resources, and other precautions.</p>
			</section>
		</section>
		<section id="app-epubReadingSystem">
			<div class="header-wrapper">
				<h2 id="x15-epubreadingsystem-object"><bdi class="secno">15. </bdi><dfn class="export" data-export=""
						id="dfn-epubreadingsystem" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"
						>epubReadingSystem</dfn> object</h2>
				<a class="self-link" href="#app-epubReadingSystem" aria-label="Permalink for Section 15."></a>
			</div>


			<div class="note" role="note" id="issue-container-generatedID-16">
				<div role="heading" class="note-title marker" id="h-note-17" aria-level="3">
					<span>Note</span>
				</div>
				<p class="">Reading systems act as the core rendering engines of EPUB publications and provide a
					scripting environment based on the [<cite><a class="bibref" data-link-type="biblio" href="#bib-dom"
							title="DOM Standard">dom</a></cite>] specification. So, although this interface definition
					uses the [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
							title="Web IDL Standard">webidl</a></cite>] notation for implementation by reading systems,
					web browsers generally do not have to implement these objects.</p>
			</div>

			<section id="app-ers-idl">
				<div class="header-wrapper">
					<h3 id="x15-1-interface-definition"><bdi class="secno">15.1 </bdi>Interface definition</h3>
					<a class="self-link" href="#app-ers-idl" aria-label="Permalink for Section 15.1"></a>
				</div>


				<p>This specification extends the <a data-link-type="idl" data-lt="Navigator" data-type="interface"
						href="https://html.spec.whatwg.org/multipage/system-state.html#navigator"
						><code>Navigator</code></a> object&#160;[<cite><a class="bibref" data-link-type="biblio"
							href="#bib-html" title="HTML Standard">html</a></cite>] as follows.</p>

				<pre class="idl def" id="webidl-1357718267"><span class="idlHeader"><a class="self-link" href="#webidl-1357718267">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-epubreadingsystem" data-title="EpubReadingSystem">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window)</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-epubreadingsystem" data-idl="interface" data-title="EpubReadingSystem" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>EpubReadingSystem</code></dfn> {<span data-idl="" class="idlAttribute" id="idl-def-epubreadingsystem-name" data-title="name" data-dfn-for="EpubReadingSystem">
    [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyUnforgeable">LegacyUnforgeable</a></span>] readonly attribute<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-epubreadingsystem-name" id="ref-for-dom-epubreadingsystem-name-1"><code>name</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-epubreadingsystem-version" data-title="version" data-dfn-for="EpubReadingSystem">
    [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyUnforgeable">LegacyUnforgeable</a></span>] readonly attribute<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-epubreadingsystem-version" id="ref-for-dom-epubreadingsystem-version-1"><code>version</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-epubreadingsystem-hasfeature-feature-version" data-title="hasFeature" data-dfn-for="EpubReadingSystem"><span class="idlType">
    <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-epubreadingsystem-hasfeature" id="ref-for-dom-epubreadingsystem-hasfeature-1"><code>hasFeature</code></a>(<span class="idlType"><a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">feature</span>, optional<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">version</span>);</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-navigator-partial-1" data-title="Navigator">

partial interface <a data-idl="partial" data-link-type="interface" data-title="Navigator" class="idlID" data-dfn-for="Navigator" data-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator">Navigator</a> {<span data-idl="" class="idlAttribute" id="idl-def-navigator-epubreadingsystem" data-title="epubReadingSystem" data-dfn-for="Navigator">
    [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyUnforgeable">LegacyUnforgeable</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a href="#dfn-epubreadingsystem" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-epubreadingsystem-1">EpubReadingSystem</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-navigator-epubreadingsystem" id="ref-for-dom-navigator-epubreadingsystem-1"><code>epubReadingSystem</code></a>;</span>
};</span></code></pre>

				<div class="note" role="note" id="issue-container-generatedID-17">
					<div role="heading" class="note-title marker" id="h-note-18" aria-level="4">
						<span>Note</span>
					</div>
					<div class="">
						<p>This specification does not define an <code>epubReadingSystem</code> property extension for
							the <a data-link-type="idl" data-lt="WorkerNavigator" data-type="interface"
								href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator"
									><code>WorkerNavigator</code></a> object&#160;[<cite><a class="bibref"
									data-link-type="biblio" href="#bib-html" title="HTML Standard">html</a></cite>].
							Reading systems therefore do not have to expose the <code>epubReadingSystem</code> object in
							the scripting context of Workers, and EPUB creators cannot rely on its presence.</p>
					</div>
				</div>
			</section>

			<section id="app-ers-desc">
				<div class="header-wrapper">
					<h3 id="x15-2-description"><bdi class="secno">15.2 </bdi>Description</h3>
					<a class="self-link" href="#app-ers-desc" aria-label="Permalink for Section 15.2"></a>
				</div>


				<p>The <code><dfn class="export" data-export="" data-dfn-type="attribute"
							id="dom-navigator-epubreadingsystem" data-idl="attribute"
							data-title="Navigator.epubReadingSystem" data-dfn-for="Navigator"
							data-type="EpubReadingSystem" data-lt="epubReadingSystem"
							data-local-lt="Navigator.epubReadingSystem" tabindex="0" aria-haspopup="dialog"
							>Navigator.epubReadingSystem</dfn></code> object provides an interface through which a <a
						data-link-type="dfn" data-type="dfn"
						href="https://www.w3.org/TR/epub-33/#dfn-scripted-content-document">scripted content
						document</a> can query information about a user's reading system.</p>

				<p>The object exposes <a href="#app-ers-properties">properties</a> of the reading system (its name and
					version), and provides the <a href="#app-ers-hasFeature"><code>hasFeature</code> method</a> which
					can be invoked to determine the features it supports.</p>

				<aside class="example"
					id="example-javascript-function-to-display-the-name-of-the-current-reading-system">
					<div class="marker">
						<a class="self-link"
							href="#example-javascript-function-to-display-the-name-of-the-current-reading-system"
								>Example<bdi> 1</bdi></a>
						<span class="example-title">: JavaScript function to display the name of the current reading
							system</span>
					</div>
					<pre aria-busy="false"><code class="hljs javascript">alert(<span class="hljs-string">"Reading system name: "</span> + navigator.epubReadingSystem.name);</code></pre>
				</aside>

				<p id="scripting-req-readingsystem"
					data-tests="#scr-readingsystem-support,#scr-readingsystem-support_svg,#scr-readingsystem-support_iframe,#scr-readingsystem-support_iframe_svg"
					>Reading systems <em class="rfc2119">MUST</em> expose the <code>epubReadingSystem</code> object on
					the <code>navigator</code> object of all loaded scripted content documents, including any nested <a
						href="https://www.w3.org/TR/epub-33/#sec-scripted-container-constrained">container-constrained
						scripting contexts</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33"
							title="EPUB 3.3">epub-33</a></cite>]. Reading systems <em class="rfc2119">MUST</em> ensure
					that the <code>epubReadingSystem</code> object is available no later than when the <a
						href="https://html.spec.whatwg.org/multipage/#the-end"><code>DOMContentLoaded</code> event is
						triggered</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
							title="HTML Standard">html</a></cite>].</p>

				<div class="note" role="note" id="issue-container-generatedID-18">
					<div role="heading" class="note-title marker" id="h-note-19" aria-level="4">
						<span>Note</span>
					</div>
					<div class="">
						<p>Reading systems implementations may create cloned instances of the
								<code>epubReadingSystem</code> object in scripted content documents for technical
							feasibility reasons. In such cases, the reading system must ensure they consistently
							maintain the object's state — as reflected by the values of its properties and methods —
							across all copied instances.</p>
					</div>
				</div>
			</section>

			<section id="app-ers-properties">
				<div class="header-wrapper">
					<h3 id="x15-3-properties"><bdi class="secno">15.3 </bdi>Properties</h3>
					<a class="self-link" href="#app-ers-properties" aria-label="Permalink for Section 15.3"></a>
				</div>


				<p id="scripting-req-readingsystem-properties"
					data-tests="#scr-readingsystem-support,#scr-readingsystem-support_svg,#scr-readingsystem-support_iframe,#scr-readingsystem-support_iframe_svg"
					>The reading system <em class="rfc2119">MUST</em> make the following properties available for
					retrieving information about it.</p>

				<table data-dfn-for="EpubReadingSystem">
					<thead>
						<tr>
							<th>Name</th>
							<th>Description</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td id="propdef-name">
								<code>
									<dfn data-export="" data-dfn-type="attribute" id="dom-epubreadingsystem-name"
										data-idl="attribute" data-title="name" data-dfn-for="EpubReadingSystem"
										data-type="DOMString" data-lt="name" data-local-lt="EpubReadingSystem.name"
										tabindex="0" aria-haspopup="dialog">name</dfn>
								</code>
							</td>
							<td>Returns a <code>String</code> value representing the name of the reading system (e.g.,
									"<code>iBooks</code>", "<code>Kindle</code>").</td>
						</tr>
						<tr>
							<td id="propdef-version">
								<code>
									<dfn data-export="" data-dfn-type="attribute" id="dom-epubreadingsystem-version"
										data-idl="attribute" data-title="version" data-dfn-for="EpubReadingSystem"
										data-type="DOMString" data-lt="version"
										data-local-lt="EpubReadingSystem.version" tabindex="0" aria-haspopup="dialog"
										>version</dfn>
								</code>
							</td>
							<td>Returns a <code>String</code> value representing the version of the reading system
								(e.g., "<code>1.0</code>", "<code>2.1.1</code>").</td>
						</tr>
					</tbody>
				</table>

				<p>This specification used to define a <code>layoutStyle</code> property, but it is now <a
						href="https://www.w3.org/TR/epub-33/#deprecated">deprecated</a> [<cite><a class="bibref"
							data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>]. Refer to
					its definition in [<cite><a class="bibref" data-link-type="biblio" href="#bib-epubcontentdocs-301"
							title="EPUB Content Documents 3.0.1">epubcontentdocs-301</a></cite>] for more
					information.</p>
			</section>

			<section id="app-ers-methods">
				<div class="header-wrapper">
					<h3 id="x15-4-methods"><bdi class="secno">15.4 </bdi>Methods</h3>
					<a class="self-link" href="#app-ers-methods" aria-label="Permalink for Section 15.4"></a>
				</div>


				<section id="app-ers-hasFeature">
					<div class="header-wrapper">
						<h4 id="x15-4-1-hasfeature"><bdi class="secno">15.4.1 </bdi>hasFeature</h4>
						<a class="self-link" href="#app-ers-hasFeature" aria-label="Permalink for Section 15.4.1"></a>
					</div>


					<section id="app-ers-hasFeature-desc">
						<div class="header-wrapper">
							<h5 id="x15-4-1-1-description"><bdi class="secno">15.4.1.1 </bdi>Description</h5>
							<a class="self-link" href="#app-ers-hasFeature-desc"
								aria-label="Permalink for Section 15.4.1.1"></a>
						</div>


						<p data-dfn-for="EpubReadingSystem">The <code><dfn data-export="" data-dfn-type="method"
									id="dom-epubreadingsystem-hasfeature" data-idl="operation" data-title="hasFeature"
									data-dfn-for="EpubReadingSystem" data-type="boolean"
									data-lt="hasFeature()|hasFeature(feature)|hasFeature(feature, version)"
									data-local-lt="EpubReadingSystem.hasFeature|EpubReadingSystem.hasFeature()|hasFeature"
									tabindex="0" aria-haspopup="dialog">hasFeature</dfn></code> method returns a boolean
							value indicating whether the reading system supports any version of the specified feature,
							or <code>undefined</code> if the reading system does not recognize the specified
							feature.</p>

						<p>The optional <code>version</code> parameter allows EPUB creators to query custom features
							that could change in incompatible ways over time. The return value indicates support only
							for the specified version of the feature.</p>

						<p><a href="#app-ers-hasFeature-features">Features defined in this specification</a> are
							versionless. If a reading system supports a feature defined in this specification, it <em
								class="rfc2119">MUST</em> ignore any supplied <code>version</code> parameter and return
							a <code>true</code> value.</p>

						<aside class="example"
							id="example-javascript-function-to-display-support-for-scripted-manipulation-of-the-dom">
							<div class="marker">
								<a class="self-link"
									href="#example-javascript-function-to-display-support-for-scripted-manipulation-of-the-dom"
										>Example<bdi> 2</bdi></a>
								<span class="example-title">: JavaScript function to display support for scripted
									manipulation of the DOM</span>
							</div>
							<pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">var</span> feature = <span class="hljs-string">"dom-manipulation"</span>;

<span class="hljs-keyword">var</span> conformTest = navigator.epubReadingSystem.hasFeature(feature);

alert(<span class="hljs-string">"Feature "</span> + feature + <span class="hljs-string">" supported?: "</span> + conformTest);</code></pre>
						</aside>
					</section>

					<section id="app-ers-hasFeature-features">
						<div class="header-wrapper">
							<h5 id="x15-4-1-2-features"><bdi class="secno">15.4.1.2 </bdi>Features</h5>
							<a class="self-link" href="#app-ers-hasFeature-features"
								aria-label="Permalink for Section 15.4.1.2"></a>
						</div>



						<p id="scripting-req-readingsystem-features" data-tests="#scr-readingsystem-features">The
							following table lists the set of features that reading systems that support the
								<code>epubReadingSystem</code> object <em class="rfc2119">MUST</em> recognize. When the
							features are queried from the <code>hasFeature</code> method, reading systems <em
								class="rfc2119">MUST</em> return a boolean value indicating their support.</p>


						<table>
							<thead>
								<tr>
									<th>Name</th>
									<th>Description</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td id="feature-dom-manipulation">
										<code>dom-manipulation</code>
									</td>
									<td>Scripts may make structural changes to the document’s DOM (applies to <a
											href="https://www.w3.org/TR/epub-33/#sec-scripted-spine">spine-level
											scripting</a> [<cite><a class="bibref" data-link-type="biblio"
												href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] only).</td>
								</tr>
								<tr>
									<td id="feature-layout-changes">
										<code>layout-changes</code>
									</td>
									<td>Scripts may modify attributes and CSS styles that affect content layout (applies
										to <a href="https://www.w3.org/TR/epub-33/#sec-scripted-spine">spine-level
											scripting</a> [<cite><a class="bibref" data-link-type="biblio"
												href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] only).</td>
								</tr>
								<tr>
									<td id="feature-touch-events">
										<code>touch-events</code>
									</td>
									<td>The device supports touch events, and the reading system passes touch events to
										the content.</td>
								</tr>
								<tr>
									<td id="feature-mouse-events">
										<code>mouse-events</code>
									</td>
									<td>The device supports mouse events, and the reading system passes mouse events to
										the content.</td>
								</tr>
								<tr>
									<td id="feature-keyboard-events">
										<code>keyboard-events</code>
									</td>
									<td>The device supports keyboard events, and the reading system passes keyboard
										events to the content.</td>
								</tr>
								<tr>
									<td id="feature-spine-scripting">
										<code>spine-scripting</code>
									</td>
									<td>Indicates whether the reading system supports <a
											href="https://www.w3.org/TR/epub-33/#sec-scripted-spine">spine-level
											scripting</a> [<cite><a class="bibref" data-link-type="biblio"
												href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] (e.g., so a <a
											href="https://www.w3.org/TR/epub-33/#sec-scripted-container-constrained"
											>container-constrained script</a> [<cite><a class="bibref"
												data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3"
											>epub-33</a></cite>] can determine whether any actions that depend on
										scripting support in a <a data-link-type="dfn" data-type="dfn"
											href="https://www.w3.org/TR/epub-33/#dfn-top-level-content-document"
											>top-level content document</a> have any chance of success before attempting
										them).</td>
								</tr>
							</tbody>
						</table>

						<p>Reading system developers <em class="rfc2119">MAY</em> add additional features, but future
							versions of this specification could append to this list in ways that might conflict or be
							incompatible with any such custom additions.</p>
					</section>
				</section>
			</section>
		</section>
		<section id="change-log" class="appendix informative">
			<div class="header-wrapper">
				<h2 id="a-change-log"><bdi class="secno">A. </bdi>Change log</h2>
				<a class="self-link" href="#change-log" aria-label="Permalink for Appendix A."></a>
			</div>
			<p><em>This section is non-normative.</em></p>


			<p>Note that this change log only identifies substantive Changes since <a
					href="https://www.w3.org/publishing/epub/epub-spec.html">EPUB 3.2</a> — those that affect the
				conformance of reading systems or are similarly noteworthy.</p>

			<p>For a list of all issues addressed during the revision, refer to the <a
					href="https://github.com/w3c/epub-specs/issues?q=is%3Aissue+is%3Aclosed+label%3AEPUB33+label%3ASpec-RS+"
					>Working Group's issue tracker</a>.</p>

			<ul>
				<li>31-Mar-2022: Moved custom attribute authoring requirements to the authoring specification. Added
					reading system handling of custom properties. See <a
						href="https://github.com/w3c/epub-specs/issues/2134">issue 2134</a>.</li>
				<li>17-Mar-2022: Added requirement to suppress playback of skippable elements in media overlays
					Documents. See <a href="https://github.com/w3c/epub-specs/issues/2066">issue 2066</a>.</li>
				<li>11-Feb-2022: Fix the contradictory support statements for media overlays. Support is recommended
					when rendering of prerecorded audio is supported, as in previous versions of EPUB 3. See <a
						href="https://github.com/w3c/epub-specs/issues/1991">issue 1991</a>.</li>
				<li>04-Feb-2022: Changed the non-normative security considerations for controlling network access,
					opening external links, and managing local storage to normative recommendations. See <a
						href="https://github.com/w3c/epub-specs/issues/1957">issue 1957</a>.</li>
				<li>04-Feb-2022: Expanded the section on security and privacy to include new sections on the threat
					model for reading systems and additional recommendations for ensuring security and privacy. See <a
						href="https://github.com/w3c/epub-specs/issues/1871">issue 1871</a>, <a
						href="https://github.com/w3c/epub-specs/issues/1872">issue 1872</a>, <a
						href="https://github.com/w3c/epub-specs/issues/1875">issue 1875</a> and <a
						href="https://github.com/w3c/epub-specs/issues/1876">issue 1876</a>.</li>
				<li>03-Feb-2022: Reduced the requirement to support deobfuscation to a recommendation. See <a
						href="https://github.com/w3c/epub-specs/issues/1873">issue 1873</a>.</li>
				<li>19-Jan-2022: Elevated default statements for the <code>rendition:spread</code> and
						<code>rendition:orientation</code> properties to requirements, to align with
						<code>rendition:layout</code>. See <a href="https://github.com/w3c/epub-specs/issues/1936">issue
						1936</a>.</li>
				<li>08-Dec-2021: <code>page-spread-center</code> is now an alias for <code>spread-none</code>. See <a
						href="https://github.com/w3c/epub-specs/issues/1929">issue 1929</a>.</li>
				<li>10-Nov-2021: Proper definition of the content URL and handling of relative URLs. See <a
						href="https://github.com/w3c/epub-specs/issues/1374">issue 1374</a> and <a
						href="https://github.com/w3c/epub-specs/issues/1888">issue 1888</a>.</li>
				<li>01-Nov-2021: Added a statement on the reading system behavior when item references are repeated in
					the spine. See <a href="https://github.com/w3c/epub-specs/issues/1686">issue 1686</a>.</li>
				<li>25-Oct-2021: Clarify that reading systems must render non-linear resources when they are hyperlinked
					to by a user. See <a href="https://github.com/w3c/epub-specs/issues/1864">issue 1864</a>.</li>
				<li>27-Aug-2021: Added accessibility bullet to cover the need for zooming, particularly for fixed-layout
					documents. See <a href="https://github.com/w3c/epub-specs/issues/1776">issue 1776</a>.</li>
				<li>27-Aug-2021: Remove the recommendation to support text search and selection in SVGs. Replacing with
					a more general bullet on search accessibility to avoid defining requirements on reading system UI.
					See <a href="https://github.com/w3c/epub-specs/issues/1774">issue 1774</a>.</li>
				<li>09-July-2021: Restored the custom attributes section due to known usage but without reference to the
					attribute registry. See <a href="https://github.com/w3c/epub-specs/issues/1602">issue 1602</a>.</li>
				<li>09-July-2021: Removed recommendation to use the first language tag to determine an unspecified page
					progression direction. See <a href="https://github.com/w3c/epub-specs/issues/1482">issue
					1482</a>.</li>
				<li>18-June-2021: Moved requirements for supporting SSML, PLS lexicons and CSS 3 Speech to the <a
						href="https://www.w3.org/TR/epub-tts-10/">EPUB 3 Text-to-Speech Support</a> note. See <a
						href="https://github.com/w3c/epub-specs/issues/1690">issue 1690</a>.</li>
				<li>20-May-2021: Providing a shared and unique origin for scripts is a requirements for reading systems
					that support scripting. See <a href="https://github.com/w3c/epub-specs/issues/1659">issue
					1659</a>.</li>
				<li>20-May-2021: Removed requirement for reading systems to be conformant xml:base processors. See <a
						href="https://github.com/w3c/epub-specs/pull/1678">pull request 1678</a>.</li>
				<li>12-May-2021: Added additional requirement that reading systems ignore property values that expand to
					invalid URL strings and property values with empty references. See <a
						href="https://github.com/w3c/epub-specs/issues/1673">issue 1673</a>.</li>
				<li>12-May-2021: Changed all references to URIs/IRIs to URLs and references to RFCs 3986 and 3987 to the
					URL standard. See <a href="https://github.com/w3c/epub-specs/issues/808">issue 808</a>.</li>

				<li>06-May-2021: Recommend that reading systems support references to HTML target elements and SVG
					fragment identifiers in <code>textref</code> attributes and the <code>text</code> element's
						<code>src</code> attribute. Support for other fragment identifier schemes is optional. See <a
						href="https://github.com/w3c/epub-specs/issues/1586">issue 1586</a>.</li>
				<li>23-Apr-2021: Clarified that reading systems should attempt to process invalid file and path names.
					See <a href="https://github.com/w3c/epub-specs/issues/1629">issue 1629</a></li>
				<li>16-Apr-2021: Removed the section on custom attributes. See <a
						href="https://www.w3.org/publishing/groups/epub-wg/Meetings/Minutes/2021-04-15-epub#resolution2"
						>Working Group Resolution</a>.</li>
				<li>15-Apr-2021: Remove the reference to "presentation logic". See <a
						href="https://github.com/w3c/epub-specs/issues/1516">issue 1516</a> and <a
						href="https://www.w3.org/publishing/groups/epub-wg/Meetings/Minutes/2021-04-15-epub#resolution3"
						>Working Group Resolution</a>.</li>
				<li>12-Apr-2021: The section <a href="#app-epubReadingSystem" class="sec-ref"><bdi class="secno">15.
							</bdi><span>epubReadingSystem</span> object</a> has been marked as "at-risk". See <a
						href="https://www.w3.org/publishing/groups/epub-wg/Meetings/Minutes/2021-04-09-epub#resolution1"
						>Working Group resolution</a>.</li>
				<li>09-Apr-2021: Added a new section dedicated to accessibility and removed the outdated reference to
					the defunct appendix in the Accessibility specification. See <a
						href="https://github.com/w3c/epub-specs/issues/1608">issue 1608</a>.</li>
				<li>09-Apr-2021: Added section clarifying all the conformance requirements on establishing the primary
					language and base direction of publication resources. See <a
						href="https://github.com/w3c/epub-specs/pull/1613">pull request 1613</a>.</li>
				<li>01-Apr-2021: Added section clarifying how absolute URLs are created from relative in the package
					document. See <a href="https://github.com/w3c/epub-specs/pull/1468">pull request 1468</a>.</li>
				<li>30-Mar-2021: Restructured the document to remove the rendundant conformance sections and
					requirements that were only used as locators when this specification was combined with the authoring
					requirements. See <a href="https://github.com/w3c/epub-specs/pull/1597">pull request 1597</a> and <a
						href="https://github.com/w3c/epub-specs/pull/1609">pull request 1609</a>.</li>
				<li>23-Mar-2021: Added requirement to prevent top-level navigation to data URLs. See <a
						href="https://github.com/w3c/epub-specs/issues/1564">issue 1564</a>.</li>
				<li>23-Mar-2021: Changed "suppressing" of non-linear content to "skipping" when traversing the spine to
					clarify that the intention is not to remove all access to such content. See <a
						href="https://github.com/w3c/epub-specs/issues/1480">issue 1480</a>.</li>
				<li>10-Mar-2021: Changed restriction against using resources not listed in the package document to a
					recommendation not to use. See <a href="https://github.com/w3c/epub-specs/issues/810">issue
					810</a>.</li>
				<li>09-March-2021: the statement on unique identifiers has been set to non-normative, following the
					discussion and <a
						href="https://www.w3.org/publishing/groups/epub-wg/Meetings/Minutes/2020-12-18-epub#resolution2"
						>Working Group resolution</a>. See <a href="https://github.com/w3c/epub-specs/issues/1310">issue
						1310</a>.</li>
				<li>08-Mar-2021: Remove unnecessary requirement to assume default value for rendering metadata. See <a
						href="https://github.com/w3c/epub-specs/issues/1313">issue 1313</a>.</li>
				<li>05-Mar-2021: Added requirement for reading systems to collapse whitespace in DCMES and meta elements
					per the [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra" title="Infra Standard"
							>infra</a></cite>] specification definition. See <a
						href="https://github.com/w3c/epub-specs/issues/1295">issue 1295</a>.</li>
				<li>26-Feb-2021: Clarified the trimming of leading and trailing whitespace is to be done in accordance
					with the [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra" title="Infra Standard"
							>infra</a></cite>] specification definition, and removed the exception that
						<code>meta</code> element properties may define their own whitespace handling rules. See <a
						href="https://github.com/w3c/epub-specs/issues/1295">issue 1295</a>.</li>
				<li>19-Feb-2021: Updated the <a href="#sec-scripted-content-security">scripting security
						considerations</a> so that the text recommends assigning a unique origin to each EPUB
					publication for security rather than domain isolation at the EPUB content document level. See <a
						href="https://github.com/w3c/epub-specs/issues/1156">issue 1156</a>.</li>
				<li>15-Feb-2021: Clarified the requirements for presenting nav elements in the navigation document. The
					toc nav is now the only required element, the page-list nav is recommended when present, and all
					others are optional. See <a href="https://github.com/w3c/epub-specs/issues/975">issue 975</a>.</li>
				<li>10-Feb-2021: A very first draft for <a href="#sec-security-privacy" class="sec-ref"><bdi
							class="secno">14. </bdi>Security and privacy</a> has been added.</li>
				<li>04-Feb-2021: Added explicit requirement that reading systems not use the language in
						<code>dc:language</code> elements as the language of resources.</li>
				<li>02-Feb-2021: Added base direction determination rules for the <code>dir</code> attribute accounting
					for the addition of the new <code>auto</code> value. See <a
						href="https://github.com/w3c/epub-specs/issues/1491">issue 1491</a>.</li>
				<li>02-Feb-2021: Noted that language information in the new <code>hreflang</code> attribute on
						<code>link</code> elements is not authoritative. See <a
						href="https://github.com/w3c/epub-specs/issues/1488">issue 1488</a>.</li>
				<li>24-Dec-2020: The creation of a <a
						href="https://www.w3.org/publishing/epub32/epub-packages.html#sec-metadata-elem-identifiers-pid"
						>release identifier</a> [<cite><a class="bibref" data-link-type="biblio"
							href="#bib-epubpackages-32" title="EPUB Packages 3.2">epubpackages-32</a></cite>] is no
					longer defined. See <a href="https://github.com/w3c/epub-specs/issues/1440">issue 1440</a>.</li>
				<li>06-Nov-2020: Reading systems are now required to <a href="#confreq-rs-xml-extid">not resolve
						external identifiers</a> in doctype declarations. See <a
						href="https://github.com/w3c/epub-specs/issues/1338">issue 1338</a>.</li>
				<li>05-Nov-2020: Generalized the restriction on custom attribute namespace URIs to exclude all of
					idpf.org and w3.org. See <a href="https://github.com/w3c/epub-specs/issues/1388">issue
					1388</a>.</li>
				<li>30-Sept-2020: The structure of the EPUB core specifications has been simplified to ease
					understanding and access to information. This specification now consolidates the reading system
					requirements from the EPUB 3.2 specification together with the Packages, Content Documents, OCF and
					media overlays specifications. The EPUB 3.3 core specification now focuses only on authoring
					requirements.</li>
			</ul>
		</section>
		<section id="ack" class="appendix informative">
			<div class="header-wrapper">
				<h2 id="b-acknowledgements"><bdi class="secno">B. </bdi>Acknowledgements</h2>
				<a class="self-link" href="#ack" aria-label="Permalink for Appendix B."></a>
			</div>
			<p><em>This section is non-normative.</em></p>


			<p>Specifications, like art, are human creations. No human has done more for EPUB than Garth Conboy, who has
				been there every step of the way, from the very first OEB&#160;1.0 in 1999 to today's EPUB&#160;3.3.
				None of this would have happened without Garth's vision, knowledge, and preternatural good nature. We
				dedicate EPUB&#160;3.3 to his memory. We are forever in your debt, Garth.</p>

			<p>The following members of the EPUB 3 Working Group contributed to the development of this
				specification:</p>

			<ul class="ack">
				<li>Will AWAD (Newgen Knowledgeworks)</li>
				<li>Sofia Bautista (Legible Media Inc.)</li>
				<li>Laura Brady (Legible Media Inc.)</li>
				<li>Leah Brochu (National Network for Equitable Library Service)</li>
				<li>Matthew C. Chan (House of Anansi Press)</li>
				<li>Yu-Wei Chang (Taiwan Digital Publishing Forum)</li>
				<li>Fred Chasen (Scribd)</li>
				<li>Juan Corona (Legible Media Inc.)</li>
				<li>Dave Cramer (<abbr title="World Wide Web Consortium">W3C</abbr> Invited Expert, chair)</li>
				<li>Romain Deltour (DAISY Consortium)</li>
				<li>Marisa DeMeglio (DAISY Consortium)</li>
				<li>Brady Duga (Google LLC)</li>
				<li>Reinaldo Ferraz (NIC.br - Brazilian Network Information Center)</li>
				<li>John Foliot (<abbr title="World Wide Web Consortium">W3C</abbr> Invited Expert)</li>
				<li>Teenya Franklin (Pearson plc)</li>
				<li>Hadrien Gardeur (EDRLab)</li>
				<li>Matt Garrish (DAISY Consortium)</li>
				<li>Jen Goulden (Crawford Technologies)</li>
				<li>Ivan Herman (<abbr title="World Wide Web Consortium">W3C</abbr>, staff contact)</li>
				<li>Tetsu Hoshino (Kodansha, Publishers, Ltd.)</li>
				<li>Norikazu Ishizu (Kadokawa Corporation)</li>
				<li>Norihito IYENAGA (Kodansha, Publishers, Ltd.)</li>
				<li>Rick Johnson (VitalSource Technologies)</li>
				<li>Ken Jones (Circular Software)</li>
				<li>Antonio Kamiya (Dentsu Group Inc.)</li>
				<li>Deborah Kaplan (<abbr title="World Wide Web Consortium">W3C</abbr> Invited Expert)</li>
				<li>Bill Kasdorf (Book Industry Study Group)</li>
				<li>George Kerscher (DAISY Consortium)</li>
				<li>Kazuhito Kidachi (Mitsue-Links Co., Ltd.)</li>
				<li>Masakazu Kitahara (Voyager Japan, Inc.)</li>
				<li>Toshiaki Koike (Voyager Japan, Inc.)</li>
				<li>Ryo Kuroda (ACCESS CO., LTD.)</li>
				<li>Charles LaPierre (Benetech)</li>
				<li>Dan Lazin (Google LLC)</li>
				<li>Laurent Le Meur (EDRLab)</li>
				<li>Victoria Lee (Apple, Inc.)</li>
				<li>Farrah Little (National Network for Equitable Library Service)</li>
				<li>Victor Lopes (Apple, Inc.)</li>
				<li>Karan Malhotra (Newgen Knowledgeworks)</li>
				<li>Makoto Murata (DAISY Consortium)</li>
				<li>Cristina Mussinelli (Fondazione LIA)</li>
				<li>Yoichiro Nagao (Kodansha, Publishers, Ltd.)</li>
				<li>Theresa O'Connor (Apple, Inc.)</li>
				<li>Yoshinori Ohmura (SHUEISHA Inc.)</li>
				<li>Rachel Osolen (National Network for Equitable Library Service)</li>
				<li>Gregorio Pellegrino (Fondazione LIA)</li>
				<li>Vijaya Gowri Perumal (Newgen Knowledgeworks)</li>
				<li>Wendy Reid (Rakuten Group, Inc., chair)</li>
				<li>John Roque (Apple, Inc.)</li>
				<li>Leonard Rosenthol (Adobe)</li>
				<li>Shinobu Sato (Kadokawa Corporation)</li>
				<li>Ben Schroeter (Pearson plc)</li>
				<li>Daihei Shiohama (MEDIA DO Co., Ltd.)</li>
				<li>Tzviya Siegman (Wiley)</li>
				<li>Avneesh Singh (DAISY Consortium)</li>
				<li>MOTOI SUZUKI (SHUEISHA Inc.)</li>
				<li>Yutaka Suzuki (Kadokawa Corporation)</li>
				<li>Kyrce Swenson (Pearson plc)</li>
				<li>Shinya Takami (Kadokawa Corporation, chair)</li>
				<li>Mateus Teixeira (W. W. Norton &amp; Company)</li>
				<li>Yukio Tomikura (Kodansha, Publishers, Ltd.)</li>
				<li>Aimee Ubbink (Crawford Technologies)</li>
				<li>Daniel Weck (DAISY Consortium)</li>
				<li>Zheng Xu (Gardenia Corp)</li>
				<li>Fuqiao Xue (<abbr title="World Wide Web Consortium">W3C</abbr>)</li>
				<li>Evan Yamanishi (W. W. Norton &amp; Company)</li>
				<li>Osamu Yoshiba (Kodansha, Publishers, Ltd.)</li>
				<li>Junichi Yoshii (Kodansha, Publishers, Ltd.)</li>
				<li>Naomi Yoshizawa (<abbr title="World Wide Web Consortium">W3C</abbr>)</li>
				<li>Laurence Zaysser (EDRLab)</li>
			</ul>

		</section>
		<section id="references" class="appendix">
			<div class="header-wrapper">
				<h2 id="c-references"><bdi class="secno">C. </bdi>References</h2>
				<a class="self-link" href="#references" aria-label="Permalink for Appendix C."></a>
			</div>
			<section id="normative-references">
				<div class="header-wrapper">
					<h3 id="c-1-normative-references"><bdi class="secno">C.1 </bdi>Normative references</h3>
					<a class="self-link" href="#normative-references" aria-label="Permalink for Appendix C.1"></a>
				</div>

				<dl class="bibliography">
					<dt id="bib-bidi">[bidi]</dt>
					<dd>
						<a href="https://www.unicode.org/reports/tr9/tr9-44.html"><cite>Unicode Bidirectional
								Algorithm</cite></a>. Mark Davis; Aharon Lanin; Andrew Glass. Unicode Consortium. 27
						August 2021. Unicode Standard Annex #9. URL: <a
							href="https://www.unicode.org/reports/tr9/tr9-44.html"
							>https://www.unicode.org/reports/tr9/tr9-44.html</a>
					</dd>
					<dt id="bib-css-fonts-4">[css-fonts-4]</dt>
					<dd>
						<a href="https://www.w3.org/TR/css-fonts-4/"><cite>CSS Fonts Module Level 4</cite></a>. John
						Daggett; Myles Maxfield; Chris Lilley. W3C. 21 December 2021. W3C Working Draft. URL: <a
							href="https://www.w3.org/TR/css-fonts-4/">https://www.w3.org/TR/css-fonts-4/</a>
					</dd>
					<dt id="bib-csssnapshot">[csssnapshot]</dt>
					<dd>
						<a href="https://www.w3.org/TR/CSS/"><cite>CSS Snapshot</cite></a>. URL: <a
							href="https://www.w3.org/TR/CSS/">https://www.w3.org/TR/CSS/</a>
					</dd>
					<dt id="bib-dcterms">[dcterms]</dt>
					<dd>
						<a href="https://www.dublincore.org/specifications/dublin-core/dcmi-terms/"><cite>DCMI Metadata
								Terms</cite></a>. DCMI Usage Board. DCMI. 20 January 2020. DCMI Recommendation. URL: <a
							href="https://www.dublincore.org/specifications/dublin-core/dcmi-terms/"
							>https://www.dublincore.org/specifications/dublin-core/dcmi-terms/</a>
					</dd>
					<dt id="bib-dom">[dom]</dt>
					<dd>
						<a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG.
						Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
					</dd>
					<dt id="bib-dom-level-2-style">[dom-level-2-style]</dt>
					<dd>
						<a href="https://www.w3.org/TR/DOM-Level-2-Style/"><cite>Document Object Model (DOM) Level 2
								Style Specification</cite></a>. Chris Wilson; Philippe Le Hegaret. W3C. 3 November 2020.
						W3C Recommendation. URL: <a href="https://www.w3.org/TR/DOM-Level-2-Style/"
							>https://www.w3.org/TR/DOM-Level-2-Style/</a>
					</dd>
					<dt id="bib-epub-33">[epub-33]</dt>
					<dd>
						<a href="https://www.w3.org/TR/epub-33/"><cite>EPUB 3.3</cite></a>. Matt Garrish; Ivan Herman;
						Dave Cramer. W3C. 5 May 2022. W3C Candidate Recommendation. URL: <a
							href="https://www.w3.org/TR/epub-33/">https://www.w3.org/TR/epub-33/</a>
					</dd>
					<dt id="bib-epubcontentdocs-301">[epubcontentdocs-301]</dt>
					<dd>
						<a href="http://idpf.org/epub/301/spec/epub-contentdocs-20140626.html"><cite>EPUB Content
								Documents 3.0.1</cite></a>. Markus Gylling; William McCoy; Elika J. Etimad; Matt
						Garrish. IDPF. 26 June 2014. URL: <a
							href="http://idpf.org/epub/301/spec/epub-contentdocs-20140626.html"
							>http://idpf.org/epub/301/spec/epub-contentdocs-20140626.html</a>
					</dd>
					<dt id="bib-html">[html]</dt>
					<dd>
						<a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van
						Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living
						Standard. URL: <a href="https://html.spec.whatwg.org/multipage/"
							>https://html.spec.whatwg.org/multipage/</a>
					</dd>
					<dt id="bib-infra">[infra]</dt>
					<dd>
						<a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren;
						Domenic Denicola. WHATWG. Living Standard. URL: <a href="https://infra.spec.whatwg.org/"
							>https://infra.spec.whatwg.org/</a>
					</dd>
					<dt id="bib-mathml3">[mathml3]</dt>
					<dd>
						<a href="https://www.w3.org/TR/MathML3/"><cite>Mathematical Markup Language (MathML) Version 3.0
								2nd Edition</cite></a>. David Carlisle; Patrick D F Ion; Robert R Miner. W3C. 10 April
						2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/MathML3/"
							>https://www.w3.org/TR/MathML3/</a>
					</dd>
					<dt id="bib-opentype">[opentype]</dt>
					<dd>
						<a href="http://www.microsoft.com/typography/otspec/default.htm"><cite>OpenType
								specification</cite></a>. Microsoft. URL: <a
							href="http://www.microsoft.com/typography/otspec/default.htm"
							>http://www.microsoft.com/typography/otspec/default.htm</a>
					</dd>
					<dt id="bib-rdfa-core">[rdfa-core]</dt>
					<dd>
						<a href="https://www.w3.org/TR/rdfa-core/"><cite>RDFa Core 1.1 - Third Edition</cite></a>. Ben
						Adida; Mark Birbeck; Shane McCarron; Ivan Herman et al. W3C. 17 March 2015. W3C Recommendation.
						URL: <a href="https://www.w3.org/TR/rdfa-core/">https://www.w3.org/TR/rdfa-core/</a>
					</dd>
					<dt id="bib-rfc1951">[rfc1951]</dt>
					<dd>
						<a href="https://www.rfc-editor.org/rfc/rfc1951"><cite>DEFLATE Compressed Data Format
								Specification version 1.3</cite></a>. P. Deutsch. IETF. May 1996. Informational. URL: <a
							href="https://www.rfc-editor.org/rfc/rfc1951">https://www.rfc-editor.org/rfc/rfc1951</a>
					</dd>
					<dt id="bib-rfc2046">[rfc2046]</dt>
					<dd>
						<a href="https://www.rfc-editor.org/rfc/rfc2046"><cite>Multipurpose Internet Mail Extensions
								(MIME) Part Two: Media Types</cite></a>. N. Freed; N. Borenstein. IETF. November 1996.
						Draft Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc2046"
							>https://www.rfc-editor.org/rfc/rfc2046</a>
					</dd>
					<dt id="bib-rfc2119">[RFC2119]</dt>
					<dd>
						<a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
								Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL:
							<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
					</dd>
					<dt id="bib-rfc2397">[rfc2397]</dt>
					<dd>
						<a href="https://www.rfc-editor.org/rfc/rfc2397"><cite>The "data" URL scheme</cite></a>. L.
						Masinter. IETF. August 1998. Proposed Standard. URL: <a
							href="https://www.rfc-editor.org/rfc/rfc2397">https://www.rfc-editor.org/rfc/rfc2397</a>
					</dd>
					<dt id="bib-rfc8174">[RFC8174]</dt>
					<dd>
						<a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in
								RFC 2119 Key Words</cite></a>. B. Leiba. IETF. May 2017. Best Current Practice. URL: <a
							href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
					</dd>
					<dt id="bib-smil3">[smil3]</dt>
					<dd>
						<a href="https://www.w3.org/TR/SMIL3/"><cite>Synchronized Multimedia Integration Language (SMIL
								3.0)</cite></a>. Dick Bulterman. W3C. 1 December 2008. W3C Recommendation. URL: <a
							href="https://www.w3.org/TR/SMIL3/">https://www.w3.org/TR/SMIL3/</a>
					</dd>
					<dt id="bib-svg">[svg]</dt>
					<dd>
						<a href="https://www.w3.org/TR/SVG/"><cite>SVG</cite></a>. W3C. URL: <a
							href="https://www.w3.org/TR/SVG/">https://www.w3.org/TR/SVG/</a>
					</dd>
					<dt id="bib-truetype">[truetype]</dt>
					<dd>
						<a href="https://developer.apple.com/fonts/TrueType-Reference-Manual/"><cite>TrueType™ Reference
								Manual</cite></a>. Apple, Inc. URL: <a
							href="https://developer.apple.com/fonts/TrueType-Reference-Manual/"
							>https://developer.apple.com/fonts/TrueType-Reference-Manual/</a>
					</dd>
					<dt id="bib-url">[url]</dt>
					<dd>
						<a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Anne van Kesteren. WHATWG.
						Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
					</dd>
					<dt id="bib-w3cprocess">[w3cprocess]</dt>
					<dd>
						<a href="https://www.w3.org/Consortium/Process/"><cite>W3C Process Document</cite></a>. URL: <a
							href="https://www.w3.org/Consortium/Process/">https://www.w3.org/Consortium/Process/</a>
					</dd>
					<dt id="bib-wai-aria">[wai-aria]</dt>
					<dd>
						<a href="https://www.w3.org/TR/wai-aria/"><cite>Accessible Rich Internet Applications (WAI-ARIA)
								1.0</cite></a>. James Craig; Michael Cooper et al. W3C. 20 March 2014. W3C
						Recommendation. URL: <a href="https://www.w3.org/TR/wai-aria/"
							>https://www.w3.org/TR/wai-aria/</a>
					</dd>
					<dt id="bib-webidl">[webidl]</dt>
					<dd>
						<a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy
						Gu. WHATWG. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/"
							>https://webidl.spec.whatwg.org/</a>
					</dd>
					<dt id="bib-woff">[woff]</dt>
					<dd>
						<a href="https://www.w3.org/TR/WOFF/"><cite>WOFF File Format 1.0</cite></a>. Jonathan Kew; Tal
						Leming; Erik van Blokland. W3C. 13 December 2012. W3C Recommendation. URL: <a
							href="https://www.w3.org/TR/WOFF/">https://www.w3.org/TR/WOFF/</a>
					</dd>
					<dt id="bib-woff2">[woff2]</dt>
					<dd>
						<a href="https://www.w3.org/TR/WOFF2/"><cite>WOFF File Format 2.0</cite></a>. Vladimir
						Levantovsky; Raph Levien. W3C. 10 March 2022. W3C Recommendation. URL: <a
							href="https://www.w3.org/TR/WOFF2/">https://www.w3.org/TR/WOFF2/</a>
					</dd>
					<dt id="bib-xml">[xml]</dt>
					<dd>
						<a href="https://www.w3.org/TR/xml/"><cite>Extensible Markup Language (XML) 1.0 (Fifth
								Edition)</cite></a>. Tim Bray; Jean Paoli; Michael Sperberg-McQueen; Eve Maler; François
						Yergeau et al. W3C. 26 November 2008. W3C Recommendation. URL: <a
							href="https://www.w3.org/TR/xml/">https://www.w3.org/TR/xml/</a>
					</dd>
					<dt id="bib-xml-names">[xml-names]</dt>
					<dd>
						<a href="https://www.w3.org/TR/xml-names/"><cite>Namespaces in XML 1.0 (Third
							Edition)</cite></a>. Tim Bray; Dave Hollander; Andrew Layman; Richard Tobin; Henry Thompson
						et al. W3C. 8 December 2009. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xml-names/"
							>https://www.w3.org/TR/xml-names/</a>
					</dd>
					<dt id="bib-xmlenc-decrypt">[xmlenc-decrypt]</dt>
					<dd>
						<a href="https://www.w3.org/TR/xmlenc-decrypt/"><cite>Decryption Transform for XML
								Signature</cite></a>. Merlin Hughes; Takeshi Imamura; Hiroshi Maruyama. W3C. 10 December
						2002. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xmlenc-decrypt/"
							>https://www.w3.org/TR/xmlenc-decrypt/</a>
					</dd>
					<dt id="bib-zip">[zip]</dt>
					<dd>
						<a href="https://www.pkware.com/documents/casestudies/APPNOTE.TXT"><cite>.ZIP File Format
								Specification</cite></a>. 1 September 2012. Final. URL: <a
							href="https://www.pkware.com/documents/casestudies/APPNOTE.TXT"
							>https://www.pkware.com/documents/casestudies/APPNOTE.TXT</a>
					</dd>
				</dl>
			</section>
			<section id="informative-references">
				<div class="header-wrapper">
					<h3 id="c-2-informative-references"><bdi class="secno">C.2 </bdi>Informative references</h3>
					<a class="self-link" href="#informative-references" aria-label="Permalink for Appendix C.2"></a>
				</div>

				<dl class="bibliography">
					<dt id="bib-css2">[css2]</dt>
					<dd>
						<a href="https://www.w3.org/TR/CSS21/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1)
								Specification</cite></a>. Bert Bos; Tantek Çelik; Ian Hickson; Håkon Wium Lie. W3C. 7
						June 2011. W3C Recommendation. URL: <a href="https://www.w3.org/TR/CSS21/"
							>https://www.w3.org/TR/CSS21/</a>
					</dd>
					<dt id="bib-epub-tts-10">[epub-tts-10]</dt>
					<dd>
						<a href="https://www.w3.org/TR/epub-tts-10/"><cite>EPUB 3 Text-to-Speech Enhancements
							1.0</cite></a>. Matt Garrish. W3C. 31 March 2022. W3C Working Group Note. URL: <a
							href="https://www.w3.org/TR/epub-tts-10/">https://www.w3.org/TR/epub-tts-10/</a>
					</dd>
					<dt id="bib-epubpackages-32">[epubpackages-32]</dt>
					<dd>
						<a href="https://www.w3.org/publishing/epub32/epub-packages.html"><cite>EPUB Packages
							3.2</cite></a>. Matt Garrish; Dave Cramer. EPUB 3 Community Group. 08 May 2019. URL: <a
							href="https://www.w3.org/publishing/epub32/epub-packages.html"
							>https://www.w3.org/publishing/epub32/epub-packages.html</a>
					</dd>
					<dt id="bib-h264">[h264]</dt>
					<dd>
						<a href="https://www.itu.int/ITU-T/recommendations/rec.aspx?rec=13189"><cite>H.264 : Advanced
								video coding for generic audiovisual services</cite></a>. 2017-04-13. URL: <a
							href="https://www.itu.int/ITU-T/recommendations/rec.aspx?rec=13189"
							>https://www.itu.int/ITU-T/recommendations/rec.aspx?rec=13189</a>
					</dd>
					<dt id="bib-indexeddb">[indexeddb]</dt>
					<dd>
						<a href="https://www.w3.org/TR/IndexedDB/"><cite>Indexed Database API</cite></a>. Nikunj Mehta;
						Jonas Sicking; Eliot Graff; Andrei Popescu; Jeremy Orlow; Joshua Bell. W3C. 8 January 2015. W3C
						Recommendation. URL: <a href="https://www.w3.org/TR/IndexedDB/"
							>https://www.w3.org/TR/IndexedDB/</a>
					</dd>
					<dt id="bib-rfc6386">[rfc6386]</dt>
					<dd>
						<a href="https://www.rfc-editor.org/rfc/rfc6386"><cite>VP8 Data Format and Decoding
							Guide</cite></a>. J. Bankoski; J. Koleszar; L. Quillio; J. Salonen; P. Wilkins; Y. Xu. IETF.
						November 2011. Informational. URL: <a href="https://www.rfc-editor.org/rfc/rfc6386"
							>https://www.rfc-editor.org/rfc/rfc6386</a>
					</dd>
					<dt id="bib-uaag20">[uaag20]</dt>
					<dd>
						<a href="https://www.w3.org/TR/UAAG20/"><cite>User Agent Accessibility Guidelines (UAAG)
								2.0</cite></a>. James Allan; Greg Lowney; Kimberly Patch; Jeanne F Spellman. W3C. 15
						December 2015. W3C Working Group Note. URL: <a href="https://www.w3.org/TR/UAAG20/"
							>https://www.w3.org/TR/UAAG20/</a>
					</dd>
					<dt id="bib-wai-aria-11">[wai-aria-11]</dt>
					<dd>
						<a href="https://www.w3.org/TR/wai-aria-1.1/"><cite>Accessible Rich Internet Applications
								(WAI-ARIA) 1.1</cite></a>. Joanmarie Diggs; Shane McCarron; Michael Cooper; Richard
						Schwerdtfeger; James Craig. W3C. 14 December 2017. W3C Recommendation. URL: <a
							href="https://www.w3.org/TR/wai-aria-1.1/">https://www.w3.org/TR/wai-aria-1.1/</a>
					</dd>
				</dl>
			</section>
		</section><p role="navigation" id="back-to-top">
			<a href="#title"><abbr title="Back to Top">↑</abbr></a>
		</p><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-content-display-area"
			aria-label="Links in this document to definition: content display area">
			<span class="caret"></span>
			<div>
				<a class="self-link" href="#dfn-content-display-area"
					aria-label="Permalink for definition: content display area. Activate to close this dialog."
					>Permalink</a>
				<span class="marker dfn-exported" title="Definition can be referenced by other specifications"
					>exported</span>
			</div>
			<p><b>Referenced in:</b></p>
			<ul>
				<li>
					<a href="#ref-for-dfn-content-display-area-1" title="§ 7.1.1.3 The rendition:spread property">§
						7.1.1.3 The rendition:spread property</a>
				</li>
				<li>
					<a href="#ref-for-dfn-content-display-area-2" title="§ 7.1.2 Initial containing block dimensions">§
						7.1.2 Initial containing block dimensions</a>
				</li>
				<li>
					<a href="#ref-for-dfn-content-display-area-3" title="§ 7.1.3 Viewport rendering">§ 7.1.3 Viewport
						rendering</a>
					<a href="#ref-for-dfn-content-display-area-4" title="Reference 2">(2)</a>
				</li>
			</ul>
		</div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-epubreadingsystem"
			aria-label="Links in this document to definition: epubReadingSystem">
			<span class="caret"></span>
			<div>
				<a class="self-link" href="#dfn-epubreadingsystem"
					aria-label="Permalink for definition: epubReadingSystem. Activate to close this dialog."
					>Permalink</a>
				<span class="marker dfn-exported" title="Definition can be referenced by other specifications"
					>exported</span>
			</div>
			<p><b>Referenced in:</b></p>
			<ul>
				<li>
					<a href="#ref-for-dfn-epubreadingsystem-1" title="§ 15.1 Interface definition">§ 15.1 Interface
						definition</a>
				</li>
			</ul>
		</div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-epubreadingsystem"
			aria-label="Links in this document to definition: EpubReadingSystem">
			<span class="caret"></span>
			<div>
				<a class="self-link" href="#dom-epubreadingsystem"
					aria-label="Permalink for definition: EpubReadingSystem. Activate to close this dialog."
					>Permalink</a>
				<span class="marker dfn-exported" title="Definition can be referenced by other specifications"
					>exported</span>
			</div>
			<p><b>Referenced in:</b></p>
			<ul>
				<li>Not referenced in this document.</li>
			</ul>
		</div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
			id="dfn-panel-for-dom-navigator-epubreadingsystem"
			aria-label="Links in this document to definition: Navigator.epubReadingSystem">
			<span class="caret"></span>
			<div>
				<a class="self-link" href="#dom-navigator-epubreadingsystem"
					aria-label="Permalink for definition: Navigator.epubReadingSystem. Activate to close this dialog."
					>Permalink</a>
				<span class="marker dfn-exported" title="Definition can be referenced by other specifications"
					>exported</span>
				<a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1357718267">IDL</a>
			</div>
			<p><b>Referenced in:</b></p>
			<ul>
				<li>
					<a href="#ref-for-dom-navigator-epubreadingsystem-1" title="§ 15.1 Interface definition">§ 15.1
						Interface definition</a>
				</li>
			</ul>
		</div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
			id="dfn-panel-for-dom-epubreadingsystem-name" aria-label="Links in this document to definition: name">
			<span class="caret"></span>
			<div>
				<a class="self-link" href="#dom-epubreadingsystem-name"
					aria-label="Permalink for definition: name. Activate to close this dialog.">Permalink</a>
				<span class="marker dfn-exported" title="Definition can be referenced by other specifications"
					>exported</span>
				<a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1357718267">IDL</a>
			</div>
			<p><b>Referenced in:</b></p>
			<ul>
				<li>
					<a href="#ref-for-dom-epubreadingsystem-name-1" title="§ 15.1 Interface definition">§ 15.1 Interface
						definition</a>
				</li>
			</ul>
		</div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
			id="dfn-panel-for-dom-epubreadingsystem-version" aria-label="Links in this document to definition: version">
			<span class="caret"></span>
			<div>
				<a class="self-link" href="#dom-epubreadingsystem-version"
					aria-label="Permalink for definition: version. Activate to close this dialog.">Permalink</a>
				<span class="marker dfn-exported" title="Definition can be referenced by other specifications"
					>exported</span>
				<a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1357718267">IDL</a>
			</div>
			<p><b>Referenced in:</b></p>
			<ul>
				<li>
					<a href="#ref-for-dom-epubreadingsystem-version-1" title="§ 15.1 Interface definition">§ 15.1
						Interface definition</a>
				</li>
			</ul>
		</div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
			id="dfn-panel-for-dom-epubreadingsystem-hasfeature"
			aria-label="Links in this document to definition: hasFeature">
			<span class="caret"></span>
			<div>
				<a class="self-link" href="#dom-epubreadingsystem-hasfeature"
					aria-label="Permalink for definition: hasFeature. Activate to close this dialog.">Permalink</a>
				<span class="marker dfn-exported" title="Definition can be referenced by other specifications"
					>exported</span>
				<a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1357718267">IDL</a>
			</div>
			<p><b>Referenced in:</b></p>
			<ul>
				<li>
					<a href="#ref-for-dom-epubreadingsystem-hasfeature-1" title="§ 15.1 Interface definition">§ 15.1
						Interface definition</a>
				</li>
			</ul>
		</div>
		<script id="respec-dfn-panel">
			<![CDATA[
			(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()
    	]]>
    	</script>
		<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
	</body>
</html>
