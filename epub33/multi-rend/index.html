<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
	<head>
		<meta charset="utf-8" />
		<title>EPUB 3 Multiple-Rendition Publications 1.1</title>
		<script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove"></script>
		<script src="../common/js/css-inline.js" class="remove"></script>
		<script src="../common/js/copyright.js" class="remove"></script>
		<script class="remove">
			//<![CDATA[
            var respecConfig = {
                group: "epub",
                wgPublicList: "public-epub-wg",
                specStatus: "ED",
                shortName: "epub-multi-rend-11",
                edDraftURI: "https://w3c.github.io/epub-specs/epub33/multi-rend/",
                previousPublishDate: "2021-12-08",
                previousMaturity: "NOTE",
                copyrightStart: "2015",
                noRecTrack: true,
                editors:[ {
                    name: "Matt Garrish",
                    company: "DAISY Consortium",
                    companyURL: "https://daisy.org",
					w3cid: 51655
                }],
                formerEditors:[ {
                    name: "Jim Lester",
                    company: "Barnes &amp; Noble"
                },
                {
                    name: "Takeshi Kanai",
                    company: "Sony Corporation",
                    companyURL: "http://www.sony.net/"
                }],
                includePermalinks: true,
                permalinkEdge: true,
                permalinkHide: false,
                github: {
                    repoURL: "https://github.com/w3c/epub-specs",
                    branch: "main"
                },
                pluralize: true,
				localBiblio: {
					"iso24751-3": {
						"title": " ISO/IEC 24751-3:2008 Information technology -- Individualized adaptability and accessibility in e-learning, education and training -- Part 3: &quot;Access for all&quot; digital resource description",
						"href": "http://www.iso.org/iso/catalogue_detail?csnumber=43604",
						"date": "2008-10-01"
					},
					"epubcfi-11": {
						"authors":[
							"Peter Sorotokin",
							"Garth Conboy",
							"Brady Duga",
							"John Rivlin",
							"Don Beaver",
							"Kevin Ballard",
							"Alastair Fettes",
							"Daniel Weck"
						],
						"title": "EPUB Canonical Fragment Identifiers 1.1",
						"href": "http://idpf.org/epub/linking/cfi/epub-cfi-20170105.html",
						"date": "5 October 2017",
						"publisher": "IDPF"
					},	
				},
				xref: {
					profile: "web-platform",
					specs: ["epub-rs-33","epub-33"]
				},
                preProcess:[inlineCustomCSS]
            };//]]>
      </script>
	</head>
	<body>
		<div data-include="../common/copyright.html" data-oninclude="modifyCopyright" data-include-replace="true"></div>
		<section id="abstract">
			<p>This specification, EPUB Multiple-Rendition Publications, defines the creation and rendering of EPUBÂ®
				Publications consisting of more than one rendition.</p>
		</section>
		<section id="sotd"></section>
		<section id="toc"></section>
		<section id="intro">
			<h2>Introduction</h2>

			<section id="overview" class="informative">
				<h3>Overview</h3>

				<p>The need to include more than one [=rendition=] of an [=EPUB publication=] has grown as [=reading
					systems=] have evolved and become more sophisticated. While some measure of content adaptation has
					always been possible at the style sheet level, it is both limited in what it can accomplish and
					limited to content rendering. Existing fallback mechanisms within the <a>package document</a>
					similarly only ensure that resources can be rendered.</p>

				<p>Adaptation is not just about optimizing styling and positioning content for screen considerations,
					such as dimensions and color or reading system orientation, but often involves changing the content
					itself. The resources and markup required to render a fixed-layout rendition of an EPUB publication
					may overlap with a reflowable version of the same, but the two are never exactly the same.
					Adaptation also involves adapting the prose of a work. In an increasingly interconnected world,
					including multiple translations of a work rather than bundling them all separately as
					single-language EPUB publications is often a necessity. And adaptation is also about the ability to
					move from the same spot in one rendition to the equivalent spot in another as changes in the reading
					environment occur.</p>

				<p>This specification defines how a reading system selects from multiple [=EPUB creator=]-provided
					renditions of the content to best match the current device characteristics and user preferences
					&#8212; it does not define methods for modifying content on the fly. As changes occur to device
					orientation or the user's preferred reading modality, for example, the reading system will be able
					to check for a better rendition and seamlessly present it using the functionality defined
					herein.</p>

				<p>The specification addresses each of the major requirements in the discovery of, selection of, and
					mapping between, multiple renditions of an EPUB publication. In particular:</p>

				<ul>
					<li>the establishment of a unique identifier common to all the renditions in the
							<code>META-INF/metadata.xml</code> file;</li>
					<li>the selection of renditions through a set of attributes that can be attached to
							<code>rootfile</code> elements in the [=container document=];</li>
					<li>the optional ability to move from a point in one rendition to the same location in another by
						means of a mapping document.</li>
				</ul>

				<p>Taken together, these features enable the creation of advanced multiple-rendition publications that
					reading systems can adapt to changing user needs.</p>
			</section>

			<section id="background" class="informative">
				<h3>Background</h3>

				<p>The notion of including multiple renditions of an [=EPUB publication=] has existed for as long as the
					EPUB standard, but the specification has never fully addressed what these renditions are for and how
					to access them. As a result, the EPUB 3 specification generally equates an EPUB publication with a
					single rendering of the content. Moreover, most [=EPUB creators=] and [=reading system=] developers
					equate an EPUB publication with a single [=package document=] referenced from the first
						<code>rootfile</code> element in the <code>container.xml</code> file [[epub-33]].</p>

				<p>In practice, however, the <code>container.xml</code> file does not restrict EPUB creators to listing
					only a single package document. In EPUB 2, for example, [=EPUB creators=] could add additional
						<code>rootfile</code> elements referencing any other format they desired (e.g., another package
					document, a PDF file, or even a Word Document). In EPUB 3, <code>rootfile</code> elements were
					restricted to referencing only package documents of the same version of the standard.</p>

				<p>This specification moves beyond merely allowing multiple renderings to define a more complete
					framework for identifying and selecting from among them. Each package document referenced from a
						<code>rootfile</code> element is defined to be one [=rendition=] of the EPUB publication, with
					the first package document representing the [=default rendition=] (i.e., the one that all reading
					systems have to process).</p>

				<p>Although this model is intended to work as seamlessly as possible with existing the EPUB ecosystem,
					the authoring of multiple renditions requires some compromises to maintain compatibility (e.g., some
					duplication of metadata will be necessary for reading systems that do not handle multiple
					renditions).</p>
			</section>

			<section id="rel-epub3">
				<h4>Relationship to EPUB 3</h4>

				<p>The method defined in this specification for including multiple [=renditions=] within an <a>EPUB
						container</a> is not required for all [=EPUB publications=]. Multiple renditions MAY be included
					in a container without adhering to this specification, as the ability to create multiple-rendition
					containers pre-dates this specification.</p>

				<p>It is strongly RECOMMENDED, however, that all future needs for multiple renditions in a container
					follow this specification. Existing implementations that utilize other methods for selecting from
					multiple renditions are also encouraged to consider migrating to use this specification to improve
					the overall interoperability of [=multiple-rendition publications=].</p>

				<p>Some of the <a href="#rendition-selection-attr">rendition selection attributes</a> defined in this
					specification share common names with package document elements and properties [[epub-33]] as they
					are designed to reflect that information for selection purposes.</p>

				<p>Despite this commonality, this specification does not enforce equivalence between the rendition
					selection properties expressed on a <code>rootfile</code> element [[epub-33]] and the metadata
					expressed in the corresponding package document, as direct equivalence is not always possible.</p>

				<p>For example, a multilingual EPUB publication will define more than one [^dc:language^] element
					[[epub-33]] &#8212; one for each language &#8212; but for rendition selection only the primary
					language is defined. Likewise, the language defined in the package document could include a specific
					region code, but for selection purposes the EPUB creator might identify only the language code.</p>

				<p>The reason for common metadata in both locations is to simplify the selection process: including
					attributes avoids the requirement to parse each referenced package document and allows for
					expressions of primacy that are not possible at the package level. It also avoids collisions and
					ambiguities between metadata being used for different purposes (selection versus rendering).</p>

				<p>The selection properties defined in the <a data-cite="epub-33#sec-container-metainf-container.xml"
							><code>container.xml</code> file</a> [[epub-33]] have no rendering behaviors attached to
					them, either. For example, indicating that a rendition is fixed layout in the <a href="#layout-attr"
							><code>rendition:layout</code> attribute</a> does not trigger fixed layout rendering
					behaviors within the specified rendition.</p>

				<p>A reading system renders a rendition according to the metadata expressed in the package document
					only.</p>
			</section>

			<section id="terminology">
				<h3>Terminology</h3>

				<p>This specification uses <a data-cite="epub-33#sec-terminology">terminology defined in EPUB 3</a>
					[[epub-33]].</p>

				<p>It also defines the following terms:</p>

				<dl>
					<dt><dfn>container document</dfn></dt>
					<dd>
						<p>The <a data-cite="epub-33#sec-container-metainf-container.xml"><code>container.xml</code>
								file</a> located in the child <a data-cite="epub-33#sec-container-metainf"
									><code>META-INF</code> directory</a> of the EPUB container root directory
							[[epub-33]]. Each [=rendition=] in the container is identified by a <code>rootfile</code>
							element [[epub-33]].</p>
					</dd>

					<dt><dfn>default rendition</dfn></dt>
					<dd>
						<p>The [=rendition=] listed in the first <code>rootfile</code> element in the <a
								data-cite="epub-33#sec-container-metainf-container.xml"><code>container.xml</code>
								file</a> [[epub-33]].</p>
					</dd>

					<dt><dfn data-lt="multiple-rendition publications">multiple-rendition publication</dfn></dt>
					<dd>
						<p>An EPUB publication that consists of two or more [=renditions=] of the content.</p>
					</dd>

					<dt><dfn>rendition</dfn></dt>
					<dd>
						<p>One rendering of the content of an EPUB publication, as expressed by a package document.</p>
					</dd>

					<dt><dfn data-lt="rendition mapping documents">rendition mapping document</dfn></dt>
					<dd>
						<p>A specialization of the XHTML content document, containing machine-readable mappings between
							equivalent content in different [=renditions=], conforming to the constraints expressed in
								<a href="#rendition-mapping">rendition mapping</a>.</p>
					</dd>
				</dl>

				<div class="note">
					<p>Only the first instance of a term in a section links to its definition.</p>
				</div>
			</section>

			<section id="conformance"></section>
		</section>
		<section id="container">
			<h2>Specifying multiple renditions</h2>

			<p>Each rendition of an [=EPUB publication=] MUST meet the <a data-cite="epub-33#sec-epub-conf">requirements
					for EPUB publications</a> [[epub-33]].</p>

			<p>The [=package document=] for each rendition MUST be listed in the <code>container.xml</code> file
				[[epub-33]], where the first package document listed represents the [=default rendition=].</p>

			<aside class="example">
				<p>The following example shows SVG and XHTML renditions bundled in the same container:</p>

				<pre id="sep-dir">&lt;?xml version="1.0"?&gt;
&lt;container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;rootfiles&gt;
        &lt;rootfile full-path="SVG/Sandman.opf"
            media-type="application/oebps-package+xml" /&gt;
        &lt;rootfile full-path="XHTML/Sandman.opf"
            media-type="application/oebps-package+xml" /&gt;
    &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
			</aside>

			<p>Each rendition of the EPUB publication SHOULD only list the [=publication resources=] necessary for its
				rendering in its package document [=EPUB manifest | manifest=] [[epub-33]]. renditions MAY reference the
				same publication resources.</p>

			<div class="note">
				<p>Renditions may not be able to access resources stored in sibling directories on all reading systems
					(i.e., some reading systems do not provide access outside the directory a rendition's package
					document is stored in).</p>

				<p>For example, given the following directory structure (all resources except the package documents
					omitted for clarity):</p>

				<pre>/META-INF
/Rendition1
   - rendition1.opf
/Rendition2
   - rendition2.opf
/Shared</pre>

				<p>Resources in the "<code>Rendition1</code>" directory may not be able to access resources in either
						"<code>Rendition2</code>" or "<code>Shared</code>".</p>

				<p>To share resources between renditions, it is recommended that the package documents be located in a
					common directory and the resources for each rendition stored in separate subdirectories.</p>

				<p>Restructuring the previous example as follows would allow shared access to all resources:</p>

				<pre class="prettyprint">/META-INF
/EPUB
   /Rendition1
   /Rendition2
   /Shared
   - rendition1.opf
   - rendition2.opf</pre>
			</div>
		</section>
		<section id="sec-metadata">
			<h2>Expressing metadata</h2>

			<section id="rendition-metadata">
				<h3>Rendition metadata</h3>

				<p>Metadata expressed at the rendition level MAY change from instance to instance. For example,
					renditions in different languages will have different primary languages and language-specific
					metadata such as titles will be expressed differently. Similarly, bundled fixed-layout and
					reflowable renditions will express different rendering metadata.</p>
			</section>

			<section id="pub-metadata">
				<h3>Publication metadata</h3>

				<section id="pub-metadata-file">
					<h3>The <code>metadata.xml</code> file</h3>

					<p>To ensure consistency of metadata at the Publication and [=rendition=] levels, this specification
						defines the content model of the root <code>metadata</code> element in the <a
							data-cite="epub-33#sec-container-metainf-metadata.xml"><code>metadata.xml</code> file</a>
						[[epub-33]] to be the same as the package document <a data-cite="epub-33#elemdef-opf-metadata"
								><code>metadata</code> element</a> [[epub-33]], with the following differences in syntax
						and semantics:</p>

					<ul>
						<li>A <code>dc:identifier</code> element [[dcterms]] MUST contain the <a
								data-cite="epub-33#sec-opf-dcidentifier">unique identifier</a> [[epub-33]] for the EPUB
							publication.</li>
						<li>A <code>meta</code> element [[epub-33]] MUST contain the last modified date, expressed using
							the <code>dcterms:modified</code> property [[dcterms]]. The value of the property MUST
							conform to the pattern and rules defined in <a
								data-cite="epub-33#sec-metadata-last-modified">Last modified date</a> [[epub-33]]. Only
							one <code>dcterms:modified</code> property without a <a data-cite="epub-33#attrdef-refines"
									><code>refines</code> attribute</a> [[epub-33]] is allowed.</li>
						<li>All other metadata is OPTIONAL.</li>
						<li>The obsolete <a data-cite="epub-33#sec-opf2-meta">OPF2 <code>meta</code> element</a>
							[[epub-33]] is not allowed.</li>
						<li>The <code>meta</code> and <code>link</code> elements are defined in the same namespace as
							the <code>metadata</code> root element: <code class="uri"><a
									href="http://www.idpf.org/2013/metadata"
								>http://www.idpf.org/2013/metadata</a></code></li>
						<li>In order to enable the full expression of metadata in the <code>metadata.xml</code> file,
							all attributes allowed on the [^package^] element [[epub-33]] are allowed on the root <code
								class="markup">metadata</code> element.</li>
					</ul>

					<div class="note">
						<p>The content of this file is also defined informally through an XML schema. See <a
								href="#schema-metadata"></a> for further details.</p>
					</div>

					<p>This specification does not define a model for the inheritance of metadata from the Publication
						level to the [=rendition=] level, as EPUB processing only requires that the <a>default
							rendition</a> be recognized by reading systems (i.e., reliance on inheritance could result
						in reading systems not locating necessary metadata).</p>

					<div class="note">
						<p>EPUB creators are strongly encouraged to include a complete set of Publication metadata in
							the default rendition to ensure cross-compatibility, even when making use of this file.</p>
						<p>Titles, languages and other metadata is often not applicable from one rendition to another,
							further complicating the sharing of metadata. No assumption can be made that metadata in the
								<code>metadata.xml</code> file is applicable to any given rendition, whether the
							metadata is expressed in the rendition or not.</p>
					</div>

					<div class="note">
						<p>As [[epub-33]] does not define a content model for the <code>metadata.xml</code> file, EPUB
							publications that do not conform to this specification can include different metadata. EPUB
							publications that are not valid to the content model restrictions in this section are not
							valid [=multiple-rendition publications=] as defined by this specification, but might still
							be valid EPUB 3 publications.</p>
						<p>EPUB creators are strongly encouraged to migrate to the content model defined in this
							specification, even if not producing multiple-rendition publications, to ensure consistent
							processing.</p>
					</div>

					<section id="pub-metadata-obfuscation">
						<h4>Resource obfuscation</h4>

						<p>The <a data-cite="epub-33#obfus-algorithm">resource obfuscation algorithm</a> [[epub-33]]
							depends on creating an <a data-cite="epub-33#obfus-keygen">obfuscation key</a> [[epub-33]]
							from the [=unique identifier=] for the EPUB publication.</p>

						<p>For compatibility reasons, and due to the complexities of being able to share resources
							across renditions, this specification does not change this requirement but applies it to all
							obfuscated resources in the EPUB container.</p>

						<p>Consequently, EPUB creators MUST use the unique identifier of the [=default rendition=] as
							the obfuscation key for all resources in a [=multiple-rendition publication=].</p>

						<p>Similarly, [=reading systems=] MUST use this unique identifier of the default rendition to
							de-obfuscate all resources in a multiple-rendition publication.</p>
					</section>
				</section>

				<section id="vocab-assoc">
					<h3>Vocabulary association mechanisms</h3>

					<p>This specification inherits the mechanisms for associating vocabularies defined in <a
							data-cite="epub-33#sec-vocab-assoc">Vocabulary Association Mechanisms</a> [[epub-33]] as
						they relate to the package document metadata, with only the following modification: the
							<code>prefix</code> attribute MAY be attached only to the root <code>metadata</code>
						element.</p>

					<p><a data-cite="epub-33#sec-reserved-prefixes">Reserved prefixes</a> [[epub-33]] for metadata
						attribute expressions are adopted without change.</p>
				</section>
			</section>
		</section>
		<section id="rendition-selection">
			<h2>Rendition selection</h2>

			<section id="rendition-selection-intro">
				<h3 class="informative">Introduction</h3>

				<p>Although each EPUB publication represents a single work, it is possible to optimize the rendering of
					that work in any number of different ways. An issue of a magazine, for example, could include a
					fixed layout version (print replica) for rendering on tablet-sized screens with a reflowable version
					for smaller cellphone screens where the fixed layout would be scaled to illegibility (or
					automatically reflowed in unwanted ways if fixed layouts are not supported).</p>

				<p>The EPUB container allows multiple [=renditions=] of the content to be included in an EPUB
					publication, but does not specify how reading systems are to determine the unique properties of the
					renditions listed in the container document, or select between them.</p>

				<p>This section redresses this problem by defining both a set of rendition selection attributes that can
					be attached to <a data-cite="epub-33#sec-container-metainf-container.xml"><code>rootfile</code>
						elements</a> [[epub-33]] in the container document and a processing model that allows EPUB
					creators to specify which rendition is the best representation depending on various conditions.
					Reading systems can then select the appropriate representation from the list of renditions to match
					the current configuration and user preferences.</p>
			</section>

			<section id="rendition-selection-pub-confomance">
				<h3>Content conformance</h3>

				<p>A container document:</p>

				<ul class="conformancelist">
					<li id="confreq-container">MUST be valid to the definition and requirements for the
							<code>container.xml</code> file specified in <a
							data-cite="epub-33#sec-container-metainf-container.xml">container â
							META-INF/container.xml</a> [[epub-33]].</li>
					<li id="confreq-selection-attr">MAY include any of the selection attributes defined in <a
							href="#rendition-selection-attr">Rendition selection attributes</a>.</li>
					<li id="confreq-selection-default">MAY Include selection attributes on the <a
							data-cite="epub-33#sec-container.xml-rootfiles-elem"><code>rootfile</code> element</a>
						[[epub-33]] for the [=default rendition=]</li>
					<li id="confreq-selection-min">SHOULD include at least one selection attribute â in addition to the
						OPTIONAL label â on each subsequent <code>rootfile</code> element.</li>
				</ul>
			</section>

			<section id="rendition-selection-rs-conformance">
				<h3>reading system conformance</h3>

				<p>An EPUB reading system SHOULD determine the rendition to present to a user as defined in <a
						href="#rendition-selection-proc-model"></a>.</p>
			</section>

			<section id="rendition-selection-attr">
				<h3>Rendition selection attributes</h3>

				<div class="note">
					<p>The use of the rendition selection attributes in the <a
							data-cite="epub-33#sec-container-metainf-container.xml"><code>container.xml</code> file</a>
						[[epub-33]] is also defined informally through an XML schema. See <a href="#schema-container"
						></a> for further details.</p>
				</div>

				<section id="media-attr">
					<h4>The <code>rendition:media</code> attribute</h4>

					<p>The <code>rendition:media</code> attribute identifies the media features of a reading system the
						given [=rendition=] is best suitable for rendering on.</p>

					<div class="elem-synopsis" id="attrdef-media">
						<dl>
							<dt class="varlistentry">
								<span class="term">Attribute Name</span>
							</dt>
							<dd>
								<p>
									<code>media</code>
								</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Namespace</span>
							</dt>
							<dd>
								<p>
									<code class="uri">http://www.idpf.org/2013/rendition</code>
								</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Usage</span>
							</dt>
							<dd>
								<p>MAY be specified on container document <code>rootfile</code> elements
									[[epub-33]].</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Value</span>
							</dt>
							<dd>
								<p>A CSS 3 media query [[mediaqueries]], where the media type, if specified, MUST only
									be the value "<code>all</code>".</p>
							</dd>
						</dl>
					</div>

					<p>As per [[mediaqueries]], the media query in this attribute MUST evaluate to true in order for the
						given rendition to be selected for rendering. Media queries that evaluate to "not allâ per <a
							data-cite="mediaqueries#error-handling">3.1 Error Handling</a> [[mediaqueries]] SHOULD be
						treated as false for the purposes of rendition selection (i.e., the given rendition is not a
						valid match).</p>

					<aside class="example">
						<p>The following example shows two renditions of The Sandman bundled in the same container, one
							optimized for screens 1920 pixels or wider. The default rendition will be used for screen
							sizes smaller than 1920 pixels by default.</p>

						<pre>&lt;container xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
           xmlns:rendition="http://www.idpf.org/2013/rendition"
           version="1.0"&gt;
   &lt;rootfiles&gt;
       &lt;rootfile full-path="Sandman.opf"
           media-type="application/oebps-package+xml"/&gt;
       &lt;rootfile full-path="Sandman-large.opf"
           media-type="application/oebps-package+xml"
            rendition:media="(min-width: 1920px)"/&gt;
   &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
					</aside>
				</section>

				<section id="layout-attr">
					<h4>The <code>rendition:layout</code> attribute</h4>

					<p>The <code>rendition:layout</code> attribute indicates whether the given [=rendition=] is
						reflowable or pre-paginated.</p>

					<div class="elem-synopsis" id="attrdef-layout">
						<dl>
							<dt class="varlistentry">
								<span class="term">Attribute Name</span>
							</dt>
							<dd>
								<p>
									<code>layout</code>
								</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Namespace</span>
							</dt>
							<dd>
								<p>
									<code class="uri">http://www.idpf.org/2013/rendition</code>
								</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Usage</span>
							</dt>
							<dd>
								<p>MAY be specified on container document <code>rootfile</code> elements
									[[epub-33]].</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Value</span>
							</dt>
							<dd>
								<p>The value of the attribute MUST be <code class="markup">reflowable</code> or
										<code>pre-paginated</code>.</p>
							</dd>
						</dl>
					</div>

					<p>When specified, the value of this attribute MUST match the <a
							data-cite="epub-33#property-layout-global">global rendition:layout setting</a> [[epub-33]]
						for the referenced rendition.</p>

					<p>If a user layout preference is defined in the reading system, the attribute evaluates to true if
						the preference matches the specified value, otherwise it evaluates to false. If no user
						preference is defined, the reading system SHOULD ignore the attribute when selecting from the
						available renditions.</p>

					<aside class="example">
						<p>The following example shows two renditions of a magazine bundled in the same container. Note
							that it is not necessary to state that the default rendition is reflowable, since renditions
							are reflowable by default.</p>
						<pre>&lt;container xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
           xmlns:rendition="http://www.idpf.org/2013/rendition"
           version="1.0"&gt;
   &lt;rootfiles&gt;
       &lt;rootfile full-path="EPUB/reflow/magazine.opf"
           media-type="application/oebps-package+xml"/&gt;
       &lt;rootfile full-path="EPUB/fxl/magazine.opf"
           media-type="application/oebps-package+xml"
           rendition:layout="pre-paginated"/&gt;
    &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
					</aside>
				</section>

				<section id="language-attr">
					<h4>The <code>rendition:language</code> attribute</h4>

					<p>The <code>rendition:language</code> attribute indicates that the given [=rendition=] is optimized
						for the specified language. </p>

					<div class="elem-synopsis" id="attrdef-language">
						<dl>
							<dt class="varlistentry">
								<span class="term">Attribute Name</span>
							</dt>
							<dd>
								<p>
									<code>language</code>
								</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Namespace</span>
							</dt>
							<dd>
								<p>
									<code class="uri">http://www.idpf.org/2013/rendition</code>
								</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Usage</span>
							</dt>
							<dd>
								<p>MAY be specified on container document <code>rootfile</code> elements
									[[epub-33]].</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Value</span>
							</dt>
							<dd>
								<p>MUST contain a valid language code conforming to [[rfc5646]].</p>
							</dd>
						</dl>
					</div>

					<p>The <code>rendition:language</code> attribute more precisely identifies the primary language of a
						rendition than does the inclusion of <code>dc:language</code> elements in the rendition's
						package document, as the presence of <code>dc:language</code> elements only indicates that the
						specified languages are prominently used in the prose.</p>

					<p>If a user language preference is defined in the reading system, the attribute evaluates to true
						if the preference matches the specified value, otherwise it evaluates to false. Several matching
						schemes are defined in Section 3 of [[rfc4647]]. Reading systems can use the most appropriate
						matching scheme. If no user preference is defined, the reading system SHOULD ignore the
						attribute when selecting from the available renditions.</p>

					<aside class="example">
						<p>The following example shows a multilingual EPUB publication, with English, French and Spanish
							renditions of the content.</p>

						<pre>&lt;container xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
           xmlns:rendition="http://www.idpf.org/2013/rendition"
           version="1.0"&gt;
   &lt;rootfiles&gt;
       &lt;rootfile full-path="EPUB/en/package.opf"
           media-type="application/oebps-package+xml"
           rendition:language="en"/&gt;
       &lt;rootfile full-path="EPUB/fr/package.opf"
           media-type="application/oebps-package+xml"
           rendition:language="fr"/&gt;
       &lt;rootfile full-path="EPUB/es/package.opf"
           media-type="application/oebps-package+xml"
           rendition:language="es"/&gt;
   &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
					</aside>
				</section>

				<section id="accessMode-attr">
					<h4>The <code>rendition:accessMode</code> attribute</h4>

					<p>The <code>rendition:accessMode</code> attribute identifies the way in which intellectual content
						is communicated in a [=rendition=], and is based on the [[iso24751-3]] "Access Mode"
						property.</p>

					<div class="elem-synopsis" id="attrdef-accessMode">
						<dl>
							<dt class="varlistentry">
								<span class="term">Attribute Name</span>
							</dt>
							<dd>
								<p>
									<code>accessMode</code>
								</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Namespace</span>
							</dt>
							<dd>
								<p>
									<code class="uri">http://www.idpf.org/2013/rendition</code>
								</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Usage</span>
							</dt>
							<dd>
								<p>MAY be specified on container document <code>rootfile</code> elements
									[[epub-33]].</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Value</span>
							</dt>
							<dd>
								<p>MUST be one or more of the values: <code class="markup">auditory</code>,
										<code>tactile</code>, <code>textual</code> or <code>visual</code></p>
							</dd>
						</dl>
					</div>

					<p>The <code>rendition:accessMode</code> attribute defines the primary access mode(s) for a given
						rendition. For example, although a textual work may include images, audio and video, its primary
						means of conveying information is the text. Likewise, a visual work might include alternative
						text and/or descriptions, but these adaptations are not listed as a textual mode for the
						rendition for the purpose of selection.</p>

					<p>The way in which information is encoded also needs to be considered when designating an access
						mode. If a work has text components, or is completely textual in nature, but that content is
						burned into an image format, the access mode is visual (e.g., character dialogue in a JPEG page
						of a comic or a scan of a document).</p>

					<p>A rendition MAY include more than one primary access mode. For example, the textual version might
						also embed the auditory version using media overlays. In such cases, the attribute should list
						each primary access mode that is available.</p>

					<p>If a user access mode preference is defined in the reading system, the attribute evaluates to
						true if that preference matches any of the access modes defined in it, otherwise it evaluates to
						false. If no user preference is defined, the reading system SHOULD ignore the attribute when
						selecting from the available renditions.</p>

					<p>The <a href="#label-attr"><code>rendition:label</code> attribute</a> can be use to inform users
						about the nature of the content, particularly where such information is not available, or not
						yet standardized, for selection. For example, a tactile rendition could indicate the braille
						code and grade in its label, or a textual rendition could be marked as optimized for
						text-to-speech rendering, not general use.</p>

					<aside class="example">
						<p>The following example shows an EPUB publication with an image-based rendition and a
							text-based serialization available.</p>

						<pre>&lt;container xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
           xmlns:rendition="http://www.idpf.org/2013/rendition"
           version="1.0"&gt;
   &lt;rootfiles&gt;
       &lt;rootfile full-path="EPUB/comic/package.opf"
           media-type="application/oebps-package+xml"
           rendition:accessMode="visual"/&gt;
       &lt;rootfile full-path="EPUB/novel/package.opf"
           media-type="application/oebps-package+xml"
           rendition:accessMode="textual"/&gt;
   &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
					</aside>
				</section>

				<section id="label-attr">
					<h4>The <code>rendition:label</code> attribute</h4>

					<p>The <code>rendition:label</code> attribute allows each <code>rootfile</code> element [[epub-33]]
						to be annotated with a human-readable name.</p>

					<div class="elem-synopsis" id="attrdef-label">
						<dl>
							<dt class="varlistentry">
								<span class="term">Attribute Name</span>
							</dt>
							<dd>
								<p>
									<code>label</code>
								</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Namespace</span>
							</dt>
							<dd>
								<p>
									<code class="uri">http://www.idpf.org/2013/rendition</code>
								</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Usage</span>
							</dt>
							<dd>
								<p>MAY be specified on container document <code>rootfile</code> elements
									[[epub-33]].</p>
							</dd>
							<dt class="varlistentry">
								<span class="term">Value</span>
							</dt>
							<dd>
								<p>Text.</p>
							</dd>
						</dl>
					</div>

					<p>The <code>rendition:label</code> attribute provides a name for the given [=rendition=] (e.g., for
						manual rendition selection).</p>

					<p>The language of the <code>rendition:label</code> attribute MAY be expressed in an
							<code>xml:lang</code> attribute.</p>

					<aside class="example">
						<p>The following example shows the <code>rendition:label</code> attribute being used to provide
							a human-readable name for a rendition.</p>

						<pre>&lt;container xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
           xmlns:rendition="http://www.idpf.org/2013/rendition"
           version="1.0"
           xml:lang="en"&gt;
   &lt;rootfiles&gt;
        â¦
       &lt;rootfile full-path="EPUB/package.opf"
           media-type="application/oebps-package+xml"
           rendition:media="color, min-width: 1024"
           rendition:layout="pre-paginated"
           rendition:label="Color-optimized print replica"/&gt;
   &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
					</aside>

					<p>The <code>rendition:label</code> attribute is not a selection attribute for the purposes of
						evaluating which rendition to render.</p>
				</section>
			</section>

			<section id="rendition-selection-proc-model">
				<h3>Processing model</h3>

				<p>This section describes the method by which reading systems locate the optimal [=rendition=] to
					present to a user.</p>

				<p>rendition selection SHOULD occur on initial rendering, and reading systems SHOULD re-evaluate the
					selection in response to changes in the user environment (e.g., change in device orientation or
					viewport size).</p>

				<p>When a change condition is triggered, the reading system SHOULD evaluate the <code>rootfile</code>
					elements [[epub-33]] in the container document as follows, starting with the last
						<code>rootfile</code> entry:</p>

				<ul>
					<li>If rendition namespaced attributes are set, check each attribute per its definition in <a
							href="#rendition-selection-attr"></a> to determine if the specified conditions are
						true:</li>
				</ul>
				<ul>
					<li>If all conditions evaluate to true, select the given rendition and exit the selection
						process.</li>
					<li>If any condition is false, move to the preceding <code>rootfile</code> element and continue the
						evaluation process.</li>
					<li>If any unrecognized rendition-namespaced attributes are found, they are ignored for the purposes
						of evaluating a match.</li>
					<li>If no rendition namespaced attributes are found, move to the preceding <code class="markup"
							>rootfile</code> element and continue the evaluation process.</li>
				</ul>

				<p>If the default rendition is reached, select that rendition and exit the process.</p>

				<div class="note">
					<p>This processing model does not require that the selection process occur on a user's device, or
						that all renditions be provided in the container. rendition selection could occur on the server
						side of a cloud-based delivery system, for example, and only a single best-match rendition sent
						to the device.</p>
				</div>

				<div class="note">
					<p>Since EPUB 2 reading systems, and EPUB 3 reading systems that do not support multiple-rendition
						selection, will render the default rendition, EPUB creators need to consider which rendition
						will have the greatest compatibility across reading systems and ensure it is listed first.</p>
				</div>

				<p>A reading system MAY provide the user the option to manually select any of the renditions in the
					container. It SHOULD use the <a href="#label-attr"><code>rendition:label</code> attribute</a>
					attribute value to present the option, when available.</p>

				<p>As EPUB did not previously define a rendition selection model, custom selection models might be
					encountered in some EPUB publications. When recognized, these selection models SHOULD be utilized.
					If both rendition selection attributes conformant to this specification and custom attributes are
					defined, the latter SHOULD be ignored.</p>
			</section>
		</section>
		<section id="rendition-mapping">
			<h2>Rendition mapping</h2>

			<section id="rendition-mapping-intro" class="informative">
				<h3>Introduction</h3>

				<p>The [=rendition mapping document=] identifies related content locations across the [=renditions=] in
					a [=multiple-rendition publication=], allowing reading systems to switch between renditions while
					keeping the user's place.</p>

				<p data-cite="html">The rendition mapping document is represented as XHTML, and uses [^nav^] elements
					with unordered lists to group the mappings. There is no display component to the rendition mapping
					document; it is designed to enable automated switching. The lack of a rendering context means that
					the XHTML content model for this document is very restrictive, allowing only a single [^nav^]
					element in the [^body^], to ease both authoring and processing.</p>

				<p>To enable the mapping of content locations between renditions, the rendition mapping document's
						<code>nav</code> element consists of a series of one or more unordered lists, each of which
					represents a common point across all the renditions (e.g., a chapter, a page or a component within a
					page). The list items in each unordered list represent the set of equivalent link destinations
					across the available renditions for that content (e.g., one link might point to a document
					representing one page of a fixed layout rendition, while the equivalent link to a reflowable
					rendition might point to the corresponding page break indicator within the XHTML content document
					containing the page).</p>

				<p>Knowing the position of the user in the current rendition, when a change in context occurs, or is
					triggered by the user, the reading system can inspect the sibling list items to determine the EPUB
					content document to load that best meets the new conditions.</p>
			</section>

			<section id="rendition-mapping-pub-conformance">
				<h3>Content conformance</h3>

				<p>An EPUB publication MAY include a [=rendition mapping document=].</p>

				<p>A conformant rendition mapping document:</p>

				<ul class="conformancelist">
					<li id="confreq-map-xhtml">MUST conform to all content conformance constraints for XHTML content
						documents as defined in <a data-cite="epub-33#sec-xhtml-req">XHTML Requirements</a>
						[[epub-33]].</li>
					<li id="confreq-map-content-model">MUST conform to all content conformance constraints specific for
						rendition mapping documents expressed in <a href="#rendition-mapping-doc-def">EPUB rendition
							mapping document definition</a>.</li>
					<li id="confreq-map-unlisted">MUST NOT be listed in the package document manifest of any of the EPUB
						publication's renditions.</li>
				</ul>
			</section>

			<section id="rendition-mapping-rs-conformance">
				<h3>reading system conformance</h3>

				<p>Reading systems SHOULD support the use of [=rendition mapping documents=] to switch between content. </p>

				<p>A reading system that supports mapping:</p>

				<ul class="conformancelist">
					<li id="confreq-rs-remap">MUST, when a change in renditions occurs, locate the current position in
						the rendition mapping document and load the matching position in the new rendition.</li>
				</ul>
			</section>

			<section id="rendition-mapping-doc-def">
				<h3>EPUB rendition mapping document definition</h3>

				<div class="note">
					<p>The content of this file is also defined informally through an XML schema. See <a
							href="#schema-mapping-doc"></a> for further details.</p>
				</div>

				<section id="rendition-mapping-doc-xhtml">
					<h4>XHTML content document: restrictions</h4>

					<p>The [=rendition mapping document=] is a compliant XHTML content document, but with the following
						restrictions on the [[html]] content model:</p>

					<ul>
						<li>No attributes are allowed on the <code>html</code>, <code>head</code>, <code>body</code>,
								<code>ul</code> and <code>li</code> elements. (The <code>xmlns</code> pseudo-attribute
							for namespace declarations is allowed.) The <code>nav</code> element only accepts an
								<code>epub:type</code> attribute.</li>
						<li>The <code>head</code> MAY contain only <code>meta</code> elements. Only the
								<code>charset</code> attribute or <code>name</code> and <code class="markup"
								>content</code> attributes MAY be attached to the <code>meta</code> elements.</li>
						<li>The <code>head</code> MUST include a <code>meta</code> element whose <code>name</code>
							attribute has the value "<code>epub.multiple.renditions.version</code>" and whose
								<code>content</code> attribute has the value "<code>1.0</code>". Reading systems MAY
							ignore all other <code>meta</code> elements.</li>
						<li>The <code>body</code> element MUST include exactly one <code>nav</code> element child whose
								<code>epub:type</code> attribute specifies the value "<code>resource-map</code>", and
							MAY include one or more optional <code>nav</code> elements. No other [[html]] content is
							allowed as a child of the <code>body</code>.</li>
					</ul>
				</section>

				<section id="rendition-mapping-doc-nav">
					<h4>The nav element: modifications and restrictions</h4>

					<p>This specification restricts the content model of <code>nav</code> elements and their descendants
						in the [=rendition mapping document=] as follows:</p>

					<ul>
						<li>Each <code>nav</code> element MUST identify its nature in an <code>epub:type</code>
							attribute.</li>
						<li>The rendition mapping documents uses unordered lists (<code>ul</code>) in place of ordered
							lists (<code>ol</code>).</li>
						<li>The <code>nav</code> element MAY contain one or more <code>ul</code> element.</li>
						<li>Each list item (<code>li</code>) MUST contain exactly one <code>a</code> element (i.e.,
								<code>span</code> headings and nested lists are forbidden).</li>
						<li><code>a</code> elements MUST be empty.</li>
						<li>
							<p>The <code>a</code> element MUST specify the rendition it is referring to either:</p>
							<ul>
								<li>by using an <a href="http://idpf.org/epub/linking/cfi/#sec-intra-cfis"
										>Intra-Publication CFI</a> [[epubcfi-11]] as the value of the <code>href</code>
									attribute or,</li>
								<li>by having an <code>epub:rendition</code> attribute whose value is the relative path
									to the Publication Document for the rendition.</li>
							</ul>
						</li>
					</ul>
				</section>

				<section id="rendition-mappings">
					<h4>Rendition mappings</h4>

					<p>Each <code>ul</code> element in the [=rendition mapping document=] <code class="markup"
							>resource-map</code>
						<code>nav</code> element identifies a content location, listing in its child <code>li</code>
						elements where that location is found in each of the available renditions. Consequently, each
							<code>ul</code> element MUST contain an <code>li</code> for each rendition.</p>

					<div class="note">
						<p>In order to allow a broad variety of use cases, this specification does not impose any
							particular level of mapping granularity. For example, some publications aimed at language
							learners may define sentence-level synchronisation points, whereas other types of
							publications may only map major sections across renditions.</p>
					</div>

					<p>Each list item in the unordered list MUST identify an EPUB content document, or a fragment
						therein, for one of the renditions â defined in a child <code>a</code> element. Each of these
						links MUST reference a <a data-cite="epub-33#sec-itemref-elem">linear Top-level content
							document</a> [[epub-33]].</p>

					<p>Each <code>a</code> element MUST specify which rendition it refers to either 1) by including an
							<a href="http://idpf.org/epub/linking/cfi/#sec-intra-cfis">Intra-Publication CFI</a>
						[[epubcfi-11]] in its <code>href</code> attribute, or 2) by providing the relative path to the
						package document for the rendition as the value of an <code>epub:rendition</code> attribute.</p>

					<p>If the <code>epub:rendition</code> attribute is used to specify the target rendition, any
						fragment identifier scheme MAY be used within the URL value of the <code>href</code> attribute
						of <code>a</code> elements (e.g., unique identifier, or W3C Media Fragment).</p>

					<div class="note">
						<p>The use of [[epubcfi-11]] expressions is strongly encouraged over other fragment identifier
							schemes (particularly in the context of reflowable XHTML content documents), as they allow
							reading systems to ingest rendition mappings without any prior pre-processing. Conversely,
							the use of unique identifiers forces reading systems to load the targeted EPUB content
							documents and process their DOM in order to sort/compare the link destinations (in relation
							to document order). This additional processing has performance implications, and
							implementation costs in terms of caching, incremental updating, etc.</p>
					</div>

					<aside class="example">
						<p>The following example shows a rendition mapping document for a magazine with 3 renditions:
							text, portrait and landscape. âarticle 1' is on pages 5 and 6 of the fixed layout renditions
							and the landscape rendition uses spreads (non-synthetic).</p>

						<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"/&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;nav epub:type="resource-map"&gt;
            &lt;ul&gt;
             &lt;!-- First Page of the Article 1 --&gt;
                 &lt;li&gt;
                     &lt;a href= "../../text/default.opf#epubcfi(/6/8[article1]!/4/2:20)" /&gt;
                 &lt;/li&gt;
                 &lt;li&gt;
                     &lt;a href="../../images/page5.png"
                        epub:rendition="../../portrait/portrait.opf" /&gt;
                 &lt;/li&gt;
             &lt;/ul&gt;
             &lt;ul&gt;
                 &lt;!-- Second Page of the Article 1 --&gt;
                 &lt;li&gt;
                     &lt;a href= "../../text/default.opf#epubcfi(/6/8[article1]!/4/22:40)" /&gt;
                 &lt;/li&gt;
                 &lt;li&gt;
                     &lt;a href="../../images/page6.png"
                        epub:rendition="../../portrait/portrait.opf" /&gt;
                 &lt;/li&gt;
             &lt;/ul&gt;
             &lt;ul&gt;
                 &lt;!-- Article 1 --&gt;
                 &lt;li&gt;
                     &lt;a href= "../../text/default.opf#epubcfi(/6/8[article1])" /&gt;
                 &lt;/li&gt;
                 &lt;li&gt;
                     &lt;a href="../../images/page5-6.png"
                        epub:rendition="../../landscape/landscape.opf" /&gt;
                 &lt;/li&gt;
             &lt;/ul&gt;
        &lt;/nav&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>
					</aside>

					<aside class="example">
						<p>The following example shows a multilingual EPUB publication with each language in a separate
							rendition.</p>

						<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"/&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;nav epub:type="resource-map"&gt;
            &lt;ul&gt;
                &lt;!-- Chapter 1 --&gt;
                &lt;li&gt;&lt;a href = "../../en/en.opf#epubcfi(/6/2)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../fr/fr.opf#epubcfi(/6/4)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../de/de.opf#epubcfi(/6/2)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../es/es.opf#epubcfi(/6/6)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../it/it.opf#epubcfi(/6/2)" /&gt;&lt;/li&gt;
            &lt;/ul&gt;
            &lt;ul&gt;
                 &lt;!-- Chapter 2 --&gt;
                &lt;li&gt;&lt;a href = "../../en/en.opf#epubcfi(/6/4)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../fr/fr.opf#epubcfi(/6/6)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../de/de.opf#epubcfi(/6/4)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../es/es.opf#epubcfi(/6/8)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../it/it.opf#epubcfi(/6/6)" /&gt;&lt;/li&gt;
            &lt;/ul&gt;
            &lt;ul&gt;
                &lt;!-- Chapter 3 --&gt;
                &lt;li&gt;&lt;a href = "../../en/en.opf#epubcfi(/6/6)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../fr/fr.opf#epubcfi(/6/8)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../de/de.opf#epubcfi(/6/6)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../es/es.opf#epubcfi(/6/10)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../it/it.opf#epubcfi(/6/8)" /&gt;&lt;/li&gt;
            &lt;/ul&gt;
            &lt;!-- â¦  could be even more fine grained for better results â¦ --&gt;
        &lt;/nav&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>
					</aside>
				</section>

				<section id="rendition-mapping-container-id">
					<h4>Container identification</h4>

					<p>The location of the [=rendition mapping document=] is identified in the container document using
						a <a data-cite="epub-33#sec-container.xml-link-elem"><code>link</code> element</a> [[epub-33]],
						where:</p>

					<ul>
						<li>the <code>href</code> attribute MUST reference the location of the rendition mapping
							document relative to the root of the EPUB container;</li>
						<li>the <code>rel</code> attribute MUST specify the value "<code>mapping</code>";</li>
						<li>the <code>media-type</code> attribute MUST specify the value
								"<code>application/xhtml+xml</code>".</li>
					</ul>

					<p>The container document MUST NOT reference more than one mapping document.</p>

					<aside class="example">
						<p>The following example shows the <code>container.xml</code> file for a multilingual EPUB
							publication. The location of the rendition mapping document is included in the
								<code>link</code> element.</p>

						<pre>&lt;container xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
           xmlns:rendition="http://www.idpf.org/2013/rendition"
           version="1.0"&gt;
   &lt;rootfiles&gt;
       &lt;rootfile full-path="en/en.opf"
           rendition:language="en"
           media-type="application/oebps-package+xml" /&gt;
       &lt;rootfile full-path="de/de.opf"
           rendition:language="de"
           media-type="application/oebps-package+xml" /&gt;
   &lt;/rootfiles&gt;
   &lt;links&gt;
      &lt;link href="renditionMapping.html"
             rel="mapping"
             media-type="application/xhtml+xml" /&gt;
   &lt;/links&gt;
&lt;/container&gt;</pre>
					</aside>
				</section>
			</section>

			<section id="rendition-mapping-proc-model" class="informative">
				<h3>Processing model</h3>

				<p>This section provides a non-normative model by which the [=rendition mapping document=] could be
					processed by a reading system. It does not address how or when a reading system should switch
					renditions. </p>

				<p>The desired outcome of the rendition mapping document's mapping capabilities is to display content in
					the new rendition that is equivalent to their location in the current rendition, so that a user
					maintains their place during reading. To accomplish this goal, a compliant reading system could
					follow these steps to reset the current rendition when a change condition is triggered:</p>

				<ul>
					<li>
						<p>First, it would ascertain the position range in the current rendition:</p>
						<ul>
							<li>For a fixed format rendition, this will most likely be the rectangle for the current
								viewport.<br /></li>
							<li>For a reflowable rendition, this will most likely be the range of text currently shown
								on the screen.<br /></li>
						</ul>
					</li>
				</ul>
				<ul>
					<li>Next, it would determine which rendition to navigate to, as defined in <a
							href="#rendition-selection-proc-model"></a>.</li>
					<li>
						<p>Finally, the reading system would parse the <code>ul</code> elements to find ones that
							contain <code>li</code> elements with child <code>a</code> elements that both specify the
							same rendition and intersect the current range:</p>
						<ul>
							<li>If there is one and only one such <code>ul</code> element, the reading system would
								navigate to the beginning of the range in the new rendition. </li>
							<li>If there is more than one such <code>ul</code> element, then the reading system behavior
								is undefined. The reading system might prompt the user to select between the new
								locations, or might choose between them using its own heuristics.<br /></li>
							<li>If no matching <code>ul</code> elements are found, the reading system will have to
								determine the location to navigate to in the new rendition as if there was no rendition
								mapping document.</li>
						</ul>
					</li>
				</ul>

				<p>Note that what happens during navigation is largely a user experience issue, so a reading system
					might choose to consider additional information than above to try to achieve a better outcome.</p>
			</section>
		</section>
		<section id="app-schemas" class="appendix informative">
			<h2>Schemas</h2>

			<p>Validation using the schemas in this appendix requires a processor that supports [[relaxng-schema]] and
				[[xmlschema11-2]].</p>

			<section id="schema-metadata">
				<h3>Metadata.xml Schema</h3>
				<p>The schema for including metadata in the <code>metadata.xml</code> file, as described in <a
						href="#pub-metadata"></a>, is available at <a
						href="https://github.com/w3c/epubcheck/blob/main/src/main/resources/com/adobe/epubcheck/schema/30/ocf-metadata-30.rnc"
						>https://github.com/w3c/epubcheck/blob/main/src/main/resources/com/adobe/epubcheck/schema/30/ocf-metadata-30.rnc</a>.</p>
			</section>

			<section id="schema-container">
				<h3>Container.xml schema</h3>
				<p>The schema for including rendition selection attributes in the <code class="markup"
						>container.xml</code> file, as described in <a href="#rendition-selection"></a>, is available at
						<a
						href="https://github.com/w3c/epubcheck/blob/main/src/main/resources/com/adobe/epubcheck/schema/30/multiple-renditions/container.rnc"
						>https://github.com/w3c/epubcheck/blob/main/src/main/resources/com/adobe/epubcheck/schema/30/multiple-renditions/container.rnc</a>.</p>
			</section>

			<section id="schema-mapping-doc">
				<h3>Mapping document schema</h3>
				<p>The schema for Mapping Documents, as described in <a href="#rendition-mapping"></a>, is available at
						<a
						href="https://github.com/w3c/epubcheck/blob/main/src/main/resources/com/adobe/epubcheck/schema/30/multiple-renditions/mapping.rnc"
						>https://github.com/w3c/epubcheck/blob/main/src/main/resources/com/adobe/epubcheck/schema/30/multiple-renditions/mapping.rnc</a>.</p>
			</section>
		</section>
		<section id="change-log" class="appendix informative">
			<h2>Change log</h2>

			<p>Note that this change log only identifies substantive changes since <a
					href="http://idpf.org/epub/renditions/multiple/">EPUB Multiple-Rendition Publications 1.0</a>
				&#8212; those that affect the conformance of [=EPUB publications=] or are similarly noteworthy.</p>

			<p>For a list of all issues addressed during the revision, refer to the <a
					href="https://github.com/w3c/epub-specs/issues?q=is%3Aissue+is%3Aclosed+label%3AMultipleRenditions11"
					>working group's issue tracker</a>.</p>

			<ul>
				<li>19-Mar-2021: Require the use of the unique identifier in the <code>metadata.xml</code> file for
					obfuscating resources and recommend it be the same as the identifier in the default rendition. See
						<a href="https://github.com/w3c/publ-epub-revision/issues/1443">issue 1443</a>.</li>
				<li>19-Mar-2021: Added note clarifying that package documents need to be in a common directory to share
					resources. See <a href="https://github.com/w3c/publ-epub-revision/issues/619">issue 619</a>.</li>
				<li>19-Mar-2021: Fixed incorrect reference to <code>link</code> element being a child of the
						<code>container</code> element. See <a
						href="https://github.com/w3c/publ-epub-revision/issues/584">issue 584</a>.</li>
				<li>24-Dec-2020: The specification no longer makes reference to a release identifier, but the
					requirement to include a unique identifier and last modification date in the
						<code>metadata.xml</code> file remain for backwards compatibility. See <a
						href="https://github.com/w3c/publ-epub-revision/issues/1440">issue 1440</a>.</li>
				<li>16-Dec-2020: Terminology and requirements related to renditions of an EPUB publication have been
					moved to this specification to simplify readability of both this and the [[epub-33]] specification.
					These changes do not affect the ability to include multiple renditions in an EPUB publication. See
						<a href="https://github.com/w3c/publ-epub-revision/issues/1436">issue 1436</a>.</li>
			</ul>
		</section>
		<div data-include="../common/acknowledgements.html" data-include-replace="true"></div>
	</body>
</html>
