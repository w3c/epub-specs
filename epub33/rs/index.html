<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
	<head>
		<meta charset="utf-8" />
		<title>EPUB Reading Systems 3.3</title>
		<script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove"></script>
		<script src="../common/js/css-inline.js" class="remove"></script>
		<script src="../common/js/data-test-display.js" class="remove"></script>
		<script class="remove">
			//<![CDATA[
			var respecConfig = {
				group: "epub",
				wgPublicList: "public-epub-wg",
				specStatus: "ED",
				shortName: "epub-rs-33",
				edDraftURI: "https://w3c.github.io/epub-specs/epub33/rs/",
                implementationReportURI: "https://w3c.github.io/epub-specs/epub33/reports/",
                crEnd: "2022-10-30",
                previousPublishDate: "2021-07-12",
                previousMaturity: "WD",
				copyrightStart: "1999",
				editors: [ 
				{
					name: "Matt Garrish",
					company: "DAISY Consortium",
					companyURL: "https://daisy.org",
					w3cid: 51655
				},
				{
					name: "Ivan Herman",
					url: "https://www.w3.org/People/Ivan/",
					company: "W3C",
					w3cid: 7382,
					orcid: "0000-0003-0782-2704",
					companyURL: "https://www.w3.org",
				},
				{
					name: "Dave Cramer",
					company: "Invited Expert",
					w3cid: 65283
				}],
				formerEditors: [
				{
					name: "Garth Conboy",
					company: "Google",
					companyURL: "https://www.google.com",
					w3cid: 92141
				},
				{
					name: "Marisa DeMeglio",
					company: "DAISY Consortium",
					companyURL: "https://daisy.org",
					w3cid: 35713
				},
				{
					name: "Daniel Weck",
					company: "DAISY Consortium",
					companyURL: "https://daisy.org",
					w3cid: 45653
				}],
				includePermalinks: true,
				permalinkEdge: true,
				permalinkHide: false,
				github: {
					repoURL: "https://github.com/w3c/epub-specs",
					branch: "main"
				},
				localBiblio: {
					"csssnapshot": {
						"title": "CSS Snapshot",
						"href": "https://www.w3.org/TR/CSS/"
					},
					"epubcontentdocs-301": {
						"authors":[
						"Markus Gylling",
						"William McCoy",
						"Elika J. Etimad",
						"Matt Garrish"],
						"title": "EPUB Content Documents 3.0.1",
						"href": "http://idpf.org/epub/301/spec/epub-contentdocs-20140626.html",
						"date": "26 June 2014",
						"publisher": "IDPF"
					},
					"epubpackages-32": {
						"authors":[
						"Matt Garrish",
						"Dave Cramer"],
						"title": "EPUB Packages 3.2",
						"href": "https://www.w3.org/publishing/epub32/epub-packages.html",
						"date": "08 May 2019",
						"publisher": "EPUB 3 Community Group"
					},
					"h264": {
						"title": "H.264 : Advanced video coding for generic audiovisual services",
						"href": "https://www.itu.int/ITU-T/recommendations/rec.aspx?rec=13189",
						"date": "2017-04-13"
					},
					"svg": {
						"title": "SVG",
						"href": "https://www.w3.org/TR/SVG/",
						"publisher": "W3C"
					},
					"w3cprocess": {
						"title": "W3C Process Document",
						"href": "https://www.w3.org/Consortium/Process/"
					},
				},
				preProcess:[inlineCustomCSS],
				postProcess: [data_test_display],
				testSuiteURI: "https://w3c.github.io/epub-tests/index.html",
				lint: {
					"wpt-tests-exist": true,
				},
				xref: {
					profile: "web-platform",
					specs: ["epub-33"]
				}
			};//]]></script>
	</head>
	<body>
		<section id="abstract">
			<p>EPUB® 3 defines a distribution and interchange format for digital publications and documents. The EPUB
				format provides a means of representing, packaging, and encoding structured and semantically enhanced
				web content — including HTML, CSS, SVG and other resources — for distribution in a single-file
				container.</p>
			<p>This specification defines the conformance requirements for EPUB 3 reading systems — the user agents that
				render EPUB publications.</p>
		</section>
		<section id="sotd"></section>
		<section id="sec-introduction">
			<h2>Introduction</h2>

			<section id="sec-intro-overview" class="informative">
				<h3>Overview</h3>

				<p>The EPUB 3 standard is separated into two distinct concerns: the authoring of <a>EPUB
						publications</a> is defined in the <a data-cite="epub-33#">core specification</a> [[epub-33]],
					while this specification details the rendering requirements for them in EPUB reading systems.</p>

				<p>An EPUB reading system can take many forms. It might have a visual display area for rendering the
					content to users, for example, or it might only provide audio playback of the content. Therefore,
					there is no single set of rules that applies to all reading systems. Rather, this specification
					breaks down the rendering requirements based on a reading system's capabilities and the features it
					supports.</p>

				<p>Moreover, this specification allows for a great deal of flexibility for developers to create unique
					user interfaces, and requirements for things like metadata processing are intentionally minimal to
					allow for such flexibility.</p>

				<p>So, although this specification identifies the formal requirements for reading systems, it is not
					possible to understand this document in isolation. Developers should also familiarize themselves
					with the full content structure of an EPUB publication in order to understand the complete range of
					information that is available.</p>

				<div class="note">
					<p>A conforming reading system is not necessarily a single dedicated program or device but might
						exist as a distributed system.</p>
				</div>
			</section>

			<section id="sec-terminology">
				<h3>Terminology</h3>

				<p>This specification uses <a data-cite="epub-33#sec-terminology">terminology defined in EPUB 3.3</a>
					[[epub-33]].</p>

				<p>It also defines the following term:</p>

				<dl>
					<dt>
						<dfn class="export">content display area</dfn>
					</dt>
					<dd>
						<p>The area within the [=viewport=] dedicated to the display of <a>EPUB content documents</a>.
							The content display area excludes any borders, margins, headers, footers, or other
							decoration a [=EPUB reading system=] might inject into the viewport.</p>
						<p>In the case of [=synthetic spreads=], the viewport contains two content display areas.</p>
					</dd>
				</dl>

				<div class="note">
					<p>Only the first instance of a term in a section links to its definition.</p>
				</div>
			</section>

			<section id="conformance"></section>

			<section id="sec-intro-relations" class="informative">
				<h3>Relationship to other specifications</h3>

				<section id="rel">
					<h4>Relationship to HTML</h4>

					<p>The [[html]] standard is continuously evolving &#8212; there are no longer versioned releases of
						it. That standard, in turn, references various technologies that continue to evolve, such as
						MathML, SVG, CSS, and JavaScript.</p>

					<p>Reading system developers must keep track of the changes to HTML, and the technologies it
						references, to ensure they keep their systems up to date.</p>

					<p>This specification does not require EPUB reading systems to support scripting, HTML forms or the
						HTML DOM. Reading systems conformant with this specification are only expected to be able to
						process a conforming [=EPUB content document=]. As <a href="#sec-scripted-content">support for
							scripting and HTML forms</a> is not compulsory, a conformant reading system might not be a
						fully conformant HTML user agent.</p>
				</section>


				<section id="sec-overview-relations-svg">
					<h4>Relationship to SVG</h4>

					<p>This specification does not reference a specific version of [[svg]], but instead uses an undated
						reference. Whenever there is any ambiguity in this reference, the latest recommended
						specification is the authoritative reference.</p>

					<p>This approach ensures that EPUB will always keep pace with changes to the SVG standard. Reading
						system developers must keep track of changes to the SVG standard to ensure that they keep their
						systems up to date.</p>
				</section>
			</section>
		</section>
		<section id="sec-pub-resources">
			<h3>Publication resource processing</h3>

			<p id="confreq-rs-epub-pub-res" class="support" data-tests="#cnt-xhtml-support">Reading systems MUST process
					<a data-cite="epub-33#sec-publication-resources">publication resources</a> [[epub-33]].</p>

			<section id="sec-epub-rs-conf-cmt">
				<h4>Core Media types</h4>

				<p id="confreq-rs-epub3-images"
					data-tests="#pub-cmt-gif,#pub-cmt-jpg,#pub-cmt-png,#pub-cmt-svg,#pub-cmt-webp">If a reading system
					has a [=viewport=], it MUST support the <a data-cite="epub-33#cmt-grp-image">image core media type
						resources</a> [[epub-33]].</p>

				<p id="confreq-rs-epub3-mp3-aac" data-tests="#pub-cmt-mp3,#pub-cmt-mp4,#pub-cmt-opus">If it has the
					capability to render prerecorded audio, it MUST support the <a data-cite="epub-33#cmt-grp-audio"
						>audio core media type resources</a> [[epub-33]].</p>

				<p class="note" id="note-video-codecs">It is recommended that reading systems support at least one of
					the H.264 [[h264]] and VP8 [[rfc6386]] video codecs, but this is not a conformance requirement
					&#8212; a reading system may support any video codec, or none at all. Reading system developers
					should take into consideration factors such as breadth of adoption, playback quality, and technology
					royalties when deciding which video formats to support.</p>
			</section>

			<section id="sec-epub-rs-conf-foreign-res">
				<h4>Foreign resources</h4>

				<p id="confreq-rs-foreign"
					data-tests="#pub-foreign_image,#pub-foreign_xml-spine,#pub-foreign_xml-suffix-spine,#pub-foreign_bad-fallback,#pub-foreign_json-spine"
					>Reading systems MAY support an arbitrary set of [=foreign resource=] types, and if a foreign
					resource is not supported, MUST process fallbacks as defined in <a
						data-cite="epub-33#sec-foreign-resources">foreign resources</a> [[epub-33]].</p>
			</section>

			<section id="sec-epub-rs-conf-remote-res">
				<h4>Resource locations</h4>

				<p id="confreq-rs-remote">Reading systems SHOULD support [=remote resources=], as defined in <a
						data-cite="epub-33#sec-resource-locations">Resource locations</a> [[epub-33]].</p>
			</section>

			<section id="sec-epub-rs-conf-data-urls">
				<h4>Data URLs</h4>

				<p id="confreq-rs-data-urls"
					data-tests="#pub-data-urls_browsing-context,#pub-data-urls_top-level-content">Reading systems MUST
					prevent data URLs [[rfc2397]] from opening in [=top-level browsing contexts=] [[html]], except when
					initiated through a reading system affordance such as a context menu. If a reading system does not
					use a top-level browsing context for [=top-level content documents=], for example if the top-level
					content document is an SVG, it MUST also prevent data URLs from opening as though they are top-level
					content documents.</p>
			</section>

			<section id="sec-epub-rs-conf-xml">
				<h4>XML processing</h4>

				<p>A reading system MUST be both of the following:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-rs-xml-nval"
							data-tests="#pub-xml-non-validating_invalid,#pub-xml-non-validating_unclosed">a <a
								data-cite="xml#proc-types">conformant non-validating XML processor</a> [[xml]].</p>
					</li>
					<li>
						<p id="confreq-rs-xml-ns" data-tests="#pub-xml-names">a <a
								data-cite="xml-names#ProcessorConformance">conformant processor</a> as defined in
							[[xml-names]].</p>
					</li>
				</ul>

				<p id="confreq-rs-xml-extid" data-tests="#pub-xml-external-id">In addition, when processing XML
					documents, a reading system MUST NOT resolve <a data-cite="xml#NT-ExternalID">external
						identifiers</a> in DOCTYPE, ENTITY and NOTATION declarations [[xml]].</p>
			</section>

			<section id="sec-epub-rs-i18n">
				<h2>Internationalization</h2>

				<p>A reading system MUST process, for all [=publication resources=], the attributes that set the
					language for the documents' contents, when applicable. This includes:</p>

				<ul>
					<li id="confreq-rs-xml-lang">the <a data-cite="xml#sec-lang-tag"><code>xml:lang</code> attribute</a>
						[[xml]] for all XML documents (e.g., the [=package document=], [=XHTML content documents=],
							<a>SVG content documents</a>, and [=media overlay documents=]).</li>

					<li id="confreq-rs-lang-attr">the <code>lang</code> attribute for XHTML content documents and SVG
						content documents. (Refer to respective "The 'lang' and 'xml:lang' attributes" sections in
						[[html]] and [[svg]] for more information.)</li>
				</ul>

				<p>Similarly, a reading system MUST process, for all [=publication resources=], the attributes that set
					the base direction for the documents' contents, when applicable. This includes:</p>

				<ul>
					<li id="confreq-rs-pkg-dir-intro"
						data-tests="#pkg-dir_creator-rtl,#pkg-dir_rtl-root-ltr,#pkg-dir_rtl-root-unset,#pkg-dir_unset-root-rtl,#pkg-dir_unset-root-unset,#pkg-dir-auto_root-rtl,#pkg-dir-auto_root-unset"
						>the <a data-cite="epub-33#attrdef-dir"><code>dir</code></a> attribute [[epub-33]] for the
						[=package document=]. (See also <a href="#sec-pkg-doc-base-dir"></a> for further details.)</li>
					<li id="confreq-rs-html-dir">the [[html]] [^html-global/dir^] attribute for XHTML content
						documents.</li>
					<li id="confreq-rs-svg-direction">the [[svg]] <a
							href="https://www.w3.org/TR/SVG/text.html#DirectionProperty"><code>direction</code></a>
						attribute for SVG content documents.</li>
				</ul>

				<p id="confreq-rs-pkg-lang-no-content" data-tests="#pkg-lang_but_not_content,#pkg-dir_but_not_content"
					>In the absence of this information in a [=publication resource=], reading systems MUST NOT assume
					either the the language or the base direction of that resource from information expressed in the
					package document (i.e., in <a data-cite="epub-33#attrdef-xml-lang"><code>xml:lang</code></a> and <a
						data-cite="epub-33#attrdef-dir"><code>dir</code></a> attributes, in <a
						data-cite="epub-33#attrdef-hreflang"><code>hreflang</code> attributes</a> on <span
						data-cite="epub-33">[^link^]</span> elements, or from [^dc:language^] elements [[epub-33]]).
					Refer to a resource's formal specification for more information about to handle the absence of
					explicit language or direction information.</p>
			</section>

			<section id="sec-epub-rs-network-access">
				<h3>Network access</h3>

				<p>Reading systems MAY support network access to <a href="#sec-epub-rs-conf-remote-res">retrieve remote
						resources</a> and to allow [=scripted content documents=] to <a
						href="#confreq-rs-scripted-limit">communicate with web-hosted APIs and retrieve
					resources</a>.</p>

				<p>Providing network access, however, increases both the security risks to the reading systems and the
					security and privacy risks to users. These risks are often unique to reading systems and the
					platforms they run on &#8212; the browser cores that most reading systems are built on do not offer
					the same security and privacy controls as web browsers themselves. Consequently, developers need to
					use extra caution when allowing network access, and more thoroughly test that their reading systems
					are not vulnerable to attacks. More information about these risks is provided in <a
						href="#sec-security-privacy"></a>.</p>

				<p>If reading system developers allow network access, it is strongly RECOMMENDED both that they:</p>

				<ul>
					<li>notify users when network activity occurs; and</li>
					<li>let users block access to the network (e.g., disable network access for the reading system
						globally or for a particular EPUB publication).</li>
				</ul>
			</section>

			<section id="sec-epub-rs-external-links">
				<h3>External links</h3>

				<p data-tests="#pub-external-links">Reading systems SHOULD open links that resolve outside the <a>EPUB
						publication</a> in a new browser instance to ensure that the browser's security and privacy
					controls are available to users.</p>

				<p>Although links to external web sites and resources are commonly found in <a>EPUB content
						documents</a>, these are not the only sources. For example, if a reading system provides access
					to <a data-cite="epub-33#sec-link-elem">linked records</a> [[epub-33]] in the <a>package
						document</a> metadata, it should similarly open the links in a new browser instance.</p>

				<div class="note">
					<p>For more information about security and privacy issues with external links, see <a
							href="#epub-threat-model"></a>.</p>
				</div>
			</section>
		</section>
		<section id="sec-ocf">
			<h2>Open Container Format (OCF) processing</h2>

			<p id="confreq-rs-epub3-ocf" class="support" data-tests="#ocf-package_arbitrary">Reading systems MUST
				process the <a data-cite="epub-33#sec-ocf">EPUB container</a> [[epub-33]].</p>

			<div class="note">
				<p>An application that processes EPUB containers does not have to be a full-fledged reading system
					(e.g., an application might only extract the content of a container or check the validity of the
					packaged content). In these cases, developers of such applications can ignore the rendering
					requirements for reading systems defined in this section.</p>
			</div>

			<section id="sec-container-abstract">
				<h3>OCF abstract container</h3>

				<section id="sec-container-iri">
					<h4>URL of the root directory</h4>

					<p id="sec-container-iri-root"
						data-tests="#ocf-url_manifest,#ocf-url_relative,#ocf-url_link-relative">Reading systems MUST
						assign a URL [[url]] to the [=root directory=] of the [=OCF abstract container=]. This URL is
						called the [=container root URL=]. It is implementation specific, but the implementation MUST
						have the following properties:</p>

					<ul>
						<li id="sec-container-iri-root-parse"
							data-tests="#ocf-url_link-path-absolute,#ocf-url_parse-path-absolute">The result of <a
								data-lt="url parser">parsing</a> [[url]] "<code>/</code>" with the <a>container root
								URL</a> as <a data-cite="url#concept-base-url"><var>base</var></a> is the <a>container
								root URL</a>.</li>
						<li id="sec-container-iri-step-parse"
							data-tests="#ocf-url_link-leaking-relative,#ocf-url_parse-leaking-relative">The result of <a
								data-lt="url parser">parsing</a> [[url]] "<code>..</code>" with the <a>container root
								URL</a> as <a data-cite="url#concept-base-url"><var>base</var></a> is the <a>container
								root URL</a>.</li>

						<li id="sec-container-iri-origin" data-tests="#ocf-url_origin">The [=origin=] of the [=container
							root URL=] is unique for each user-specific instance of an <a>EPUB publication</a> in a
							reading system.</li>
					</ul>

					<p class="note">The unicity of the [=origin=] per each user-specific instance of an EPUB publication
						in a reading system means that if two different users acquire a copy of the same EPUB
						publication, the origins will be different for the two users on those copies even if the same
						reading system is used.</p>

					<div class="note">
						<p>The properties of the [=container root URL=] are such that a conforming reading system will
							parse any relative URL string to a [=content URL=]. In other words, relative links do not
							"leak" outside the container content, which is an important feature for security.</p>

						<p>In practice, the container root URL behaves similarly to a URL defined as follows:</p>

						<table class="zebra">
							<thead>
								<tr>
									<td style="font-weight: bold; text-align: center;">URL component</td>
									<td style="font-weight: bold; text-align: center;">Values</td>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>scheme</td>
									<td><code>http</code> or <code>https</code></td>
								</tr>
								<tr>
									<td>host</td>
									<td><code>localhost</code></td>
								</tr>
								<tr>
									<td>port</td>
									<td>a dynamic port uniquely assigned to the EPUB instance</td>
								</tr>
							</tbody>
						</table>

						<p>for example:</p>

						<table class="zebra">
							<thead>
								<tr>
									<td style="font-weight: bold; text-align: center;">Container File</td>
									<td style="font-weight: bold; text-align: center;">File Path</td>
									<td style="font-weight: bold; text-align: center;">URL</td>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>Root directory</td>
									<td>
										<var>empty string</var>
									</td>
									<td>
										<code>http://localhost:49152/</code>
									</td>
								</tr>
								<tr>
									<td>Package document</td>
									<td>
										<code>EPUB/package.opf</code>
									</td>
									<td>
										<code>http://localhost:49152/EPUB/package.opf</code>
									</td>
								</tr>
								<tr>
									<td>EPUB content document</td>
									<td>
										<code>HTML/file name.xhtml</code>
									</td>
									<td>
										<code>http://localhost:49152/HTML/file%20name.xhtml</code>
									</td>
								</tr>
							</tbody>
						</table>

						<table class="zebra">
							<thead>
								<tr>
									<td style="font-weight: bold; text-align: center;">URL string<br />(found for
										example in the package document)</td>
									<td style="font-weight: bold; text-align: center;">content URL</td>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>../HTML/file%20name.xhtml</code>
									</td>
									<td>
										<code>http://localhost:49152/HTML/file%20name.xhtml</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>/Media/img.png</code>
									</td>
									<td>
										<code>http://localhost:49152/Media/img.png</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>../../../Media/img.png</code>
									</td>
									<td>
										<code>http://localhost:49152/Media/img.png</code>
									</td>
								</tr>
							</tbody>
						</table>

						<p>Note that the last two links are <a data-cite="epub-33#urls-in-ocf-constraints"
								>disallowed</a> in an EPUB publications to ensure better interoperability with
							non-conforming or legacy reading systems and toolchains.</p>
					</div>

					<div class="note">
						<p>Some language specifications reference <a href="https://www.ietf.org/standards/rfcs/"
								>Requests For Comments</a> that preceded [[url]], in which case the earlier RFC applies
							for content in that particular language.</p>
					</div>

					<div class="note">
						<p>Unlike most language specifications, reading systems must use the [=container root URL=] as
							the <a data-cite="url#concept-base-url">base URL</a> [[url]] for all files within the
								<code>META-INF</code> directory. See also the section on <a
								data-cite="epub-33#sec-parsing-urls-metainf">Parsing URLs in the <code>META-INF</code>
								directory</a> in [[!epub-33]].</p>
					</div>
				</section>

				<section id="sec-container-filenames">
					<h4>File names</h4>

					<p>Although EPUB creators are required to follow various <a
							data-cite="epub-33#sec-container-filenames">File name and file path restrictions</a>
						[[epub-33]] for maximum interoperability, reading systems SHOULD attempt to process file names
						and paths that do not adhere to these requirements. Invalid file names and paths may only be
						problematic on some operating systems.</p>

					<p>This specification does not specify how a reading system that is unable to represent OCF file
						names and paths would handle this incompatibility.</p>
				</section>

				<section id="sec-container-metainf">
					<h4><code>META-INF</code> directory</h4>

					<dl class="conformance-list">
						<dt id="sec-container-metainf-container.xml">Container file (<code>container.xml</code>)</dt>
						<dd>
							<p id="container-default-rendition"
								data-tests="#ocf-package_arbitrary,#ocf-package_multiple">A reading system MUST, by
								default, use the [=package document=] referenced the from first <a
									data-cite="epub-33#sec-container.xml-rootfile-elem"><code>rootfile</code>
									element</a> [[epub-33]] to render the [=EPUB publication=]. If the reading system
								recognizes a means of selecting from the other available options, it MAY choose a more
								appropriate package document.</p>
						</dd>

						<dt id="sec-container-metainf-metadata.xml">Metadata file (<code>metadata.xml</code>)</dt>
						<dd>
							<p>Reading systems SHOULD ignore <a data-cite="epub-33#sec-container-metainf-metadata.xml"
										><code>metadata.xml</code> files</a> [[epub-33]] with unrecognized root
								elements.</p>
						</dd>

						<dt id="sec-container-metainf-manifest.xml">Manifest file (<code>manifest.xml</code>)</dt>
						<dd>
							<p>Reading systems MUST NOT use ancillary manifest information contained in the ZIP archive
								or in the <a data-cite="epub-33#sec-container-metainf-manifest.xml"
										><code>manifest.xml</code> file</a> [[epub-33]] for processing an <a>EPUB
									publication</a>.</p>
						</dd>

						<dt id="sec-container-metainf-signatures.xml">Signature file (<code>signatures.xml</code>)</dt>
						<dd>
							<p>Before computing the digest used to validate the signature in the <a
									data-cite="epub-33#sec-container-metainf-signatures.xml"><code>signatures.xml</code>
									file</a> [[epub-33]], reading systems MUST decrypt any data encrypted after signing
								&#8212; data encrypted before signing MUST NOT be decrypted.</p>
							<p>Refer to Decryption Transform for XML Signature [[xmlenc-decrypt]] for more information
								about identifying data encrypted after signing.</p>
						</dd>

						<dt id="sec-container-metainf-inc">Other files</dt>
						<dd>
							<p>Reading systems MUST NOT fail when encountering configuration files in the <code
									class="filename">META-INF</code> directory not listed in <a
									data-cite="epub-33#sec-container-metainf-files">Reserved files</a> [[epub-33]].</p>
						</dd>
					</dl>
				</section>
			</section>

			<section id="sec-container-zip">
				<h3>OCF ZIP container</h3>

				<p>A reading system:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-zip-mult">MUST treat any OCF containers that specify the [[zip]] file is split
							across multiple storage media as in error.</p>
					</li>
					<li>
						<p id="confreq-zip-comp">MUST treat any OCF containers that use compression techniques other
							than Deflate [[rfc1951]] as in error.</p>
					</li>
					<li>
						<p id="confreq-zip-64">MUST support the ZIP64 extensions defined as "Version 1" [[zip]].</p>
					</li>
					<li>
						<p id="confreq-zip-enc">MUST treat OCF ZIP containers that use [[zip]] encryption features as in
							error.</p>
					</li>
					<li>
						<p id="confreq-zip-rootdir">MAY generate a physical directory for the [=root directory=] of the
							OCF abstract container if it unzips the contents.</p>
					</li>
					<li>
						<p id="confreq-zip-preserve">does not have to preserve information from an OCF ZIP container
							through load and save operations outside the context of the OCF abstract container. In
							particular, a reading system does not have to preserve CRC values, comment fields or fields
							that hold file system information corresponding to a particular operating system (e.g., <em
								class="firstterm">External file attributes</em> and <em class="firstterm">Extra
								field</em>).</p>
					</li>
				</ul>

				<p>With respect to specific fields in the OCF ZIP container archive, the reading system:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-zip-fld-version">MUST treat <code>version needed to extract</code> field values
							other than <code>10</code>, <code>20</code> or <code>45</code> in the local file header
							table [[zip]] as being in error.</p>
					</li>
					<li>
						<p id="confreq-zip-fld-comp">MUST treat <code>compression</code> method field values other than
								<code>0</code> or <code>8</code> in the local file header table [[zip]] as being in
							error.</p>
					</li>
					<li>
						<p id="confreq-zip-fld-er">MUST treat OCF ZIP containers with an <code>Archive decryption
								header</code> or an <code>Archive extra data record</code> [[zip]] as being in
							error.</p>
					</li>
				</ul>
			</section>

			<section id="sec-container-fobfus">
				<h3>Font obfuscation</h3>

				<p id="confreq-ocf-fobfus">Reading systems SHOULD support deobfuscation of fonts as defined in <a
						data-cite="epub-33#sec-font-obfuscation">Font obfuscation</a> [[epub-33]].</p>

				<p>To restore the original data, reading systems should simply reverse the process: the source file
					becomes the obfuscated data, and the destination file contains the raw data.</p>

				<div class="note">
					<p>EPUB 3 allowed font obfuscation prior to EPUB 3.0.1, but did not specify the order of obfuscation
						and compression. As a result, reading systems might encounter invalid fonts after decompression
						and deobfuscation. In such instances, deobfuscating the data before inflating it may return a
						valid font. Reading systems do not have to support this method of retrieval, but developers
						should consider it when supporting EPUB 3 content generally.</p>
				</div>
			</section>
		</section>
		<section id="sec-package-doc">
			<h2>Package document processing</h2>

			<p id="confreq-rs-epub-pub" class="support">Reading systems MUST process the <a
					data-cite="epub-33#sec-package-doc">package document</a> [[epub-33]].</p>

			<section id="sec-pkg-doc-base-dir">
				<h4>Base direction</h4>

				<p id="confreq-rs-pkg-dir"
					data-tests="#pkg-dir_creator-rtl,#pkg-dir_rtl-root-ltr,#pkg-dir_rtl-root-unset,#pkg-dir_unset-root-rtl,#pkg-dir_unset-root-unset,#pkg-dir-auto_root-rtl"
					>If the <a data-cite="epub-33#attrdef-dir"><code>dir</code> attribute</a> [[epub-33]] is set and
					indicates a base direction of <code>ltr</code> or <code>rtl</code>, reading systems MUST override
					the bidi algorithm per <a data-cite="bidi#Higher-Level_Protocols">the higher-level protocols</a>
					defined in [[bidi]], setting the paragraph embedding level to 0 if the base direction is
						<code>ltr</code>, or 1 if the base direction is <code>rtl</code>.</p>

				<p id="confreq-rs-pkg-dir-auto" data-tests="#pkg-dir-auto_root-rtl,#pkg-dir-auto_root-unset">Otherwise
					the base direction is <code>auto</code>, in which case reading systems MUST determine the text's
					direction by applying the Unicode Bidi Algorithm, beginning with <a data-cite="bidi#P2">Rule P2</a>
					of [[bidi]].</p>
			</section>

			<section id="sec-pkg-doc-pub-identifiers">
				<h3>Unique identifier</h3>

				<p id="confreq-rs-pkg-unique-id" data-tests="#pkg-unique-id">Reading systems SHOULD NOT depend on the
					[=unique identifier=] being unique to one and only one EPUB publication. Determining whether two
					EPUB publications with the same Unique Identifier represent different versions of the same
					publication, or different publications, may require inspecting other metadata, such as their last
					modification dates, titles, and authors.</p>
			</section>

			<section id="sec-pkg-doc-metadata">
				<h4>Metadata</h4>

				<dl class="conformance-list">
					<dt id="conf-meta-ws">White Space</dt>
					<dd>
						<p id="confreq-rs-pkg-whitespace" data-tests="#pkg-meta-whitespace">Reading systems MUST [=strip
							and collapse ASCII whitespace=] [[infra]] from Dublin Core [[dcterms]] and <span
								data-cite="epub-33">[^meta^]</span> element <a data-cite="epub-33#dfn-value">values</a>
							[[epub-33]] before processing.</p>
					</dd>

					<dt id="dc-identifier">The <code>dc:identifier</code> element</dt>
					<dd>
						<p>To determine whether the value of a [^dc:identifier^] element [[epub-33]] conforms to an
							established system or has been granted by an issuing authority, reading systems SHOULD check
							for an <a data-cite="epub-33#identifier-type"><code>identifier-type</code> property</a>
							[[epub-33]].</p>
					</dd>

					<dt id="dc-title">The <code>dc:title</code> element</dt>
					<dd>
						<p id="title-order" data-tests="#pkg-title-order">Reading systems MUST recognize the first
							[^dc:title^] element [[epub-33]] in document order as the main title of the EPUB publication
							and present it to users before other title elements.</p>
						<p>This specification does not define how to process additional <code>dc:title</code>
							elements.</p>
					</dd>

					<dt id="sec-opf-dclanguage">The <code>dc:language</code> element</dt>
					<dd>
						<p>The language(s) of the [=EPUB publication=] specified in [^dc:language^] elements are
							informational. Some uses of this information include:</p>
						<ul>
							<li>exposing it to the user through the reading system user interface</li>
							<li>using it to enhance functionality in a bookshelf (e.g., sorting by language)</li>
							<li>using it to optimize the reading interface (e.g., to preload text-to-speech
								languages)</li>
						</ul>
						<p>See <a href="#sec-epub-rs-i18n"></a> for more details on how to determine the language of a
							[=publication resource=].</p>
					</dd>

					<dt id="dc-creator">The <code>dc:creator</code> element</dt>
					<dd>
						<p id="confreq-rs-pkg-creator-order" data-tests="#pkg-creator-order">When determining display
							priority, reading systems MUST use the document order of [^dc:creator^] elements [[epub-33]]
							in the <code>metadata</code> section, where the first <code>creator</code> element
							encountered is the primary creator. If a reading system exposes creator metadata to the
							user, it SHOULD include all the creators listed in the <code>metadata</code> section
							whenever possible (e.g., when not constrained by display considerations).</p>
					</dd>

					<dt id="meta">The <code>meta</code> element</dt>
					<dd>
						<p data-cite="epub-33">Reading systems SHOULD ignore all [^meta^] elements whose <a
								data-cite="epub-33#attrdef-meta-property"><code>property</code> attributes</a>
							[[epub-33]] define expressions they do not recognize. <span id="confreq-rs-pkg-meta-unknown"
								data-tests="#pkg-meta-unknown">A reading system MUST NOT fail when encountering unknown
								expressions.</span></p>
						<p id="confreq-rs-pkg-meta-prefix">If the <code>property</code> attribute's value does not
							include a <a data-cite="epub-33#property.ebnf.prefix">prefix</a> [[epub-33]], reading
							systems MUST use the prefix URL "<code>http://idpf.org/epub/vocab/package/meta/#</code>" to
								<a href="#sec-property-datatype">expand the value</a>.</p>
						<p>If a reading system does not recognize the <a data-cite="epub-33#attrdef-scheme"
									><code>scheme</code> attribute</a> [[epub-33]] value, it SHOULD treat the value of
							the element as a string.</p>
					</dd>

					<dt id="conf-metadata-link">The <code>link</code> element</dt>
					<dd>
						<p>Retrieval and support of [=linked resources=] is OPTIONAL.</p>
						<p id="confreq-rs-pkg-hreflang">The language identified in an <a
								data-cite="epub-33#attrdef-hreflang"><code>hreflang</code> attribute</a> is purely
							advisory. Upon fetching the resource, a reading system MUST use the language information
							associated with the resource to determine its language, not the metadata included in the
							link to the resource.</p>
						<p id="sec-linked-records" data-tests="#pkg-linked-records">In the case of a <a
								data-cite="epub-33#record">linked metadata record</a> [[epub-33]], reading systems MUST
							NOT skip processing the metadata expressed in the package document (i.e., use only the
							information expressed in the record). Reading systems MAY compile metadata from multiple
							linked records.</p>
						<p id="confreq-rs-pkg-link-order">When resolving discrepancies and conflicts between metadata
							expressed in the package document and in linked metadata records, reading systems MUST use
							the document order of <span data-cite="epub-33">[^link^]</span> elements [[epub-33]] in the
							package document to establish precedence (i.e., metadata in the first linked record has the
							highest precedence and metadata in the package document the lowest, regardless of whether
							the <code>link</code> elements occur before, within, or after the package metadata
							elements).</p>
						<p id="confreq-rs-pkg-link-rendering">Reading systems MUST ignore any instructions contained in
							linked resources related to the layout and rendering of the EPUB publication.</p>
						<p id="confreq-rs-pkg-link-prefix">If any of the <a data-cite="epub-33#attrdef-link-rel"
									><code>rel</code></a> or <a data-cite="epub-33#attrdef-properties"
									><code>properties</code></a> [[epub-33]] attributes' values do not include a <a
								data-cite="epub-33#property.ebnf.prefix">prefix</a>, reading systems MUST use the prefix
							URL "<code>http://idpf.org/epub/vocab/package/link/#</code>" to <a
								href="#sec-property-datatype">expand the values</a>.</p>
					</dd>
				</dl>
			</section>

			<section id="sec-pkg-doc-manifest">
				<h3>Manifest</h3>

				<p id="confreq-rs-pkg-manifest-unknown" data-tests="#pkg-manifest-unknown">Reading systems MUST ignore
					values of the <a data-cite="epub-33#sec-item-resource-properties"><code>properties</code>
						attribute</a> [[epub-33]] they do not recognize.</p>

				<p id="confreq-rendition-rs-manifest" data-tests="#pkg-manifest-unlisted-resource">Reading systems
					SHOULD NOT use [=linked resources=] in the rendering of an EPUB publication due to the inherent
					limitations and risks involved (e.g., lack of information about the resource and how to process it,
					security risks from remotely-hosted sources, lack of fallbacks, etc.).</p>

				<p>
					<span id="confreq-rs-pkg-manifest-fallback">A reading system that does not support the MIME media
						type [[rfc2046]] of a given publication resource MUST traverse the <a
							data-cite="epub-33#sec-manifest-fallbacks">manifest fallback chain</a> [[epub-33]] until it
						identifies a supported publication resource to use in place of the unsupported resource. </span>
					<span id="confreq-rs-pkg-manifest-fallback-order">If the reading system supports multiple
						publication resources in the fallback chain, it MAY select the resource to use based on the
						resource's <a data-cite="epub-33#attrdef-item-properties"><code>properties</code> attribute</a>
						[[epub-33]] values, otherwise it SHOULD honor the EPUB creator's preferred fallback order. </span>
					<span id="confreq-rs-pkg-manifest-fallback-fail">If a reading system does not support any resource
						in the fallback chain, it MUST alert the reader that it could not display the content. </span>
				</p>

				<p>When <a data-cite="epub-33#sec-manifest-fallbacks">manifest fallbacks</a> [[epub-33]] are provided
					for [=top-level content documents=], reading systems MAY choose from the available options to find
					the optimal version to render in a given context (e.g., by inspecting the properties attribute for
					each).</p>

				<p id="confreq-rs-pkg-manifest-fallback-cycle">A reading system MUST terminate the fallback chain at the
					first reference to a manifest item it has already encountered.</p>

				<p id="confreq-rs-pkg-manifest-prefix">If any of the <code>properties</code> attribute's values do not
					include a <a data-cite="epub-33#property.ebnf.prefix">prefix</a> [[epub-33]], reading systems MUST
					use the prefix URL "<code>http://idpf.org/epub/vocab/package/item/#</code>" to <a
						href="#sec-property-datatype">expand the values</a>.</p>
			</section>

			<section id="sec-pkg-doc-spine">
				<h3>Spine</h3>

				<p id="confreq-rs-spine-order" data-tests="#pkg-spine-order">Reading systems MUST provide a means of
					rendering the EPUB publication in the order defined in the [^spine^] element [[epub-33]], which
					includes:</p>
				<ul>
					<li>recognizing the first <a data-cite="epub-33#attrdef-itemref-linear">primary (linear)
								<code>itemref</code></a> [[epub-33]] as the beginning of the default reading order;
						and,</li>
					<li>rendering successive primary items in the order given in the <code>spine</code>.</li>
				</ul>

				<p id="confreq-rendition-rs-spine-nonlinear">When a user traverses the default reading order defined in
					the <code>spine</code> element, a reading system MAY automatically skip <a
						data-cite="epub-33#attrdef-itemref-linear">non-linear <code>itemref</code> elements</a>
					[[epub-33]]. <span id="confreq-rs-spine-nonlinear-activation"
						data-tests="#pkg-spine-nonlinear-activation">When a user activates a hyperlink to a non-linear
						resource, however, reading systems MUST render the referenced resource or a designated
						fallback.</span> Reading systems MAY also provide the option for users to skip non-linear
					content by default or not.</p>

				<p id="confreq-rs-spine-progression-default" data-tests="#pkg-spine-progression-default">If the EPUB
					creator has not specified the <a data-cite="epub-33#attrdef-spine-page-progression-direction"
							><code>page-progression-direction</code> attribute</a> [[epub-33]], the reading system MUST
					assume the value of <code>default</code>. When <code>page-progression-direction</code> value is
						<code>default</code>, the reading system can choose the rendering direction.</p>

				<p id="confreq-rs-spine-progression-pre-paginated" data-tests="#pkg-spine-progression-pre-paginated">If
					the <code>page-progression-direction</code> attribute has a value other than <code>default</code>,
					the reading system MUST ignore any directionality computed from <a href="#layout"
							><code>pre-paginated</code></a> [=XHTML content documents=].</p>

				<p id="confreq-rs-spine-prefix">If any values of the <a data-cite="epub-33#attrdef-properties"
							><code>properties</code> attribute</a> do not include a <a
						data-cite="epub-33#property.ebnf.prefix">prefix</a> [[epub-33]], reading systems MUST use the
					prefix URL "<code>http://idpf.org/epub/vocab/package/itemref/#</code>" to <a
						href="#sec-property-datatype">expand the values</a>.</p>

				<p id="confreq-rs-pkg-spine-unknown" data-tests="#pkg-spine-unknown">Reading systems MUST ignore all
					values expressed in spine <code>itemref</code>
					<code>properties</code> attributes that they do not recognize.</p>

				<p>
					<span id="confreq-rs-pkg-duplicate-item-rendering" data-tests="#pkg-spine-duplicate-item-rendering">
						Reading systems MUST NOT skip spine references to duplicate manifest items when rendering the
						linear reading order.</span>
					<span id="confreq-rs-pkg-duplicate-item-ui" data-tests="#pkg-spine-duplicate-item-ui">The reading
						system MUST treat these as distinct items for user interface (UI) purposes (for example, each
						occurrence could be independently bookmarked or annotated).</span>
					<span id="confreq-rs-pkg-duplicate-item-hyperlink" data-tests="#pkg-spine-duplicate-item-hyperlink"
						>When a reading system follows a hyperlink to a resource referenced multiple times in the spine,
						the reading system MUST navigate to the first occurrence of the document in the linear reading
						order.</span>
				</p>

				<section id="spine-overrides">
					<h4>Spine overrides</h4>

					<p id="confreq-rs-pkg-spine-override">When a spine [^itemref^] element's <a
							data-cite="epub-33#attrdef-properties"><code>properties</code> attribute</a> overrides a <a
							data-cite="epub-33#app-rendering-vocab">global rendering property</a> [[epub-33]], reading
						systems MUST follow the requirements for the override's global value to display that spine
						item.</p>

					<p>For example, a spine item that contains the <a data-cite="epub-33#layout-overrides"
								><code>layout-pre-paginated</code> override</a> [[epub-33]] is rendered following the
						requirements of the global <a href="#def-layout-pre-paginated"><code>pre-paginated</code>
							value</a>.</p>

					<p id="confreq-rs-pkg-spine-override-first">If more than one override for the same property is
						specified in a <code>properties</code> attribute, reading systems MUST use only the first
						value.</p>
				</section>
			</section>

			<section id="sec-pkg-doc-collections">
				<h3>Collections</h3>

				<p>In the context of this specification, support for <a data-cite="epub-33#sec-collection-elem"
						>collections</a> [[epub-33]] in reading systems is OPTIONAL. <span
						id="confreq-rs-pkg-collections-unknown" data-tests="#pkg-collections-unknown">Reading systems
						MUST ignore <code>collection</code> elements that define unrecognized roles.</span></p>
			</section>
		</section>
		<section id="sec-contentdocs">
			<h2>EPUB content document processing</h2>

			<p>The definition of <a data-cite="epub-33#sec-contentdocs">EPUB content documents</a> [[epub-33]] includes
				various authoring restrictions to optimize the cross-compatibility of content (e.g., <a
					data-cite="epub-33#sec-css-req">prohibiting CSS for setting language and direction</a>
				[[?epub-33]]). Unless stated otherwise in this specification, reading systems MAY support these
				restricted features.</p>

			<section id="sec-xhtml">
				<h3>XHTML content documents</h3>

				<p id="confreq-rs-epub3-xhtml" class="support" data-tests="#cnt-xhtml-support">Reading systems MUST
					process <a data-cite="epub-33#sec-xhtml">XHTML content documents</a> [[epub-33]].</p>

				<p id="confreq-html-rs-behavior">Unless explicitly defined in this section as overridden, reading
					systems MUST process XHTML content documents using semantics defined by the [[html]] specification
					and honor any applicable user agent conformance constraints expressed therein.</p>

				<section id="sec-xhtml-extensions">
					<h4>HTML extensions</h4>

					<section id="sec-xhtml-aria">
						<h5>ARIA</h5>

						<p id="confreq-html-rs-a11y">Reading systems SHOULD recognize embedded ARIA markup and support
							exposure of any given ARIA roles, states and properties to platform accessibility APIs
							[[wai-aria]].</p>
					</section>

					<section id="sec-xhtml-structural-semantics">
						<h5>Structural semantics</h5>

						<p id="confreq-rs-epubtype-head">In addition to the requirements in <a
								href="#sec-structural-semantics"></a>, a reading system MUST ignore semantics expressed
							on the [[html]] <span data-cite="html">[^head^]</span> element or its descendants.</p>
					</section>

					<section id="sec-xhtml-rdfa">
						<h5>RDFa</h5>

						<p>Reading system support for the <a data-cite="rdfa-core#s_model">attribute processing
								model</a> [[rdfa-core]] is OPTIONAL.</p>
					</section>

					<section id="sec-xhtml-microdata">
						<h5>Microdata</h5>

						<p>Reading system support for the <a data-cite="html#encoding-microdata">attribute processing
								model</a> is OPTIONAL, as is the <a data-cite="html#json">conversion to JSON</a>
							[[html]].</p>
					</section>

					<section id="sec-xhtml-content-switch">
						<h5>Content switching (deprecated)</h5>

						<p>Use of the <code>switch</code> element is <a data-cite="epub-33#deprecated">deprecated</a>
							[[epub-33]]. Refer to its definition in [[epubcontentdocs-301]] for implementation
							information.</p>
					</section>

					<section id="sec-xhtml-epub-trigger">
						<h5>The <code>epub:trigger</code> element (deprecated)</h5>

						<p>Use of the <code>trigger</code> element is <a data-cite="epub-33#deprecated">deprecated</a>
							[[epub-33]]. Refer to its definition in [[epubcontentdocs-301]] for implementation
							information.</p>
					</section>

					<section id="sec-xhtml-custom-attributes">
						<h5>Custom attributes</h5>

						<p>Reading systems MAY support custom attributes provided the attributes do not modify the
							requirements of this specification.</p>
					</section>
				</section>

				<section id="sec-xhtml-deviations">
					<h4>HTML deviations and constraints</h4>

					<section id="sec-xhtml-mathml">
						<h3>MathML</h3>

						<p>To support MathML [[mathml3]] embedded in [=XHTML content documents=], a reading system:</p>

						<ul class="conformance-list">
							<li>
								<p id="confreq-mathml-rs-behavior" data-tests="#cnt-mathml-support">MUST be an <a
										data-cite="mathml3/chapter2.html#fund.mathmlconf">input-compliant processor</a>
									for <a data-cite="mathml3/chapter3.html#">Presentation MathML</a>, as defined in the
									[[mathml3]] specification.</p>
							</li>
							<li>
								<p id="confreq-mathml-rs-render" data-tests="#cnt-mathml-support">MUST, if it has a
									[=viewport=], support visual rendering of Presentation MathML.</p>
							</li>
							<li>
								<p id="confreq-mathml-rs-anno">MAY support rendering of <a
										data-cite="mathml3/chapter4.html#">Content MathML</a> found in <a
										data-cite="mathml3/chapter5.html#mixing.elements.annotation.xml"
											><code>annotation-xml</code> elements</a> [[mathml3]].</p>
							</li>
						</ul>

						<p class="note">Reading systems may choose to use third-party libraries such as <a
								href="https://www.mathjax.org/">MathJax</a> to provide MathML rendering.</p>
					</section>

					<section id="sec-xhtml-svg">
						<h5>Embedded SVG</h5>

						<p id="confreq-svg-rs-embed" data-tests="#cnt-svg-embedded">Reading systems MUST process SVG
							embedded in [=XHTML content documents=] as defined in <a href="#sec-svg"></a>.</p>

						<section id="sec-xhtml-svg-css">
							<h6>Embedded SVG and CSS</h6>

							<p id="confreq-svg-rs-css-embed-ref" data-tests="#cnt-svg-css-reference">For the purposes of
								styling SVG embedded in [=XHTML content documents=] <em>by reference</em>, reading
								systems MUST NOT apply CSS style rules of the containing document to the referenced SVG
								document.</p>

							<p id="confreq-svg-rs-css-embed-inc" data-tests="#cnt-svg-css-inclusion">For the purposes of
								styling SVG embedded in XHTML content documents <em>by inclusion</em>, reading systems
								MUST apply applicable CSS rules of the containing document to the included SVG
								elements.</p>

							<div class="note">
								<p>SVG included <em>by reference</em> is processed as a separate document, and can
									include its own CSS style rules just like an [=SVG content document=] would. Note
									that this is consistent with situations where an [[html]] <a data-lt="object"
											><code>object</code> element</a> references an external [[html]]
									element.</p>
							</div>
						</section>
					</section>

					<section id="sec-xhtml-forms">
						<h5>Form submission</h5>

						<p>Reading system support for the submission of [[html]] forms is OPTIONAL. A reading system
							might, for example, prevent form submissions by limiting access to networking.</p>
					</section>
				</section>
			</section>

			<section id="sec-svg">
				<h3>SVG content documents</h3>

				<p id="confreq-rs-epub3-svg" class="support" data-tests="#cnt-svg-support">Reading systems MUST process
						<a data-cite="epub-33#sec-svg">SVG content documents</a> [[epub-33]].</p>

				<p>To process SVG content documents and <a href="#sec-xhtml-svg">SVG embedded in XHTML content
						documents</a>, a reading system:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-svg-rs-behavior">MUST process SVG content documents using semantics defined by
							the [[svg]] specification, and honor any applicable user agent conformance constraints
							expressed therein, unless explicitly defined by this specification as overridden.</p>
					</li>
					<li>
						<p id="confreq-svg-rs-script">MUST meet the conformance criteria defined in <a
								href="#sec-scripted-content"></a>.</p>
					</li>
					<li>
						<p>
							<span id="confreq-svg-rs-css" data-tests="#cnt-svg-css">MUST, if it has a [=viewport=],
								support the visual rendering of SVG using CSS as defined in <a
									href="https://www.w3.org/TR/SVG/styling.html#">Styling</a> [[svg]] </span>
							<span id="confreq-svg-rs-css-properties">and it SHOULD support all properties defined in the
									<a href="https://www.w3.org/TR/SVG/propidx.html#">Property Index</a> [[svg]]. </span>
							<span id="confreq-svg-rs-css-embedded"
								data-tests="#cnt-svg-css-inclusion,#cnt-svg-css-reference"> In the case of embedded SVG,
								a reading system MUST also conform to the constraints defined in <a
									href="#sec-xhtml-svg-css"></a>.</span>
						</p>
					</li>
				</ul>
			</section>

			<section id="sec-css">
				<h3>Cascading Style Sheets (CSS)</h3>

				<p id="confreq-rs-epub3-css" data-tests="#cnt-css-support" class="support">If a reading system has a
					[=viewport=], it MUST support the <a data-cite="epub-33#sec-css">visual rendering of XHTML content
						documents via CSS</a> [[epub-33]].</p>

				<p>To support CSS, a reading system:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-css-rs-support" data-tests="#cnt-css-support">MUST support the official
							definition of CSS as described in the [[csssnapshot]].</p>
					</li>
					<li>
						<p id="confreq-css-rs-modules">SHOULD support all applicable modules in [[csssnapshot]] that
							have reached at least <a href="https://www.w3.org/Consortium/Process/#RecsCR">Candidate
								Recommendation</a> status [[w3cprocess]] (and are widely implemented).</p>
					</li>
					<li>
						<p id="confreq-css-rs-fonts" data-tests="#cnt-css-fonts">MUST support [[truetype]],
							[[opentype]], [[woff]], and [[woff2]] font resources referenced from <a
								data-cite="css-fonts-4#font-face-rule"><code>@font-face</code> rules</a>
							[[css-fonts-4]].</p>
					</li>
					<li>
						<p id="confreq-css-rs-prefixed"
							data-tests="#css-epub-hyphens, #css-epub-line-break, #css-epub-text-align-last, #css-epub-text-combine-horizontal, #css-epub-text-emphasis, #css-epub-text-orientation, #css-epub-text-transform, #css-epub-text-underline-position, #css-epub-word-break, #css-epub-writing-mode"
							>MUST support all prefixed properties defined in <a data-cite="epub-33#sec-css-prefixed">CSS
								Style Sheets — Prefixed properties</a> [[epub-33]].</p>
					</li>
					<li>
						<p id="confreq-css-creator-styles">SHOULD apply [=EPUB creator=] style sheets as written to
							[=EPUB content documents=].</p>
					</li>
					<li>
						<p id="confreq-css-overrides">SHOULD NOT override the EPUB creator's style sheets, but SHOULD do
							so in a way that preserves the Cascade when necessary: through a user agent style sheet, the
								<a data-cite="DOM-Level-2-Style/css.html#CSS-OverrideAndComputed"
									><code>getOverrideStyle</code></a> method [[dom-level-2-style]], or [[html]]
							[^html-global/style^] attributes.</p>
					</li>
					<li>
						<p id="confreq-css-user-styles">It MAY override parts of the EPUB creator's style sheet because
							of user interaction.</p>
					</li>
				</ul>

				<p id="confreq-css-rs-html-default">In addition to supporting CSS properties as defined above, a reading
					system's user agent style sheet SHOULD support the [[html]] <a data-cite="html#rendering">suggested
						default rendering</a>.</p>

				<p>Reading system developers should implement CSS support at the level of major browsers and publicly
					document their user agent style sheets and how they interact with EPUB creator's style sheets.</p>
			</section>

			<section id="sec-scripted-content">
				<h3>Scripting</h3>

				<p id="confreq-rs-scripted" class="support"
					data-test="#scr-support,#scr-support_iframe,#scr-support_svg">Reading systems SHOULD support <a
						data-cite="epub-33#sec-scripted-content">scripting</a> [[epub-33]].</p>

				<p>Reading system support for scripting depends on its usage context:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-rs-scripted-reflow-support">Reading systems SHOULD support <a
								data-cite="epub-33#sec-scripted-container-constrained">container-constrained
								scripting</a> [[epub-33]] in reflowable EPUB content documents.</p>
					</li>
					<li>
						<p id="confreq-rs-scripted-fxl-support">Reading systems SHOULD support <a
								data-cite="epub-33#sec-scripted-spine">spine-level scripting</a> [[epub-33]] in <a
								data-cite="epub-33#sec-fixed-layouts">fixed-layout documents</a> [[epub-33]].</p>
					</li>
					<li>
						<p id="confreq-rs-scripted-scrolled">Reading systems SHOULD support spine-level scripting in
							reflowable EPUB content documents that use the <a data-cite="epub-33#flow-scrolled-doc"
									>"<code>scrolled-doc</code>"</a> or <a data-cite="epub-33#flow-scrolled-continuous"
									>"<code>scrolled-continuous</code>"</a> [[epub-33]] presentation modes defined by <a
								href="#flow">the <code>rendition:flow</code> property</a>. Similarly, if it supports
							spine-level scripting in reflowable EPUB content documents, it MUST implement the
								"<code>scrolled-doc</code>" presentation mode and SHOULD implement the
								"<code>scrolled-continuous</code>" presentation mode.</p>
					</li>
					<li>
						<p id="confreq-rs-scripted-optional-support">Reading systems MAY support scripting in other
							contexts, but this specification does not address such scripting. As a result, the use of
							scripting in these contexts may not be consistent across reading systems.</p>
					</li>
				</ul>

				<p>If a reading system supports scripting:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-rs-scripted-ua">It MAY render [=scripted content documents=] as an interactive,
							scripted user agent according to [[html]].</p>
					</li>

					<li>
						<p id="confreq-rs-scripted-origin">
							<span id="confreq-rs-scripted-origin-shared" data-tests="#scr-support_origin">It MUST assign
								a unique [=origin=] [[url]], shared by all <a data-cite="epub-33#sec-scripted-spine"
									>spine-level scripts</a> of the EPUB publication.</span>
							<span id="confreq-rs-scripted-origin-user" data-tests="#ocf-url_origin">That
								[=origin=] [[url]] MUST be <em>unique</em> for each user-specific instance of an EPUB
								publication in a reading system.</span>
						</p>
					</li>

					<li>
						<p id="confreq-rs-scripted-container">It MUST NOT allow a container-constrained script to modify
							the [[dom]] of the host EPUB content document or other contents in the EPUB publication and
							MUST NOT allow it to manipulate the size of its containing rectangle. (Note: Even if a
							script is not container-constrained, the reading system MAY impose restrictions on
							modifications (see also the <a href="#feature-dom-manipulation">dom-manipulation
							feature</a>).)</p>
					</li>
					<li>
						<p id="confreq-rs-scripted-limit">It MAY place additional limitations on the capabilities
							provided to scripts during execution (e.g., limiting networking).</p>
					</li>
					<li>
						<p id="confreq-rs-scripted-readingsystem-object"
							data-tests="#scr-readingsystem-features,#scr-readingsystem-support,#scr-readingsystem-support_svg"
							>It MUST extend the <a data-cite="html#the-navigator-object">navigator object</a> [[!html]]
							with the <code>epubReadingSystem</code> interface defined in <a
								href="#app-epubReadingSystem"></a>. It also MUST support the
								<code>dom-manipulation</code> and <code>layout-change</code> features defined in <a
								href="#app-ers-hasFeature-features"></a> in container-constrained scripting
							contexts.</p>
					</li>
				</ul>

				<p id="confreq-rs-scripted-flbk">If a reading system does not support scripting, it MUST process
					fallbacks for scripted content as defined in <a data-cite="epub-33#confreq-cd-scripted-flbk"
						>Fallbacks for scripted content documents</a> [[epub-33]].</p>

				<section id="sec-local-storage">
					<h4>Local storage</h4>

					<p>
						<span id="confreq-rs-scripted-storage-block">Scripts may save persistent data through <a
								data-cite="html#dom-document-cookie">cookies</a> and <a data-cite="html#webstorage">web
								storage</a> [[html]], but reading systems MAY block such attempts. </span>
						<span id="confreq-rs-scripted-storage-protection">Reading systems that allow users to store data
							MUST ensure they do not make that data available to other unrelated documents (e.g., ones
							that could be spoofed). In particular, checking for a matching document identifier (or
							similar metadata) is not a valid method to control access to persistent data. </span>
					</p>

					<p>Reading systems that allow <a data-cite="html#dom-localstorage">local storage</a> [[html]] SHOULD
						provide methods for users to inspect or delete that data.</p>
				</section>

				<section id="sec-scripted-content-events">
					<h4>Event model</h4>

					<p>Reading systems SHOULD follow the DOM Event model as per [[html]] and pass UI events to the
						scripting environment before performing any default action associated with these events.</p>

					<p>Reading system developers must ensure that scripts cannot disable critical functionality (such as
						navigation) to constrain the extent to which a <a href="#sec-scripted-content-security"
							>potentially malicious</a> script could impact their reading systems. As a result, although
						the scripting environment should be able to cancel the default action of any event, some events
						either might not be passed through or might not be cancelable.</p>
				</section>

				<section id="sec-scripted-content-security" class="informative">
					<h3>Security considerations</h3>

					<p>Reading system developers who also support scripting must be aware of the security issues that
						arise when reading systems execute scripted content. As the underlying scripting model employed
						by reading systems and browsers is the same, developers must take into consideration the same
						kinds of issues encountered in web contexts.</p>

					<p>Each reading system must establish if it can trust the scripts in a particular document. Reading
						systems should treat all scripts as untrusted (and potentially malicious), and developers should
						examine all vectors of attack and protect against them. In particular, developers should
						consider the following:</p>

					<ul>
						<li>
							<p>an attack against the runtime environment (e.g., stealing files from a user's hard
								drive);</p>
						</li>
						<li>
							<p>an attack against the reading system itself (e.g., stealing a list of a user's books or
								causing unexpected behavior);</p>
						</li>
						<li>
							<p>an attack of one EPUB content document against another (e.g., stealing data that
								originated in a different document);</p>
						</li>
						<li>
							<p>an attack of an unencrypted script against an encrypted portion of a document (e.g., an
								injected malicious script extracting protected content);</p>
						</li>
						<li>
							<p>an attack against the local network (e.g., stealing data from a server behind a
								firewall).</p>
						</li>
					</ul>

					<p>To limit the possible damage of untrusted scripts, this specification recommends that reading
						systems establish a unique [=origin=] [[url]] allocated to each [=EPUB publication=] (see <a
							href="#sec-container-iri"></a>). Assigning a unique origin ensures that <a
							data-cite="epub-33#sec-scripted-spine">spine-level scripts</a> [[epub-33]] are isolated from
						other EPUB publications, and limits access to <a data-cite="html#dom-document-cookie"
							>cookies</a> [[html]], <a data-cite="html#webstorage">web storage</a> [[html]], etc.</p>

					<p>Examples of web APIs that are tied to the concept of "origin" include web storage [[html]] and
						IndexedDB [[indexeddb]], which EPUB content documents can interact with via scripting. Reading
						systems that allow users to add/remove publications from a managed library (their "bookshelf")
						may maintain the publication's unique origin when the publication is removed and subsequently
						re-imported into the content library. Conversely, reading systems may create a new unique origin
						for every newly added publication.</p>

					<p>This specification also recommends that <a data-cite="epub-33#sec-scripted-container-constrained"
							>container-constrained scripts</a> [[epub-33]] not be allowed to modify the DOM of the host
						EPUB content document and/or manipulate the containing rectangle (see <a
							href="#sec-scripted-content"></a>).</p>

					<p>Note that compliance with these recommendations does not guarantee protection from the possible
						attacks listed above; developers must examine each potential vulnerability within the context of
						their reading system.</p>
				</section>
			</section>
		</section>
		<section id="sec-nav">
			<h3>Navigation document processing</h3>

			<p id="sec-nav-rs-conf" class="support" data-tests="#nav-spine_in-spine">Reading systems MUST process <a
					data-cite="epub-33#sec-nav">EPUB navigation documents</a> [[epub-33]].</p>

			<p>To process the EPUB navigation document, a reading system:</p>

			<ul class="conformance-list">
				<li>
					<p id="confreq-nav-toc-access" data-tests="#nav-access">MUST provide users access to the <a
							data-cite="epub-33#confreq-nav-a">links and headings</a> in the <a
							data-cite="epub-33#sec-nav-toc"><code>toc nav</code> element</a> [[epub-33]].</p>
				</li>
				<li>
					<p id="confreq-nav-pagelist-access">SHOULD provide a method to navigate to the listed page breaks
						when a <a data-cite="epub-33#sec-nav-pagelist"><code>page-list nav</code> element</a>
						[[epub-33]] is present.</p>
				</li>
				<li>
					<p id="confreq-nav-landmarks-access">MAY provide users access to the links in the <a
							data-cite="epub-33#sec-nav-landmarks"><code>landmarks nav</code> element</a> [[epub-33]] and
						MAY use the links to enable functionality in the application.</p>
				</li>
				<li>
					<p id="confreq-nav-other-access">MAY provide access to <code>nav</code> elements that do not specify
						an [^/epub:type^] attribute or that <a data-cite="epub-33#sec-nav-def-types-other">declare an
							unknown value</a> [[epub-33]].</p>
				</li>
				<li>
					<p id="confreq-nav-activation" data-tests="#nav-activation">MUST relocate the current reading
						position to the destination identified by an activated link when the link is to a <a>publication
							resource</a>.</p>
				</li>
				<li>
					<p id="confreq-nav-ol-style" data-tests="#nav-spine_in-spine-no-list-style">MUST NOT show list item
						numbering on <code>nav</code> elements when presenting them outside of the spine, regardless of
						support for CSS, as the default display style of list items is equivalent to the <a
							href="https://www.w3.org/TR/CSS2/generate.html#propdef-list-style"><code>list-style:
								none</code> property</a> [[csssnapshot]].).</p>
				</li>
			</ul>

			<p id="confreq-nav-spine" data-tests="#nav-spine_in-spine,#nav-spine_not-in-spine">Reading systems MUST
				honor the above requirements irrespective of whether the EPUB navigation document is part of the [=EPUB
				spine | spine=].</p>
		</section>
		<section id="sec-rendering-control">
			<h2>Layout rendering control processing</h2>

			<section id="sec-fixed-layouts">
				<h3>Fixed-layout documents</h3>

				<p id="confreq-rs-epub3-fxl" data-tests="#fxl-spread-none" class="support">Reading systems MUST support
					the rendering of <a data-cite="epub-33#sec-fixed-layouts">fixed-layout documents</a>
					[[epub-33]].</p>

				<section id="sec-fxl-props">
					<h4>Fixed-layout properties</h4>

					<section id="layout">
						<h5>The <code>rendition:layout</code> property</h5>

						<p id="layout-default" data-cite="epub-33">The default value <code>reflowable</code> MUST be
							assumed by EPUB reading systems as the global value if no [^meta^] element carrying the <a
								data-cite="epub-33#layout"><code>rendition:layout</code> property</a> occurs in the <a
								data-cite="epub-33#elemdef-opf-metadata">package document metadata</a> [[epub-33]].</p>

						<p id="layout-pre-paginated" data-tests="#fxl-layout-pre-paginated-spreads">When the
								<code>rendition:layout</code> property is set to <code>pre-paginated</code>, reading
							systems MUST NOT include space between the adjacent content slots when rendering [=synthetic
							spreads=].</p>

						<p>The <code>rendition:layout</code> property values have the following processing
							requirements:</p>

						<dl class="variablelist">
							<dt id="def-layout-reflowable">reflowable</dt>
							<dd>
								<p>Reading systems MAY apply dynamic pagination when rendering.</p>
							</dd>
							<dt id="def-layout-pre-paginated" data-tests="#fxl-layout-pre-paginated">pre-paginated</dt>
							<dd>
								<p>Reading systems MUST produce exactly one page per spine [^itemref^] [[epub-33]] when
									rendering.</p>
							</dd>
						</dl>
					</section>

					<section id="orientation">
						<h5>The <code>rendition:orientation</code> property</h5>

						<p id="fxl-orientation-default" data-tests="#fxl-orientation-default" data-cite="epub-33">The
							default value <code>auto</code> MUST be assumed by EPUB reading systems as the global value
							if no [^meta^] element carrying the <a data-cite="epub-33#orientation"
									><code>rendition:orientation</code> property</a> occurs in the <a
								data-cite="epub-33#elemdef-opf-metadata">package document metadata</a> [[epub-33]].</p>

						<p>The <code>rendition:orientation</code> property values have the following processing
							requirements:</p>

						<dl class="variablelist">
							<dt id="def-orientation-auto">auto</dt>
							<dd>
								<p>The reading system determines the orientation in which to render the content.</p>
							</dd>

							<dt id="def-orientation-landscape" data-tests="#fxl-orientation-landscape">landscape</dt>
							<dd>
								<p>Reading systems that support multiple orientations SHOULD render the content in
									landscape orientation.</p>
							</dd>

							<dt id="def-orientation-portrait">portrait</dt>
							<dd>
								<p>Reading systems that support multiple orientations SHOULD render the content in
									portrait orientation.</p>
							</dd>
						</dl>

						<p>The means by which they convey the intent is implementation specific.</p>
					</section>

					<section id="spread">
						<h5>The <code>rendition:spread</code> property</h5>

						<p id="fxl-spread-default" data-tests="#fxl-spread-default" data-cite="epub-33">The default
							value <code>auto</code> MUST be assumed by EPUB reading systems as the global value if no
							[^meta^] element carrying the <a data-cite="epub-33#spread"
								><code>rendition:spread</code></a> property occurs in the <a
								data-cite="epub-33#elemdef-opf-metadata">package document metadata</a> [[epub-33]].</p>

						<p>The <code>rendition:spread</code> property values have the following processing
							requirements:</p>

						<dl class="variablelist">
							<dt id="def-spread-none" data-tests="#fxl-spread-none">none</dt>
							<dd>
								<p>Reading systems MUST NOT incorporate spine items in a [=synthetic spread=]. Reading
									systems SHOULD create a single [=viewport=] positioned at the center of the
									screen.</p>
							</dd>
							<dt id="def-spread-landscape" data-tests="#fxl-spread-landscape">landscape</dt>
							<dd>
								<p>Reading systems SHOULD render a synthetic spread for spine items only when the device
									is in landscape orientation.</p>
							</dd>
							<dt id="def-spread-portrait">portrait (deprecated)</dt>
							<dd>
								<p>Reading systems SHOULD treat the value "<code>portrait</code>" as a synonym of
										"<code>both</code>" and create spreads regardless of orientation.</p>
							</dd>
							<dt id="def-spread-both" data-tests="#fxl-spread-both">both</dt>
							<dd>
								<p>Reading systems SHOULD render a synthetic spread regardless of device
									orientation.</p>
							</dd>
							<dt id="def-spread-auto" data-tests="#fxl-spread-auto">auto</dt>
							<dd>
								<p>Reading systems MAY use synthetic spreads in specific or all device orientations as
									part of a [=content display area=] utilization optimization process.</p>
							</dd>
						</dl>
					</section>

					<section id="page-spread">
						<h4>The <code>rendition:page-spread-*</code> properties</h4>

						<p>
							<span id="page-spread-left" data-tests="#fxl-page-spread-left">The <a
									data-cite="epub-33#fxl-page-spread-left"><code>rendition:page-spread-left</code>
									property</a> [[epub-33]] indicates that the given spine item SHOULD be rendered in
								the left-hand slot in the spread. </span>
							<span id="page-spread-right" data-tests="#fxl-page-spread-right">The <a
									data-cite="epub-33#fxl-page-spread-right"><code>rendition:page-spread-right</code>
									property</a> [[epub-33]] indicates that the given spine item SHOULD be rendered in
								the right-hand slot in the spread. </span>
						</p>

						<p>The <code>rendition:page-spread-left</code> and <code>rendition:page-spread-right</code>
							properties apply to both pre-paginated and reflowable content, and they only apply when the
							reading system is creating synthetic spreads.</p>

						<p id="page-break-precedence">The <code>rendition:page-spread-*</code> properties MUST take
							precedence over whatever value of the <a
								href="https://www.w3.org/TR/CSS2/page.html#propdef-page-break-before"
									><code>page-break-before</code> property</a> [[csssnapshot]] has been set for an
							[=XHTML content document=].</p>

						<p id="page-layout-both" data-tests="#page-layout-both">When a <a href="#def-layout-reflowable"
								>reflowable</a> spine item follows a <a href="#def-layout-pre-paginated"
								>pre-paginated</a> one, the reflowable one SHOULD start on the next page &#8212; as
							defined by the <a data-cite="epub-33#attrdef-spine-page-progression-direction"
									><code>page-progression-direction</code> attribute</a> [[epub-33]] &#8212; when it
							lacks a <code>rendition:page-spread-*</code> property value.</p>

						<p id="page-spread-flow" data-tests="#page-layout-both-spread">If the reflowable spine item has
							a <code>rendition:page-spread-*</code> specification, it MUST be honored (e.g., by inserting
							a blank page).</p>

						<p id="page-spread-both-pre-pag" data-tests="#page-layout-both-spread">Similarly, when a
							pre-paginated spine item follows a reflowable one, the pre-paginated one SHOULD start on the
							next page (as defined by the <code>page-progression-direction</code> attribute) when it
							lacks a <code>rendition:page-spread-*</code> property value.</p>

						<p id="page-spread-both-dir" data-tests="#page-layout-both-spread">If the pre-paginated spine
							item has a <code>rendition:page-spread-*</code> specification, it MUST be honored (e.g., by
							inserting a blank page).</p>

						<p id="fxl-page-spread-combined" data-tests="#fxl-page-spread-combined">When a reading system
							encounters two spine items that represent a true spread (i.e., two adjacent spine items with
							the <code>rendition:page-spread-left</code> and <code>rendition:page-spread-right</code>
							properties), it SHOULD create the spread with no space between the adjacent pages.</p>
					</section>
				</section>

				<section id="sec-fxl-dimensions">
					<h4>Initial containing block dimensions</h4>

					<dl>
						<dt>XHTML</dt>
						<dd>
							<p>
								<span id="confreq-fxl-rs-xhtml-icb-def"> Reading systems MUST create the initial
									containing block (ICB) using the width and height expressions declared in the
										<code>viewport</code>
									<code>meta</code> tag for [=XHTML content documents=], as defined in <a
										data-cite="epub-33#sec-fxl-icb-html">Expressing in HTML</a> [[epub-33]].</span>
								<span id="confreq-fxl-rs-xhtml-icb" data-tests="#fxl-xhtml-icb">They MUST clip content
									positioned outside of the ICB.</span>
							</p>
							<p id="confreq-fxl-rs-xhtml-icb-ratio"> When the ICB aspect ratio does not match the aspect
								ratio of the reading system [=content display area=], reading systems MAY position the
								ICB inside the area to accommodate the user interface; in other words, added
								letter-boxing space MAY appear on either side (or both) of the content. </p>
						</dd>

						<dt>SVG</dt>
						<dd>
							<p id="confreq-fxl-rs-svg">Reading systems MUST create the initial containing block (ICB)
								using the dimensions as defined in <a data-cite="epub-33#sec-fxl-icb-svg">Expressing the
									ICB in SVG</a> [[epub-33]] to render [=SVG content documents=].</p>
						</dd>
					</dl>
				</section>

				<section id="sec-fxl-viewport">
					<h4>Viewport rendering</h4>

					<p>When rendering [=fixed-layout documents=], the default intent is that the <a>content display
							area</a> SHOULD occupy as much of the available [=viewport=] area as possible. Reading
						systems SHOULD NOT inject additional content such as border, margins, headers, or footers into
						the viewport.</p>

					<div class="note">
						<p>This specification does not define how the <a
								href="https://www.w3.org/TR/CSS2/visudet.html#containing-block-details">initial
								containing block</a> [[css2]] is placed within the reading system <a>content display
								area</a>.</p>
					</div>

					<div class="note">
						<p>The exposure of reading system control widgets to the user is implementation-specific and not
							included in the above behavioral expectations.</p>
					</div>
				</section>
			</section>

			<section id="sec-reflowable-layouts">
				<h3>Reflowable layouts</h3>

				<p id="confreq-rs-epub3-presentational-meta" class="support">Reading systems SHOULD process the <a
						data-cite="epub-33#sec-reflowable-layouts">reflowable layout properties</a> [[epub-33]].</p>

				<section id="flow">
					<h4>The <code>rendition:flow</code> property</h4>

					<p>If a reading system supports the specified rendering, it SHOULD use that method to handle
						overflow content, but MAY provide the option for users to override the requested rendering.</p>

					<p>The default global value is <code>auto</code> if no <code>meta</code> element carrying this
						property occurs in the <a data-cite="epub-33#elemdef-opf-metadata"><code>metadata</code>
							section</a> [[epub-33]]. Reading systems MAY support only this default value.</p>

					<p>The <code>rendition:flow</code> property values have the following processing requirements:</p>

					<dl class="variablelist">
						<dt id="paginated">paginated</dt>
						<dd id="paginated-dd" data-tests="#pkg-flow-paginated">
							<p>The reading system SHOULD dynamically paginate all overflow content.</p>
						</dd>

						<dt id="scrolled-continuous">scrolled-continuous</dt>
						<dd id="scrolled-continuous-dd" data-tests="#pkg-flow-scrolled-continuous">
							<p>The reading system SHOULD render all EPUB content documents such that overflow content is
								scrollable, and SHOULD present the EPUB publication as one continuous scroll from spine
								item to spine item (except where <a data-cite="epub-33#layout-property-flow-overrides"
									>locally overridden</a> [[epub-33]]).</p>
						</dd>

						<dt id="scrolled-doc">scrolled-doc</dt>
						<dd id="scrolled-doc-dd" data-tests="#pkg-flow-scrolled-doc">
							<p>The reading system SHOULD render all EPUB content documents such that users can scroll
								overflow content, and SHOULD present each spine item as a separate scrollable
								document.</p>
						</dd>

						<dt id="auto">auto</dt>
						<dd>
							<p>The reading system MAY render overflow content using its default method or a user
								preference, whichever is applicable.</p>
						</dd>
					</dl>

					<p>For the <code>rendition:flow-scrolled-continuous</code> property, the scroll direction MUST be
						defined relative to the block flow direction of the root element of the XHTML content document
						referenced by the [^itemref^] element [[epub-33]]. The scroll direction MUST be vertical if the
						block flow direction is downward (top-to-bottom). It MUST be horizontal if the block flow
						direction of the root element is rightward (left-to-right) or leftward (right-to-left).</p>

					<p>Reading systems MUST ignore the <code>rendition:flow</code> property and its overrides when
						processing <a href="https://www.w3.org/TR/epub-33/#def-layout-pre-paginated">pre-paginated spine
							items</a> [[epub-33]].</p>
				</section>

				<section id="align-x-center">
					<h4>The <code>rendition:align-x-center</code> property</h4>

					<p>When the <a href="#align-x-center"><code>rendition:align-x-center</code> property</a> is set on a
						spine item, reading systems SHOULD render the content centered horizontally within the
						[=viewport=] or spread, as applicable. This property does not affect the rendering of the spine
						item, only the placement of the resulting content box.</p>

					<p>For reflowable content, reading systems that support this property MUST center each virtual
						page.</p>

					<p>This specification does not define a default rendering behavior when reading systems do not
						support this property or EPUB creators do not specify it. Reading systems MAY render spine items
						by their own design.</p>
				</section>
			</section>

			<section id="sec-custom-properties">
				<h3>Custom properties</h3>

				<p>Reading systems MAY support custom properties provided they do not introduce expressions that
					conflict behaviorally with the properties defined in the <a
						href="https://www.w3.org/TR/epub-33/#app-rendering-vocab">Package rendering vocabulary</a>
					[[epub-33]].</p>
			</section>
		</section>
		<section id="sec-media-overlays">
			<h2>Media overlays processing</h2>

			<p id="confreq-rs-epub3-mo" class="support">Reading systems with the capability to render prerecorded audio
				SHOULD support <a data-cite="epub-33#sec-media-overlays">media overlays</a> [[epub-33]].</p>

			<p>If a reading system does not support media overlays, it MUST ignore both:</p>

			<ul>
				<li>the <a data-cite="epub-33#attrdef-item-media-overlay"><code>media-overlay</code> attribute</a> on
					[=EPUB manifest | manifest=] [^item^] elements [[epub-33]]; and</li>
				<li><code>item</code> elements where the <code>media-type</code> attribute value equals
						<code>application/smil+xml</code>.</li>
			</ul>

			<section id="sec-behaviors-loading">
				<h4>Loading the media overlay</h4>

				<p>When a reading system loads a [=package document=], it MUST refer to the [=EPUB manifest | manifest=]
					[^item^] elements' [[epub-33]] <code>media-overlay</code> attributes to discover the corresponding
					media overlays for [=EPUB content documents=].</p>

				<p id="confreq-rs-xhtml-svg">
					<span id="mol-xhtml-support" data-tests="#mol-css">Reading systems MUST support playback for
						[=XHTML content documents=], and</span>
					<span id="mol-svg-support">MAY support [=SVG content documents=].</span>
				</p>

				<p>Playback MUST start at the media overlay element which corresponds to the desired EPUB content
					document starting point. Note that the start of an EPUB content document could correspond to an
					element at the start or in the middle of a media overlay. When the media overlay document finishes
					playing, the reading system SHOULD load the next EPUB content document (as specified in the package
					document [=EPUB spine | spine=]) and also load its corresponding media overlay document, provided
					that one is given.</p>
			</section>

			<section id="sec-behaviors-playback">
				<h4>Basic playback</h4>

				<section id="sec-rsconf-timing-synch">
					<h3>Timing and synchronization</h3>

					<p id="mol-timing-sync"
						data-tests="#mol-timing-synchronization,#mol-css,#mol-timing-synchronization_fxl,#mol-timing-synchronization_svg,#mol-timing-synchronization_multiple_audio"
						>Reading systems MUST render immediate children of the <a data-cite="epub-33#elemdef-smil-body"
								><code>body</code> element</a> [[epub-33]] in a sequence. A <a
							data-cite="epub-33#elemdef-smil-seq"><code>seq</code> element's</a> [[epub-33]] children
						MUST be rendered in sequence, and playback completes when the last child finishes playing.
						Reading system MUST render a <a data-cite="epub-33#elemdef-smil-par"><code>par</code>
							element's</a> [[epub-33]] children in parallel (with each starting at the same time), and
						playback completes when all the children finish playing. Reading system playback of the media
						overlay document completes when the <code>body</code> element's last child finishes playing.</p>
				</section>

				<section id="sec-rsconf-rendering-audio">
					<h5>Rendering audio</h5>

					<p id="mol-audio" data-tests="#mol-audio">When presented with a media overlay
						<a data-cite="epub-33#elemdef-smil-audio"><code>audio</code> element</a>, reading systems MUST play
						the audio resource referenced by the <code>src</code> attribute, starting at the clip offset time
						given by the <a data-cite="epub-33#attrdef-smil-clipBegin"><code>clipBegin</code> attribute</a> and
						ending at the clip offset time given by the
						<a data-cite="epub-33#attrdef-smil-clipEnd"><code>clipEnd</code> attribute</a> [[epub-33]].</p>

					<p>In addition:</p>

					<ul>
						<li id="mol-audio-no-clipbegin" data-tests="#mol-audio-no-clipbegin">
							<p>If the EPUB creator has not specified a <code>clipBegin</code> attribute, reading systems
								MUST assume the value "<code>0</code>".</p>
						</li>
						<li id="mol-audio-no-clipend" data-tests="#mol-audio-no-clipend">
							<p>If the EPUB creator has not specified a <code>clipEnd</code> attribute, reading systems
								MUST assume the value to be the full duration of the physical media.</p>
						</li>
						<li id="mol-audio-exceeding-clipend" data-tests="#mol-audio-exceeding-clipend">
							<p>If the value of <code>clipEnd</code> exceeds the full duration of the physical media,
								reading systems MUST assume its value to be the full duration of the physical media.</p>
						</li>
					</ul>

					<p>User-controllable audio playback options SHOULD include timescale modification, in which the user
						can alter the playback rate without distorting the pitch. The suggested range is half-speed to
						double-speed.</p>

				</section>

				<section id="sec-rsconf-rendering-text">
					<h5>Rendering EPUB content document elements</h5>

					<p>When presented with a media overlay <a data-cite="epub-33#elemdef-smil-text"><code>text</code>
							element</a> [[epub-33]] whose <code>src</code> attribute contains a <a>URL-fragment
							string</a> referencing a specific part of an EPUB content document, reading systems SHOULD
						ensure the referenced portion is visible in the [=viewport=]. In addition to [[html]] element ID
						references and <a href="https://www.w3.org/TR/SVG/linking.html#SVGFragmentIdentifiers">SVG
							Fragment Identifiers</a> [[svg]], reading systems MAY support other fragment identifier
						schemes.</p>

					<p id="mol-rendering-with-styling"
						data-tests="#mol-css,#mol-timing-synchronization_fxl,#mol-timing-synchronization_svg">During
						media overlays playback, reading systems with a viewport SHOULD add the class names given by the
						metadata properties <a data-cite="epub-33#active-class"><code>active-class</code></a> and <a
							data-cite="epub-33#playback-active-class"><code>playback-active-class</code></a> [[epub-33]]
						to the appropriate elements, when specified, in the EPUB content document. Conversely, the class
						names SHOULD be removed when the playback state changes, as described in <a
							data-cite="epub-33#sec-docs-assoc-style">Associating style information</a> [[epub-33]].</p>

					<p>The <code>active-class</code> and <code>playback-active-class</code> metadata properties are
						OPTIONAL, and if omitted, reading system behavior is implementation-specific.</p>

					<p>Reading system behavior when a <a data-cite="epub-33#sec-media-overlays-fragids">fragment
							identifier</a> [[epub-33]] does not reference an element is also
						implementation-specific.</p>
				</section>
			</section>

			<section id="sec-behaviors-interaction">
				<h4>Interacting with the EPUB content document</h4>

				<section id="sec-rsconf-navigation">
					<h5>Navigation</h5>

					<p id="mol-navigation" data-tests="#mol-navigation">Because the media overlay is closely linked to the
						[=EPUB content document=], it is very easy for reading systems to locate a position in the EPUB
						content document based on the current position in the media overlay playback. If the user pauses
						synchronized playback and navigates to a different part of the [=EPUB publication=], synchronized
						playback MUST resume at that point. For example, if a specific page number in the EPUB content
						document is the desired location, then this same point is located in the media overlay and playback
						started there.</p>

					<p>This same approach allows for synchronizing the media overlay playback with user selection of a
						navigation point in the [=EPUB navigation document=]. The reading system loads the media overlay
						for that file and finds the correct point for starting playback based on the ID of the
						navigation point target.</p>

					<div class="note">
						<p>EPUB creators may associate a media overlay document directly with an <a>EPUB navigation
								document</a>t in order to provide synchronized playback of its contents, regardless of
							whether the [=XHTML content document=] in which it resides is included in the [=EPUB spine |
							spine=]. See <a data-cite="epub-33#sec-mo-nav-doc">EPUB navigation document</a> [[epub-33]]
							for more information.</p>
					</div>

					<div class="note" id="note-table-reading-mode">
						<p>EPUB creators may associate media overlay document elements with EPUB content document
							structures such as tables. Reading systems should ensure that media overlay playback remains
							synchronized with user navigation of table rows and cells. The reading system might also
							play the corresponding table header preceding the contents of the cell.</p>
					</div>
				</section>

				<section id="sec-embedded-media">
					<h5>Embedded audio and video</h5>

					<p>An [=EPUB content document=] with which a media overlay is associated MAY itself contain embedded
						video and audio media. The media overlay elements MAY point to these elements. Unlike text and
						images, video and audio media have an intrinsic duration. <span id="mol-embed-override"
							data-tests="#mol-embed,#mol-embed_fxl">Consequently, when a reading system renders the
							synchronization described by a media overlay, it MUST override the default playback behavior
							of audio and video media embedded within the associated EPUB content document.</span></p>

					<p>Note that the rules below apply only to <em>referenced</em> [[html]] <span data-cite="html"
							>[^video^] or [^audio^]</span> elements within the associated EPUB content document. That is
						to say, the rules apply to only those elements pointed to by [^text^] elements [[epub-33]]
						within the media overlay (i.e., via the <code>src</code> attribute). These rules do not apply to
						embedded media not referenced by media overlay elements.</p>

					<ul>
						<li>
							<p id="mol-embed-deactivate-playback" data-tests="#mol-embed_deactivate_playback">Reading
								systems MUST deactivate the public playback interface for all referenced audio and video
								media embedded within an EPUB content document (typically: play/pause control, time
								slider, volume level, etc.). This behavior avoids interference between the scheduled
								playback sequence defined by the media overlay, and the arbitrary playback behavior due
								to user interaction or script execution. As a result, when the reading system is in
								playback mode, it SHOULD:</p>
							<ul>
								<li>
									<p>Hide the individual video/audio UI controls from the page, which overrides the
										default behavior defined by the [[html]] [^audio/controls^] attribute.</p>
								</li>
								<li>
									<p>Prevent scripts embedded within the EPUB content document from invoking the
										JavaScript audio/video playback API (i.e., authored as part of the default
										behavior).</p>
								</li>
							</ul>
						</li>
						<li id="mol-embed-init-to-stop" data-tests="#mol-embed,#mol-embed_fxl">
							<p>Reading systems MUST initialize all referenced audio and video media embedded within an
								EPUB content document to their "stopped" state, and ready them to play from the
								zero-position within their content stream (possibly displaying the image specified using
								the [[html]] [^video/poster^] attribute. This requirement overrides the default behavior
								defined by the [[html]] [^video/autoplay^] attribute.</p>
						</li>
						<li>
							<p>When an EPUB content document element becomes active, the CSS Style Sheet visual
								highlighting rules apply regardless of the content type referred to by that element's
									<code>src</code> attribute (e.g., the CSS class name defined by the <a
									data-cite="epub-33#active-class"><code>active-class</code> metadata property</a>
								[[epub-33]] SHOULD be applied to visible video and audio player controls within the host
								EPUB content document).</p>
						</li>
						<li>
							<p id="mol-embed-start-and-stop" data-tests="#mol-embed,#mol-embed_fxl">In addition to the
								default behavior of media overlay activation for textual fragments and images, audio and
								video playback MUST be started and stopped according to the duration implied by the
								authored media overlay synchronization (as per the standard [[smil3]] timing model).
								There are two possible scenarios:</p>
							<ul>
								<li>
									<p>When a media overlay <code>text</code> element has no <a
											data-cite="epub-33#elemdef-smil-audio"><code>audio</code></a> [[epub-33]]
										sibling within its <a data-cite="epub-33#elemdef-smil-par"><code>par</code></a>
										[[epub-33]] parent container, the referenced EPUB content document audio or
										video media MUST play until it ends, at which point the <code>text</code>
										element's lifespan terminates. In this case, the implicit duration of the
											<code>text</code> element (and by inference, of the parent <code>par</code>
										container) is that of the referenced audio or video clip.</p>
								</li>
								<li>
									<p>When a media overlay <code>text</code> element has an <code>audio</code> sibling
										within its <code>par</code> parent container, reading systems MUST constrain the
										playback duration of the referenced EPUB content document audio or video media
										by the duration of the <code>audio</code> sibling. In this case, the actual
										duration of the parent <code>par</code> container is that of the child audio
										clip, regardless of the duration of the video or audio media pointed to by the
											<code>text</code> element. This behavior can result in embedded video or
										audio media ending playback prematurely (before reaching its full duration), or
										ending before the playback of the parallel media overlay <code>audio</code> is
										finished (in which case the last-played video frame SHOULD remain visible until
										the parent <code>par</code> container finally ends). This behavior is equivalent
										of the media overlay <code>audio</code> element implicitly carrying the behavior
										of the [[smil3]] <a data-cite="smil3/smil-timing.html#adef-endsync"
												><code>endsync</code></a> attribute.</p>
									<p>Furthermore, reading systems SHOULD expose user controls for the volume levels of
										each independent audio track (i.e., from the <code>audio</code> element of the
										media overlay, and from the embedded audio or video media within the EPUB
										content document), so that users can adjust the audio output to match their
										requirements. Note that having overlapping audio tracks is typically an
										authoring-time concern: content producers usually add a layer of audio
										information over a video track for description purposes. Reading systems
										handling of simultaneous volume levels in any specific way is OPTIONAL.</p>
								</li>
							</ul>
						</li>
						<li>
							<p id="mol-text-inactive">When a <code>text</code> element becomes inactive in the media
								overlay, and when it points to embedded video or audio media, that referenced media MUST
								be reset to its initial "stopped" state, ready to be played from the zero-position
								within their content stream (possibly displaying the poster image specified using the
								[[html]] markup).</p>
						</li>
					</ul>
				</section>

				<section id="sec-text-to-speech">
					<h5>Text-to-speech</h5>

					<p id="mol-tts" data-tests="#mol-tts_multi,#mol-tts_single">When a media overlay <a
							data-cite="epub-33#elemdef-smil-text"><code>text</code> element</a> [[epub-33]] with no <a
							data-cite="epub-33#elemdef-smil-audio"><code>audio</code></a> [[epub-33]] sibling element
						references text within the target [=EPUB content document=], reading systems capable of
						text-to-speech (TTS) playback SHOULD render the referenced text using TTS.</p>

					<p>Reading systems SHOULD use the speech-related information provided in the target EPUB content
						document to play the audio stream as part of the media overlay rendering.</p>

					<div class="note">
						<p>See <a data-cite="epub-tts-10#">EPUB 3 Text-to-Speech Support</a> [[epub-tts-10]] for more
							information about supporting TTS technologies in EPUB publications.</p>
					</div>

					<p>The media overlay <code>text</code> element's lifespan corresponds to the rendering time of the
						associated speech synthesis. The implicit duration of the <code>text</code> element (and by
						inference, of the parent <code>par</code> element) is therefore determined by the execution of
						the Text-to-Speech engine, and cannot be known at authoring time (factors like speech rate,
						pauses and other prosody parameters influence the audio output). This also means that reading
						systems should treat the <a data-cite="epub-33#duration"><code>duration</code></a> property
						values set in the package document as approximative when making use of them.</p>
				</section>
			</section>

			<section id="sec-behaviors-skip-escape">
				<h4>Skippability and escapability</h4>

				<section id="sec-skippability">
					<h5>Skippability</h5>

					<p id="mol-skipping-support">Reading systems SHOULD use the semantic information provided by media
						overlay elements' [^/epub:type^] attribute to offer users the option of skipping content.</p>

					<p id="mol-skipping-structure">When skipping of content is enabled, reading systems MUST suppress
						playback of any <code>par</code> and <code>seq</code> elements whose <code>epub:type</code>
						attribute contains a semantic that matches a skippable structure.</p>
				</section>

				<section id="sec-escapability">
					<h5>Escapability</h5>

					<p>
						<span id="mol-escaping-support">While playing media overlays, reading systems SHOULD offer users
							the option to leave ("escape") <a data-cite="epub-33#sec-escapability">escapable
								structures</a> [[epub-33]], which are determined by the presence of an [^/epub:type^]
							attribute [[epub-33]] with a value from the escapable structures list.</span>
						<span id="mol-escaping-structure">If a user opts to escape from an escapable structure, then the
							reading system MUST continue playback with the next sequential element after the
							structure.</span>
					</p>
				</section>
			</section>
		</section>
		<section id="sec-structural-semantics">
			<h2>Processing structural semantics</h2>

			<p id="confreq-rs-epub-epub-type" class="support">Reading systems MAY support <a
					data-cite="epub-33#app-structural-semantics">structural semantics</a> [[epub-33]] in <a>EPUB content
					documents</a>.</p>

			<p>When processing the [^/epub:type^] attribute, a reading system:</p>

			<ul class="conformance-list">
				<li>
					<p id="confreq-rs-epubtype-beh">MAY associate behaviors with none, some, or all of the terms defined
						in the <a data-cite="epub-33#sec-epub-type-attribute">default vocabulary</a> [[epub-33]].</p>
				</li>
				<li>
					<p id="confreq-rs-epubtype-oth">MAY associate behaviors with terms from other vocabularies.</p>
				</li>
				<li>
					<p id="confreq-rs-epubtype-ign">MUST ignore terms that it does not recognize.</p>
				</li>
			</ul>
		</section>
		<section id="sec-vocab-assoc">
			<h2>Vocabulary association mechanisms</h2>

			<p id="confreq-rs-vocab-assoc" class="support">Reading systems MUST support <a
					data-cite="epub-33#sec-vocab-assoc">vocabulary association mechanisms</a> [[epub-33]].</p>

			<dl class="conformance-list">
				<dt id="sec-metadata-reserved-prefixes">Reserved Prefixes</dt>
				<dd>
					<p>
						<span id="confreq-rs-vocab-reserved-prefixes">Reading systems MUST resolve all <a
								data-cite="epub-33#sec-reserved-prefixes">reserved prefixes</a> [[epub-33]] used in
							package documents using their predefined URLs unless the EPUB creator declares a local <a
								href="#sec-prefix-attr">prefix</a>. </span>
						<span id="confreq-rs-vocab-local-prefixes">Reading systems MUST use the URLs defined for locally
							overridden prefixes (using the <code>prefix</code> attribute) when encountered. </span>
					</p>
					<p>As changes to the reserved prefixes and updates to reading systems are not always going happen in
						synchrony, reading systems MUST NOT fail when encountering unrecognized prefixes (i.e., not
						reserved and not declared using the <code>prefix</code> attribute).</p>
				</dd>

				<dt id="sec-prefix-attr">The <code>prefix</code> attribute</dt>
				<dd>
					<p id="confreq-rs-vocab-prefix-attr">If the <code>prefix</code> attribute includes a declaration for
						a <a href="#sec-metadata-reserved-prefixes">predefined prefix</a>, reading systems MUST use the
						URL mapping defined in the <code>prefix</code> attribute, regardless of whether of it maps to
						the same URL as the predefined prefix.</p>
				</dd>

				<dt id="sec-property-datatype">Expanding <code>property</code> Data Types</dt>
				<dd>
					<p>Reading systems MUST expand <a data-cite="epub-33#sec-property-datatype"><code>property</code>
							values</a> [[epub-33]] as follows:</p>
					<ul>
						<li>
							<p id="confreq-rs-vocab-property-reference">If the property consists only of a reference,
								concatenate the prefix URL associated with the <a data-cite="epub-33#sec-default-vocab"
									>default vocabulary</a> [[epub-33]] to the reference.</p>
						</li>
						<li>
							<p>
								<span id="confreq-rs-vocab-property-prefixed">If the property consists of a prefix and
									reference, concatenate the URL defined for the prefix to the reference.</span>
								<span id="confreq-rs-vocab-property-invalid-prefix">If the EPUB creator has not defined
									a matching prefix, and it is not a <a data-cite="epub-33#sec-reserved-prefixes"
										>reserved prefix</a> [[epub-33]], the property is invalid and reading systems
									MUST ignore it.</span>
							</p>
						</li>
						<li>
							<p id="confreq-rs-vocab-property-only-prefix">If the property consists only of a prefix
								(i.e., there is no reference after the colon), the property is invalid and reading
								systems MUST ignore it.</p>
						</li>
					</ul>
					<p id="confreq-rs-vocab-property-valid-url">If the process does not result in a [=valid URL
						string=], reading systems MUST ignore the property.</p>
					<p>Reading systems do not have to [=url parser | parse the resulting URL=] [[url]] or attempt to
						dereference the resource.</p>
				</dd>
			</dl>
		</section>
		<section id="sec-epub-rs-conf-backward">
			<h3>Backward compatibility</h3>

			<p id="confreq-rs-backward-epub" data-tests="#pkg-version-backward">Reading systems MUST attempt to process
				an [=EPUB publication=] whose [=package document=] <a data-cite="epub-33#attrdef-package-version"
						><code>version</code> attribute</a> [[epub-33]] is less than "<code>3.0</code>".</p>

			<p id="confreq-rs-backward-conf">EPUB publications with older version numbers will not always render exactly
				as intended unless processed according to their respective specifications. Reading systems SHOULD
				support such EPUB publications as defined by those specifications.</p>
		</section>
		<section id="sec-epub-rs-conf-forward">
			<h3>Forward compatibility</h3>

			<p id="confreq-rs-forward-epubn">Reading systems SHOULD attempt to process an [=EPUB publication=] whose
				[=package document=] <a data-cite="epub-33#attrdef-package-version"><code>version</code> attribute</a>
				[[epub-33]] is greater than "<code>3.0</code>".</p>
		</section>
		<section id="sec-accessibility" class="informative">
			<h2>Accessibility</h2>

			<p>Although the primary focus of this specification is on how to process and render [=EPUB publications=] it
				does not mandate specific user interfaces that all reading systems must offer. This does not mean that
				there are not common accessibility issues that all reading systems developers should be aware of, or
				seek to avoid in their applications.</p>

			<p>The W3C's User Agent Accessibility Guidelines [[uaag20]] provides many useful practices developers should
				apply to improve their reading systems as many browser accessibility issues have parallels in
				EPUB-specific user agents.</p>

			<p>The following list outlines some additional EPUB-specific areas where a lack of accessibility impacts the
				reading experience for users:</p>

			<ul>
				<li>Bookshelf &#8212; Ensure that the process for accessing and opening the user's content is
					accessible. For example, do not rely on a visual-only display like cover images. Exposing text
					representations of the title(s) and author(s), including the language they are expressed in, allows
					assistive technologies to properly announce the content.</li>
				<li>User Interface Controls &#8212; Ensure that all controls (e.g., search boxes, annotation controls,
					and buttons to load features such as the table of contents) are exposed to assistive technologies
					and that their actions do not rely on specific modalities (e.g., they only operate through touch or
					a mouse).</li>
				<li>Search &#8212; Search access to the full text content of all EPUB content documents is necessary to
					ensure users can locate information easily.</li>
				<li>Display Control &#8212; Provide methods for users to tailor the styling of the content to their
					preferences (e.g., to change and increase fonts, increase line and word spacing, and apply alternate
					contrasts).</li>
				<li>Zoom &#8212; Allow users to zoom the content to better size it to their needs, especially for
					[=fixed-layout documents=].</li>
				<li>Reading Control &#8212; Ensure that the ability to read from page-to-page and document-to-document
					does not depend on physical interaction (i.e., users of assistive technologies can read the content
					without getting trapped at the end of pages or documents).</li>
				<li>API Integration &#8212; Ensure that the accessibility tree, including support for roles, states and
					properties [[wai-aria-11]], is exposed to the underlying operating system's accessibility API so
					that users can fully interact with the content when using assistive technologies.</li>
				<li>Document Object Model (DOM) &#8212; Provide access to the [[dom]] of EPUB content documents so that
					users can investigate the semantics and structure expressed in the source.</li>
				<li>Table of Contents &#8212; Ensure that users can access the link text, including <a
						data-cite="epub-33#confreq-nav-a-title">text alternatives for visual content</a>. Activating the
					table of contents links should be possible using different inputs.</li>
			</ul>

			<p>The DAISY Consortium maintains an <a href="https://epubtest.org/test-books">accessibility test suite</a>
				to aid in evaluating these issues and more.</p>
		</section>
		<section id="sec-security-privacy" class="informative">
			<h2>Security and privacy</h2>

			<section id="security-privacy-overview">
				<h3>Overview</h3>

				<p>The particularity of an [=EPUB publication=] is its structure. The EPUB format provides a means of
					representing, packaging, and encoding structured and semantically enhanced web content — including
					HTML, CSS, SVG, and other resources — for distribution in a single-file container.</p>

				<p>For reading systems, this means that the security and privacy issues are primarily based on the
					features of those formats, and closely mirror the threats presented by web content generally.</p>

				<p>Reading system developers also have a dual responsibility of both ensuring the security and privacy
					of their applications and helping limit the threats to users from the content that renders within
					them. The rest of this section explores the risk model of EPUB 3 with the aim of helping developers
					recognize and mitigate these risks.</p>

				<div class="note">
					<p>For the risks associated with the authoring of EPUB publications, refer to the <a
							data-cite="epub-33#sec-security-privacy">security and privacy section</a> of
						[[epub-33]].</p>
				</div>
			</section>

			<section id="epub-threat-model">
				<h3>Threat model</h3>

				<p>The greatest threats to users come from the <a data-cite="epub-33#epub-threat-model">content they
						read</a> [[epub-33]], and the first line of defense against these attacks is the reading systems
					they use. Users expect that reading systems act as safeguards against malicious content and are
					often unaware that EPUB publications are susceptible to the same security risks as web sites.</p>

				<p>But although reading systems are relied on to provide security and privacy, they can also pose
					unintended threats to users depending on how information is handled. Tracking user information to
					optimize experiences is a common need, for example, but done without user permission and reading
					systems can run afoul of legal privacy requirements.</p>

				<p>This section outlines some of the key threats that reading system developers must take into
					consideration, with further details and recommendations in the following sections.</p>

				<dl>
					<dt>Scripting</dt>
					<dd>
						<p>Malicious scripts present several attack vectors against reading systems. If local storage is
							not secure, for example, they can attempt to compromise the user's data. Provided with
							network access, they may attempt unauthorized collection of user data.</p>
						<p>More detailed discussion of these issues and how to mitigate them is provided in <a
								href="#sec-scripted-content-security"></a>.</p>
					</dd>

					<dt>Malicious content</dt>
					<dd>
						<p>EPUB publications may contain resources designed to exploit security flaws in reading systems
							or the operating systems they run on.</p>
					</dd>

					<dt>Remote resources</dt>
					<dd>
						<p>[=Remote resources=] present the same risks as any EPUB publication loaded from an untrusted
							source. Even if the publisher of the EPUB publication is trusted, remote resources may be
							compromised.</p>
						<p>Calls to remote resources can also be used to track information about users (e.g., through
							server logs). Reading systems should limit the information they expose through HTTP requests
							to only what is essential to obtain the resource.</p>
						<p>The <a href="#sec-container-iri">origin</a> of an EPUB is both unknown to the EPUB creator
							and specific to each reading system implementation. Consequently, if the EPUB creator hosts
							remote resources on a web server they control, the server effectively cannot use security
							features that require specifying allowable origins, such as headers for <a
								href="https://fetch.spec.whatwg.org/#cors-protocol">CORS</a>, <a
								href="https://www.w3.org/TR/CSP2/#content-security-policy-header-field"
									><code>Content-Security-Policy</code></a>, or <a
								href="https://www.rfc-editor.org/rfc/rfc7034"><code>X-Frame-Options</code></a>.</p>
					</dd>

					<dt>External links</dt>
					<dd>
						<p>Like remote resources, external links may be used to trick unwitting users into opening
							malicious resources on the web designed to exploit the reading system or operating
							system.</p>
						<p>Likewise, reading systems should also avoid exposing potentially identifying information
							about users through the traversal of links (e.g., not using tracking identifiers or exposing
							unnecessary information about the user's environment).</p>
					</dd>

					<dt>User-generated content</dt>
					<dd>
						<p>User-generated content within a reading experience, for example through text areas or other
							interactive components, could pose a threat to reading system security or user privacy if
							the content is not properly secured. More details on scripting security are provided in <a
								href="#sec-scripted-content-security"></a>.</p>
					</dd>

					<dt>Collection of user data</dt>
					<dd>
						<p>Collecting information about the user and their reading habits without obtaining their
							permission can violate their privacy, even if the information is only intended for internal
							use.</p>
						<p>Attempting to profile users based on their reading habits or through metadata in their
							publication (e.g., accessibility preferences) can expose users to unintended harms.</p>
					</dd>
				</dl>

				<p>Additionally, the security considerations that apply to [[xml]] and [[zip]] files also apply to the
						<a data-cite="epub-33#sec-package-doc">package document</a> and the <a
						data-cite="epub-33#sec-ocf">Open Container Format</a>, respectively. See the "Security
					Consideration" sections of the Media Type registrations for the <a
						data-cite="epub-33#app-media-type-app-oebps-package"
						><code>application/oebps-package+xml</code></a> and the <a data-cite="epub-33#app-media-type"
							><code>application/epub+zip</code></a> formats for further details.</p>
			</section>

			<section id="security-privacy-recommendations">
				<h3>Recommendations</h3>

				<p>The strongest measure that reading system developers can take for privacy is to specify the data they
					intend to collect and use about the user and/or their reading behavior and seek the consent of users
					to obtain it. They should also allow personalization and control over this information.</p>

				<p>If a reading system allows users to store persistent data, especially personally identifiable
					information, it must treat that data as sensitive.</p>

				<p>It is understood that the collection of some user data may be required for the sale, delivery, and
					operation of an EPUB publication, particularly on platforms where the sale of an EPUB publication
					and the method of reading it are connected. In these cases, it is recommended that the reading
					system or retailer be clear about the data being collected, how it is used, and allow for user
					opt-outs where possible. Anonymization of data is strongly recommended for the privacy and the
					security of the user and reading system.</p>

				<p>It is also understood that user data may be required or helpful for some reading system affordances.
					In these cases, anonymization is strongly recommended. It is also recommended that reading systems
					inform users of what data is needed, what it is to be used for, and to provide methods to
					opt-out.</p>

				<p>Content processors &#8212; defined as entities that handle the ingestion of EPUB content for
					distribution, display, or sale &#8212; should also be aware of the potential risks in ingestion. It
					is advised that content processors check content for malicious content on ingestion, in addition to
					the validation steps that usually occur. This could include running virus scans, validating external
					links and remote resources, and other precautions.</p>
			</section>
		</section>
		<section id="app-epubReadingSystem">
			<h2><dfn class="export">epubReadingSystem</dfn> object</h2>

			<p class="note">Reading systems act as the core rendering engines of EPUB publications and provide a
				scripting environment based on the [[dom]] specification. So, although this interface definition uses
				the [[webidl]] notation for implementation by reading systems, web browsers generally do not have to
				implement these objects.</p>

			<section id="app-ers-idl">
				<h3>Interface definition</h3>

				<p>This specification extends the {{Navigator}} object [[html]] as follows.</p>

				<pre class="idl">[Exposed=(Window)]
interface EpubReadingSystem {
    [LegacyUnforgeable] readonly attribute DOMString name;
    [LegacyUnforgeable] readonly attribute DOMString version;
    boolean hasFeature(DOMString feature, optional DOMString version);
};

partial interface Navigator {
    [LegacyUnforgeable, SameObject] readonly attribute EpubReadingSystem epubReadingSystem;
};</pre>

				<div class="note">
					<p>This specification does not define an <code>epubReadingSystem</code> property extension for the
						{{WorkerNavigator}} object [[html]]. Reading systems therefore do not have to expose the
							<code>epubReadingSystem</code> object in the scripting context of Workers, and EPUB creators
						cannot rely on its presence.</p>
				</div>
			</section>

			<section id="app-ers-desc">
				<h3>Description</h3>

				<p>The <code><dfn class="export">Navigator.epubReadingSystem</dfn></code> object provides an interface
					through which a [=scripted content document=] can query information about a user's reading
					system.</p>

				<p>The object exposes <a href="#app-ers-properties">properties</a> of the reading system (its name and
					version), and provides the <a href="#app-ers-hasFeature"><code>hasFeature</code> method</a> which
					can be invoked to determine the features it supports.</p>

				<aside class="example" title="JavaScript function to display the name of the current reading system">
					<pre>alert("Reading system name: " + navigator.epubReadingSystem.name);</pre>
				</aside>

				<p id="scripting-req-readingsystem"
					data-tests="#scr-readingsystem-support,#scr-readingsystem-support_svg,#scr-readingsystem-support_iframe,#scr-readingsystem-support_iframe_svg"
					>Reading systems MUST expose the <code>epubReadingSystem</code> object on the <code>navigator</code>
					object of all loaded scripted content documents, including any nested <a
						data-cite="epub-33#sec-scripted-container-constrained">container-constrained scripting
						contexts</a> [[epub-33]]. Reading systems MUST ensure that the <code>epubReadingSystem</code>
					object is available no later than when the <a data-cite="html#the-end"><code>DOMContentLoaded</code>
						event is triggered</a> [[html]].</p>

				<div class="note">
					<p>Reading systems implementations may create cloned instances of the <code>epubReadingSystem</code>
						object in scripted content documents for technical feasibility reasons. In such cases, the
						reading system must ensure they consistently maintain the object's state — as reflected by the
						values of its properties and methods — across all copied instances.</p>
				</div>
			</section>

			<section id="app-ers-properties">
				<h3>Properties</h3>

				<p id="scripting-req-readingsystem-properties"
					data-tests="#scr-readingsystem-support,#scr-readingsystem-support_svg,#scr-readingsystem-support_iframe,#scr-readingsystem-support_iframe_svg"
					>The reading system MUST make the following properties available for retrieving information about
					it.</p>

				<table data-dfn-for="EpubReadingSystem">
					<thead>
						<tr>
							<th>Name</th>
							<th>Description</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td id="propdef-name">
								<code>
									<dfn>name</dfn>
								</code>
							</td>
							<td>Returns a <code>String</code> value representing the name of the reading system (e.g.,
									"<code>iBooks</code>", "<code>Kindle</code>").</td>
						</tr>
						<tr>
							<td id="propdef-version">
								<code>
									<dfn>version</dfn>
								</code>
							</td>
							<td>Returns a <code>String</code> value representing the version of the reading system
								(e.g., "<code>1.0</code>", "<code>2.1.1</code>").</td>
						</tr>
					</tbody>
				</table>

				<p>This specification used to define a <code>layoutStyle</code> property, but it is now <a
						data-cite="epub-33#deprecated">deprecated</a> [[epub-33]]. Refer to its definition in
					[[epubcontentdocs-301]] for more information.</p>
			</section>

			<section id="app-ers-methods">
				<h3>Methods</h3>

				<section id="app-ers-hasFeature">
					<h4>hasFeature</h4>

					<section id="app-ers-hasFeature-desc">
						<h5>Description</h5>

						<p data-dfn-for="EpubReadingSystem">The <code><dfn>hasFeature</dfn></code> method returns a
							boolean value indicating whether the reading system supports any version of the specified
							feature, or <code>undefined</code> if the reading system does not recognize the specified
							feature.</p>

						<p>The optional <code>version</code> parameter allows EPUB creators to query custom features
							that could change in incompatible ways over time. The return value indicates support only
							for the specified version of the feature.</p>

						<p><a href="#app-ers-hasFeature-features">Features defined in this specification</a> are
							versionless. If a reading system supports a feature defined in this specification, it MUST
							ignore any supplied <code>version</code> parameter and return a <code>true</code> value.</p>

						<aside class="example"
							title="JavaScript function to display support for scripted manipulation of the DOM">
							<pre>var feature = "dom-manipulation";

var conformTest = navigator.epubReadingSystem.hasFeature(feature);

alert("Feature " + feature + " supported?: " + conformTest);</pre>
						</aside>
					</section>

					<section id="app-ers-hasFeature-features">
						<h5>Features</h5>


						<p id="scripting-req-readingsystem-features" data-tests="#scr-readingsystem-features">The
							following table lists the set of features that reading systems that support the
								<code>epubReadingSystem</code> object MUST recognize. When the features are queried from
							the <code>hasFeature</code> method, reading systems MUST return a boolean value indicating
							their support.</p>


						<table>
							<thead>
								<tr>
									<th>Name</th>
									<th>Description</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td id="feature-dom-manipulation">
										<code>dom-manipulation</code>
									</td>
									<td>Scripts may make structural changes to the document’s DOM (applies to <a
											data-cite="epub-33#sec-scripted-spine">spine-level scripting</a> [[epub-33]]
										only).</td>
								</tr>
								<tr>
									<td id="feature-layout-changes">
										<code>layout-changes</code>
									</td>
									<td>Scripts may modify attributes and CSS styles that affect content layout (applies
										to <a data-cite="epub-33#sec-scripted-spine">spine-level scripting</a>
										[[epub-33]] only).</td>
								</tr>
								<tr>
									<td id="feature-touch-events">
										<code>touch-events</code>
									</td>
									<td>The device supports touch events, and the reading system passes touch events to
										the content.</td>
								</tr>
								<tr>
									<td id="feature-mouse-events">
										<code>mouse-events</code>
									</td>
									<td>The device supports mouse events, and the reading system passes mouse events to
										the content.</td>
								</tr>
								<tr>
									<td id="feature-keyboard-events">
										<code>keyboard-events</code>
									</td>
									<td>The device supports keyboard events, and the reading system passes keyboard
										events to the content.</td>
								</tr>
								<tr>
									<td id="feature-spine-scripting">
										<code>spine-scripting</code>
									</td>
									<td>Indicates whether the reading system supports <a
											data-cite="epub-33#sec-scripted-spine">spine-level scripting</a> [[epub-33]]
										(e.g., so a <a data-cite="epub-33#sec-scripted-container-constrained"
											>container-constrained script</a> [[epub-33]] can determine whether any
										actions that depend on scripting support in a [=top-level content document=]
										have any chance of success before attempting them).</td>
								</tr>
							</tbody>
						</table>

						<p>Reading system developers MAY add additional features, but future versions of this
							specification could append to this list in ways that might conflict or be incompatible with
							any such custom additions.</p>
					</section>
				</section>
			</section>
		</section>
		<section id="index"></section>
		<section id="change-log" class="appendix informative">
			<h2>Change log</h2>

			<p>Note that this change log only identifies substantive Changes since <a
					href="https://www.w3.org/publishing/epub/epub-spec.html">EPUB 3.2</a> &#8212; those that affect the
				conformance of reading systems or are similarly noteworthy.</p>

			<p>For a list of all issues addressed during the revision, refer to the <a
					href="https://github.com/w3c/epub-specs/issues?q=is%3Aissue+is%3Aclosed+label%3AEPUB33+label%3ASpec-RS+"
					>Working Group's issue tracker</a>.</p>

			<ul>
				<li>17-May-2022: Added an index of terms. See <a href="https://github.com/w3c/epub-specs/issues/2260"
						>issue 2260</a>.</li>
				<li>31-Mar-2022: Moved custom attribute authoring requirements to the authoring specification. Added
					reading system handling of custom properties. See <a
						href="https://github.com/w3c/epub-specs/issues/2134">issue 2134</a>.</li>
				<li>17-Mar-2022: Added requirement to suppress playback of skippable elements in media overlays
					Documents. See <a href="https://github.com/w3c/epub-specs/issues/2066">issue 2066</a>.</li>
				<li>11-Feb-2022: Fix the contradictory support statements for media overlays. Support is recommended
					when rendering of prerecorded audio is supported, as in previous versions of EPUB 3. See <a
						href="https://github.com/w3c/epub-specs/issues/1991">issue 1991</a>.</li>
				<li>04-Feb-2022: Changed the non-normative security considerations for controlling network access,
					opening external links, and managing local storage to normative recommendations. See <a
						href="https://github.com/w3c/epub-specs/issues/1957">issue 1957</a>.</li>
				<li>04-Feb-2022: Expanded the section on security and privacy to include new sections on the threat
					model for reading systems and additional recommendations for ensuring security and privacy. See <a
						href="https://github.com/w3c/epub-specs/issues/1871">issue 1871</a>, <a
						href="https://github.com/w3c/epub-specs/issues/1872">issue 1872</a>, <a
						href="https://github.com/w3c/epub-specs/issues/1875">issue 1875</a> and <a
						href="https://github.com/w3c/epub-specs/issues/1876">issue 1876</a>.</li>
				<li>03-Feb-2022: Reduced the requirement to support deobfuscation to a recommendation. See <a
						href="https://github.com/w3c/epub-specs/issues/1873">issue 1873</a>.</li>
				<li>19-Jan-2022: Elevated default statements for the <code>rendition:spread</code> and
						<code>rendition:orientation</code> properties to requirements, to align with
						<code>rendition:layout</code>. See <a href="https://github.com/w3c/epub-specs/issues/1936">issue
						1936</a>.</li>
				<li>08-Dec-2021: <code>page-spread-center</code> is now an alias for <code>spread-none</code>. See <a
						href="https://github.com/w3c/epub-specs/issues/1929">issue 1929</a>.</li>
				<li>10-Nov-2021: Proper definition of the content URL and handling of relative URLs. See <a
						href="https://github.com/w3c/epub-specs/issues/1374">issue 1374</a> and <a
						href="https://github.com/w3c/epub-specs/issues/1888">issue 1888</a>.</li>
				<li>01-Nov-2021: Added a statement on the reading system behavior when item references are repeated in
					the spine. See <a href="https://github.com/w3c/epub-specs/issues/1686">issue 1686</a>.</li>
				<li>25-Oct-2021: Clarify that reading systems must render non-linear resources when they are hyperlinked
					to by a user. See <a href="https://github.com/w3c/epub-specs/issues/1864">issue 1864</a>.</li>
				<li>27-Aug-2021: Added accessibility bullet to cover the need for zooming, particularly for fixed-layout
					documents. See <a href="https://github.com/w3c/epub-specs/issues/1776">issue 1776</a>.</li>
				<li>27-Aug-2021: Remove the recommendation to support text search and selection in SVGs. Replacing with
					a more general bullet on search accessibility to avoid defining requirements on reading system UI.
					See <a href="https://github.com/w3c/epub-specs/issues/1774">issue 1774</a>.</li>
				<li>09-July-2021: Restored the custom attributes section due to known usage but without reference to the
					attribute registry. See <a href="https://github.com/w3c/epub-specs/issues/1602">issue 1602</a>.</li>
				<li>09-July-2021: Removed recommendation to use the first language tag to determine an unspecified page
					progression direction. See <a href="https://github.com/w3c/epub-specs/issues/1482">issue
					1482</a>.</li>
				<li>18-June-2021: Moved requirements for supporting SSML, PLS lexicons and CSS 3 Speech to the <a
						href="https://www.w3.org/TR/epub-tts-10/">EPUB 3 Text-to-Speech Support</a> note. See <a
						href="https://github.com/w3c/epub-specs/issues/1690">issue 1690</a>.</li>
				<li>20-May-2021: Providing a shared and unique origin for scripts is a requirements for reading systems
					that support scripting. See <a href="https://github.com/w3c/epub-specs/issues/1659">issue
					1659</a>.</li>
				<li>20-May-2021: Removed requirement for reading systems to be conformant xml:base processors. See <a
						href="https://github.com/w3c/epub-specs/pull/1678">pull request 1678</a>.</li>
				<li>12-May-2021: Added additional requirement that reading systems ignore property values that expand to
					invalid URL strings and property values with empty references. See <a
						href="https://github.com/w3c/epub-specs/issues/1673">issue 1673</a>.</li>
				<li>12-May-2021: Changed all references to URIs/IRIs to URLs and references to RFCs 3986 and 3987 to the
					URL standard. See <a href="https://github.com/w3c/epub-specs/issues/808">issue 808</a>.</li>

				<li>06-May-2021: Recommend that reading systems support references to HTML target elements and SVG
					fragment identifiers in <code>textref</code> attributes and the <code>text</code> element's
						<code>src</code> attribute. Support for other fragment identifier schemes is optional. See <a
						href="https://github.com/w3c/epub-specs/issues/1586">issue 1586</a>.</li>
				<li>23-Apr-2021: Clarified that reading systems should attempt to process invalid file and path names.
					See <a href="https://github.com/w3c/epub-specs/issues/1629">issue 1629</a></li>
				<li>16-Apr-2021: Removed the section on custom attributes. See <a
						href="https://www.w3.org/publishing/groups/epub-wg/Meetings/Minutes/2021-04-15-epub#resolution2"
						>Working Group Resolution</a>.</li>
				<li>15-Apr-2021: Remove the reference to "presentation logic". See <a
						href="https://github.com/w3c/epub-specs/issues/1516">issue 1516</a> and <a
						href="https://www.w3.org/publishing/groups/epub-wg/Meetings/Minutes/2021-04-15-epub#resolution3"
						>Working Group Resolution</a>.</li>
				<li>12-Apr-2021: The section <a href="#app-epubReadingSystem"></a> has been marked as "at-risk". See <a
						href="https://www.w3.org/publishing/groups/epub-wg/Meetings/Minutes/2021-04-09-epub#resolution1"
						>Working Group resolution</a>.</li>
				<li>09-Apr-2021: Added a new section dedicated to accessibility and removed the outdated reference to
					the defunct appendix in the Accessibility specification. See <a
						href="https://github.com/w3c/epub-specs/issues/1608">issue 1608</a>.</li>
				<li>09-Apr-2021: Added section clarifying all the conformance requirements on establishing the primary
					language and base direction of publication resources. See <a
						href="https://github.com/w3c/epub-specs/pull/1613">pull request 1613</a>.</li>
				<li>01-Apr-2021: Added section clarifying how absolute URLs are created from relative in the package
					document. See <a href="https://github.com/w3c/epub-specs/pull/1468">pull request 1468</a>.</li>
				<li>30-Mar-2021: Restructured the document to remove the rendundant conformance sections and
					requirements that were only used as locators when this specification was combined with the authoring
					requirements. See <a href="https://github.com/w3c/epub-specs/pull/1597">pull request 1597</a> and <a
						href="https://github.com/w3c/epub-specs/pull/1609">pull request 1609</a>.</li>
				<li>23-Mar-2021: Added requirement to prevent top-level navigation to data URLs. See <a
						href="https://github.com/w3c/epub-specs/issues/1564">issue 1564</a>.</li>
				<li>23-Mar-2021: Changed "suppressing" of non-linear content to "skipping" when traversing the spine to
					clarify that the intention is not to remove all access to such content. See <a
						href="https://github.com/w3c/epub-specs/issues/1480">issue 1480</a>.</li>
				<li>10-Mar-2021: Changed restriction against using resources not listed in the package document to a
					recommendation not to use. See <a href="https://github.com/w3c/epub-specs/issues/810">issue
					810</a>.</li>
				<li>09-March-2021: the statement on unique identifiers has been set to non-normative, following the
					discussion and <a
						href="https://www.w3.org/publishing/groups/epub-wg/Meetings/Minutes/2020-12-18-epub#resolution2"
						>Working Group resolution</a>. See <a href="https://github.com/w3c/epub-specs/issues/1310">issue
						1310</a>.</li>
				<li>08-Mar-2021: Remove unnecessary requirement to assume default value for rendering metadata. See <a
						href="https://github.com/w3c/epub-specs/issues/1313">issue 1313</a>.</li>
				<li>05-Mar-2021: Added requirement for reading systems to collapse whitespace in DCMES and meta elements
					per the [[infra]] specification definition. See <a
						href="https://github.com/w3c/epub-specs/issues/1295">issue 1295</a>.</li>
				<li>26-Feb-2021: Clarified the trimming of leading and trailing whitespace is to be done in accordance
					with the [[infra]] specification definition, and removed the exception that <code>meta</code>
					element properties may define their own whitespace handling rules. See <a
						href="https://github.com/w3c/epub-specs/issues/1295">issue 1295</a>.</li>
				<li>19-Feb-2021: Updated the <a href="#sec-scripted-content-security">scripting security
						considerations</a> so that the text recommends assigning a unique origin to each EPUB
					publication for security rather than domain isolation at the EPUB content document level. See <a
						href="https://github.com/w3c/epub-specs/issues/1156">issue 1156</a>.</li>
				<li>15-Feb-2021: Clarified the requirements for presenting nav elements in the navigation document. The
					toc nav is now the only required element, the page-list nav is recommended when present, and all
					others are optional. See <a href="https://github.com/w3c/epub-specs/issues/975">issue 975</a>.</li>
				<li>10-Feb-2021: A very first draft for <a href="#sec-security-privacy"></a> has been added.</li>
				<li>04-Feb-2021: Added explicit requirement that reading systems not use the language in
						<code>dc:language</code> elements as the language of resources.</li>
				<li>02-Feb-2021: Added base direction determination rules for the <code>dir</code> attribute accounting
					for the addition of the new <code>auto</code> value. See <a
						href="https://github.com/w3c/epub-specs/issues/1491">issue 1491</a>.</li>
				<li>02-Feb-2021: Noted that language information in the new <code>hreflang</code> attribute on
						<code>link</code> elements is not authoritative. See <a
						href="https://github.com/w3c/epub-specs/issues/1488">issue 1488</a>.</li>
				<li>24-Dec-2020: The creation of a <a
						href="https://www.w3.org/publishing/epub32/epub-packages.html#sec-metadata-elem-identifiers-pid"
						>release identifier</a> [[epubpackages-32]] is no longer defined. See <a
						href="https://github.com/w3c/epub-specs/issues/1440">issue 1440</a>.</li>
				<li>06-Nov-2020: Reading systems are now required to <a href="#confreq-rs-xml-extid">not resolve
						external identifiers</a> in doctype declarations. See <a
						href="https://github.com/w3c/epub-specs/issues/1338">issue 1338</a>.</li>
				<li>05-Nov-2020: Generalized the restriction on custom attribute namespace URIs to exclude all of
					idpf.org and w3.org. See <a href="https://github.com/w3c/epub-specs/issues/1388">issue
					1388</a>.</li>
				<li>30-Sept-2020: The structure of the EPUB core specifications has been simplified to ease
					understanding and access to information. This specification now consolidates the reading system
					requirements from the EPUB 3.2 specification together with the Packages, Content Documents, OCF and
					media overlays specifications. The EPUB 3.3 core specification now focuses only on authoring
					requirements.</li>
			</ul>
		</section>
		<div data-include="../common/acknowledgements-dedication.html" data-oninclude="fixIncludes"
			data-include-replace="true"></div>
	</body>
</html>
