<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
	<head>
		<meta charset="utf-8" />
		<title>EPUB 3.3</title>
		<script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove"></script>
		<script src="./biblio.js" class="remove"></script>
		<script src="../common/js/css-inline.js" class="remove"></script>
		<script src="../common/js/add-caution-hd.js" class="remove"></script>
		<script src="../common/js/data-test-display.js" class="remove"></script>
		<script class="remove">
			//<![CDATA[
            var respecConfig = {
                group: "epub",
                wgPublicList: "public-epub-wg",
                specStatus: "ED",
                shortName: "epub-33",
                edDraftURI: "https://w3c.github.io/epub-specs/epub33/core/",
                previousPublishDate: "2021-07-12",
                previousMaturity: "WD",
                copyrightStart: "1999",
                editors:[
                {
                    name: "Matt Garrish",
                    company: "DAISY Consortium",
                    companyURL: "https://daisy.org",
					w3cid: 51655
                },
				{
					name: "Ivan Herman",
					url: "https://www.w3.org/People/Ivan/",
					company: "W3C",
					w3cid: 7382,
					orcid: "0000-0003-0782-2704",
					companyURL: "https://www.w3.org",
				},
				{
					name: "Dave Cramer",
					company: "Invited Expert",
					w3cid: 65283
				}],
                formerEditors: [
                {
                    name: "Garth Conboy",
                    company: "Google",
                    companyURL: "https://www.google.com",
					w3cid: 92141
                },
                {
                    name: "Marisa DeMeglio",
                    company: "DAISY Consortium",
                    companyURL: "https://daisy.org",
					w3cid: 35713
                },                {
                    name: "Daniel Weck",
                    company: "DAISY Consortium",
                    companyURL: "https://daisy.org",
					w3cid: 45653
                }],
                includePermalinks: true,
                permalinkEdge: true,
                permalinkHide: false,
                diffTool: "http://www.aptest.com/standards/htmldiff/htmldiff.pl",
                github: {
                    repoURL: "https://github.com/w3c/epub-specs",
                    branch: "main"
                },
                localBiblio: biblio,
                preProcess:[inlineCustomCSS],
                postProcess:[addCautionHeaders, data_test_display],
                testSuiteURI: "https://w3c.github.io/epub-tests/index.html",
                lint: {
                     "wpt-tests-exist": true,
		}
            };//]]>
		</script>
		<style>
			pre,
			code {
				white-space: break-spaces !important;
			}</style>
	</head>
	<body>
		<section id="abstract">
			<p>EPUB® 3 defines a distribution and interchange format for digital publications and documents. The EPUB
				format provides a means of representing, packaging, and encoding structured and semantically enhanced
				Web content — including HTML, CSS, SVG, and other resources — for distribution in a single-file
				container.</p>
			<p>This specification defines the authoring requirements for EPUB Publications and represents the third
				major revision of the standard.</p>
		</section>
		<section id="sotd"></section>
		<section id="sec-introduction">
			<h2>Introduction</h2>

			<section id="sec-intro-overview" class="informative">
				<h3>Overview</h3>

				<p>EPUB 3 has been widely adopted as the format for digital books (ebooks), and this revision continues
					to increase the format's capabilities to better support a wider range of publication requirements,
					including complex layouts, rich media and interactivity, and global typography features. The
					expectation is that publishers will utilize the EPUB 3 format for a broad range of content,
					including books, magazines, and educational, professional, and scientific publications.</p>

				<p>This specification represents the core of EPUB 3 and includes the conformance requirements for
						<a>EPUB Publications</a> — the product of the standard. The other specifications that comprise
					EPUB 3 are as follows:</p>

				<ul>
					<li>
						<p><a data-cite="epub-rs-33#">EPUB 3 Reading Systems</a> [[EPUB-RS-33]] — defines the processing
							requirements for <a>EPUB Reading Systems</a> — the applications that consume EPUB
							Publications and present their content to users.</p>
					</li>
					<li>
						<p><a data-cite="epub-a11y-11#">EPUB Accessibility</a> [[EPUB-A11Y-11]] — defines accessibility
							conformance and discovery requirements for EPUB Publications.</p>
					</li>
				</ul>

				<p>These specifications represent the formal list recognized as belonging to EPUB 3 and that contain
					functionality normatively referenced as part of the standard. The development of extension
					specifications periodically adds new functionality to EPUB Publications. Features and functionality
					defined outside of core revisions to the standard, while not formally recognized in this
					specification, are nonetheless available for <a>EPUB Creators</a> and Reading System developers to
					use.</p>

				<p>The informative <a data-cite="epub-overview-33#">EPUB 3 Overview</a> [[EPUB-OVERVIEW-33]] provides a
					general introduction to EPUB 3. A list of technical changes from the previous version is also
					available in the <a href="#change-log">change log</a>.</p>
			</section>

			<section id="sec-intro-spec-org" class="informative">
				<h3>Organization</h3>

				<p>This section reviews the organization of the EPUB specifications through the central product they
					define: the <a>EPUB Publication</a>.</p>

				<p>An EPUB Publication is typically represented by a single <a>Package Document</a>. This document
					includes metadata used by <a>Reading Systems</a> to present the content to the user, such as the
					title and author for display in a bookshelf as well as rendering metadata (e.g., whether the content
					is reflowable or has a fixed layout). It also provides a manifest of resources and includes a
						<a>spine</a> that lists the default sequence in which to render documents as a user progresses
					through the content. Refer to <a href="#sec-package-doc"></a> for the requirements for the Package
					Document.</p>

				<p>An EPUB Publication also includes another key file called the <a>EPUB Navigation Document</a>. This
					document provides critical navigation capabilities, such as the table of contents, that allow users
					to navigate the content quickly and easily. Refer to <a href="#sec-nav"></a> for more information
					about this document.</p>
				<!--
				<figure>
					<figcaption> The following example visually represents the structure of the EPUB format. </figcaption>
					<object data="images/epub.svg" width="350">
						<img src="images/epub.png" width="350" alt="" />
					</object>
				</figure>
				-->

				<p>The actual content of an EPUB Publication &#8212; what users are presented with when they begin
					reading &#8212; is built on the Open Web Platform and comes in two flavors: <a
						data-lt="XHTML Content Document">XHTML</a> and <a data-lt="SVG Content Document">SVG</a>. Called
						<a>EPUB Content Documents</a>, these documents typically reference many additional resources
					required for their proper rendering, such as images, audio and video clips, scripts, and style
					sheets.</p>

				<p>Refer to <a href="#sec-contentdocs"></a> for detailed information about the rules and requirements to
					produce EPUB Content Documents, and [[EPUB-A11Y-11]] for accessibility requirements.</p>

				<p><a>Media Overlay Documents</a> complement EPUB Content Documents. They provide declarative markup for
					synchronizing the text in EPUB Content Documents with prerecorded audio. The result is the ability
					to create a read-aloud experience where <a>Reading Systems</a> highlight the text as it is narrated.
					Refer to <a href="#sec-media-overlays"></a> for the definition of Media Overlay Documents.</p>

				<p>A ZIP-based archive with the file extension <code>.epub</code> bundles the EPUB Publication's
					resources for distribution. As conformant ZIP archives, EPUB Publications can be unzipped by many
					software programs, simplifying both their production and consumption.</p>

				<p>The container format not only provides a means of determining that the zipped content represents an
					EPUB Publication (the <code>mimetype</code> file), but also provides a universally-named directory
					of informative resources (<code>/META-INF</code>). Key among these resources is the
						<code>container.xml</code> file, which directs Reading Systems to the available Package
					Documents. Refer to <a href="#sec-ocf"></a> for more information about the Container format.</p>

				<p>While conceptually simple, an EPUB Publication is more than just a collection of HTML pages and
					dependent assets in a ZIP package as presented here. Additional information about the primary
					features and functionality that EPUB Publications provide to enhance the reading experience is
					available from the referenced specifications, and a more general introduction to the features of
					EPUB 3 is provided in the informative [[EPUB-OVERVIEW-33]].</p>

				<p>Refer to [[EPUB-RS-33]] for the processing requirements for Reading Systems. Although it is not
					necessary that <a>EPUB Creators</a> read that document to create EPUB Publications, an understanding
					of how Reading Systems present the content can help craft publications for optimal presentation to
					users.</p>
			</section>

			<section id="sec-intro-relations" class="informative">
				<h3>Relationship to Other Specifications</h3>

				<section id="sec-overview-relations-html">
					<h4>Relationship to HTML</h4>

					<p>The [[HTML]] standard is continuously evolving &#8212; there are no longer versioned releases of
						it. That standard, in turn, references various technologies that continue to evolve, such as
						MathML, SVG, CSS, and JavaScript.</p>

					<p>The benefit of this approach for EPUB is that <a>EPUB Publications</a> always keep pace with
						changes to the Web without the need for new revisions. <a>EPUB Creators</a>, however, must keep
						track of the various changes to HTML and the technologies it references to ensure they keep
						their processes up to date.</p>

					<div class="caution">
						<p>As HTML evolves, it is possible that previously-valid features may become obsolete or be
							removed. In general, however, the removal of features typically only occurs when serious
							issues arise with them (e.g., lack of support in browsers, security issues).</p>
					</div>

					<p>The <a href="#sec-xhtml">XHTML profile defined by this specification</a> inherits all definitions
						of semantics, structure and processing behaviors from HTML unless otherwise specified.</p>

					<p>In addition, this specification <a href="#sec-xhtml-extensions">defines a set of extensions</a>
						to the [[HTML]] document model that EPUB Creators may include in <a>XHTML Content
						Documents</a>.</p>
				</section>

				<section id="sec-overview-relations-svg">
					<h4>Relationship to SVG</h4>

					<p>This specification does not reference a specific version of [[SVG]], but instead uses an undated
						reference. Whenever there is any ambiguity in this reference, the latest recommended
						specification is the authoritative reference.</p>

					<p>This approach ensures that EPUB will always keep pace with changes to the SVG standard. <a>EPUB
							Creators</a>, however, must keep track of changes to the SVG standard to ensure they keep
						their processes up to date.</p>

					<div class="caution">
						<p>As SVG evolves, features previously-valid features may become obsolete or be removed. The
							Working Group anticipates the W3C will make any such changes carefully to ensure minimal
							disruption, but in the case of a backwards-incompatible revision the Working Group could
							revisit the use of an undated reference.</p>
					</div>
				</section>

				<section id="sec-overview-relations-css">
					<h4>Relationship to CSS</h4>

					<p>EPUB 3 supports CSS as defined by the CSS Working Group Snapshot [[CSSSnapshot]]. EPUB 3 also
						maintains some prefixed CSS properties, to ensure consistent support for global languages.</p>
				</section>

				<section id="sec-overview-relations-smil">
					<h4>Relationship to SMIL</h4>

					<p>This specification relies on a subset of [[SMIL3]], from which the Media Overlays elements and
						attributes defined in <a href="#sec-overlays-def"></a> are derived.</p>
				</section>

				<section id="sec-overview-relations-url">
					<h4>Relationship to URL</h4>

					<p>This specification refers to the [[URL]] standard for terminology and processing related to URLs
						expressed in EPUB Publications. It is anticipated that new and revised Web formats will adopt
						this standard, but until then this may put this specification in conflict with the internal
						requirements for some formats (e.g., valid relative paths), specifically with respect to the use
						of internationalized URLs. If a format does not allow internationalized URLs (i.e., URLs must
						conform to [[RFC3986]] or earlier), that requirement takes precedence within those
						resources.</p>
				</section>
			</section>

			<section id="sec-terminology">
				<h3>Terminology</h3>

				<p>This specification defines the following terms specific to EPUB 3. They appear capitalized wherever
					used.</p>

				<p>Only the first instance of a term in a section links to its definition.</p>

				<dl class="termlist">
					<dt>
						<dfn id="dfn-codec" data-lt="Codecs">Codec</dfn>
					</dt>
					<dd>
						<p>Codec refers to content that has intrinsic binary format qualities, such as video and audio
							media types designed for optimum compression or that provide optimized streaming
							capabilities.</p>
					</dd>

					<dt>
						<dfn id="dfn-container-root-url">Container Root URL</dfn>
					</dt>
					<dd>
						<p>The <a data-cite="url#concept-url">URL</a> [[URL]] of the <a>Root Directory</a> representing
							the <a>OCF Abstract Container</a>. It is implementation specific, but EPUB Creators must
							assume it has properties defined in <a href="#sec-container-iri"></a>.</p>
					</dd>

					<dt>
						<dfn id="dfn-content-url">Content URL</dfn>
					</dt>
					<dd>
						<p> The <a data-cite="url#concept-url">URL</a> of a file or directory in the <a>OCF Abstract
								Container</a>, defined in <a href="#sec-container-iri"></a>. </p>
					</dd>

					<dt>
						<dfn id="dfn-core-media-type-resource" data-lt="Core Media Type Resources">Core Media Type
							Resource</dfn>
					</dt>
					<dd>
						<p>A <a>Publication Resource</a> that does not require the provision of a <a
								href="#sec-foreign-restrictions">fallback</a> (cf. <a>Foreign Resource</a>).</p>
					</dd>

					<dt>
						<dfn id="dfn-epub-container" data-lt="EPUB Containers">EPUB Container</dfn>
					</dt>

					<dt>
						<dfn id="dfn-zip-container">OCF ZIP Container</dfn>
					</dt>
					<dd>
						<p>The ZIP-based packaging and distribution format for <a>EPUB Publications</a> defined in <a
								href="#sec-container-zip"></a>.</p>
						<p>EPUB Container and OCF ZIP Container are synonymous.</p>
					</dd>

					<dt>
						<dfn id="dfn-epub-content-document" data-lt="EPUB Content Documents">EPUB Content Document</dfn>
					</dt>
					<dd>
						<p>A <a>Publication Resource</a> with an XHTML or SVG media type that contains all or part of
							the content of an EPUB Publication (i.e., the textual, visual and/or audio content). These
							resources must conform to their respective <a data-lt="XHTML Content Document">XHTML</a> or
								<a data-lt="SVG Content Document">SVG</a> definitions to be used in the spine or be
							referenced from another EPUB Content Document.</p>
						<p>An EPUB Content Document is a <a>Core Media Type Resource</a>, so <a>EPUB Creators</a> can
							include it without the provision of <a href="#sec-foreign-restrictions">fallbacks</a>.</p>
					</dd>

					<dt>
						<dfn id="dfn-epub-creator" data-lt="EPUB Creators">EPUB Creator</dfn>
					</dt>
					<dd>
						<p>The person(s) or organization responsible for the creation of an <a>EPUB Publication</a>.</p>
						<p>Depending on the process used to produce EPUB Publications, EPUB Creator may sometimes refer
							to responsibilities of the organization (e.g., the publisher) or the individuals preparing
							the publication (e.g., technical editors).</p>
						<div class="note">
							<p>Previous versions of this specification referred to the EPUB Creator as the <span
									id="dfn-author">Author</span>.</p>
						</div>
					</dd>

					<dt>
						<dfn id="dfn-epub-navigation-document" data-lt="EPUB Navigation Documents">EPUB Navigation
							Document</dfn>
					</dt>
					<dd>
						<p>A specialization of the <a>XHTML Content Document</a> that contains human- and
							machine-readable global navigation information. The EPUB Navigation Document conforms to the
							constraints expressed in <a href="#sec-nav"></a>.</p>
					</dd>

					<dt>
						<dfn id="dfn-epub-publication" data-lt="EPUB Publications">EPUB Publication</dfn>
					</dt>
					<dd>
						<p>A logical document entity consisting of a set of interrelated <a
								data-lt="Publication Resource">resources</a> packaged in an <a>EPUB Container</a>.</p>
						<p>An EPUB Publication typically represents a single intellectual or artistic work, but this
							specification does not restrict the nature of the content.</p>
					</dd>

					<dt><dfn id="dfn-epub-reading-system" data-lt="EPUB Reading Systems|Reading System|Reading Systems"
							>EPUB Reading System</dfn> (or Reading System)</dt>
					<dd>
						<p>A system that processes <a>EPUB Publications</a> for presentation to a user in a manner
							conformant with this specification.</p>
					</dd>

					<dt>
						<dfn id="dfn-file-name" data-lt="File Names">File Name</dfn>
					</dt>
					<dd>
						<p>The name of any type of file within an <a>OCF Abstract Container</a>, whether a directory or
							a file within a directory.</p>
					</dd>

					<dt>
						<dfn id="dfn-file-path" data-lt="File Paths">File Path</dfn>
					</dt>
					<dd>
						<p>The File Path of a file or directory is its full path relative to the root directory, as
							defined by the algorithm specified in <a href="#sec-file-names-to-path-names"></a>.</p>
						<!-- <p>The File Path of a file or directory <var>file</var> is the <a data-cite="url#concept-url-path">path</a> of the <a>content URL</a> for <var>file</var>. 
						It is derived from the <a>File Name</a> of <var>file</var> following the steps specified in <a href="#sec-file-names-to-path-names"></a>.</p> -->
					</dd>

					<dt>
						<dfn id="dfn-fixed-layout-document" data-lt="Fixed-Layout Documents">Fixed-Layout Document</dfn>
					</dt>
					<dd>
						<p>An <a>EPUB Content Document</a> with fixed dimensions directly referenced from the
								<a>spine</a>. Fixed-Layout Documents are designated <code>pre-paginated</code> in the
								<a>Package Document</a>, as defined in <a href="#sec-fixed-layouts"></a>.</p>
					</dd>

					<dt>
						<dfn id="dfn-foreign-resource" data-lt="Foreign Resources">Foreign Resource</dfn>
					</dt>
					<dd>
						<p>A <a>Publication Resource</a> that is not a <a>Core Media Type Resource</a>. Foreign
							Resources are subject to the fallback requirements defined in <a
								href="#sec-foreign-restrictions"></a>.</p>
					</dd>

					<dt>
						<dfn id="dfn-local-resource" data-lt="Local Resources">Local Resource</dfn>
					</dt>
					<dd>
						<p>A resource that is located inside the <a>EPUB Container</a>.</p>
						<p>Refer to <a href="#sec-resource-locations"></a> for media type specific rules for resource
							locations.</p>
					</dd>

					<dt>
						<dfn id="dfn-manifest" data-lt="Manifests">Manifest</dfn>
					</dt>
					<dd>
						<p>The section of the <a>Package Document</a> that lists the <a>Publication Resources</a>.</p>
						<p>Refer to <a href="#sec-manifest-elem"></a> for more information.</p>
					</dd>

					<dt>
						<dfn id="dfn-media-overlay-document" data-lt="Media Overlay Documents">Media Overlay
							Document</dfn>
					</dt>
					<dd>
						<p>An XML document that associates the <a>XHTML Content Document</a> with pre-recorded audio
							narration to provide a synchronized playback experience, as defined in <a
								href="#sec-media-overlays"></a>.</p>
					</dd>

					<dt>
						<dfn id="dfn-non-codec" data-lt="Non-Codecs">Non-Codec</dfn>
					</dt>
					<dd>
						<p>Non-Codec refers to content types that benefit from compression due to the nature of their
							internal data structure, such as file formats based on character strings (for example, HTML,
							CSS, etc.).</p>
					</dd>

					<dt>
						<dfn id="dfn-ocf-abstract-container" data-lt="OCF Abstract Containers">OCF Abstract
							Container</dfn>
					</dt>
					<dd>
						<p>The OCF Abstract Container defines a file system model for the contents of the <a>OCF ZIP
								Container</a>, as defined in <a href="#sec-container-abstract"></a>.</p>
					</dd>

					<dt>
						<dfn id="dfn-package-document" data-lt="Package Documents|Package Document(s)">Package
							Document</dfn>
					</dt>
					<dd>
						<p>A <a>Publication Resource</a> that describes the rendering of an <a>EPUB Publication</a>, as
							defined in <a href="#sec-package-doc"></a>. The Package Document carries meta information
							about the EPUB Publication, provides a manifest of resources and defines a default reading
							order.</p>
					</dd>

					<dt>
						<dfn id="dfn-publication-resource" data-lt="Publication Resources">Publication Resource</dfn>
					</dt>
					<dd>
						<p>A resource that contains content or instructions that contribute to the logic and rendering
							of an <a>EPUB Publication</a>. In the absence of this resource, <a>Reading Systems</a> may
							not render the EPUB Publication as the <a>EPUB Creator</a> intends. Examples of Publication
							Resources include the <a>Package Document</a>, <a>EPUB Content Document</a>, CSS Style
							Sheets, audio, video, images, embedded fonts, and scripts.</p>
						<p>EPUB Creators typically list Publication Resources in the Package Document <a
								href="#sec-manifest-elem">manifest</a> and bundle them in the <a>EPUB Container</a>,
							with the following exceptions:</p>
						<ul>
							<li>
								<p>they do not have to list resources encoded as <a href="#sec-data-urls">data URLs</a>
									in the manifest; and</p>
							</li>
							<li>
								<p>they may locate resources listed in <a href="#sec-resource-locations"></a> outside
									the EPUB Container.</p>
							</li>
						</ul>
						<p>Examples of resources that are not Publication Resources include those identified in Package
							Document <a href="#sec-link-elem"><code>link</code> elements</a> and those identified in
							outbound hyperlinks that resolve to <a>Remote Resources</a> (e.g., referenced from the
								<code>href</code> attribute of an [[HTML]] <a data-cite="!html#the-a-element"
									><code>a</code> element</a>).</p>
					</dd>

					<dt>
						<dfn id="dfn-remote-resource" data-lt="Remote Resources">Remote Resource</dfn>
					</dt>
					<dd>
						<p>A resource that is located outside of the <a>EPUB Container</a>, typically, but not
							necessarily, online.</p>
						<p>Refer to <a href="#sec-resource-locations"></a> for media type specific rules for resource
							locations.</p>
					</dd>

					<dt>
						<dfn id="dfn-root-directory">Root Directory</dfn>
					</dt>
					<dd>
						<p>The root directory represents the base of the <a>OCF Abstract Container</a> file system. This
							directory is <a data-cite="epub-rs-33#confreq-zip-rootdir">virtual in nature</a>.</p>
					</dd>

					<dt>
						<dfn id="dfn-scripted-content-document" data-lt="Scripted Content Documents">Scripted Content
							Document</dfn>
					</dt>
					<dd>
						<p>An <a>EPUB Content Document</a> that includes scripting or an <a>XHTML Content Document</a>
							that contains [[HTML]] <a data-cite="html#forms">forms</a>.</p>
						<p>Refer to <a href="#sec-scripted-content"></a> for more information.</p>
					</dd>

					<dt>
						<dfn id="dfn-spine">Spine</dfn>
					</dt>
					<dd>
						<p>An ordered list of <a>Publication Resources</a> in the <a>Package Document</a>, <a
								href="#confreq-spine-itemtypes">typically EPUB Content Documents</a>, that represent the
							default reading order.</p>
						<p>Refer to <a href="#sec-spine-elem"></a> for more information.</p>
					</dd>

					<dt>
						<dfn id="dfn-svg-content-document" data-lt="SVG Content Documents">SVG Content Document</dfn>
					</dt>
					<dd>
						<p>An <a>EPUB Content Document</a> that conforms to the constraints expressed in <a
								href="#sec-svg"></a>.</p>
					</dd>

					<dt>
						<dfn id="dfn-synthetic-spread" data-lt="Synthetic Spreads">Synthetic Spread</dfn>
					</dt>
					<dd>
						<p>The rendering of two adjacent pages simultaneously on a device screen.</p>
					</dd>

					<dt>
						<dfn id="dfn-top-level-content-document" data-lt="Top-level Content Documents">Top-level Content
							Document</dfn>
					</dt>
					<dd>
						<p>An <a>EPUB Content Document</a> referenced from the <a>spine</a>, whether directly or via a
								<a href="#sec-foreign-restrictions-manifest">fallback chain</a>.</p>
					</dd>

					<dt>
						<dfn id="dfn-unique-identifier">Unique Identifier</dfn>
					</dt>
					<dd>
						<p>The primary identifier for an <a>EPUB Publication</a>. The Unique Identifier is the
								<a>value</a> of the <a href="#sec-opf-dcidentifier"><code>dc:identifier</code>
								element</a> specified by the <a href="#attrdef-package-unique-identifier"
									><code>unique-identifier</code> attribute</a> in the <a>Package Document</a>.</p>
						<p>Significant revision, abridgement, etc. of the content requires a new Unique Identifier.</p>
					</dd>

					<dt>
						<dfn id="dfn-viewport">Viewport</dfn>
					</dt>
					<dd>
						<p>The region of an <a>EPUB Reading System</a> in which an <a>EPUB Publication</a> is rendered
							visually to a user.</p>
					</dd>

					<dt>
						<dfn id="dfn-xhtml-content-document" data-lt="XHTML Content Documents">XHTML Content
							Document</dfn>
					</dt>
					<dd>
						<p>An <a>EPUB Content Document</a> that conforms to the profile of [[HTML]] defined in <a
								href="#sec-xhtml"></a>.</p>
						<p>XHTML Content Documents use the <a data-cite="html#xhtml">XHTML syntax</a> defined in
							[[HTML]].</p>
					</dd>
				</dl>
			</section>

			<section id="conformance"></section>

			<section id="sec-intro-shorthands">
				<h3>Authoring Shorthands</h3>

				<section id="sec-shorthands-prefixes">
					<h4>Prefixes</h4>

					<p>In <a>Package Document</a> metadata examples, <a href="#sec-metadata-reserved-prefixes">reserved
							prefixes</a> are used without declaration.</p>
				</section>

				<section id="sec-shorthands-ns">
					<h4>Namespaces</h4>

					<p>For convenience, the following namespace prefixes [[XML-NAMES]] are used in this specification
						without explicitly being declared. EPUB Creators MUST declare these prefixes to use them in an
							<a>EPUB Content Document</a>.</p>

					<table class="mapping">
						<tr>
							<th>prefix</th>
							<th>URI</th>
						</tr>
						<tr>
							<td>
								<code>epub</code>
							</td>
							<td>
								<code>http://www.idpf.org/2007/ops</code>
							</td>
						</tr>
					</table>
				</section>
			</section>
		</section>
		<section id="sec-publications">
			<h2>EPUB Publications</h2>

			<section id="sec-epub-conf">
				<h3>Conformance Criteria</h3>

				<p>An EPUB Publication:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-package">MUST define at least one rendering of its content as follows:</p>
						<ul class="conformance-list">
							<li>
								<p id="confreq-package-doc">MUST contain a <a>Package Document</a> that conforms to <a
										href="#sec-package-doc"></a> and meet all <a>Publication Resource</a>
									requirements for the Package Document.</p>
							</li>
							<li>
								<p id="confreq-nav">MUST contain an <a>EPUB Navigation Document</a> that conforms to <a
										href="#sec-nav-doc"></a>.</p>
							</li>
						</ul>
					</li>
					<li>
						<p id="confreq-a11y">SHOULD conform to the accessibility requirements defined in
							[[EPUB-A11Y-11]].</p>
					</li>
					<li>
						<p id="confreq-ocf">MUST be packaged in an <a>EPUB Container</a> as defined in <a
								href="#sec-ocf"></a>.</p>
					</li>
				</ul>

				<p id="confreq-res-location">In addition, all Publication Resources MUST adhere to the requirements in
						<a href="#sec-publication-resources"></a>.</p>

				<p>The rest of this specification covers specific conformance details.</p>
			</section>

			<section id="sec-publication-resources">
				<h3>Publication Resources</h3>

				<section id="sec-core-media-types">
					<h4>Core Media Types</h4>

					<section id="sec-cmt-intro" class="informative">
						<h5>Introduction</h5>

						<p>An <a>EPUB Publication</a> typically consists of many <a>Publication Resources</a>. These
							resources are divided into two categories: those that do not require fallbacks (<a>Core
								Media Type Resources</a>) and those that do (<a>Foreign Resources</a>).</p>

						<p>The Working Group typically only includes formats as Core Media Type Resources when they have
							broad support in web browser cores &#8212; the rendering engines that EPUB 3 Reading Systems
							build upon. They are an agreement between Reading System developers and EPUB Creators to
							ensure the predictability of rendering of EPUB Publications.</p>

						<p>Inclusion as a Core Media Type Resource does not mean that all Reading Systems will support
							the rendering of a resource, however. Reading Systems support also depends on the
							capabilities of the application (e.g., a Reading System with a <a>Viewport</a> must support
							image Core Media Type Resources, but a Reading System without a Viewport does not). Refer to
								<a data-cite="epub-rs-33#sec-epub-rs-conf-cmt">Core Media Types</a> [[EPUB-RS-33]] for
							more information about which Reading Systems rendering capabilities require support for
							which Core Media Type Resources.</p>

						<p>Foreign Resources come with no guarantee of rendering support, which is why they require a
							fallback to a Core Media Type Resource. EPUB Publications should be fully consumable on any
							conforming Reading System, so providing a fallback is necessary to ensure that the use of
							Foreign Resources does not impact on the ability of the user to consume the content.</p>

						<p>This section lists the <a href="#sec-cmt-supported">set of Core Media Type Resources</a> and
							identifies <a href="#sec-foreign-restrictions">fallback mechanisms</a> used to satisfy the
							consumability requirement.</p>

						<div class="note">
							<p>EPUB also exempts some [[HTML]] elements from support requirements (see <a
									href="#sec-xhtml-fallbacks"></a>). Resources referenced from these elements are
								neither Core Media Type Resources nor Foreign Resources &#8212; they do not require
								fallbacks, but they also have no support requirements.</p>
						</div>
					</section>

					<section id="sec-cmt-supported">
						<h5>Supported Media Types</h5>

						<p><a>EPUB Creators</a> may include <a>Publication Resources</a> that conform to the following
							MIME media type [[RFC2046]] specifications in <a>EPUB Publications</a> without
							fallbacks.</p>

						<p>The columns in the following table represent the following information:</p>

						<ul>
							<li>
								<p><strong>Media Type</strong>—The MIME media type [[RFC2046]] used to represent the
									given Publication Resource in the <a href="#sec-manifest-elem">manifest</a>.</p>
								<p>If the table lists more than one media type, the first one is the preferred media
									type. EPUB Creators should use the preferred media type for all new EPUB
									Publications.</p>
							</li>
							<li><strong>Content Type Definition</strong>—The specification to which the given Core Media
								Type Resource must conform.</li>
							<li><strong>Applies to</strong>—The Publication Resource type(s) that the Media Type and
								Content Type Definition applies to.</li>
						</ul>

						<table id="tbl-core-media-types">
							<thead>
								<tr>
									<th id="tbl-cmt-string">Media Type</th>
									<th id="tbl-cmt-def">Content Type Definition</th>
									<th id="tbl-cmt-appl">Applies to</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<th colspan="3" id="cmt-grp-image" class="tbl-group">Images</th>
								</tr>
								<tr>
									<td id="cmt-gif" data-tests="#pub-cmt-gif">
										<code>image/gif</code>
									</td>
									<td> [[GIF]] </td>
									<td>GIF Images</td>
								</tr>
								<tr>
									<td id="cmt-jpeg" data-tests="#pub-cmt-jpeg">
										<code>image/jpeg</code>
									</td>
									<td> [[JPEG]] </td>
									<td>JPEG Images</td>
								</tr>
								<tr>
									<td id="cmt-png" data-tests="#pub-cmt-png">
										<code>image/png</code>
									</td>
									<td> [[PNG]] </td>
									<td>PNG Images</td>
								</tr>
								<tr>
									<td id="cmt-svg" data-tests="#pub-cmt-svg,#cnt-svg-support">
										<code>image/svg+xml</code>
									</td>
									<td>
										<a href="#sec-svg">SVG Content Documents</a>
									</td>
									<td>SVG documents</td>
								</tr>
								<tr>
									<td id="cmt-webp" data-tests="#pub-cmt-webp">
										<code>image/webp</code>
									</td>
									<td> [[WebP-Container]], [[WebP-LB]] </td>
									<td>WebP Images</td>
								</tr>
								<tr>
									<th colspan="3" id="cmt-grp-audio" class="tbl-group">Audio</th>
								</tr>
								<tr>
									<td id="cmt-mp3" data-tests="#pub-cmt-mp3">
										<code>audio/mpeg</code>
									</td>
									<td> [[MP3]] </td>
									<td>MP3 audio</td>
								</tr>
								<tr>
									<td id="cmt-mp4-aac" data-tests="#pub-cmt-mp4">
										<code>audio/mp4</code>
									</td>
									<td> [[MPEG4-Audio]], [[MP4]] </td>
									<td>AAC LC audio using MP4 container</td>
								</tr>
								<tr>
									<td id="cmt-ogg-opus" data-tests="#pub-cmt-opus">
										<code>audio/opus</code>
									</td>
									<td> [[RFC7845]] </td>
									<td>OPUS audio using OGG container</td>
								</tr>
								<tr>
									<th colspan="3" id="cmt-grp-video" class="tbl-group">Video</th>
								</tr>
								<tr>
									<td colspan="3" id="cmt-vide-note">EPUB 3 allows EPUB Creators to include any video
										codecs without fallbacks, although none are technically Core Media Type
										Resources. Although the Working Group recommends that Reading Systems support at
										least one of the H.264 [[?H264]] and VP8 [[?RFC6386]] video codecs, support is
										not a conformance requirement &#8212; a Reading System might support other video
										codecs, or none at all. EPUB Creators must consider factors such as breadth of
										adoption, video playback quality, and technology usage royalty requirements when
										making a choice to include video in either format, or both. </td>
								</tr>
								<tr>
									<th colspan="3" id="cmt-grp-track" class="tbl-group">Tracks</th>
								</tr>
								<tr>
									<td colspan="3" id="cmt-track-note">EPUB Creators can include any kind of audio or
										video track (for example, [[?WebVTT]] captions, subtitles and descriptions)
										without a fallback. Refer to <a href="#sec-xhtml-fallbacks"></a> for more
										information. </td>
								</tr>
								<tr>
									<th colspan="3" id="cmt-grp-text" class="tbl-group">Style</th>
								</tr>
								<tr>
									<td id="cmt-css">
										<code>text/css</code>
									</td>
									<td>
										<a href="#sec-css">CSS Style Sheets</a>
									</td>
									<td>CSS Style Sheets.</td>
								</tr>
								<tr>
									<th colspan="3" id="cmt-grp-font" class="tbl-group">Fonts</th>
								</tr>
								<tr>
									<td colspan="3" id="cmt-font-note"> EPUB 3 allows EPUB Creators to include any font
										resource without a fallback, as CSS already defines fallback rules for fonts.
										Refer to the <a data-cite="epub-rs-33#confreq-css-rs-fonts">Reading System
											support requirements for fonts</a> [[EPUB-RS-33]] for more information.</td>
								</tr>
								<tr>
									<td id="cmt-sfnt">
										<ol class="cmt">
											<li><code>font/ttf</code></li>
											<li><code>application/font-sfnt</code></li>
										</ol>
									</td>
									<td>[[TrueType]] </td>
									<td>TrueType fonts</td>
								</tr>
								<tr>
									<td id="cmt-otf">
										<ol class="cmt">
											<li><code>font/otf</code></li>
											<li><code>application/font-sfnt</code></li>
											<li><code>application/vnd.ms-opentype</code></li>
										</ol>
									</td>
									<td>[[OpenType]]</td>
									<td>OpenType fonts</td>
								</tr>
								<tr>
									<td id="cmt-woff">
										<ol class="cmt">
											<li><code>font/woff</code></li>
											<li><code>application/font-woff</code></li>
										</ol>
									</td>
									<td> [[WOFF]] </td>
									<td>WOFF fonts</td>
								</tr>
								<tr>
									<td id="cmt-woff2">
										<code>font/woff2</code>
									</td>
									<td> [[WOFF2]] </td>
									<td>WOFF2 fonts</td>
								</tr>
								<tr>
									<th colspan="3" id="cmt-grp-other" class="tbl-group">Other</th>
								</tr>
								<tr>
									<td id="cmt-xhtml">
										<code>application/xhtml+xml</code>
									</td>
									<td>
										<a href="#sec-xhtml">XHTML Content Documents</a>
									</td>
									<td><a>XHTML Content Documents</a> that use the <a data-cite="html#xhtml">XHTML
											syntax</a> [[HTML]]. </td>
								</tr>
								<tr>
									<td id="cmt-js">
										<ol class="cmt">
											<li><code>application/javascript</code></li>
											<li><code>application/ecmascript</code></li>
											<li><code>text/javascript</code></li>
										</ol>
									</td>
									<td> [[RFC4329]] </td>
									<td>Scripts.</td>
								</tr>
								<tr>
									<td id="cmt-ncx">
										<code>application/x-dtbncx+xml</code>
									</td>
									<td> [[OPF-201]] </td>
									<td>The <a href="#legacy">legacy</a> NCX.</td>
								</tr>
								<tr>
									<td id="cmt-smil">
										<code>application/smil+xml</code>
									</td>
									<td>
										<a href="#sec-media-overlays">Media Overlays</a>
									</td>
									<td>EPUB Media Overlay documents</td>
								</tr>
							</tbody>
						</table>

						<div class="issue" data-number="645">
							<p>Although, OPUS/OGG has good support in Android, MacOS, Windows, and Linux, Apple,
								starting with iOS 11, only supports the OPUS codec in a CAF container. The working group
								will monitor support for OPUS in iOS and may remove OPUS as a core media type if the
								level of support is inadequate.</p>
						</div>

						<div class="issue" data-number="1344">
							<p>WebP is currently not defined in a stable specification and its media type has not been
								registered with IANA. Apple also only supports WebP on macOS 11. The working group will
								continue to monitor these issues.</p>
						</div>
					</section>

					<section id="sec-foreign-restrictions">
						<h5>Foreign Resources</h5>

						<p id="confreq-foreign-no-fallback">EPUB Creators MAY include Foreign Resources without
							fallbacks provided they:</p>

						<ul>
							<li>
								<p>do not reference the resources from <a href="#sec-itemref-elem">spine
											<code>itemref</code> elements</a>; and</p>
							</li>
							<li>
								<p>do not embed them directly in EPUB Content Documents (e.g., via [[?HTML]] <a
										data-cite="html#embedded-content">embedded content</a> and [[?SVG]] <a
										href="https://www.w3.org/TR/SVG/embedded.html#ImageElement"
										><code>image</code></a> and <a
										href="https://www.w3.org/TR/SVG/embedded.html#ForeignObjectElement"
											><code>foreignObject</code></a> elements).</p>
							</li>
						</ul>

						<p class="note">This exception allows EPUB Creators to include resources in the <a>EPUB
								Container</a> that are not for use by EPUB Reading Systems. The primary case for this
							exception is to allow data files to travel with an EPUB Publication, whether for scripts to
							use in their constituent EPUB Content Documents or for external applications to use (e.g., a
							scientific journal might include a data set with instructions on how to extract it from the
							EPUB Container).</p>

						<p id="confreq-cmt">When a <a>Foreign Resource</a> is included in the spine or directly rendered
							in its native format in an EPUB Content Document, a fallback <a>Core Media Type Resource</a>
							MUST be included. Fallbacks take one of the following forms:</p>

						<ul>
							<li>
								<p>intrinsic fallback mechanisms provided by the host format (e.g., [[?HTML]] elements
									often provide the ability to reference more than one media type or to display an
									alternate embedded message when a media type cannot be rendered); or</p>
							</li>
							<li>
								<p><a href="#sec-foreign-restrictions-manifest">manifest fallback</a> chains defined on
										<a href="#sec-item-elem"><code>item</code> elements</a> in the <a>Package
										Document</a>.</p>
							</li>
						</ul>

						<div class="note">
							<p>Refer to the [[HTML]] and [[SVG]] specifications for the intrinsic fallback capabilities
								their elements provide.</p>
						</div>
					</section>
				</section>

				<section id="sec-resource-locations">
					<h4>Resource Locations</h4>

					<p>EPUB Creators MAY host the following types of Publication Resources outside the EPUB
						Container:</p>

					<ul class="conformance-list">
						<li>
							<p id="sec-resource-locations-audio"><a href="#cmt-grp-audio">Audio resources</a>.</p>
						</li>
						<li>
							<p id="sec-resource-locations-video"><a href="#cmt-grp-video">Video resources</a>.</p>
						</li>
						<li>
							<p id="sec-resource-locations-script">Resources retrieved via scripting APIs (e.g.,
								XmlHttpRequest [[?XHR]] and Fetch [[?FETCH]]).</p>
						</li>
						<li>
							<p id="sec-resource-locations-fonts"><a href="#cmt-grp-font">Font resources</a>.</p>
						</li>
					</ul>

					<p>EPUB Creators MUST store all other resources within the EPUB Container.</p>

					<p>Storing all resources inside the EPUB Container allows users access to the entire presentation
						regardless of connectivity status so is strongly encouraged whenever possible.</p>

					<p>These rules for locating Publication Resource apply regardless of whether the given resource is a
							<a>Core Media Type Resource</a> or a <a>Foreign Resource</a>.</p>

					<div class="note">
						<p>Refer to the <a href="#remote-resources"><code>remote-resources</code> property</a> for more
							information on how to indicate that a <a>manifest</a>
							<a href="#sec-item-elem"><code>item</code></a> references a <a>Remote Resource</a>.</p>
					</div>

					<aside class="example" title="Referencing a local resource">
						<p>In this example, the audio file referenced from the [[HTML]] <a
								data-cite="html#the-audio-element"><code>audio</code> element</a> is located inside the
								<a>EPUB Container</a>.</p>
						<pre>&lt;html …>
   …
   &lt;body>
      …
      &lt;audio
          src="audio/ch01.mp4"
          controls="controls"/>
      …
   &lt;/body>
&lt;/html></pre>
					</aside>

					<aside class="example" title="Referencing a remote resource">
						<p>In this example, the audio file referenced from the [[HTML]] <a
								data-cite="html#the-audio-element"><code>audio</code> element</a> is hosted on the
							web.</p>
						<pre>&lt;html …>
   …
   &lt;body>
      …
         &lt;audio
             src="http://www.example.com/book/audio/ch01.mp4"
             controls="controls"/>
      …
   &lt;/body>
&lt;/html></pre>
					</aside>
				</section>

				<section id="sec-data-urls">
					<h4>Data URLs</h4>

					<p>The <a data-cite="rfc2397#"><code>data:</code> URL scheme</a> [[RFC2397]] is used to encode
						resources directly into a URL string. The advantage of this scheme is that it allows EPUB
						Creators to embed a resource within another, avoiding the need for an external file.</p>

					<p><a>EPUB Creators</a> MAY use data URLs in EPUB Publications provided their use does not result in
						a <a>Top-level Content Document</a> or <a data-cite="html#top-level-browsing-context">top-level
							browsing context</a> [[HTML]]. This restriction applies to data URLs used in the following
						scenarios:</p>

					<ul>
						<li>
							<p>in manifest <a href="#sec-item-elem"><code>item</code> elements</a> referenced from the
									<a>spine</a>;</p>
						</li>
						<li>
							<p>in the <code>href</code> attribute on [[HTML]] or [[SVG]] <code>a</code> elements (except
								when inside an <a data-cite="html#the-iframe-element"><code>iframe</code> element</a>
								[[HTML]]);</p>
						</li>
						<li>
							<p>in the <code>href</code> attribute on [[HTML]] <code>area</code> elements (except when
								inside an <code>iframe</code> element);</p>
						</li>
						<li>
							<p>in calls to [[ECMASCRIPT]] <code>window.open</code> or <code>document.open</code>.</p>
						</li>
					</ul>

					<div class="note">
						<p>The list of prohibited uses for data URLs is subject to change as the respective standards
							that allow their use evolve.</p>
					</div>

					<p>This restriction on their use is to prevent security issues and also to ensure that <a>Reading
							Systems</a> can determine where to take a user next (i.e., because these resources are not
						be listed in the spine).</p>

					<p>Resources represented as data URLs are not Publication Resources so are exempt from the
						requirement for EPUB Creators to list them in the <a>manifest</a>.</p>

					<p>EPUB Creators MUST encode Data URLs as Core Media Types or use them where they can provide a
						fallback (i.e., Data URLs are subject to the <a href="#sec-foreign-restrictions">foreign
							resource restrictions</a>).</p>
				</section>

				<section id="sec-xml-constraints">
					<h4>XML Conformance</h4>

					<p>Any <a>Publication Resource</a> that is an XML-Based Media Type:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-xml-wellformed">MUST be a conformant XML 1.0 Document as defined in <a
									data-cite="xml-names#Conformance">Conformance of Documents</a> [[XML-NAMES]].</p>
						</li>
						<li>
							<p id="confreq-xml-identifiers">MAY only specify a <a data-cite="xml#dt-doctype">document
									type declaration</a> that references an <a data-cite="xml#NT-ExternalID">external
									identifier</a> appropriate for its media type &#8212; as defined in <a
									href="#app-identifiers-allowed"></a> &#8212; or that omits external identifiers
								[[XML]].</p>
						</li>
						<li>
							<p id="confreq-xml-entities">MUST NOT contain <a data-cite="xml#dt-extent">external
									entity</a> declarations in the internal DTD subset [[XML]].</p>
						</li>
						<li>
							<p id="confreq-xml-xinc">MUST NOT make use of XInclude [[XInclude]].</p>
						</li>
						<li>
							<p id="confreq-xml-enc">MUST be encoded in UTF-8 or UTF-16 [[Unicode]], with UTF-8 as the
								RECOMMENDED encoding.</p>
						</li>
					</ul>

					<p>The above constraints apply regardless of whether the given Publication Resource is a <a>Core
							Media Type Resource</a> or a <a>Foreign Resource</a>.</p>

					<div class="note">
						<p>[[HTML]] and [[SVG]] are removing support for the XML `base` attribute [[XMLBase]]. EPUB
							Creators should avoid using this feature.</p>
					</div>
				</section>
			</section>

			<section id="sec-package-doc">
				<h3>Package Document</h3>

				<section id="sec-package-intro" class="informative">
					<h4>Introduction</h4>

					<p>The <a>Package Document</a> is an XML document that consists of a set of elements that each
						encapsulate information about a particular aspect of an <a>EPUB Publication</a>. These elements
						serve to centralize metadata, detail the individual resources, and provide the reading order and
						other information necessary for its rendering.</p>

					<p>The following list summarizes the information found in the Package Document:</p>

					<ul>
						<li>
							<p><a href="#sec-pkg-metadata">Metadata</a> — mechanisms to include and/or reference
								metadata.</p>
						</li>
						<li>
							<p>A <a href="#sec-manifest-elem">manifest</a> — identifies via URL [[URL]], and describes
								via MIME media type [[RFC4839]], the set of <a>Publication Resources</a>.</p>
						</li>
						<li>
							<p>A <a href="#sec-spine-elem">spine</a> — an ordered sequence of ID references to top-level
								resources in the manifest from which Reading Systems can reach or utilize all other
								resources in the set. The spine defines the default reading order.</p>
						</li>
						<li>
							<p><a href="#sec-collection-elem">Collections</a> — a method of encapsulating and
								identifying subcomponents within the Package.</p>
						</li>
						<li>
							<p><a href="#sec-foreign-restrictions-manifest">Manifest fallback chains</a> — a mechanism
								that defines an ordered list of top-level resources as content equivalents. A Reading
								System can then choose between the resources based on which it is capable of
								rendering.</p>
						</li>
					</ul>

					<div class="note">
						<p>An EPUB Publication can reference more than one Package Document, allowing for alternative
							representations of the content. For more information, refer to <a
								href="#sec-container-metainf-container.xml"></a></p>
					</div>

					<div class="note">
						<p>Refer to <a href="#app-media-type-app-oebps-package"></a> for information about the file
							properties of Package Documents.</p>
					</div>
				</section>

				<section id="sec-package-def">
					<h4>Package Document Definition</h4>

					<p>All [[XML]] elements defined in this section are in the <code>http://www.idpf.org/2007/opf</code>
						namespace [[XML-NAMES]] unless otherwise specified.</p>

					<section id="sec-parse-package-urls">
						<h5>Parsing URLs in the Package Document</h5>

						<p> To parse a URL string <var>url</var> used in the Package Document, the <a
								data-cite="url#concept-url-parser">URL Parser</a> [[URL]] MUST be applied to
								<var>url</var>, with the <a>content URL</a> of the Package Document as <var>base</var>.
						</p>
					</section>

					<section id="sec-shared-attrs">
						<h5>Shared Attributes</h5>

						<p>This section provides definitions for shared attributes (i.e., attributes allowed on two or
							more elements).</p>

						<dl class="variablelist">
							<dt id="attrdef-dir">
								<code>dir</code>
							</dt>
							<dd>
								<p
									data-tests="#pkg-dir_creator-rtl,#pkg-dir_rtl-root-ltr,#pkg-dir_rtl-root-unset,#pkg-dir_unset-root-rtl,#pkg-dir_unset-root-unset,#pkg-dir-auto_root-rtl"
									>Specifies the <a data-cite="bidi#BD5">base direction</a> [[BIDI]] of the textual
									content and attribute values of the carrying element and its descendants</p>
								<p>Allowed values are:</p>
								<ul>
									<li><code>ltr</code> &#8212; left-to-right base direction;</li>
									<li><code>rtl</code> &#8212; right-to-left base direction; and</li>
									<li><code>auto</code> &#8212; base direction is determined using the Unicode Bidi
										Algorithm [[BIDI]].</li>
								</ul>
								<p data-tests="#pkg-dir-auto_root-rtl,#pkg-dir-auto_root-unset">Reading Systems will
									assume the value <code>auto</code> when EPUB Creators omit the attribute or use an
									invalid value.</p>
								<div class="note">
									<p>The base direction specified in the <code>dir</code> attribute does not affect
										the ordering of characters within directional runs, only the relative ordering
										of those runs and the placement of weak directional characters such as
										punctuation.</p>
								</div>
								<aside class="example"
									title="Setting the global base direction for Package Document text">
									<pre>&lt;package … dir="ltr">
   …
&lt;/package></pre>
								</aside>
								<p>Allowed on: <a href="#sec-collection-elem"><code>collection</code></a>, <a
										href="#sec-opf-dccontributor"><code>dc:contributor</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:coverage</code></a>, <a
										href="#sec-opf-dccreator"><code>dc:creator</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:description</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:publisher</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:relation</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:rights</code></a>, <a
										href="#sec-opf-dcsubject"><code>dc:subject</code></a>, <a
										href="#sec-opf-dctitle"><code>dc:title</code></a>, <a href="#sec-meta-elem"
											><code>meta</code></a> and <a href="#sec-package-elem"
										><code>package</code></a>.</p>
							</dd>

							<dt id="attrdef-href">
								<code>href</code>
							</dt>
							<dd>
								<p>A <a data-cite="url#valid-url-string">valid URL string</a> [[URL]] that references a
									resource. If the value is an <a data-cite="url#absolute-url-string">absolute
									URL</a>, it SHOULD NOT use the "file" URI scheme [[rfc8089]].</p>
								<aside class="example" title="Linking a metadata record">
									<pre>&lt;package …>
   &lt;metadata …>
      …
      &lt;link
          rel="record"
          href="meta/9780000000001.xml" 
          media-type="application/marc"/>
      …
   &lt;/metadata>
   …
&lt;/package></pre>
								</aside>
								<p>Allowed on: <a href="#sec-item-elem"><code>item</code></a> and <a
										href="#sec-link-elem"><code>link</code></a>.</p>
							</dd>

							<dt id="attrdef-id">
								<code>id</code>
							</dt>
							<dd>
								<p>The ID [[XML]] of the element, which MUST be unique within the document scope.</p>
								<aside class="example" title="Adding an identifier attribute">
									<pre>&lt;dc:title id="pub-title">The Lord of the Rings&lt;/dc:title></pre>
								</aside>
								<p>Allowed on: <a href="#sec-collection-elem"><code>collection</code></a>, <a
										href="#sec-opf-dccontributor"><code>dc:contributor</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:coverage</code></a>, <a
										href="#sec-opf-dccreator"><code>dc:creator</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:date</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:description</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:format</code></a>, <a
										href="#sec-opf-dcidentifier"><code>dc:identifier</code></a>, <a
										href="#sec-opf-dclanguage"><code>dc:language</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:publisher</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:relation</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:rights</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:source</code></a>, <a
										href="#sec-opf-dcsubject"><code>dc:subject</code></a>, <a
										href="#sec-opf-dctitle"><code>dc:title</code></a>, <a href="#sec-opf-dctype"
											><code>dc:type</code></a>, <a href="#sec-item-elem"><code>item</code></a>,
										<a href="#sec-itemref-elem"><code>itemref</code></a>, <a href="#sec-link-elem"
											><code>link</code></a>, <a href="#sec-manifest-elem"
										><code>manifest</code></a>, <a href="#sec-meta-elem"><code>meta</code></a>, <a
										href="#sec-package-elem"><code>package</code></a> and <a href="#sec-spine-elem"
											><code>spine</code></a>.</p>
							</dd>

							<dt id="attrdef-media-type">
								<code>media-type</code>
							</dt>
							<dd>
								<p>A media type [[RFC2046]] that specifies the type and format of the referenced
									resource.</p>
								<aside class="example" title="Adding the media type for a linked record">
									<pre>&lt;package …>
   &lt;metadata …>
      …
      &lt;link
          rel="record"
          href="http://example.org/meta/12389347?format=xmp"
          media-type="application/xml"
          properties="xmp"/>
      …
   &lt;/metadata>
   …
&lt;/package></pre>
								</aside>
								<p>Allowed on: <a href="#sec-item-elem"><code>item</code></a> and <a
										href="#sec-link-elem"><code>link</code></a>.</p>
							</dd>

							<dt id="attrdef-properties">
								<code>properties</code>
							</dt>
							<dd>
								<p>A space-separated list of <a href="#sec-property-datatype">property</a> values.</p>
								<p>Refer to each element's definition for the <a href="#sec-default-vocab">reserved
										vocabulary</a> for the attribute.</p>
								<aside class="example" title="Identifying the EPUB Navigation Document in the manifest">
									<pre>&lt;package …>
   …
   &lt;manifest>
      …
      &lt;item
          id="nav" 
          href="nav.xhtml"
          properties="nav"
          media-type="application/xhtml+xml"/>
      …
   &lt;/manifest>
   …
&lt;/package></pre>
								</aside>
								<p>Allowed on: <a href="#sec-item-elem"><code>item</code></a>, <a
										href="#sec-itemref-elem"><code>itemref</code></a> and <a href="#sec-link-elem"
											><code>link</code></a>.</p>
							</dd>

							<dt id="attrdef-refines">
								<code>refines</code>
							</dt>
							<dd>
								<p>Establishes an association between the current expression and the element or resource
									identified by its value. EPUB Creators MUST use as the value a <a
										data-cite="url#path-relative-scheme-less-url-string"
										>path-relative-scheme-less-URL string</a>, optionally followed by
										<code>U+0023 (#)</code> and a <a data-cite="url#url-fragment-string"
										>URL-fragment string</a> that references the resource or element they are
									describing.</p>
								<aside class="example" title="Specifying that a creator is the illustrator">
									<pre>&lt;package …>
   &lt;metadata …>
      …
      &lt;dc:creator id="creator02">
         E.H. Shepard
      &lt;/dc:creator>
      &lt;meta
          refines="#creator02"
          property="role"
          scheme="marc:relators">
         ill
      &lt;/meta>
      …
   &lt;/metadata>
   …
&lt;/package></pre>
								</aside>
								<p>The <code>refines</code> attribute is OPTIONAL depending on the type of metadata
									expressed. When omitted, the element defines a <a href="#primary-expression">primary
										expression</a>.</p>
								<p>When creating expressions about a <a>Publication Resource</a>, the
										<code>refines</code> attribute SHOULD specify a fragment identifier that
									references the ID of the resource's <a href="#sec-item-elem">manifest entry</a>.</p>
								<aside class="example" title="Setting the duration of a Media Overlay Document">
									<pre>&lt;package …>
   &lt;metadata …>
      …
      &lt;meta
          property="media:duration" 
          refines="#c01_overlay">
         0:32:29
      &lt;/meta>
      …
   &lt;/metadata>
   &lt;manifest>
      …
      &lt;item
          id="c01_overlay"
          href="overlays/chapter01.smil"
          media-type="application/smil+xml"/>
      …
   &lt;/manifest>
   …
&lt;/package></pre>
								</aside>
								<p>Allowed on: <a href="#sec-link-elem"><code>link</code></a> and <a
										href="#sec-meta-elem"><code>meta</code></a>.</p>
							</dd>

							<dt id="attrdef-xml-lang">
								<code>xml:lang</code>
							</dt>
							<dd>
								<p>Specifies the language of the textual content and attribute values of the carrying
									element and its descendants, as defined in section <a data-cite="xml#sec-lang-tag"
										>2.12 Language Identification</a> of [[XML]]. The value of each
										<code>xml:lang</code> attribute MUST be a <a data-cite="bcp47#section-2.2.9"
										>well-formed language tag</a> [[BCP47]].</p>
								<aside class="example" title="Setting the global language for Package Document text">
									<pre>&lt;package … xml:lang="ja">
   …
&lt;/package></pre>
								</aside>
								<p>Allowed on: <a href="#sec-collection-elem"><code>collection</code></a>, <a
										href="#sec-opf-dccontributor"><code>dc:contributor</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:coverage</code></a>, <a
										href="#sec-opf-dccreator"><code>dc:creator</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:description</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:publisher</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:relation</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:rights</code></a>, <a
										href="#sec-opf-dcsubject"><code>dc:subject</code></a>, <a
										href="#sec-opf-dctitle"><code>dc:title</code></a>, <a href="#sec-meta-elem"
											><code>meta</code></a> and <a href="#sec-package-elem"
										><code>package</code></a>.</p>
							</dd>
						</dl>
					</section>

					<section id="sec-package-elem">
						<h5>The <code>package</code> Element</h5>

						<p>The <code>package</code> element is the root element of the <a>Package Document</a>.</p>

						<dl id="elemdef-opf-package" class="elemdef">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>package</code>
								</p>
							</dd>

							<dt>Usage</dt>
							<dd>
								<p>The <code>package</code> element is the root element of the Package Document.</p>
							</dd>

							<dt>Attributes</dt>
							<dd>
								<ul class="nomark">
									<li>
										<p>
											<a href="#attrdef-dir">
												<code>dir</code>
											</a>
											<code>[optional]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#attrdef-id">
												<code>id</code>
											</a>
											<code>[optional]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#attrdef-package-prefix">
												<code>prefix</code>
											</a>
											<code>[optional]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#attrdef-xml-lang">
												<code>xml:lang</code>
											</a>
											<code>[optional]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#attrdef-package-unique-identifier">
												<code>unique-identifier</code>
											</a>
											<code>[required]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#attrdef-package-version">
												<code>version</code>
											</a>
											<code>[required]</code>
										</p>
									</li>
								</ul>
							</dd>

							<dt>Content Model</dt>
							<dd>
								<p>In this order:</p>
								<ul class="nomark">
									<li>
										<p>
											<a class="codelink" href="#elemdef-opf-metadata">
												<code>metadata</code>
											</a>
											<code>[exactly 1]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-opf-manifest">
												<code>manifest</code>
											</a>
											<code>[exactly 1]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-opf-spine">
												<code>spine</code>
											</a>
											<code>[exactly 1]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#sec-opf2-guide">
												<code>guide</code>
											</a>
											<code>[0 or 1]</code>
											<a href="#legacy" class="legacy">(legacy)</a>
										</p>
									</li>
									<li>
										<p>
											<a href="#sec-opf-bindings">
												<code>bindings</code>
											</a>
											<code>[0 or 1]</code>
											<a href="#deprecated" class="deprecated">(deprecated)</a>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-collection">
												<code>collection</code>
											</a>
											<code>[0 or more]</code>
										</p>
									</li>
								</ul>
							</dd>
						</dl>

						<p id="attrdef-package-version">The <code>version</code> attribute specifies the EPUB
							specification version to which the given EPUB Publication conforms. The attribute MUST have
							the value "<code>3.0</code>" to indicate conformance with EPUB 3.</p>

						<div class="note">
							<p>Updates to this specification do not represent new versions of EPUB 3 (i.e., each new 3.X
								specification is a continuation of the EPUB 3 format). The Working Group is committed to
								minimizing any changes that would invalidate existing content, allowing the
									<code>version</code> attribute value to remain unchanged.</p>
						</div>

						<p id="attrdef-package-unique-identifier">The <code>unique-identifier</code> attribute takes an
							IDREF [[XML]] that identifies the <a class="codelink" href="#sec-opf-dcidentifier"
									><code>dc:identifier</code></a> element that provides the preferred, or primary,
							identifier.</p>

						<p id="attrdef-package-prefix">The <code>prefix</code> attribute provides a declaration
							mechanism for prefixes not <a href="#sec-metadata-reserved-prefixes">reserved by this
								specification</a>. Refer to <a href="#sec-prefix-attr"></a> for more information.</p>
					</section>

					<section id="sec-pkg-metadata">
						<h5>Metadata Section</h5>

						<section id="sec-metadata-elem">
							<h6>The <code>metadata</code> Element</h6>

							<p>The <code>metadata</code> element encapsulates meta information.</p>

							<dl id="elemdef-opf-metadata" class="elemdef">
								<dt>Element Name</dt>
								<dd>
									<p>
										<code>metadata</code>
									</p>
								</dd>

								<dt>Usage</dt>
								<dd>
									<p>REQUIRED first child of <a href="#elemdef-opf-package"
										><code>package</code></a>.</p>
								</dd>

								<dt>Attributes</dt>
								<dd>
									<p>None</p>
								</dd>

								<dt>Content Model</dt>
								<dd>
									<p>In any order:</p>
									<ul class="nomark">
										<li>
											<p>
												<a class="codelink" href="#elemdef-opf-dcidentifier">
													<code>dc:identifier</code>
												</a>
												<code>[1 or more]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#elemdef-opf-dctitle">
													<code>dc:title</code>
												</a>
												<code>[1 or more]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#elemdef-opf-dclanguage">
													<code>dc:language</code>
												</a>
												<code>[1 or more]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#sec-opf-dcmes-optional">
													<code>DCMES Optional Elements</code>
												</a>
												<code>[0 or more]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#elemdef-meta">
													<code>meta</code>
												</a>
												<code>[1 or more]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#sec-opf2-meta">OPF2 <code>meta</code></a>
												<code>[0 or more]</code>
												<a href="#legacy" class="legacy">(legacy)</a>
											</p>
										</li>
										<li>
											<p>
												<a href="#elemdef-opf-link">
													<code>link</code>
												</a>
												<code>[0 or more]</code>
											</p>
										</li>
									</ul>
								</dd>
							</dl>

							<p>The Package Document <code>metadata</code> element has two primary functions:</p>

							<ol>
								<li>
									<p>to provide a minimal set of meta information for Reading Systems to use to
										internally catalogue an <a>EPUB Publication</a> and make it available to a user
										(e.g., to present in a bookshelf).</p>
								</li>
								<li>
									<p>to provide access to all rendering metadata needed to control the layout and
										display of the content (e.g., <a href="#sec-fxl-package">fixed-layout
											properties</a>).</p>
								</li>
							</ol>

							<p>The Package Document does not provide complex metadata encoding capabilities. If EPUB
								Creators need to provide more detailed information, they can associate metadata records
								(e.g., that conform to an international standard such as [[ONIX]] or are created for
								custom purposes) using the <a href="#sec-link-elem"><code>link</code></a> element. This
								approach allows Reading Systems to process the metadata in its native form, avoiding the
								potential problems and information loss caused by translating to use the minimal Package
								Document structure.</p>

							<p id="core-metadata-reqs">In keeping with this philosophy, the Package Document only has
								the following minimal metadata requirements: it MUST contain the [[DCTERMS]] <a
									href="#sec-opf-dcidentifier"><code>title</code></a>, <a
									href="#elemdef-opf-dcidentifier"><code>identifier</code></a>, and <a
									href="#elemdef-opf-dclanguage"><code>language</code></a> elements together with the
								[[DCTERMS]] <a href="#last-modified-date"><code>modified</code> property</a>. All other
								metadata is OPTIONAL.</p>

							<aside class="example" title="The minimal set of metadata required in the Package Document">
								<pre>&lt;package … unique-identifier="pub-id">
    …
    &lt;metadata …>
       &lt;dc:identifier
           id="pub-id">
          urn:uuid:A1B0D67E-2E81-4DF5-9E67-A64CBE366809
       &lt;/dc:identifier>
       &lt;dc:title>
          Norwegian Wood
       &lt;/dc:title>
       &lt;dc:language>
          en
       &lt;/dc:language>
       &lt;meta
           property="dcterms:modified">
          2011-01-01T12:00:00Z
       &lt;/meta>
    &lt;/metadata>
    …
&lt;/package>
</pre>
							</aside>

							<p>The <a href="#sec-meta-elem"><code>meta</code> element</a> provides a generic mechanism
								for including <a href="#sec-vocab-assoc">metadata properties from any vocabulary</a>.
								Although EPUB Creators MAY use this mechanism for any metadata purposes, they will
								typically use it to include rendering metadata defined in EPUB specifications.</p>

							<div class="note">
								<p>See [[EPUB-A11Y-11]] for accessibility metadata recommendations.</p>
							</div>
						</section>

						<section id="sec-metadata-values">
							<h5>Metadata Values</h5>

							<p>The Dublin Core elements [[DCTERMS]] and <a href="#sec-meta-elem"><code>meta</code>
									element</a> have mandatory <a data-cite="dom#concept-child-text-content">child text
									content</a> [[DOM]]. This specification refers to this content as the
									<dfn>value</dfn> of the element in their descriptions.</p>

							<p>These elements MUST have non-empty values after <a
									data-cite="infra#strip-leading-and-trailing-ascii-whitespace">leading and trailing
									ASCII whitespace</a> [[Infra]] is stripped (i.e., they must consist of at least one
								non-whitespace character).</p>

							<p>Whitespace within these element values are not significant. Sequences of one or more
								whitespace characters are <a data-cite="infra#strip-and-collapse-ascii-whitespace"
									>collapsed to a single space</a> [[Infra]] during processing .</p>
						</section>

						<section id="sec-opf-dcmes-required">
							<h6>DCMES Required Elements</h6>

							<section id="sec-opf-dcidentifier">
								<h6>The <code>identifier</code> Element</h6>

								<p>The [[DCTERMS]] <code>identifier</code> element contains an identifier such as a
										<abbr title="Universally Unique Identifier">UUID</abbr>, <abbr
										title="Digital Object Identfier">DOI</abbr> or <abbr
										title="International Standard Book Number">ISBN</abbr>.</p>

								<dl id="elemdef-opf-dcidentifier" class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>dc:identifier</code>
										</p>
									</dd>

									<dt>Namespace</dt>
									<dd>
										<p>
											<code>http://purl.org/dc/elements/1.1/</code>
										</p>
									</dd>

									<dt>Usage</dt>
									<dd>
										<p>REQUIRED child of <a class="codelink" href="#elemdef-opf-metadata"
													><code>metadata</code></a>.</p>
									</dd>

									<dt>Attributes</dt>
									<dd>
										<ul class="nomark">
											<li>
												<p>
													<a href="#attrdef-id">
														<code>id</code>
													</a>
													<code>[conditionally required]</code>
												</p>
											</li>
										</ul>
									</dd>

									<dt>Content Model</dt>
									<dd>
										<p>Text</p>
									</dd>
								</dl>

								<p>The <a>EPUB Creator</a> MUST provide an identifier that is unique to one and only one
										<a>EPUB Publication</a> &#8212; its <a>Unique Identifier</a> &#8212; in an
										<code>identifier</code> element. This <code>identifier</code> element MUST
									specify an <code>id</code> attribute whose value is referenced from the <a
										href="#elemdef-opf-package"><code>package</code> element's</a>
									<a href="#attrdef-package-unique-identifier"><code>unique-identifier</code>
										attribute</a>.</p>

								<aside class="example" title="Specifying the element with the unique identifier">
									<pre>&lt;package … unique-identifier="pub-id">
    &lt;metadata …>
       &lt;dc:identifier id="pub-id">
           urn:uuid:A1B0D67E-2E81-4DF5-9E67-A64CBE366809
       &lt;/dc:identifier>
       …
    &lt;/metadata>
&lt;/package></pre>
								</aside>

								<p>Although not static, EPUB Creators should make changes to the Unique Identifier for
									an EPUB Publication as infrequently as possible. Unique Identifiers should have
									maximal persistence both for referencing and distribution purposes. EPUB Creators
									should not issue new identifiers when making minor revisions such as updating
									metadata, fixing errata, or making similar minor changes.</p>

								<p>EPUB Creators MAY specify additional identifiers. The identifiers should be fully
									qualified URIs.</p>

								<p>EPUB Creators MAY use the <a href="#identifier-type"><code>identifier-type</code>
										property</a> to indicate that an <code>identifier</code> conforms to an
									established system or an issuing authority granted it.</p>

								<aside class="example" title="Specifying the type of the identifier">
									<p>In this example, the <code>identifier-type</code> property is used with the <a
											href="https://ns.editeur.org/onix/en/5">ONIX codelist 5</a> scheme to
										indicate the product identifier type is a <a href="https://doi.org">DOI</a>
										(i.e., the value <code>06</code> in codelist 5 is for DOIs).</p>

									<pre>&lt;metadata …>
   &lt;dc:identifier
       id="pub-id">
      urn:doi:10.1016/j.iheduc.2008.03.001
   &lt;/dc:identifier>
   &lt;meta
       refines="#pub-id"
       property="identifier-type"
       scheme="onix:codelist5">
      06
   &lt;/meta>
   …
&lt;/metadata></pre>
								</aside>
							</section>

							<section id="sec-opf-dctitle">
								<h6>The <code>title</code> Element</h6>

								<p>The [[DCTERMS]] <code>title</code> element represents an instance of a name for the
										<a>EPUB Publication</a>.</p>

								<dl id="elemdef-opf-dctitle" class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>dc:title</code>
										</p>
									</dd>

									<dt>Namespace</dt>
									<dd>
										<p>
											<code>http://purl.org/dc/elements/1.1/</code>
										</p>
									</dd>

									<dt>Usage</dt>
									<dd>
										<p>REQUIRED child of <a class="codelink" href="#elemdef-opf-metadata"
													><code>metadata</code></a>.</p>
									</dd>

									<dt>Attributes</dt>
									<dd>
										<ul class="nomark">
											<li>
												<p>
													<a href="#attrdef-dir">
														<code>dir</code>
													</a>
													<code>[optional]</code>
												</p>
											</li>
											<li>
												<p>
													<a href="#attrdef-id">
														<code>id</code>
													</a>
													<code>[optional]</code>
												</p>
											</li>
											<li>
												<p>
													<a href="#attrdef-xml-lang">
														<code>xml:lang</code>
													</a>
													<code>[optional]</code>
												</p>
											</li>
										</ul>
									</dd>

									<dt>Content Model</dt>
									<dd>
										<p>Text</p>
									</dd>
								</dl>

								<p>The <code>metadata</code> section MUST contain at least one <code>title</code>
									element containing the title for the EPUB Publication.</p>

								<aside class="example" title="A basic title element">
									<pre>&lt;metadata …>
   &lt;dc:title>
      Norwegian Wood
   &lt;/dc:title>
   …
&lt;/metadata>
</pre>
								</aside>

								<p id="title-order">The first <code>title</code> element in document order is the main
									title of the EPUB Publication (i.e., the primary one Reading Systems present to
									users).</p>

								<p>EPUB Creators should use only a single <code>title</code> element to ensure
									consistent rendering of the title in Reading Systems.</p>

								<div class="note">
									<p>Although it is possible to include more than one <code>title</code> element for
										multipart titles, Reading System support for additional <code>title</code>
										elements is inconsistent. Reading Systems may ignore the additional segments or
										combine them in unexpected ways.</p>

									<p>For example, the following example shows a basic multipart title:</p>

									<pre>&lt;metadata …>
   &lt;dc:title>
      THE LORD OF THE RINGS
   &lt;/dc:title>
   &lt;dc:title>
      Part One: The Fellowship of the Ring
   &lt;/dc:title>
   …
&lt;/metadata>
</pre>

									<p>The same title could instead be expressed using a single <code>dc:title</code>
										element as follows:</p>

									<pre>&lt;metadata …>
   &lt;dc:title>
       THE LORD OF THE RINGS, Part One:
       The Fellowship of the Ring
   &lt;/dc:title>
   …
&lt;/metadata>
</pre>

									<p>Previous versions of this specification recommended using the <a
											href="#sec-property-title-type"><code>title-type</code></a> and <a
											href="#sec-property-display-seq"><code>display-seq</code></a> properties to
										identify and format the segments of multipart titles (see the <a
											href="#cookbook-ex">Great Cookbooks example</a>). It is still possible to
										add these semantics but they are also not well supported.</p>
								</div>
							</section>

							<section id="sec-opf-dclanguage">
								<h6>The <code>language</code> Element</h6>

								<p>The [[DCTERMS]] <code>language</code> element specifies the language of the content
									of the <a>EPUB Publication</a>.</p>

								<dl id="elemdef-opf-dclanguage" class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>dc:language</code>
										</p>
									</dd>

									<dt>Namespace</dt>
									<dd>
										<p>
											<code>http://purl.org/dc/elements/1.1/</code>
										</p>
									</dd>

									<dt>Usage</dt>
									<dd>
										<p>REQUIRED child of <a class="codelink" href="#elemdef-opf-metadata"
													><code>metadata</code></a>. Repeatable.</p>
									</dd>

									<dt>Attributes</dt>
									<dd>
										<p>
											<a href="#attrdef-id">
												<code>id</code>
											</a>
											<code>[optional]</code>
										</p>
									</dd>

									<dt>Content Model</dt>
									<dd>
										<p>Text</p>
									</dd>
								</dl>

								<p>The <code>metadata</code> section MUST contain at least one <code>language</code>
									element. The <a>value</a> of each <code>language</code> element MUST be a <a
										data-cite="bcp47#section-2.2.9">well-formed language tag</a> [[BCP47]].</p>

								<aside class="example"
									title="Specifying U.S. English as the language of the EPUB Publication">
									<pre>&lt;metadata …>
   …
   &lt;dc:language>
      en-US
   &lt;/dc:language>
   …
&lt;/metadata></pre>
								</aside>

								<p>Although EPUB Creators MAY specify additional <code>language</code> elements for
									multilingual Publications, Reading Systems will treat the first
										<code>language</code> element in document order as the primary language of the
									EPUB Publication.</p>

								<div class="note">
									<p><a>Publication Resources</a> do not inherit their language from the
											<code>dc:language</code> element(s). EPUB Creators must set the language of
										a resource using the intrinsic methods of the format.</p>
								</div>
							</section>
						</section>

						<section id="sec-opf-dcmes-optional">
							<h6>DCMES Optional Elements</h6>

							<section id="sec-opf-dcmes-optional-def">
								<h6>General Definition</h6>

								<p>All [[DCTERMS]] elements except for <a href="#sec-opf-dcidentifier"
											><code>identifier</code></a>, <a href="#sec-opf-dclanguage"
											><code>language</code></a>, and <a href="#sec-opf-dctitle"
											><code>title</code></a> are designated as OPTIONAL. These elements conform
									to the following generalized definition:</p>

								<dl class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>contributor</code> | <code>coverage</code> | <code>creator</code> |
												<code>date</code> | <code>description</code> | <code>format</code> |
												<code>publisher</code> | <code>relation</code> | <code>rights</code> |
												<code>source</code> | <code>subject</code> | <code>type</code></p>
									</dd>

									<dt>Namespace</dt>
									<dd>
										<p>
											<code>http://purl.org/dc/elements/1.1/</code>
										</p>
									</dd>

									<dt>Usage</dt>
									<dd>
										<p>OPTIONAL child of <a class="codelink" href="#elemdef-opf-metadata"
													><code>metadata</code></a>. Repeatable.</p>
									</dd>

									<dt>Attributes</dt>
									<dd>
										<ul class="nomark">
											<li>
												<p><a href="#attrdef-dir"><code>dir</code></a>
													<code>[optional]</code> – only allowed on <code>contributor</code>,
														<code>coverage</code>, <code>creator</code>,
														<code>description</code>, <code>publisher</code>,
														<code>relation</code>, <code>rights</code>, and
														<code>subject</code>.</p>
											</li>
											<li>
												<p><a href="#attrdef-id"><code>id</code></a>
													<code>[optional]</code> – allowed on any element.</p>
											</li>
											<li>
												<p><a href="#attrdef-xml-lang"><code>xml:lang</code></a>
													<code>[optional]</code> – only allowed on <code>contributor</code>,
														<code>coverage</code>, <code>creator</code>,
														<code>description</code>, <code>publisher</code>,
														<code>relation</code>, <code>rights</code>, and
														<code>subject</code>.</p>
											</li>
										</ul>
									</dd>

									<dt>Content Model</dt>
									<dd>
										<p>Text</p>
									</dd>
								</dl>

								<p>This specification does not modify the [[DCTERMS]] element definitions except as
									noted in the following sections.</p>
							</section>

							<section id="sec-opf-dccontributor">
								<h6>The <code>contributor</code> Element</h6>

								<p>The [[DCTERMS]] <code>contributor</code> element is used to represent the name of a
									person, organization, etc. that played a secondary role in the creation of the
									content.</p>

								<p>The requirements for the <code>contributor</code> element are identical to those for
									the <a href="#sec-opf-dccreator"><code>creator</code> element</a> in all other
									respects.</p>
							</section>

							<section id="sec-opf-dccreator">
								<h6>The <code>creator</code> Element</h6>

								<p>The [[DCTERMS]] <code>creator</code> element represents the name of a person,
									organization, etc. responsible for the creation of the content. EPUB Creators can <a
										href="#subexpression">associate</a> a <a href="#role"><code>role</code>
										property</a> with the element to indicate the function the creator played.</p>

								<aside class="example" title="Specifying that a creator is an author">
									<p>In this example, the <a href="http://id.loc.gov/vocabulary/relators.html">MARC
											relators</a> scheme is used to indicate the role (i.e., the value
											<code>aut</code> indicates an author in MARC).</p>

									<pre>&lt;metadata …>
   …
   &lt;dc:creator
       id="creator">
      Haruki Murakami
   &lt;/dc:creator>
   &lt;meta
       refines="#creator"
       property="role"
       scheme="marc:relators"
       id="role">
      aut
   &lt;/meta>
   …
&lt;/metadata></pre>
								</aside>

								<p>The <code>creator</code> element SHOULD contain the name of the creator as EPUB
									Creators intend Reading Systems to display it to users.</p>

								<p>EPUB Creators MAY use the <a href="#file-as"><code>file-as</code> property</a>
									<a href="#subexpression">to associate</a> a normalized form of the creator's name,
									and the <a href="#alternate-script"><code>alternate-script</code> property</a> to
									represent the creator's name in another language or script.</p>

								<aside class="example"
									title="Expressing sorting and rendering information for a creator">
									<pre>&lt;metadata …>
   …
   &lt;dc:creator
       id="creator">
      Haruki Murakami
   &lt;/dc:creator>
   &lt;meta
       refines="#creator"
       property="alternate-script"
       xml:lang="ja">
      村上 春樹
   &lt;/meta>
   &lt;meta
       refines="#creator"
       property="file-as">
      Murakami, Haruki
   &lt;/meta>
   …
&lt;/metadata></pre>
								</aside>

								<p>If an EPUB Publication has more than one creator, EPUB Creators SHOULD specify each
									in a separate <code>creator</code> element.</p>

								<p>The document order of <code>creator</code> elements in the <code>metadata</code>
									section determines the display priority, where the first <code>creator</code>
									element encountered is the primary creator.</p>

								<aside class="example" title="Expressing the primary creator">
									<p>In this example, Lewis Carroll is the primary creator because he is listed
										first.</p>

									<pre>&lt;metadata …>
   …
   &lt;dc:creator
       id="creator01">
      Lewis Carroll
   &lt;/dc:creator>
   &lt;dc:creator
       id="creator02">
      John Tenniel
   &lt;/dc:creator>
   …
&lt;/metadata></pre>
								</aside>

								<p>EPUB Creators SHOULD represent secondary contributors using the <a
										href="#sec-opf-dccontributor"><code>contributor</code> element</a>.</p>
							</section>

							<section id="sec-opf-dcdate">
								<h6>The <code>date</code> Element</h6>

								<p>The [[DCTERMS]] <code>date</code> element MUST only be used to define the publication
									date of the <a>EPUB Publication</a>. The publication date is not the same as the <a
										href="#last-modified-date">last modified date</a> (the last time the EPUB
									Creator changed the EPUB Publication).</p>

								<p>It is RECOMMENDED that the date string conform to [[ISO8601]], particularly the
									subset expressed in W3C Date and Time Formats [[DateTime]], as such strings are both
									human and machine readable.</p>

								<aside class="example" title="Expressing the publication date">
									<pre>&lt;metadata …>
   …
   &lt;dc:date>
      2000-01-01T00:00:00Z
   &lt;/dc:date>
   …
&lt;/metadata></pre>
								</aside>

								<p>EPUB Creators SHOULD express additional dates using the specialized date properties
									available in the [[DCTERMS]] vocabulary, or similar.</p>

								<p>EPUB Publications MUST NOT contain more than one <code>date</code> element.</p>
							</section>

							<section id="sec-opf-dcsubject">
								<h6>The <code>subject</code> Element</h6>

								<p>The [[DCTERMS]] <code>subject</code> element identifies the subject of the EPUB
									Publication. EPUB Creators SHOULD set the <a>value</a> of the element to the
									human-readable heading or label, but MAY use a code value if the subject taxonomy
									does not provide a separate descriptive label.</p>

								<p>EPUB Creators MAY identify the system or scheme they drew the element's <a>value</a>
									from using the <a href="#authority"><code>authority</code> property</a>.</p>

								<p>When a scheme is identified, EPUB Creators MUST <a href="#subexpression"
										>associate</a> a subject code using the <a href="#term"><code>term</code>
										property</a>.</p>

								<aside class="example" title="Specifying a BISAC code and heading">
									<pre>&lt;metadata …>
   &lt;dc:subject id="subject01">
      FICTION / Occult &amp;amp; Supernatural
   &lt;/dc:subject>
   &lt;meta
       refines="#subject01"
       property="authority">
      BISAC
   &lt;/meta>
   &lt;meta
       refines="#subject01"
       property="term">
      FIC024000
   &lt;/meta>
&lt;/metadata</pre>
								</aside>

								<aside class="example" title="Specifying a URL for the scheme">
									<pre>&lt;metadata …>
   &lt;dc:subject id="sbj01">
      Number Theory
   &lt;/dc:subject>
   &lt;meta
       refines="#sbj01"
       property="authority">
      http://www.ams.org/msc/msc2010.html
   &lt;/meta>
   &lt;meta
      refines="#sbj01"
      property="term">
     11
  &lt;/meta>
&lt;/metadata></pre>
								</aside>

								<p>The <code>term</code> property MUST NOT be <a href="#subexpression">associated with a
											<code>subject</code> element</a> that does not specify a scheme.</p>

								<p>The <a>values</a> of the <code>subject</code> element and <code>term</code> property
									are case sensitive only when the designated scheme requires.</p>
							</section>

							<section id="sec-opf-dctype">
								<h6>The <code>type</code> Element</h6>

								<p>The [[DCTERMS]] <code>type</code> element is used to indicate that the EPUB
									Publication is of a specialized type (e.g., annotations or a dictionary packaged in
									EPUB format).</p>

								<p>EPUB Creators MAY use any text string as a <a>value</a>.</p>

								<div class="note">
									<p>The former <abbr title="International Digital Publishing Forum">IDPF</abbr> EPUB
										3 Working Group maintained an <a
											href="http://www.idpf.org/epub/vocab/package/types">informative registry of
											specialized EPUB Publication types</a> for use with this element. This
										Working Group no longer maintains this registry and does not anticipate
										developing new specialized publication types.</p>
								</div>
							</section>
						</section>

						<section id="sec-meta-elem">
							<h6>The <code>meta</code> Element</h6>

							<p>The <code>meta</code> element provides a generic means of including package metadata.</p>

							<dl id="elemdef-meta" class="elemdef">
								<dt>Element Name</dt>
								<dd>
									<p>
										<code>meta</code>
									</p>
								</dd>

								<dt>Usage</dt>
								<dd>
									<p>As child of the <a class="codelink" href="#elemdef-opf-metadata"
												><code>metadata</code></a> element. Repeatable.</p>
								</dd>

								<dt>Attributes</dt>
								<dd>
									<ul class="nomark">
										<li>
											<p>
												<a href="#attrdef-dir">
													<code>dir</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-id">
													<code>id</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-meta-property">
													<code>property</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-refines">
													<code>refines</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-scheme">
													<code>scheme</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-xml-lang">
													<code>xml:lang</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
									</ul>
								</dd>

								<dt>Content Model</dt>
								<dd>
									<p>Text</p>
								</dd>
							</dl>

							<p id="attrdef-meta-property">Each <code>meta</code> element defines a metadata expression.
								The <code>property</code> attribute takes a <a href="#sec-property-datatype"
										><var>property</var> data type value</a> that defines the statement made in the
								expression, and the text content of the element represents the assertion. (Refer to <a
									href="#sec-vocab-assoc"></a> for more information.)</p>

							<p>This specification defines two types of metadata expressions that EPUB Creators can
								define using the <code>meta</code> element:</p>

							<ul>
								<li id="primary-expression">A <em>primary expression</em> is one in which the expression
									defined in the <code>meta</code> element establishes some aspect of the <a>EPUB
										Publication</a>. A <code>meta</code> element that omits a refines attribute
									defines a primary expression.</li>
								<li id="subexpression">A <em>subexpression</em> is one in which the expression defined
									in the <code>meta</code> element is associated with another expression or resource
									using the <code>refines</code> attribute to enhance its meaning. A subexpression
									might refine a media clip, for example, by expressing its duration, or refine a
									creator or contributor expression by defining the role of the person.</li>
							</ul>

							<p>EPUB Creators MAY use subexpressions to refine the meaning of other subexpressions,
								thereby creating chains of information.</p>

							<p class="note">All the DCMES [[DCTERMS]] elements represent primary expressions, and permit
								refinement by meta element subexpressions.</p>

							<p>The <a href="#app-meta-property-vocab">Meta Properties Vocabulary</a> is the <a
									href="#sec-default-vocab">default vocabulary</a> for use with the
									<code>property</code> attribute.</p>

							<p>EPUB Creators MAY add terms from other vocabularies as defined in <a
									href="#sec-vocab-assoc"></a>.</p>

							<aside class="example" title="Using properties with reserved prefixes">
								<p>For the full list of reserved prefixes, refer to <a href="#sec-reserved-prefixes"
									></a>.</p>

								<pre>&lt;metadata …>
   …
   &lt;meta
       property="dcterms:modified">
      2016-02-29T12:34:56Z
   &lt;/meta>
   &lt;meta
       property="rendition:layout">
      pre-paginated
   &lt;/meta>
   &lt;meta
       property="media:active-class">
      my-active-item
   &lt;/meta>
   …
&lt;/metadata></pre>
							</aside>

							<p id="attrdef-scheme">The <code>scheme</code> attribute identifies the system or scheme the
								EPUB Creator obtained the element's <a>value</a> from. The value of the attribute MUST
								be a <a href="#sec-property-datatype"><var>property</var> data type value</a> that
								resolves to the resource that defines the scheme.</p>

							<aside class="example" title="Using values from a scheme">
								<p>In this example, the <code>scheme</code> attribute indicates that the <a>value</a> of
									the tag is from [[ONIX]] code list 5 (i.e., the value <code>15</code> indicates an
									13 digit ISBN).</p>
								<pre>&lt;metadata &#8230;>
   &#8230;
   &lt;meta
       refines="#isbn-id"
       property="identifier-type"
       scheme="onix:codelist5">
      15
   &lt;/meta>
   &#8230;
&lt;/metadata></pre>
							</aside>
						</section>

						<section id="sec-metadata-last-modified">
							<h6>Last Modified Date</h6>

							<p id="last-modified-date">The <code>metadata</code> section MUST contain exactly one
								[[DCTERMS]] <code>modified</code> property containing the last modification date. The
									<a>value</a> of this property MUST be an [[XMLSCHEMA-2]] dateTime conformant date of
								the form: <code>CCYY-MM-DDThh:mm:ssZ</code></p>

							<p>EPUB Creators MUST express the last modification date in Coordinated Universal Time (UTC)
								and MUST terminate it with the "<code>Z</code>" (Zulu) time zone indicator.</p>

							<aside class="example" title="Expressing a last modification date">
								<pre>&lt;metadata …>
   …
   &lt;meta
       property="dcterms:modified">
      2016-01-01T00:00:01Z
   &lt;/meta>
   …
&lt;/metadata></pre>
							</aside>

							<p>EPUB Creators should update the last modified date whenever they make changes to the EPUB
								Publication.</p>

							<p>EPUB Creators MAY specify additional modified properties in the Package Document
								metadata, but they MUST have a different subject (i.e., they require a
									<code>refines</code> attribute that references an element or resource).</p>

							<div class="note">
								<p>The requirements for the last modification date are to ensure compatibility with
									earlier versions of EPUB 3 that defined a <a
										href="https://www.w3.org/publishing/epub32/epub-packages.html#sec-metadata-elem-identifiers-pid"
										>release identifier</a> [[EPUBPackages-32]] for EPUB Publications.</p>
							</div>
						</section>

						<section id="sec-link-elem">
							<h6>The <code>link</code> Element</h6>

							<p>The <code>link</code> element associates resources with an <a>EPUB Publication</a>, such
								as metadata records.</p>

							<dl id="elemdef-opf-link" class="elemdef">
								<dt>Element Name</dt>
								<dd>
									<p>
										<code>link</code>
									</p>
								</dd>

								<dt>Usage</dt>
								<dd>
									<p>As a child of <a class="codelink" href="#elemdef-opf-metadata"
												><code>metadata</code></a>. Repeatable.</p>
								</dd>

								<dt>Attributes</dt>
								<dd>
									<ul class="nomark">
										<li>
											<p>
												<a href="#attrdef-href">
													<code>href</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-hreflang">
													<code>hreflang</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-id">
													<code>id</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-link-media-type">
													<code>media-type</code>
												</a>
												<code>[conditionally required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-properties">
													<code>properties</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-refines">
													<code>refines</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-link-rel">
													<code>rel</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
									</ul>
								</dd>

								<dt>Content Model</dt>
								<dd>
									<p>Empty</p>
								</dd>
							</dl>

							<p>The <a href="#sec-metadata-elem"><code>metadata</code> element</a> MAY contain zero or
								more <code>link</code> elements, each of which identifies the location of a linked
								resource in its REQUIRED <code>href</code> attribute</p>

							<p id="linked-res-manifest">Linked Resources are <a>Publication Resources</a> only when they
								are:</p>

							<ul>
								<li>
									<p>referenced from the <a href="#sec-spine-elem">spine</a>; or</p>
								</li>
								<li>
									<p>included or embedded in an EPUB Content Document (e.g., a metadata record
										serialized as RDFa [[?RDFA-CORE]] or JSON-LD [[?JSON-LD11]] embedded in an
										[[HTML]] <a data-cite="html#the-script-element"><code>script</code>
										element</a>).</p>
								</li>
							</ul>

							<p>In all other cases (e.g., when linking to standalone [[?ONIX]] or [[?XMP]] records), the
								linked resources are not Publication Resources (i.e., are not subject to <a
									href="#sec-core-media-types">Core Media Type requirements</a>) and EPUB Creators
								MUST NOT list them in the <a href="#sec-manifest-elem">manifest</a>.</p>

							<aside class="example" title="Reference to a record embedded in an XHTML Content Document">
								<p>In this example, the metadata record is embedded in a <code>script</code> element.
									Note that the media type of the embedded record (i.e.,
										<code>application/ld+json</code>) is obtained from the <code>type</code>
									attribute on the <code>script</code> element; it is not specified in the
										<code>link</code> element.</p>

								<pre>Package Document:

&lt;package …>
   &lt;metadata …>
      … 
      &lt;link rel="record"
          href="front.xhtml#meta-json"
          media-type="application/xhtml+xml"
          hreflang="en"/>
      …
   &lt;/metadata>
   …
&lt;/package>

XHTML:

&lt;html …>
   &lt;head>
      …
      &lt;script id="meta-json" type="application/ld+json">
          "@context" : "http://schema.org",
          "name" : "…",
         …
      &lt;/script>
      …
   &lt;/head>
   &lt;body>
      …
   &lt;/body>
&lt;/html></pre>
							</aside>

							<p id="linked-res-location">EPUB Creators MAY locate linked resources <a
									data-lt="Local Resource">locally</a> or <a data-lt="Remote Resource">remotely</a>,
								but should consider that <a>Reading Systems</a> are not required to retrieve to Remote
								Resources (i.e., Reading Systems might not make Remote Resources available).</p>

							<p id="attrdef-link-media-type">The <a href="#attrdef-media-type"><code>media-type</code>
									attribute</a> is OPTIONAL when a linked resource is located outside the EPUB
								Container, as more than one media type could be served from the same URL [[URL]]. EPUB
								Creators MUST specify the attribute for all <a>Local Resources</a>.</p>

							<p id="attrdef-hreflang">The OPTIONAL <code>hreflang</code> attribute identifies the
								language of the linked resource. The value MUST be a <a data-cite="bcp47#section-2.2.9"
									>well-formed language tag</a> [[BCP47]].</p>

							<p id="attrdef-link-rel">The REQUIRED <code>rel</code> attribute takes a space-separated
								list of <a href="#sec-property-datatype">property</a> values that establish the
								relationship the resource has with the EPUB Publication.</p>

							<aside class="example" title="Linking to a MARC XML record">
								<pre>&lt;metadata …>
   …
   &lt;link
       rel="record"
       href="meta/9780000000001.xml" 
       media-type="application/marc"/>
   …
&lt;/metadata></pre>
							</aside>

							<p>The value of the <code>media-type</code> attribute is not always sufficient to identify
								the type of linked resource (e.g., many XML-based record formats use the media type
									"<code>application/xml</code>"). To aid Reading Systems in the identification of
								such generic resources, the <code>properties</code> attribute can specify a semantic
								identifier.</p>

							<aside class="example" title="Identifying a record type via a property">
								<p>In this example, the <code>properties</code> attribute identifies the link is to a
									XMP record.</p>

								<pre>&lt;metadata …>
   …
   &lt;link rel="record"
       href="http://example.org/meta/12389347?format=xmp"
       media-type="application/xml"
       properties="xmp"/>
   …
&lt;/metadata></pre>
							</aside>

							<p>The <a href="#app-link-vocab">Metadata Link Vocabulary</a> is the <a
									href="#sec-default-vocab">default vocabulary</a> for the <code>rel</code> and
									<code>properties</code> attributes.</p>

							<p><a>EPUB Creators</a> MAY add relationships and properties from other vocabularies as
								defined in <a href="#sec-vocab-assoc"></a>.</p>

							<aside class="example" title="Declaring a new link relationship">
								<p>In this example, the <code>link</code> element is used to associate an author's home
									page using the FOAF vocabulary. Note that as <code>foaf</code> is not a <a
										href="#sec-metadata-reserved-prefixes">predefined prefix</a>, it must be
									declared in the <a href="#attrdef-package-prefix">prefix attribute</a>.</p>

								<pre>&lt;package
    …
    prefix="foaf: http://xmlns.com/foaf/spec/">
   &lt;metadata …>
      … 
      &lt;link
          refines="#creator01"
          rel="foaf:homepage"
          href="http://example.org/book-info/12389347" />
      …
   &lt;/metadata> 
   …
&lt;/package>
</pre>
							</aside>

							<p id="sec-linked-records" data-tests="#pkg-linked-records">EPUB Creators MAY provide one or
								more <a href="#record">linked metadata records</a> to enhance the information available
								to Reading Systems, but Reading Systems may ignore these records.</p>

							<p>When a Reading System <a data-cite="epub-rs-33#sec-linked-records">processes linked
									records</a> [[EPUB-RS-33]], the document order of <code>link</code> elements is used
								to determine which has the highest priority in the case of conflicts (i.e., first in
								document order has the highest priority).</p>

							<aside class="example" title="Specifying metadata precedence">
								<p>In this example, the first remote record has the highest precedence, the local record
									has the next highest, and the metadata in the <code>metadata</code> element the
									lowest.</p>

								<pre>&lt;metadata …>
   &lt;link rel="record"
       href="http://example.org/onix/12389347"
       media-type="application/xml"
       properties="onix" />
    
   &lt;link rel="record"
       href="meta/meta.jsonld"
       media-type="application/ld+json" />
    
    …
&lt;/metadata></pre>
							</aside>

							<div class="note">
								<p>Due to the variety of metadata record formats and serializations that an EPUB Creator
									can link to an EPUB Publication, and the complexity of comparing metadata properties
									between them, this specification does not require Reading Systems to process linked
									records.</p>
							</div>

							<p>In addition to full records, EPUB Creators MAY also use the <code>link</code> element to
								identify individual metadata properties available in an alternative format.</p>

							<aside class="example" title="Link to a description">
								<p>In this example, the description of the EPUB Publication is contained in an HTML
									document.</p>

								<pre>&lt;metadata …>
   …
   &lt;link
       rel="dcterms:description"
       href="description.html"
       media-type="text/html"/>
   …
&lt;/metadata></pre>
							</aside>
						</section>
					</section>

					<section id="sec-pkg-manifest">
						<h5>Manifest Section</h5>

						<section id="sec-manifest-elem">
							<h6>The <code>manifest</code> Element</h6>

							<p>The <code>manifest</code> element provides an exhaustive list of <a>Publication
									Resources</a> used in the rendering of the content.</p>

							<dl id="elemdef-opf-manifest" class="elemdef">
								<dt>Element name</dt>
								<dd>
									<p>
										<code>manifest</code>
									</p>
								</dd>

								<dt>Usage</dt>
								<dd>
									<p>REQUIRED second child of <a class="codelink" href="#elemdef-opf-package"
												><code>package</code></a>, following <a class="codelink"
											href="#elemdef-opf-metadata"><code>metadata</code></a>.</p>
								</dd>

								<dt>Attributes</dt>
								<dd>
									<p>
										<a href="#attrdef-id">
											<code>id</code>
										</a>
										<code>[optional]</code>
									</p>
								</dd>

								<dt>Content Model</dt>
								<dd>
									<p>
										<a class="codelink" href="#elemdef-package-item">
											<code>item</code>
										</a>
										<code>[1 or more]</code>
									</p>
								</dd>
							</dl>

							<p id="confreq-rendition-manifest">EPUB Creators MUST list all <a>Publication Resources</a>
								in the <code>manifest</code>, regardless of whether they are <a data-lt="Local Resource"
									>Local</a> or <a>Remote Resources</a>, using <a class="codelink"
									href="#sec-item-elem"><code>item</code> elements</a>.</p>

							<p>Note that the <code>manifest</code> is not self-referencing: EPUB Creators MUST NOT
								specify an <code>item</code> element that refers to the Package Document itself.</p>

							<div class="note">
								<p>Failure to provide a complete manifest of resources may lead to rendering issues.
									Reading Systems might not unzip such resources or could prevent access to them for
									security reasons.</p>
							</div>
						</section>

						<section id="sec-item-elem">
							<h6>The <code>item</code> Element</h6>

							<p>The <code>item</code> element represents a <a>Publication Resource</a>.</p>

							<dl id="elemdef-package-item" class="elemdef">
								<dt>Element Name</dt>
								<dd>
									<p>
										<code>item</code>
									</p>
								</dd>

								<dt>Usage</dt>
								<dd>
									<p>As a child of <a class="codelink" href="#elemdef-opf-manifest"
												><code>manifest</code></a>. Repeatable.</p>
								</dd>

								<dt>Attributes</dt>
								<dd>
									<ul class="nomark">
										<li>
											<p>
												<a href="#attrdef-item-fallback">
													<code>fallback</code>
												</a>
												<code>[conditionally required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-href">
													<code>href</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-id">
													<code>id</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-item-media-overlay">
													<code>media-overlay</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-item-media-type">
													<code>media-type</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-properties">
													<code>properties</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
									</ul>
								</dd>

								<dt>Content Model</dt>
								<dd>
									<p>Empty</p>
								</dd>
							</dl>

							<p>Each <code>item</code> element identifies a <a>Publication Resource</a> by the URL
								[[URL]] in its <code>href</code> attribute. The value MUST be an <a
									data-cite="url#absolute-url-string">absolute-</a> or <a
									data-cite="url#path-relative-scheme-less-url-string"
									>path-relative-scheme-less-URL</a> string [[URL]]. EPUB Creators MUST ensure each
								URL is unique within the <code>manifest</code> scope after <a
									href="#sec-parse-package-urls">parsing</a>.</p>

							<p id="attrdef-item-media-type">The Publication Resource identified by an <code>item</code>
								element MUST conform to the applicable specification(s) as inferred from the MIME media
								type provided in the <a href="#attrdef-media-type"><code>media-type</code>
								attribute</a>. For <a>Core Media Type Resources</a>, EPUB Creators MUST use the media
								type designated in <a href="#sec-cmt-supported"></a>.</p>

							<p id="attrdef-item-fallback">The <code>fallback</code> attribute takes an IDREF [[XML]]
								that identifies a fallback for the Publication Resource referenced from the
									<code>item</code> element, as defined in <a
									href="#sec-foreign-restrictions-manifest"></a>.</p>

							<p id="attrdef-item-properties">The <a href="#app-item-properties-vocab">Manifest Properties
									Vocabulary</a> is the <a href="#sec-default-vocab">default vocabulary</a> for the
									<code>properties</code> attribute.</p>

							<p>EPUB Creators MAY add terms from other vocabularies as defined in <a
									href="#sec-vocab-assoc"></a>.</p>

							<p>EPUB Creators MUST declare all applicable descriptive metadata properties for each
								Publication Resource in this attribute (e.g., if the resource is the <a
									href="#sec-cover-image">cover image</a>, contains <a href="#sec-scripted"
									>scripting</a>, or references <a href="#sec-remote-resources">remote
								resources</a>).</p>

							<p>EPUB Creators MUST declare exactly one <code>item</code> as the <a>EPUB Navigation
									Document</a> using the <code>nav</code> property.</p>

							<p id="attrdef-item-media-overlay">The <code>media-overlay</code> attribute takes an IDREF
								[[XML]] that identifies the <a>Media Overlay Document</a> for the resource described by
								this <code>item</code>. Refer to <a href="#sec-docs-package"></a> for more
								information.</p>

							<div class="note">
								<p>The order of <code>item</code> elements in the <code>manifest</code> is not
									significant. The <a class="codelink" href="#sec-spine-elem"><code>spine</code>
										element</a> provides the presentation sequence of content documents.</p>
							</div>

							<section id="sec-foreign-restrictions-manifest">
								<h6>Manifest Fallbacks</h6>

								<p>Manifest fallbacks are a feature of the <a>Package Document</a> that create fallback
									chains to Core Media Type Resources. They are used to create fallbacks for Foreign
									Resources in the <a href="#sec-spine-elem">spine</a> and when intrinsic fallback
									capabilities are not available (e.g., for the [[HTML]] <a
										data-cite="html#the-img-element"><code>img</code></a> element).</p>

								<p>EPUB Creators MAY reference Foreign Resources in contexts in which an intrinsic
									fallback cannot be provided (e.g., directly from <a>spine</a>
									<a href="#elemdef-spine-itemref"><code>itemref</code> elements</a>; from [[HTML]]
										<code>img</code>, <code>iframe</code> and <code>link</code> elements in <a>XHTML
										Content Documents</a>; and from <code>@import</code> rules in CSS Style Sheets).
									EPUB Creators MUST provide manifest fallbacks in such cases.</p>

								<p>EPUB Creators MAY also provide fallbacks for <a>Core Media Type Resources</a> (e.g.,
									to provide a static alternative to a <a>Scripted Content Document</a>).</p>

								<p>The <a href="#attrdef-item-fallback"><code>fallback</code> attribute</a> on the
										<a>manifest</a>
									<a href="#elemdef-package-item"><code>item</code></a> element specifies the fallback
									for the referenced Publication Resource. The <code>fallback</code> attribute's IDREF
									[[XML]] value MUST resolve to another <code>item</code> in the
									<code>manifest</code>. This fallback <code>item</code> MAY itself specify another
									fallback <code>item</code>, and so on.</p>

								<p>The ordered list of all the ID references that a Reading System can reach, starting
									from a given item's <code>fallback</code> attribute, represents the <em>fallback
										chain</em> for that item. The order of the resources in the fallback chain
									represents the EPUB Creator's preferred fallback order.</p>

								<p>Fallback chains MUST conform to one of the following requirements, as
									appropriate:</p>

								<ul>
									<li>
										<p>For Foreign Resources referenced directly from spine <a
												href="#elemdef-spine-itemref"><code>itemref</code> elements</a>, the
											chain MUST contain at least one <a>EPUB Content Document</a>.</p>
									</li>
									<li>
										<p>For Foreign Resources for which an EPUB Creator cannot provide an intrinsic
											fallback, the chain MUST contain at least one <a>Core Media Type
												Resource</a>.</p>
									</li>
								</ul>
								<p>Fallback chains MUST NOT contain circular or self-references to <code>item</code>
									elements in the chain.</p>

								<p>EPUB Creators MAY provide fallbacks for <a>Top-Level Content Documents</a> that are
									EPUB Content Documents (e.g., to provide <a href="#confreq-cd-scripted-flbk"
										>fallbacks for scripted content</a>).</p>

								<div class="note">
									<p>As it is not possible to use manifest fallbacks for resources represented in <a
											href="#sec-data-urls">data URLs</a>, EPUB Creators can only represent
										Foreign Resources as data URLs where an intrinsic fallback mechanism is
										available.</p>

								</div>
							</section>

							<section id="sec-item-elem-examples">
								<h6>Examples</h6>

								<aside class="example" id="example-manifest-cmt"
									title="A manifest with only Core Media Type Resources">
									<pre>&lt;package …>
   …
   &lt;manifest>
      &lt;item
          id="nav" 
          href="nav.xhtml" 
          properties="nav"
          media-type="application/xhtml+xml"/>
      &lt;item
          id="intro" 
          href="intro.xhtml" 
          media-type="application/xhtml+xml"/>
      &lt;item
          id="c1" 
          href="chap1.xhtml" 
          media-type="application/xhtml+xml"/>
      &lt;item
          id="c1-answerkey" 
          href="chap1-answerkey.xhtml" 
          media-type="application/xhtml+xml"/>
      &lt;item
          id="c2" 
          href="chap2.xhtml" 
          media-type="application/xhtml+xml"/>
      &lt;item
          id="c2-answerkey" 
          href="chap2-answerkey.xhtml" 
          media-type="application/xhtml+xml"/>
      &lt;item
          id="c3" 
          href="chap3.xhtml" 
          media-type="application/xhtml+xml"/>
      &lt;item
          id="c3-answerkey" 
          href="chap3-answerkey.xhtml" 
          media-type="application/xhtml+xml"/>    
      &lt;item
          id="notes" 
          href="notes.xhtml" 
          media-type="application/xhtml+xml"/>
      &lt;item
          id="cover" 
          href="./images/cover.svg" 
          properties="cover-image"
          media-type="image/svg+xml"/>
      &lt;item
          id="f1" 
          href="./images/fig1.jpg" 
          media-type="image/jpeg"/>
      &lt;item
          id="f2" 
          href="./images/fig2.jpg" 
          media-type="image/jpeg"/>
      &lt;item
          id="css" 
          href="./style/book.css" 
          media-type="text/css"/>   
   &lt;/manifest>
   …
&lt;/package></pre>
								</aside>

								<aside class="example" id="example-manifest-flbk"
									title="Foreign Resource in Spine with Fallback">
									<p>The following example shows the <a href="#sec-foreign-restrictions-manifest"
											>fallback chain mechanism</a> allowing a <a>Foreign Resource</a> (JPEG) to
										be listed in the spine with fallback to an SVG Content Document.</p>

									<pre>&lt;package …>
   …
   &lt;manifest>
      …
      &lt;item
          id="page-001"
          href="images/page-001.jpg"
          media-type="image/jpeg"
          fallback="#page-001-svg"/>

      &lt;item
          id="page-001-svg"
          href="images/page-001.svg"
          media-type="image/svg+xml"/>
      … 
      …
   &lt;/manifest>
   &lt;spine>
      …
      &lt;itemref idref="page-001"/>
      …
   &lt;/spine>
&lt;/package></pre>
								</aside>

								<aside class="example"
									title="Embedded Core Media Type with Link to View as Top-Level Content Document">
									<p>The following example shows a JPEG embedded in an EPUB Content Document (via the
											<code>img</code> tag) with a hyperlink that allows it to open as a separate
										page (e.g., for easier zooming). Although embedding the image using the
											<code>img</code> tag does not require it to be listed in the <a
											href="#sec-spine-elem">spine</a> or have a fallback, adding the hyperlink
										causes the document to open as a <a>Top-Level Content Document</a>. As a result,
										the EPUB Creator must list the image in the spine and include a fallback to an
										EPUB Content Document.</p>

									<pre>XHTML:
&lt;html …>
   …
   &lt;body>
      …
      &lt;img
          src="images/infographic.jpg"
          alt="…"/>
      &lt;a
          href="images/infographic.jpg">
         Expand Image
      &lt;/a>
      …
   &lt;/body>
&lt;/html>

Package Document:
&lt;package …>
   …
   &lt;manifest>
      …
      &lt;item
          id="img01"
          href="images/infographic.jpg"
          media-type="image/jpeg"
          fallback="#infographic-svg"/>

      &lt;item
          id="infographic-svg"
          href="images/infographic.svg"
          media-type="image/svg+xml"/>
      …
   &lt;/manifest>
   &lt;spine>
      …
      &lt;itemref
          idref="img01"
          properties="layout-pre-paginated"
          linear="no"/>
      …
   &lt;/spine>
&lt;/package></pre>
								</aside>

								<aside class="example"
									title="Link to View Foreign Resource as Top-Level Content Document">
									<p>The following example shows a link to the raw CSV data file. The data will open
										in the Reading System as a <a>Top-Level Content Document</a> so EPUB Creators
										must list it in the spine and provide a fallback to an <a>EPUB Content
											Document</a>. Because there is no guarantee users will be able to access the
										data in its raw form, instructions on how to extract the file from the <a>EPUB
											Container</a> are also provided.</p>

									<pre>XHTML:
&lt;html …>
   …
   &lt;body>
      …
      &lt;p>
         &lt;a href="../data/raw.csv">
            [Open the raw CSV data for this project.]
         &lt;/a>
      &lt;/p>
      &lt;p class="small">To extract the data file
         from this publication, unzip the EPUB file.
         The data is located in the
      	&lt;code>/EPUB/data/raw.csv&lt;/code> file.
      &lt;/p>
      …
   &lt;/body>
&lt;/html>

Package Document:
&lt;package …>
   …
   &lt;manifest>
      …
      &lt;item
          id="data01"
          href="data/raw.csv"
          media-type="text/csv"
          fallback="#data-html"/>

      &lt;item
          id="data-html"
          href="xhtml/data-table.html"
          media-type="application/xhtml+xml"/>
      …
   &lt;/manifest>
   &lt;spine>
      …
      &lt;itemref
          idref="data01"
          linear="no"/>
      …
   &lt;/spine>
&lt;/package></pre>
								</aside>

								<aside class="example" title="Remote Resources that are Publication Resources">
									<p>The following example shows a reference to a remote audio file. Because the
											<code>audio</code> element embeds the audio in its EPUB Content Document,
										the file is considered a Publication Resource. EPUB Creators therefore must list
										the audio file in the manifest and indicate that its parent EPUB Content
										Document contains a remote resource.</p>

									<pre>XHTML:
&lt;html …>
   …
   &lt;body>
      …
      &lt;audio
          src="http://www.example.com/book/audio/ch01.mp4"
          controls="controls"/>
      …
   &lt;/body>
&lt;/html>

Package Document:
&lt;package …>
   …
   &lt;manifest>
      …
      &lt;item
          id="audio01"
          href="http://www.example.com/book/audio/ch01.mp4"
          media-type="audio/mp4"/>
   
      &lt;item
          id="c01"
          href="XHTML/chapter001.xhtml"
          media-type="application/xhtml+xml"
          properties="remote-resources"/>
      …
   &lt;/manifest>
   …
&lt;/package></pre>
								</aside>

								<aside class="example" title="External Resources that are not Publication Resources">
									<p>The following example shows a hyperlink to an audio file hosted on the web.
										Reading Systems will open such external content in a new browser window; it is
										not rendered within the publication. In this case, EPUB Creators do not list the
										file in the manifest because it is not a Publication Resource.</p>

									<pre>XHTML:
&lt;html …>
   …
   &lt;body>
      …
      &lt;a
          href="http://www.example.com/book/audio/ch01.mp4">
         Listen to audio
      &lt;/a>
      …
   &lt;/body>
&lt;/html>

Manifest:
No Entry</pre>
								</aside>
							</section>
						</section>

						<section id="sec-opf-bindings">
							<h6>The <code>bindings</code> Element (Deprecated)</h6>

							<p>The <code>bindings</code> element defines a set of custom handlers for media types not
								supported by this specification. Its use is <a href="#deprecated">deprecated</a>.</p>

							<p>Refer to [[EPUBPublications-301]] for more information about this element.</p>
						</section>
					</section>

					<section id="sec-pkg-spine">
						<h5>Spine Section</h5>

						<section id="sec-spine-elem">
							<h6>The <code>spine</code> Element</h6>

							<p>The <code>spine</code> element defines an ordered list of <a href="#sec-itemref-elem"
									>manifest <code>item</code> references</a> that represent the default reading
								order.</p>

							<dl id="elemdef-opf-spine" class="elemdef">
								<dt>Element name</dt>
								<dd>
									<p>
										<code>spine</code>
									</p>
								</dd>

								<dt>Usage</dt>
								<dd>
									<p>REQUIRED third child of <a class="codelink" href="#elemdef-opf-package"
												><code>package</code></a>, following <a class="codelink"
											href="#elemdef-opf-manifest"><code>manifest</code></a>.</p>
								</dd>

								<dt>Attributes</dt>
								<dd>
									<ul class="nomark">
										<li>
											<p>
												<a href="#attrdef-id">
													<code>id</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-spine-page-progression-direction">
													<code>page-progression-direction</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#sec-opf2-ncx">
													<code>toc</code>
												</a>
												<code>[optional]</code>
												<a href="#legacy" class="legacy">(legacy)</a>
											</p>
										</li>
									</ul>
								</dd>

								<dt>Content Model</dt>
								<dd>
									<p>
										<a class="codelink" href="#elemdef-spine-itemref">
											<code>itemref</code>
										</a>
										<code>[1 or more]</code>
									</p>
								</dd>
							</dl>

							<p id="confreq-pub-resource">The <code>spine</code> MUST specify at least one <a>Publication
									Resource</a>.</p>

							<p id="spine-inclusion-req">EPUB Creators MUST list in the <code>spine</code> all
								Publication Resources that are hyperlinked to from Publication Resources in the
									<code>spine</code>, where hyperlinking encompasses any linking mechanism that
								requires the user to navigate away from the current resource. Common hyperlinking
								mechanisms include the <code>href</code> attribute of the [[HTML]] <a
									data-cite="html#the-a-element"><code>a</code></a> and <a
									data-cite="html#the-area-element"><code>area</code></a> elements and scripted links
								(e.g., using DOM Events and/or form elements). The requirement to list hyperlinked
								resources applies recursively (i.e., EPUB Creators must list all Publication Resources
								hyperlinked from hyperlinked Publication Resources, and so on.).</p>

							<p>EPUB Creators also MUST list in the <code>spine</code> all Publication Resources
								hyperlinked to from the <a>EPUB Navigation Document</a>, regardless of whether EPUB
								Creators include the Navigation Document in the <code>spine</code>.</p>

							<div class="note">
								<p>As <a>Remote Resources</a> referenced from hyperlinks are not Publication Resources,
									they are not subject to the requirement to include in the spine (e.g., Web pages and
									resources).</p>

							</div>

							<p>Embedded Publication Resources (e.g., via the [[HTML]] <a
									data-cite="html#the-iframe-element"><code>iframe</code></a> element) must not be
								listed in the <code>spine</code>.</p>

							<p id="attrdef-spine-page-progression-direction">The <code>page-progression-direction</code>
								attribute sets the global direction in which the content flows. Allowed values are
									<code>ltr</code> (left-to-right), <code>rtl</code> (right-to-left) and
									<code>default</code>. When EPUB Creators specify the <code>default</code> value,
								they are expressing no preference and the Reading System can choose the rendering
								direction.</p>

							<p>Although the <code>page-progression-direction</code> attribute sets the global flow
								direction, individual Content Documents and parts of Content Documents MAY override this
								setting (e.g., via the <code>writing-mode</code> CSS property). Reading Systems can also
								provide mechanisms to override the default direction (e.g., buttons or settings that
								allow the application of alternate style sheets).</p>

							<p>The <a href="#legacy">legacy</a>
								<code>toc</code> attribute takes an IDREF [[XML]] that identifies the manifest item that
								represents the <a href="#sec-opf2-ncx">NCX</a>.</p>
						</section>

						<section id="sec-itemref-elem">
							<h6>The <code>itemref</code> Element</h6>

							<p>The <code>itemref</code> element identifies a <a>Publication Resource</a> in the default
								reading order.</p>

							<dl id="elemdef-spine-itemref" class="elemdef">
								<dt>Element Name</dt>
								<dd>
									<p>
										<code>itemref</code>
									</p>
								</dd>

								<dt>Usage</dt>
								<dd>
									<p>As a child of <a class="codelink" href="#elemdef-opf-spine"
											><code>spine</code></a>. Repeatable.</p>
								</dd>

								<dt>Attributes</dt>
								<dd>
									<ul class="nomark">
										<li>
											<p>
												<a href="#attrdef-id">
													<code>id</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-itemref-idref">
													<code>idref</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-itemref-linear">
													<code>linear</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-properties">
													<code>properties</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
									</ul>
								</dd>

								<dt>Content Model</dt>
								<dd>
									<p>Empty</p>
								</dd>
							</dl>

							<p id="attrdef-itemref-idref">Each itemref element MUST reference the ID of an <a
									href="#elemdef-package-item"><code>item</code></a> in the <a>manifest</a> via the
								IDREF [[XML]] in its <code>idref</code> attribute, and item IDs MUST NOT be referenced
								more than once. </p>

							<p id="confreq-spine-itemtypes">Each referenced manifest <code>item</code> MUST be either a)
								an <a>EPUB Content Document</a> or b) another type of <a>Publication Resource</a> which,
									<em>regardless of whether it is a <a>Core Media Type Resource</a> or a <a>Foreign
										Resource</a></em>, MUST include an EPUB Content Document in its <a
									href="#sec-foreign-restrictions-manifest">fallback chain</a>.</p>

							<div class="note">
								<p>Although EPUB Publications <a href="#confreq-nav">require an EPUB Navigation
										Document</a>, it is not mandatory to include it in the <code>spine</code>.</p>

							</div>

							<p id="attrdef-itemref-linear">The <code>linear</code> attribute indicates whether the
								referenced <code>item</code> contains content that contributes to the primary reading
								order and that Reading Systems must read sequentially ("<code>yes</code>"), or auxiliary
								content that enhances or augments the primary content that Reading Systems can access
								out of sequence ("<code>no</code>"). Examples of auxiliary content include notes,
								descriptions, and answer keys.</p>

							<p>The <code>linear</code> attribute allows Reading Systems to distinguish content that a
								user should access as part of the default reading order from supplementary content which
								a Reading System might, for example, present in a popup window or omit from an aural
								rendering.</p>

							<p>Specifying that content is non-linear does not require Reading Systems to present it in a
								specific way, however; it is only a hint to the purpose. Reading Systems may present
								non-linear content where it occurs in the spine, for example, or may skip it until users
								reach the end of the spine.</p>

							<div class="note">
								<p>EPUB Creators should list non-linear content at the end of the spine except when it
									makes sense for users to encounter it between linear spine items.</p>

							</div>

							<p id="linear-itemrefs">The <a>spine</a> MUST contain at least one linear
									<code>itemref</code> element &#8212; whose <code>linear</code> attribute value is
								either explicitly or implicitly set to "<code>yes</code>". Reading Systems will assume
								the value "<code>yes</code>" for <code>itemref</code> elements without a
									<code>linear</code> attribute.</p>

							<p id="confreq-spine-nonlinear" data-tests="#pkg-spine-nonlinear">EPUB Creators MUST provide
								a means of accessing all non-linear content (e.g., hyperlinks in the content or from the
									<a href="#sec-nav">EPUB Navigation Document</a>).</p>

							<p id="attrdef-itemref-properties">The <a href="#app-itemref-properties-vocab">Spine
									Properties Vocabulary</a> is the <a href="#sec-default-vocab">default vocabulary</a>
								for the <code>properties</code> attribute.</p>

							<p>EPUB Creators MAY add terms from other vocabularies as defined in <a
									href="#sec-vocab-assoc"></a>.</p>

							<aside class="example" title="A basic spine">
								<p>In this example, the spine entries correspond to <a href="#example-manifest-cmt">the
										manifest example above</a>.</p>

								<pre>&lt;spine
    page-progression-direction="ltr">
   &lt;itemref
       idref="intro"/>
   &lt;itemref
       idref="c1"/>
   &lt;itemref
       idref="c1-answerkey"
       linear="no"/>
   &lt;itemref
       idref="c2"/>
   &lt;itemref
       idref="c2-answerkey"
       linear="no"/>
   &lt;itemref
       idref="c3"/>
   &lt;itemref
       idref="c3-answerkey"
       linear="no"/>
   &lt;itemref
       idref="notes"
       linear="no"/>
&lt;/spine>
</pre>
							</aside>
						</section>
					</section>

					<section id="sec-pkg-collections">
						<h5>Collections</h5>

						<section id="sec-collection-elem">
							<h6>The <code>collection</code> Element</h6>

							<p>The <code>collection</code> element defines a related group of resources.</p>

							<dl id="elemdef-collection" class="elemdef">
								<dt>Element Name</dt>
								<dd>
									<p>
										<code>collection</code>
									</p>
								</dd>

								<dt>Usage</dt>
								<dd>
									<p>OPTIONAL sixth element of <code>package</code>. Repeatable.</p>
								</dd>

								<dt>Attributes</dt>
								<dd>
									<ul class="nomark">
										<li>
											<p>
												<a href="#attrdef-dir">
													<code>dir</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-id">
													<code>id</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-collection-role">
													<code>role</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-xml-lang">
													<code>xml:lang</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
									</ul>
								</dd>

								<dt>Content Model</dt>
								<dd>
									<p>In this order: <a href="#elemdef-collection-metadata"><code>metadata</code></a>
										<code>[0 or 1]</code>, ( <a href="#elemdef-collection"
											><code>collection</code></a>
										<code>[1 or more]</code> or ( <a href="#elemdef-collection"
												><code>collection</code></a>
										<code>[0 or more]</code>, <a href="#elemdef-collection-link"
											><code>link</code></a>
										<code>[1 or more]</code> ))</p>
								</dd>
							</dl>

							<p>The <code>collection</code> element allows EPUB Creators to assemble resources into
								logical groups for a variety of potential uses: enabling reassembly into a meaningful
								unit of content split across multiple <a>EPUB Content Documents</a> (e.g., an index
								split across multiple documents), identifying resources for specialized purposes (e.g.,
								preview content), or collecting together resources that present additional information
								about the <a>EPUB Publication</a>.</p>

							<p>The <code>collection</code> element, as defined in this section, represents a generic
								framework from which specializations are intended to be derived (e.g., through EPUB
								sub-specifications). Such specializations MUST define the purpose of the
									<code>collection</code> element, as well as all requirements for its valid
								production and use (specifically any requirements that differ from the general framework
								presented below).</p>

							<p id="attrdef-collection-role">Each specialization MUST define a role value that uniquely
								identifies all conformant <code>collection</code> elements. EPUB Creators MUST identify
								the role of each <code>collection</code> element in its <code>role</code> attribute,
								whose value MUST be one or more NMTOKENs [[XMLSCHEMA-2]] and/or <a
									data-cite="url#absolute-url-with-fragment-string">absolute-URL-with-fragment
									strings</a> [[URL]].</p>

							<p>This specification reserves the use of NMTOKEN values for roles defined in EPUB
								specifications. NMTOKEN values not defined by a recognized specification are not valid.
								This section does not define any roles.</p>

							<p>Third parties MAY define custom roles for the <code>collection</code> element, but they
								MUST identify such roles using <a data-cite="url#absolute-url-with-fragment-string"
									>absolute-URL-with-fragment strings</a> [[URL]]. Custom roles MUST NOT incorporate
								the string "<code>idpf.org</code>" in the <a data-cite="url#concept-host">host
									component</a> [[URL]] of their identifying URL.</p>

							<div class="note">
								<p>The former <abbr title="International Digital Publishing Forum">IDPF</abbr> EPUB 3
									Working Group maintained both a <a href="http://www.idpf.org/epub/registries/roles"
										>registry of role extensions</a> and a list of <a
										href="http://www.idpf.org/epub/extensions/roles">custom extension roles</a>.
									This Working Group no longer maintains these registries and does not anticipate
									defining new types of collections.</p>

							</div>

							<p id="elemdef-collection-metadata">The OPTIONAL <code>metadata</code> element child of
									<code>collection</code> is an adaptation of the package <a
									href="#elemdef-opf-metadata"><code>metadata</code> element</a>, with the following
								differences in syntax and semantics:</p>

							<ul>
								<li>
									<p>No metadata is mandatory by default.</p>
								</li>
								<li>
									<p>All <a href="#primary-expression">primary metadata expressions</a> apply to the
											<code>collection</code>.</p>
								</li>
								<li>
									<p>The <a href="#attrdef-refines"><code>refines</code> attribute</a> MUST NOT
										reference elements outside the containing <code>collection</code>.</p>
								</li>
								<li>
									<p>The <code>metadata</code> element MUST NOT contain <a href="#sec-opf2-meta">OPF2
												<code>meta</code> elements</a>.</p>
								</li>
							</ul>
							<p>EPUB specifications that implement collections MAY override package-level restrictions on
								the use of metadata elements.</p>

							<p>A <code>collection</code> MAY define sub-collections through the inclusion of one or more
								child <code>collection</code> elements.</p>

							<p id="elemdef-collection-link">The <code>link</code> element child of
									<code>collection</code> is an adaptation of the metadata <a href="#elemdef-opf-link"
										><code>link</code> element</a>, with the following differences in syntax and
								semantics:</p>

							<ul>
								<li>
									<p>The <code>rel</code> attribute is OPTIONAL.</p>
								</li>
								<li>
									<p>The <code>properties</code> attribute also accepts <a
											href="#app-item-properties-vocab">manifest <code>item</code> properties</a>
										without a prefix (e.g., so that a collection can declare its own Navigation
										Document or cover image).</p>
								</li>
								<li>
									<p>EPUB Creators MUST NOT specify the <code>refines</code> attribute.</p>
								</li>
							</ul>
							<p>Each <code>link</code> element MUST reference a resource that is a member of the group.
								The order of <code>link</code> elements is not significant.</p>

							<p>Specializations of the <code>collection</code> element MAY tailor the requirements
								defined above to better reflect their needs (e.g., requiring metadata, imposing further
								restrictions on the use of elements and attributes, or making the order of
									<code>link</code> elements significant). However, the resulting content model MUST
								represent a valid subset of the one defined in this section (e.g., specializations
								cannot introduce new elements or attributes, or re-introduce those expressly forbidden
								above). Specializations MUST NOT define collections in a way that overrides the
								requirements of the <a href="#elemdef-opf-manifest"><code>manifest</code></a> and <a
									href="#elemdef-opf-spine"><code>spine</code></a>.</p>

							<p>The rendering of an EPUB Publication MUST NOT be dependent on the recognition of
									<code>collection</code> elements. The content MUST remain consumable by a user
								without any information loss or other significant deterioration.</p>

							<aside class="example" id="example-collection" title="A basic collection">
								<p>In this example, the two linked <a>XHTML Content Documents</a> represent a single
									unit.</p>

								<pre>&lt;package …>
   …
   &lt;collection
       role="http://example.org/roles/unit">
      &lt;metadata …>
         &lt;dc:title>
            Foo Bar
         &lt;/dc:title>
      &lt;/metadata>
       &lt;link
           href="EPUB/xhtml/foo-1.xhtml"/>
       &lt;link
           href="EPUB/xhtml/foo-2.xhtml"/>
   &lt;/collection>
   …
&lt;/package></pre>
							</aside>
						</section>
					</section>

					<section id="sec-pkg-legacy">
						<h5>Legacy Content</h5>

						<section id="sec-opf2-meta">
							<h6>The <code>meta</code> Element</h6>

							<p>The <a href="http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.2"
										><code>meta</code> element</a> [[OPF-201]] is a <a href="#legacy">legacy</a>
								feature that previously provided a means of including generic metadata. The EPUB 3 <a
									href="#sec-meta-elem"><code>meta</code> element</a>, which uses different attributes
								and requires text content, replaces this attribute.</p>

							<p>For more information about the <code>meta</code> element, refer to its definition in
								[[OPF-201]].</p>

							<div class="note">
								<p>The [[OPF-201]] <code>meta</code> element is retained in EPUB 3 primarily so that
									EPUB Creators can identify the cover image for compatibility with EPUB 2 Reading
									Systems. In EPUB 3, the cover image must be identified using the <a
										href="#sec-cover-image"><code>cover-image</code> property</a> on the <a
										href="#sec-item-elem">manifest <code>item</code></a> for the image.</p>

							</div>
						</section>

						<section id="sec-opf2-guide">
							<h6>The <code>guide</code> Element</h6>

							<p>The <a href="http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.6"
										><code>guide</code> element</a> [[OPF-201]] is a <a href="#legacy">legacy</a>
								feature that previously provided machine-processable navigation to key structures. The
									<a href="#sec-nav-landmarks">landmarks nav</a> in the <a>EPUB Navigation
									Document</a> replaces this element.</p>

							<p>For more information about the <code>guide</code> element, refer to its definition in
								[[OPF-201]].</p>
						</section>

						<section id="sec-opf2-ncx">
							<h6>NCX</h6>

							<p>The <a href="http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.4.1">NCX</a>
								[[OPF-201]] is a <a href="#legacy">legacy</a> feature that previously provided the table
								of contents. The <a href="#sec-nav">EPUB Navigation Document</a> replaces this
								document.</p>

							<p>For more information about the NCX, refer to its definition in [[OPF-201]].</p>
						</section>
					</section>
				</section>
			</section>
		</section>
		<section id="sec-contentdocs">
			<h2>EPUB Content Documents</h2>

			<section id="sec-xhtml">
				<h3>XHTML Content Documents</h3>

				<section id="sec-xhtml-intro" class="informative">
					<h4>Introduction</h4>

					<p>This section defines a profile of [[HTML]] for creating XHTML Content Documents. An instance of
						an XML document that conforms to this profile is a <a>Core Media Type Resource</a> and is
						referred to in this specification as an <a>XHTML Content Document</a>.</p>
				</section>

				<section id="sec-xhtml-req">
					<h4>XHTML Requirements</h4>

					<p>An XHTML Content Document:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-cd-html-docprops-syntax">MUST be an [[HTML]] document that conforms to the <a
									data-cite="html#xhtml">XHTML</a> syntax.</p>
						</li>
						<li>
							<p id="confreq-cd-html-docprops-html">MUST conform to the conformance criteria for all
								document constructs defined by [[HTML]] unless explicitly overridden in <a
									href="#sec-xhtml-deviations"></a>.</p>
						</li>
						<li>
							<p id="confreq-cd-html-docprops-schema">MAY include extensions to the [[HTML]] grammar as
								defined in <a href="#sec-xhtml-extensions"></a>, and MUST conform to all content
								conformance constraints defined therein.</p>
						</li>
					</ul>
					<p>Unless specified otherwise, XHTML Content Documents inherit all definitions of semantics,
						structure, and processing behaviors from the [[HTML]] specification.</p>

					<div class="note">
						<p>The recommendation that EPUB Publications follow the accessibility requirements in
							[[EPUB-A11Y-11]] applies to XHTML Content Documents. See <a href="#confreq-a11y"
								>Accessibility</a>.</p>

					</div>
				</section>

				<section id="sec-xhtml-extensions">
					<h4>HTML Extensions</h4>

					<p>This section defines EPUB 3 <a>XHTML Content Document</a> extensions to the underlying [[HTML]]
						document model.</p>

					<div class="note">
						<p>Although [[HTML]] allows user agents to support <a data-cite="html#extensibility-2"
								>vendor-neutral extensions</a>, unless such extensions are listed in this section, they
							are not supported features of EPUB 3.</p>

					</div>
					<section id="sec-xhtml-structural-semantics">
						<h5>Structural Semantics</h5>

						<p>EPUB Creators MAY use the <a href="#sec-epub-type-attribute"><code>epub:type</code>
								attribute</a> in <a>XHTML Content Documents</a> to express <a
								href="#sec-structural-semantics-intro">structural semantics</a>.</p>

						<p>As the [[HTML]] <a data-cite="html#the-head-element"><code>head</code> element</a> contains
							metadata for the document, structural semantics expressed on this element or any descendant
							of it have no meaning.</p>
					</section>

					<section id="sec-xhtml-rdfa">
						<h5>RDFa</h5>

						<p>The [[HTML-RDFA]] specification defines a set of attributes that EPUB Creators MAY use in
								<a>XHTML Content Documents</a> to semantically enrich the content. The use of these
							attributes MUST conform to the requirements defined in [[HTML-RDFA]].</p>

						<p>The [[HTML-RDFA]] specification defines changes to the [[HTML]] content model when authors
							use RDFa attributes. This modified content model is valid in XHTML Content Documents.</p>

						<div class="note">
							<p>The listing of RDFa does not express a preference on the part of the Working Group, only
								that these attributes represent an extension of the HTML grammar. EPUB Creators can also
								specify <a data-cite="html#microdata">microdata attributes</a> [[HTML]] and <a
									data-cite="json-ld11#">linked data</a> [[JSON-LD11]] in XHTML Content Documents as
								both are natively supported.</p>

						</div>
					</section>

					<section id="sec-xhtml-content-switch">
						<h5>Content Switching (Deprecated)</h5>

						<p>The <code>switch</code> element provides a simple mechanism through which <a>EPUB
								Creators</a> can tailor the content displayed to users, one that is not dependent on the
							scripting capabilities of the <a>EPUB Reading System</a>.</p>

						<p>Use of the <code>switch</code> element is <a href="#deprecated">deprecated</a>. Refer to its
							definition in [[EPUBContentDocs-301]] for usage information.</p>
					</section>

					<section id="sec-xhtml-epub-trigger">
						<h5>The <code>epub:trigger</code> Element (Deprecated)</h5>

						<p>The <code>trigger</code> element enables the creation of markup-defined user interfaces for
							controlling multimedia objects, such as audio and video playback, in both scripted and
							non-scripted contexts.</p>

						<p>Use of the <code>trigger</code> element is <a href="#deprecated">deprecated</a>. Refer to its
							definition in [[EPUBContentDocs-301]] for usage information.</p>
					</section>

					<section id="sec-xhtml-custom-attributes">
						<h5>Custom Attributes</h5>

						<p><a>EPUB Creators</a> MAY specify <a data-cite="epub-rs-33#sec-xhtml-custom-attributes">custom
								attributes</a> [[EPUB-RS-33]] in <a>XHTML Content Documents</a> to take advantage of
								<a>Reading System</a>-specific functionality not defined in this specification.</p>

						<p>Custom attributes MAY be specified on any element in an XHTML Content Document.</p>

						<p>When using custom attributes, the content MUST remain consumable by a user without any
							information loss or other significant deterioration, regardless of the Reading System it is
							rendered on.</p>
					</section>
				</section>

				<section id="sec-xhtml-deviations">
					<h4>HTML Deviations and Constraints</h4>

					<p>This section defines deviations from, and constraints on, the underlying [[HTML]] document model
						applicable to EPUB 3 <a>XHTML Content Documents</a>.</p>

					<section id="sec-xhtml-mathml">
						<h5>Embedded MathML</h5>

						<p>XHTML Content Documents support embedded [[MATHML3]]. Occurrences of MathML markup MUST
							conform to the constraints expressed in the MathML specification [[MATHML3]], with the
							following additional restrictions:</p>

						<dl class="conformance-list">
							<dt id="math-pres">Presentation MathML</dt>
							<dd>
								<p id="confreq-mathml-pres">The <code>math</code> element MUST contain only <a
										data-cite="mathml3/chapter3.html#">Presentation MathML</a>, except within the
										<code>annotation-xml</code> element.</p>
							</dd>

							<dt id="math-cont">Content MathML</dt>
							<dd>
								<p id="confreq-mathml-annot-cont">EPUB Creators MAY include <a
										data-cite="mathml3/chapter4.html#">Content MathML</a> within MathML markup in
									XHTML Content Documents, and, when present, MUST include it within an
										<code>annotation-xml</code> child element of a <code>semantics</code>
									element.</p>
								<p id="confreq-mathml-annot-cont-attrs">When EPUB Creators include Content MathML per
									the previous condition, they MUST set the given <code>annotation-xml</code>
									element's <code>encoding</code> attribute to either of the functionally-equivalent
									values <code>MathML-Content</code> or <code>application/mathml-content+xml</code>,
									and the <code>name</code> attribute to <code>contentequiv</code>.</p>
							</dd>

							<dt id="math-deprecated">Deprecated MathML</dt>
							<dd>
								<p id="confreq-mathml-deprecated">EPUB Creators MUST NOT include elements and attributes
									marked as deprecated in [[MATHML3]] within MathML markup in XHTML Content
									Documents.</p>
							</dd>
						</dl>

						<p>This subset eases the implementation burden on Reading Systems and promotes accessibility,
							while retaining compatibility with [[HTML]] user agents.</p>

						<div class="note">
							<p>The <a href="#mathml"><code>mathml</code> property</a> of the <a>manifest</a>
								<code>item</code> element indicates that an XHTML Content Document contains embedded
								MathML.</p>

						</div>
					</section>

					<section id="sec-xhtml-svg">
						<h5>Embedded SVG</h5>

						<p><a>XHTML Content Documents</a> support the embedding of <a
								href="https://www.w3.org/TR/SVG/conform.html#ConformingSVGXMLFragments">SVG document
								fragments</a> [[SVG]] <em>by reference</em> (embedding via reference, for example, from
							an <code>img</code> or <code>object</code> element) and <em>by inclusion</em> (embedding via
							direct inclusion of the <code>svg</code> element in the XHTML Content Document).</p>

						<p>The content conformance constraints for SVG embedded in XHTML Content Documents are the same
							as defined for <a>SVG Content Documents</a> in <a href="#sec-svg-restrictions"></a>.</p>

						<div class="note">
							<p>The <a href="#svg"><code>svg</code> property</a> of the <a>manifest</a>
								<a href="#sec-item-elem"><code>item</code> element</a> indicates that an XHTML Content
								Document contains embedded SVG.</p>

						</div>
					</section>

					<section id="sec-xhtml-deviations-discouraged" class="informative">
						<h5>Discouraged Constructs</h5>

						<section id="sec-xhtml-deviations-base">
							<h6>The <code>base</code> Element</h6>

							<p id="confreq-html-vocab-base"> The [[HTML]] <a data-cite="html#the-base-element"
										><code>base</code></a> element can be used to specify the <a
									data-cite="html#document-base-url">document base URL</a> for the purposes of parsing
								URLs. When using it in an <a>EPUB Publication</a>, the interpretation of the
									<code>base</code> elements may inadvertently result in references to <a>Remote
									Resources</a>, i.e., resources that are outside the <a>EPUB Container</a>. Using the
									<code>base</code> element in an <a>EPUB Publication</a> may cause Reading Systems to
								misinterpret the location of resources (e.g., relative links to other documents in the
								publication might appear as links to a Web site if the <code>base</code> element
								specifies an absolute URL). To avoid significant interoperability issues, EPUB Creators
								should not use the <code>base</code> element. </p>
						</section>

						<section id="sec-xhtml-deviations-rp">
							<h6>The <code>rp</code> Element</h6>

							<p id="confreq-html-vocab-rp">The [[HTML]] <a data-cite="html#the-rp-element"
										><code>rp</code></a> element is intended to provide a fallback for older
									<a>Reading Systems</a> that do not recognize ruby markup (i.e., a parenthesis
								display around <code>ruby</code> markup). As EPUB 3 Reading Systems are ruby-aware, and
								can provide fallbacks, EPUB Creators should not use <code>rp</code> elements.</p>
						</section>

						<section id="sec-xhtml-deviations-embed">
							<h6>The <code>embed</code> Element</h6>

							<p id="confreq-html-vocab-embed">Since the [[HTML]] <a data-cite="html#the-embed-element"
										><code>embed</code></a> element does not include intrinsic facilities to provide
								fallback content for Reading Systems that do not support scripting, <a>EPUB Creators</a>
								are discouraged from using the element when the referenced resource includes scripting.
								The [[HTML]] <a data-cite="html#the-object-element"><code>object</code> element</a> is a
								better alternative, as it includes intrinsic fallback capabilities.</p>
						</section>
					</section>

					<section id="sec-xhtml-fallbacks">
						<h5>Foreign Resource Restrictions</h5>

						<p id="confreq-resources-cd-fallback">EPUB Creators MAY reference Foreign Resources from
							elements that have intrinsic fallback mechanisms, where an intrinsic fallback method is the
							capability to offer an alternative presentation if Reading Systems do not support the
							foreign resource. For example, most [[HTML]] <a data-cite="html#embedded-content">embedded
								content elements</a> provide options for alternative rendering, such as allowing
							multiple sources to be specified or allowing embedded HTML content for when user agents
							cannot render a resource. When referencing a Foreign Resource, EPUB Creators MUST provide a
								<a>Core Media Type Resource</a> or embedded HTML content via the given element's
							intrinsic fallback mechanism.</p>

						<p id="confreq-resources-cd-fallback-media">EPUB Creators MAY embed [[HTML]] <a
								data-cite="html#flow-content">flow content</a> within the <a
								data-cite="html#the-audio-element"><code>audio</code></a> and <a
								data-cite="html#the-video-element"><code>video</code></a> elements for rendering in
							older Reading Systems that do not recognize these elements (e.g., EPUB 2 Reading Systems),
							but it does not represent a fallback Core Media Type Resource.</p>

						<p id="confreq-resources-cd-fallback-img">Due to the variety of sources that EPUB Creators can
							specify in the [[HTML]] <a data-cite="html#the-img-element"><code>img</code> element</a>,
							the following fallback conditions apply to its use:</p>

						<ul>
							<li>
								<p>If it is the child of a <a data-cite="html#the-picture-element"><code>picture</code>
										element</a>:</p>
								<ul>
									<li>it MUST reference Core Media Type Resources from its <code>src</code> and
											<code>srcset</code> attributes, when EPUB Creators specify those attributes;
										and</li>
									<li>each sibling <a data-cite="html#the-source-element"><code>source</code>
											element</a> MUST reference a Core Media Type Resource from its
											<code>src</code> and <code>srcset</code> attributes unless it specifies a
										media type in its <code>type</code> attribute that is not a Core Media
										Type.</li>
								</ul>
							</li>
							<li>Otherwise, it MAY reference Foreign Resources in its <code>src</code> and
									<code>srcset</code> attributes provided EPUB Creators define a <a
									href="#sec-foreign-restrictions-manifest">manifest fallback</a>.</li>
						</ul>
						<p>EPUB Creators MAY reference <a href="#sec-core-media-types">Foreign Resources</a> from the
							following [[HTML]] elements without providing a fallback Core Media Type Resource:</p>

						<ul>
							<li>
								<p id="confreq-resources-cd-fallback-link"><a data-cite="html#the-link-element"
											><code>link</code></a></p>
							</li>
							<li>
								<p id="confreq-resources-cd-fallback-track">
									<a data-cite="html#the-track-element">
										<code>track</code>
									</a>
								</p>
							</li>
							<li>
								<p id="confreq-resources-cd-fallback-video"><a data-cite="html#the-video-element"
											><code>video</code></a> — including any child <a
										data-cite="html#the-source-element"><code>source</code></a> elements</p>
							</li>
						</ul>
						<div class="note">
							<p>Refer to <a href="#sec-foreign-restrictions-manifest">manifest fallbacks</a> for the
								provision of fallbacks for elements without intrinsic mechanisms, such as the [[HTML]]
									<a data-cite="html#the-iframe-element"><code>iframe</code></a>.</p>

						</div>
					</section>
				</section>
			</section>

			<section id="sec-svg">
				<h3>SVG Content Documents</h3>

				<div class="caution">
					<p><a>Reading Systems</a> may not support all the features of [[SVG]] or supported them across all
						platforms that Reading Systems run on. When utilizing such features, <a>EPUB Creators</a> should
						consider the inherent risks on interoperability and document longevity.</p>

				</div>

				<section id="sec-svg-intro" class="informative">
					<h4>Introduction</h4>

					<p>The Scalable Vector Graphics (SVG) specification [[SVG]] defines a format for representing
						final-form vector graphics and text.</p>

					<p>Although <a>EPUB Creators</a> typically use <a href="#sec-xhtml">XHTML Content Documents</a> as
						the <a data-lt="Top-level Content Document">top-level</a> document type, the use of <a>SVG
							Content Documents</a> is also permitted. EPUB Creators will typically only need SVGs for
						certain special cases, such as when final-form page images are the only suitable representation
						of the content (e.g., for cover art or in the context of manga or comic books).</p>

					<p>This section defines a profile for [[SVG]] documents. An instance of an XML document that
						conforms to this profile is a <a>Core Media Type Resource</a> and is referred to in this
						specification as an <a>SVG Content Document</a>.</p>

					<div class="note">
						<p>This section defines conformance requirements for <a>SVG Content Documents</a>. Refer to <a
								href="#sec-xhtml-svg"></a> for the conformance requirements for SVG embedded in XHTML
							Content Documents.</p>

					</div>
				</section>

				<section id="sec-svg-req">
					<h4>SVG Requirements</h4>

					<p>An SVG Content Document:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-cd-svg-docprops-schema">MUST be a <a
									href="https://www.w3.org/TR/SVG/conform.html#ConformingSVGStandAloneFiles"
									>conforming SVG stand-alone file</a> [[SVG]] and conform to all content conformance
								constraints expressed in <a href="#sec-svg-restrictions"></a>.</p>
						</li>
						<li>
							<p id="confreq-svg-structural-semantics">MAY specify the <a href="#attrdef-epub-type"
										><code>epub:type</code></a> attribute for expressing <a
									href="#app-structural-semantics">structural semantics</a> and use all applicable <a
									href="#sec-vocab-assoc">vocabulary association mechanisms</a>.</p>
						</li>
					</ul>
					<div class="note">
						<p>The recommendation that EPUB Publications follow the accessibility requirements in
							[[EPUB-A11Y-11]] applies to SVG Content Documents. See <a href="#confreq-a11y"
								>Accessibility</a>.</p>

					</div>
				</section>

				<section id="sec-svg-restrictions">
					<h4>Restrictions on SVG</h4>

					<p>This specification restricts the content model of <a>SVG Content Documents</a> and <a
							href="#sec-xhtml-svg">SVG embedded in XHTML Content Documents</a> as follows:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-svg-foreignObject">The [[SVG]] <a
									href="https://www.w3.org/TR/SVG/embedded.html#ForeignObjectElement"
										><code>foreignObject</code></a> element:</p>
							<ul class="conformance-list">
								<li>
									<p id="confreq-svg-foreignObject-xhtml-content">MUST contain either [[HTML]] <a
											data-cite="html#flow-content">flow content</a> or exactly one [[HTML]] <a
											data-cite="html#the-body-element"><code>body</code> element</a>.</p>
									<p class="note">In the case of <a href="#sec-xhtml-svg">embedded SVGs</a>, a
											<code>body</code> element is not permitted per the <a data-cite="html#svg-0"
											>restrictions on SVG</a> defined in [[HTML]].</p>
								</li>
								<li>
									<p id="confreq-svg-foreignObject-xhtml-frag">MUST contain a valid document fragment
										that conforms to the XHTML Content Document model defined in <a
											href="#sec-xhtml-req"></a>.</p>
								</li>
							</ul>
						</li>
						<li>
							<p id="confreq-svg-title">The [[SVG]] <a
									href="https://www.w3.org/TR/SVG/struct.html#TitleElement"><code>title</code></a>
								element MUST contain only valid <a href="#sec-xhtml-req">XHTML Content Document Phrasing
									content</a>.</p>
						</li>
					</ul>
				</section>
			</section>

			<section>
				<h3>Common Resource Requirements</h3>

				<p>This section defines requirements for technologies usable in both XHTML and SVG Content
					Documents.</p>

				<section id="sec-css">
					<h3>Cascading Style Sheets (CSS)</h3>

					<section id="sec-css-intro" class="informative">
						<h4>Introduction</h4>

						<p>CSS is an integral part of the Open Web Platform. Readers, publishers, and document authors
							expect CSS to "just work," as they expect HTML to just work.</p>

						<p>In the past, EPUB defined a profile of CSS that mandated support for certain properties and
							provided prefixed versions of numerous other properties. Although the CSS Working Group no
							longer recommends the use of prefixed properties, this specification maintains some prefixed
							properties to avoid breaking existing content. But with the minor exceptions defined in this
							section, EPUB defers to the W3C to define CSS.</p>

						<div class="note">
							<p>Keep in mind that some <a>Reading Systems</a> will not support all desired features of
								CSS. The following are known to be particularly problematic:</p>

							<ul>
								<li>
									<p>Reading System-induced pagination can interact poorly with style sheets as
										Reading Systems sometimes paginate using columns. This may result in incorrect
										values for viewport sizes. Fixed and absolute positioning are particularly
										problematic.</p>
								</li>
								<li>
									<p>Some types of screens will render animations and transitions poorly (e.g., those
										with high latency).</p>
								</li>
							</ul>
						</div>
					</section>

					<section id="sec-css-req">
						<h4>CSS Requirements</h4>

						<p>A CSS style sheet:</p>

						<ul class="conformance-list">
							<li>
								<p id="confreq-css-props">MAY include any CSS properties, with the following
									exceptions:</p>
								<ul class="conformance-list">
									<li>
										<p id="confreq-css-props-exc-direction">It MUST NOT include the <a
												data-cite="css-writing-modes-3#direction"><code>direction</code>
												property</a> [[CSS-Writing-Modes-3]].</p>
									</li>
									<li>
										<p id="confreq-css-props-exc-unicode-bidi">It MUST NOT include the <a
												data-cite="css-writing-modes-3#unicode-bidi"><code>unicode-bidi</code>
												property</a> [[CSS-Writing-Modes-3]].</p>
									</li>
								</ul>
							</li>
							<li>
								<p id="confreq-css-prefixed">MAY include the prefixed properties defined in <a
										href="#sec-css-prefixed"></a>.</p>
							</li>
							<li>
								<p id="confreq-css-encoding">MUST be encoded in UTF-8 or UTF-16 [[Unicode]], with UTF-8
									as the RECOMMENDED encoding.</p>
							</li>
						</ul>
						<div class="note">
							<p>This specification restricts the use of the <code>direction</code> and
									<code>unicode-bidi</code> properties because Reading Systems may not implement, or
								may switch off, CSS processing. EPUB Creators must use the following format-specific
								methods when they need control over these aspects of the rendering:</p>

							<ul>
								<li>
									<p>the <a data-cite="html#the-dir-attribute"><code>dir</code> attribute</a> [[HTML]]
										and <a href="https://www.w3.org/TR/SVG/text.html#DirectionProperty"
												><code>direction</code> attribute</a> [[SVG]] for inline base
										directionality.</p>
								</li>
								<li>
									<p>the <a data-cite="html#the-bdo-element"><code>bdo</code> element</a> with the <a
											data-cite="html#the-dir-attribute"><code>dir</code> attribute</a> [[HTML]]
										and the <a href="https://www.w3.org/TR/SVG/styling.html#PresentationAttributes"
											>presentation attribute alternative</a> for <code>unicode-bidi</code>
										[[SVG]] for bidirectionality.</p>
								</li>
							</ul>
						</div>
					</section>

					<section id="sec-css-prefixed">
						<h4>Prefixed Properties</h4>

						<p>Earlier version of EPUB included prefixed CSS properties, as many CSS features related to
							world languages were not yet mature. To ensure backwards compatibility for content authored
							using these prefixes, they have been retained in this specification. Unless otherwise noted,
							prefixed properties and values behave exactly as their unprefixed equivalents as described
							in the appropriate CSS specification. The prefixed properties are documented in an <a
								href="#css-prefixes">Appendix</a>. </p>

						<div class="caution">
							<p><a>EPUB Creators</a> should use unprefixed properties and <a>Reading Systems</a> should
								support current CSS specifications. This specification retains the widely-used prefixed
								properties from [[EPUBContentDocs-301]], but removes support for the less-used ones.
								EPUB Creators should use CSS-native solutions for the removed properties whenever
								available.</p>

							<p>The Working Group recommends that EPUB Creators currently using these prefixed properties
								move to unprefixed versions as soon as support allows, as the Working Group does not
								anticipate supporting them in the next major version of EPUB.</p>

						</div>

						<p class="note">In some cases, the unprefixed versions of these properties now support
							additional values. Reading Systems MAY support these values even with the prefixed
							property.</p>
					</section>
				</section>

				<section id="sec-scripted-content">
					<h3>Scripting</h3>

					<section id="sec-scripted-support">
						<h4>Script Inclusion</h4>

						<p><a>EPUB Content Documents</a> MAY contain scripting using the facilities defined for this in
							the respective underlying specifications ([[HTML]] and [[SVG]]). When an EPUB Content
							Document contains scripting, this specification refers to it as a <a>Scripted Content
								Document</a>. This label also applies to <a>XHTML Content Documents</a> when they
							contain instances of [[HTML]] <a data-cite="html#forms">forms</a>.</p>

						<p>The <a href="#scripted"><code>scripted</code> property</a> of the <a>manifest</a>
							<code>item</code> element is used to indicate that an EPUB Content Document is a <a>Scripted
								Content Document</a>.</p>

						<p>When an [[HTML]] <code>script</code> element contains a <a data-cite="html#data-block">data
								block</a> [[HTML]], it does not represent scripted content.</p>

						<div class="note">
							<p>[[SVG]] does not define data blocks as of publication, but the same exclusion would apply
								if a future update adds the concept.</p>

						</div>

						<p>EPUB Creators should note that Reading Systems are required to behave as though a unique <a
								data-cite="url#origin">origin</a> [[URL]] has been assigned to each EPUB Publication. In
							practice, this means that it is not possible for scripts to share data between EPUB
							Publications.</p>

						<p>Which <a href="#sec-scripted-context">context</a> a script is used in also determines the
							rights and restrictions that a Reading System places on it (refer to <a
								data-cite="epub-rs-33#sec-scripted-content">Scripting Conformance</a> [[?EPUB-RS-33]]
							for more information).</p>

						<div class="note">
							<p>Reading Systems may render Scripted Content Documents in a manner that disables other
								EPUB capabilities and/or provides a different rendering and user experience (e.g., by
								disabling pagination).</p>

						</div>
					</section>

					<section id="sec-scripted-context">
						<h4>Scripting Contexts</h4>

						<p>EPUB 3 defines two contexts for script execution:</p>

						<ul>
							<li><a href="#sec-scripted-container-constrained">container constrained</a> &#8212;
								when the execution of a script occurs within an <code>iframe</code>; and</li>
							<li><a href="#sec-scripted-spine">spine level</a> &#8212; when the execution of a
								script occurs directly within a <a>Top-level Content Document</a>.</li>
						</ul>
						<p>Whether EPUB Creators embed the code directly in the <code>script</code> element or reference
							it via the element's <code>src</code> attribute makes no difference to its executing
							context.</p>

						<p>Which context EPUB Creators use for their scripts affects both what actions the scripts can
							perform and the likelihood of support in Reading Systems, as described in the following
							subsections.</p>

						<div class="note">
							<p>Refer to <a href="#scripted-contexts-example"></a> for an example of the difference
								between the two contexts.</p>

						</div>
						<section id="sec-scripted-container-constrained">
							<h5>Container-Constrained Scripts</h5>

							<p>A <em>container-constrained script</em> is either of the following:</p>

							<ul>
								<li>
									<p>An instance of the [[HTML]] <a data-cite="html#the-script-element"
												><code>script</code></a> element contained in an <a>XHTML Content
											Document</a> that is embedded in a parent XHTML Content Document using the
										[[HTML]] <a data-cite="html#the-iframe-element"><code>iframe</code></a>
										element.</p>
								</li>
								<li>
									<p>An instance of the [[SVG]] <a
											href="https://www.w3.org/TR/SVG/interact.html#ScriptElement"
												><code>script</code></a> element contained in an <a>SVG Content
											Document</a> that is embedded in a parent XHTML Content Document using the
										[[HTML]] <a data-cite="html#the-iframe-element"><code>iframe</code></a>
										element.</p>
								</li>
							</ul>

							<p id="confreq-cd-scripted-container">A container-constrained script MUST NOT contain
								instructions for modifying the DOM of the EPUB Content Document that embeds it (i.e.,
								the one that contains the <code>iframe</code> element). It also MUST NOT contain
								instructions for manipulating the size of its containing rectangle.</p>

							<p>EPUB Creators should note that <a data-cite="epub-rs-33#sec-scripted-content">support for
									container-constrained scripting in Reading Systems</a> is only recommended in
								reflowable documents [[EPUB-RS-33]]. Furthermore, Reading System support in
								fixed-layouts EPUBs is optional.</p>

							<p>EPUB Creators should ensure container-constrained scripts degrade gracefully in Reading
								Systems without scripting support (see <a href="#sec-scripted-fallbacks"></a>).</p>

							<div class="note">
								<p>EPUB Creators choosing to restrict the usage of scripting to the
									container-constrained model will ensure a more consistent user experience between
									scripted and non-scripted content (e.g., consistent pagination behavior).</p>

							</div>
						</section>

						<section id="sec-scripted-spine">
							<h5>Spine-Level Scripts</h5>

							<p>A <em>spine-level script</em> is an instance of the [[HTML]] <a
									data-cite="html#the-script-element"><code>script</code></a> or [[SVG]] <a
									href="https://www.w3.org/TR/SVG/interact.html#ScriptElement"><code>script</code></a>
								element contained in a <a>Top-level Content Document</a>.</p>

							<p>EPUB Creators should note that support for spine-level scripting in Reading Systems is
								only recommended in <a data-cite="epub-rs-33#confreq-rs-scripted-fxl-support"
									>fixed-layout documents</a> and <a
									data-cite="epub-rs-33#confreq-rs-scripted-scrolled">reflowable documents set to
									scroll</a> [[EPUB-RS-33]]. Furthermore, Reading System support in all other contexts
								is optional.</p>

							<p id="confreq-cd-scripted-spine"><a>Top-level Content Documents</a> that include
								spine-level scripting SHOULD remain consumable by the user without any information loss
								or other significant deterioration when scripting is disabled or not available (e.g., by
								employing progressive enhancement techniques or <a href="#sec-scripted-fallbacks"
									>fallbacks</a>). Failing to account for non-scripted environments in Top-level
								Content Documents can result in EPUB Publications being unreadable.</p>
						</section>
					</section>

					<section id="sec-scripted-content-events" class="informative">
						<h4>Event Model</h4>

						<p><a>EPUB Creators</a> should consider the wide variety of possible Reading System
							implementations when adding scripting functionality to their EPUB Publications (e.g., not
							all devices have physical keyboards, and in many cases a soft keyboard is activated only for
							text input elements). Consequently, EPUB Creators should not rely on keyboard events alone;
							they should always provide alternative ways to trigger a desired action.</p>
					</section>

					<section id="sec-scripted-a11y">
						<h4>Scripting Accessibility</h4>

						<p id="confreq-cd-scripted-a11y">EPUB Content Documents that contain scripting SHOULD employ
							relevant [[WAI-ARIA]] accessibility techniques to ensure that the content remains consumable
							by all users.</p>
					</section>

					<section id="sec-scripted-fallbacks">
						<h4 id="confreq-cd-scripted-flbk">Scripting Fallbacks</h4>

						<p id="confreq-cd-scripted-fallback">EPUB Content Documents that contain scripting MAY provide
							fallbacks for such content, either by using intrinsic fallback mechanisms (such as those
							available for the [[HTML]] <a data-cite="html#the-object-element"><code>object</code></a>
							and <a data-cite="html#the-canvas-element"><code>canvas</code></a> elements) or, when an
							intrinsic fallback is not applicable, by using a <a
								href="#sec-foreign-restrictions-manifest">manifest-level fallback</a>.</p>

						<p id="confreq-cd-scripted-foreign-resources">EPUB Creators MUST ensure that scripts only
							generate <a href="#sec-core-media-types">Core Media Type Resources</a> or fragments
							thereof.</p>
					</section>
				</section>
			</section>
		</section>
		<section id="sec-nav">
			<h2>EPUB Navigation Document</h2>

			<section id="sec-nav-intro" class="informative">
				<h3>Introduction</h3>

				<p>The EPUB Navigation Document is a <a href="#confreq-nav">mandatory component</a> of an <a>EPUB
						Publication</a>. It allows <a>EPUB Creators</a> to include a human- and machine-readable global
					navigation layer, thereby ensuring increased usability and accessibility for the user.</p>

				<p>The EPUB Navigation Document is a special type of <a>XHTML Content Document</a> that defines the <a
						href="#sec-nav-toc">table of contents</a> for <a>Reading Systems</a>. It may also include other
					specialized navigation elements, such as a <a href="#sec-nav-pagelist">page list</a> and a list of
					key <a href="#sec-nav-landmarks">landmarks</a>. These navigation elements have <a
						href="#sec-nav-def-model">additional restrictions</a> on their content to facilitate their
					processing.</p>

				<p>The EPUB Navigation Document is not exclusively for machine processing, however. There are no
					restrictions on the structure or content of the EPUB Navigation Document outside of the specialized
					navigation elements (i.e., EPUB Creators can mark the rest of the document up like any other XHTML
					Content Document). As a result, it can also be part of the linear reading order, avoiding the need
					for duplicate tables of contents. EPUB Creators can hide navigation elements that are only for
					machine processing (e.g., the page list) with the <a href="#sec-nav-def-hidden">hidden</a>
					attribute.</p>

				<p>Note that Reading Systems may strip scripting, styling, and HTML formatting as they generate
					navigational interfaces from information found in the EPUB Navigation Document, and this may make
					the result difficult to read. If EPUB Creators require such formatting and functionality, then they
					should also include the EPUB Navigation Document in the <a>spine</a>. The use of progressive
					enhancement techniques for scripting and styling of the navigation document will help ensure the
					content will retain its integrity when rendered in a non-browser context.</p>
			</section>

			<section id="sec-nav-def">
				<h3>EPUB Navigation Document Definition</h3>

				<section id="sec-nav-def-model">
					<h4>The <code>nav</code> Element: Restrictions</h4>

					<p>When a <code>nav</code> element carries the <a href="#sec-epub-type-attribute"
								><code>epub:type</code> attribute</a> in an <a>EPUB Navigation Document</a>, this
						specification restricts the content model of the element and its descendants as follows:</p>

					<dl class="elemdef">
						<dt>Content Model</dt>
						<dd>
							<dl class="variablelist">
								<dt>
									<a data-cite="html#the-nav-element">
										<code>nav</code>
									</a>
								</dt>
								<dd>
									<p>In this order:</p>
									<ul class="nomark">
										<li>
											<p>
												<a data-cite="html#heading-content">
													<code>HTML Heading content</code>
												</a>
												<code>[0 or 1]</code>
											</p>
										</li>
										<li>
											<p>
												<code>ol</code>
												<code>[exactly 1]</code>
											</p>
										</li>
									</ul>
								</dd>

								<dt>
									<a data-cite="html#the-ol-element">
										<code>ol</code>
									</a>
								</dt>
								<dd>
									<p>In this order:</p>
									<ul class="nomark">
										<li>
											<p>
												<code>li</code>
												<code>[1 or more]</code>
											</p>
										</li>
									</ul>
								</dd>

								<dt>
									<a data-cite="html#the-li-element">
										<code>li</code>
									</a>
								</dt>
								<dd>
									<p>In this order:</p>
									<ul class="nomark">
										<li>
											<p> (<code>span</code> or <code>a</code>) <code>[exactly 1]</code></p>
										</li>
										<li>
											<p>
												<code>ol</code>
												<code>[conditionally required]</code>
											</p>
										</li>
									</ul>
								</dd>

								<dt><a data-cite="html#the-span-element"><code>span</code></a> and <a
										data-cite="html#the-a-element"><code>a</code></a></dt>
								<dd>
									<p>In any order:</p>
									<ul class="nomark">
										<li>
											<p>
												<a data-cite="html#phrasing-content">
													<code>HTML Phrasing content</code>
												</a>
												<code>[1 or more]</code>
											</p>
										</li>
									</ul>
								</dd>
							</dl>
							<p>Note that there are no restrictions on the attributes allowed on these elements.</p>
							<p>Refer the definition below for additional requirements.</p>
						</dd>
					</dl>

					<p>The following elaboration of the content model of the <code>nav</code> element explains the
						purpose and restrictions of the various elements:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-nav-ol">The <code>ol</code> child of the <code>nav</code> element represents
								the primary level of content navigation.</p>
						</li>
						<li>
							<p id="confreq-nav-a">Each list item of the ordered list represents a heading, structure, or
								other item of interest. A child <code>a</code> element describes the target that the
								link points to, while a <code>span</code> element serves as a heading for breaking down
								lists into distinct groups (for example, an EPUB Creator could segment a large list of
								illustrations into several lists, one for each chapter).</p>
						</li>
						<li>
							<p id="confreq-nav-a-cnt">The child <code>a</code> or <code>span</code> element MUST provide
								a non-zero-length text label after concatenation of all child content and application of
								white space normalization rules. When determining compliance with this requirement, the
								concatenated label MUST include text content contained in <code>title</code> or
									<code>alt</code> attributes for non-textual descendant elements.</p>
						</li>
						<li>
							<p id="confreq-nav-a-title">If an <code>a</code> or <code>span</code> element contains
								instances of <a data-cite="html#embedded-content">HTML embedded content</a> that do not
								provide intrinsic text alternatives, the element MUST also contain a <code>title</code>
								attribute with an alternate text rendering of the link label.</p>
						</li>
						<li>
							<p id="confreq-nav-a-href">The URL [[URL]] reference provided in the <code>href</code>
								attribute of the <code>a</code> element:</p>
							<ul class="conformance-list">
								<li>
									<p id="confreq-nav-a-href-default">MUST, in the case of the <a href="#sec-nav-toc"
												><code>toc nav</code></a>, <a href="#sec-nav-landmarks"><code>landmarks
												nav</code></a> and <a href="#sec-nav-pagelist"><code>page-list
												nav</code></a>, resolve to a <a>Top-level Content Document</a> or
										fragment therein.</p>
								</li>
								<li>
									<p id="confreq-nav-a-href-other">MAY, for all other <code>nav</code> types, also
										reference <a>Remote Resources</a>.</p>
								</li>
							</ul>
						</li>
						<li>
							<p id="confreq-nav-a-nest">An <code>ol</code> (ordered list) element representing a
								subsidiary content level (e.g., all the subsection headings of a section) MAY follow an
									<code>a</code> element.</p>
						</li>
						<li>
							<p id="confreq-nav-span-nest">An <code>ol</code> (ordered list) element MUST follow a
									<code>span</code> element (<code>span</code> elements cannot occur in "leaf"
									<code>li</code> elements).</p>
						</li>
						<li>
							<p id="confreq-nav-sublist">Regardless of whether an <code>a</code> or <code>span</code>
								element precedes it, every sublist MUST adhere to the content requirements defined in
								this section for constructing the primary navigation list.</p>
						</li>
					</ul>
					<aside class="example" title="Basic patterns of a navigation element">
						<pre>&lt;nav epub:type="…">
   &lt;h1>…&lt;/h1>
   &lt;ol>
      &lt;li>
         &lt;a href="chap1.xhtml">
            A basic leaf node
         &lt;/a>
      &lt;/li>
      &lt;li>
         &lt;a href="chap2.xhtml">
            A linked heading
         &lt;/a>
         &lt;ol>
            …
         &lt;/ol>
      &lt;/li>
      &lt;li>
         &lt;span>An unlinked heading&lt;/span>
         &lt;ol>
            …
         &lt;/ol>
      &lt;/li>
   &lt;/ol>
&lt;/nav></pre>
					</aside>

					<p id="confreq-cd-nav-docprops-spine">As a conforming XHTML Content Document, EPUB Creators MAY
						include the EPUB Navigation Document in the <a href="#sec-spine-elem">spine</a>.</p>

					<p id="confreq-nav-ol-style">In the context of this specification, the default display style of list
						items within <code>nav</code> elements is equivalent to the <a
							href="https://www.w3.org/TR/CSS2/generate.html#propdef-list-style"><code>list-style:</code>
							<code>none</code> property</a> [[CSSSnapshot]]. <a>EPUB Creators</a> MAY specify alternative
						list styling using CSS for rendering of the document in the <a href="#sec-spine-elem"
								><code>spine</code></a>.</p>
				</section>

				<section id="sec-nav-def-types">
					<h4>The <code>nav</code> Element: Types</h4>

					<section id="sec-nav-def-types-intro" class="informative">
						<h5>Introduction</h5>

						<p>The <code>nav</code> elements defined in an EPUB Navigation Document are distinguished
							semantically by the value of their <a href="#sec-epub-type-attribute"><code>epub:type</code>
								attribute</a>.</p>

						<p>This specification defines three types of navigation aid:</p>

						<dl class="variablelist">
							<dt>
								<a href="#sec-nav-toc">
									<code>toc</code>
								</a>
							</dt>
							<dd>
								<p>Identifies the <code>nav</code> element that contains the table of contents. The
										<code>toc</code>
									<code>nav</code> is the only navigation aid that EPUB Creators must include in the
									EPUB Navigation Document.</p>
							</dd>

							<dt>
								<a href="#sec-nav-pagelist">
									<code>page-list</code>
								</a>
							</dt>
							<dd>
								<p>Identifies the <code>nav</code> element that contains a list of pages for a print or
									other statically paginated source.</p>
							</dd>

							<dt>
								<a href="#sec-nav-landmarks">
									<code>landmarks</code>
								</a>
							</dt>
							<dd>
								<p>Identifies the <code>nav</code> element that contains a list of points of
									interest.</p>
							</dd>
						</dl>

						<p>An EPUB Navigation Document may contain at most one navigation aid for each of these
							types.</p>

						<p>The EPUB Navigation Document may include additional navigation types. See <a
								href="#sec-nav-def-types-other"></a> for more information.</p>
					</section>

					<section id="sec-nav-toc">
						<h5>The <code>toc nav</code> Element </h5>

						<p>The <code>toc</code>
							<code>nav</code> element defines the primary navigational hierarchy. It conceptually
							corresponds to a table of contents in a printed work (i.e., it provides navigation to the
							major structural sections of the publication).</p>

						<p>EPUB Creators SHOULD order the references in the <code>toc</code>
							<code>nav</code> element such that they reflect both:</p>

						<ul>
							<li>
								<p>the order of the <a href="#confreq-nav-a-href">referenced EPUB Content Documents</a>
									in the <a>spine</a>; and</p>
							</li>
							<li>
								<p>the order of the targeted elements within their respective EPUB Content
									Documents.</p>
							</li>
						</ul>
						<p>The <code>toc</code>
							<code>nav</code> element MUST occur exactly once in an EPUB Navigation Document.</p>
					</section>

					<section id="sec-nav-pagelist">
						<h5>The <code>page-list nav</code> Element </h5>

						<p>The <code>page-list</code>
							<code>nav</code> element provides navigation to positions in the content that correspond to
							the locations of page boundaries present in a print source.</p>

						<p>The <code>page-list</code>
							<code>nav</code> element is OPTIONAL in EPUB Navigation Documents and MUST NOT occur more
							than once.</p>

						<p>The <code>page-list</code>
							<code>nav</code> element SHOULD contain only a single <code>ol</code> descendant (i.e., no
							nested sublists).</p>

						<p>EPUB Creators MAY identify the destinations of the <code>page-list</code> references in their
							respective EPUB Content Documents using the <a data-cite="epub-ssv/#pagebreak"
									><code>pagebreak</code> term</a> [[EPUB-SSV-11]].</p>
					</section>

					<section id="sec-nav-landmarks">
						<h5>The <code>landmarks nav</code> Element </h5>

						<p>The <code>landmarks</code>
							<code>nav</code> element identifies fundamental structural components in the content to
							enable Reading Systems to provide the user efficient access to them (e.g., through a
							dedicated button in the user interface).</p>

						<p>The <code>landmarks</code>
							<code>nav</code> element SHOULD contain only a single <code>ol</code> descendant (i.e., no
							nested sublists).</p>

						<p>The <a href="#sec-epub-type-attribute"><code>epub:type</code> attribute</a> is REQUIRED on
								<code>a</code> element descendants of the <code>landmarks</code>
							<code>nav</code> element. The structural semantics of each link target within the
								<code>landmarks</code>
							<code>nav</code> element is determined by the value of this attribute.</p>

						<aside class="example" title="A basic landmarks nav">
							<p>In this example, the <code>epub:type</code> attribute value are drawn from structural
								semantics drawn from [[EPUB-SSV-11]].</p>

							<pre>&lt;nav epub:type="landmarks">
   &lt;h2>Guide&lt;/h2>
   &lt;ol>
       &lt;li>
          &lt;a epub:type="toc"
             href="#toc">
            Table of Contents
          &lt;/a>
       &lt;/li>
       &lt;li>
          &lt;a epub:type="loi"
             href="content.html#loi">
            List of Illustrations
          &lt;/a>
       &lt;/li>
       &lt;li>
          &lt;a epub:type="bodymatter"
             href="content.html#bodymatter">
            Start of Content
          &lt;/a>
       &lt;/li>
   &lt;/ol>
&lt;/nav></pre>
						</aside>

						<p>The <code>landmarks</code>
							<code>nav</code> MUST NOT include multiple entries with the same <code>epub:type</code>
							value that reference the same resource, or fragment thereof.</p>

						<p>EPUB Creators should limit the number of items they define in the <code>landmarks</code>
							<code>nav</code> to only items that a Reading System is likely to use in its user interface.
							The element is not meant to repeat the table of contents.</p>

						<p>The following landmarks are recommended to include when available:</p>

						<ul>
							<li><a data-cite="epub-ssv-11#bodymatter"><code>bodymatter</code></a> [[?EPUB-SSV-11]]
								&#8212; Reading Systems often use this landmark to automatically jump users past the
								front matter when they begin reading.</li>
							<li><a data-cite="epub-ssv-11#toc-1"><code>toc</code></a> [[?EPUB-SSV-11]] &#8212; If the
								table of contents is available in the spine, Reading Systems may use this landmark to
								take users to the document containing it.</li>
						</ul>
						<p>Other possibilities for inclusion in the <code>landmarks</code>
							<code>nav</code> are key reference sections such as indexes and glossaries.</p>

						<p>Although the <code>landmarks</code>
							<code>nav</code> is intended for Reading System use, EPUB Creators should still ensure that
							the labels for the <code>landmarks</code>
							<code>nav</code> are human readable. Reading Systems may expose the links directly to
							users.</p>

						<p>The <code>landmarks</code>
							<code>nav</code> element is OPTIONAL in EPUB Navigation Documents and MUST NOT occur more
							than once.</p>
					</section>

					<section id="sec-nav-def-types-other">
						<h5>Other <code>nav</code> Elements</h5>

						<p>EPUB Navigation Documents MAY contain one or more <code>nav</code> elements in addition to
							the <code>toc</code>, <code>page-list</code>, and <code>landmarks</code>
							<code>nav</code> elements defined in the preceding sections. If these <code>nav</code>
							elements are intended for Reading System processing, they MUST have an <a
								href="#sec-epub-type-attribute"><code>epub:type</code> attribute</a> and are subject to
							the content model restrictions defined in <a href="#sec-nav-def-model"></a>.</p>

						<p>This specification imposes no restrictions on the semantics of any additional
								<code>nav</code> elements: they MAY represent navigational semantics for any information
							domain, and they MAY contain link targets with homogeneous or heterogeneous semantics.</p>

						<aside class="example" title="Adding a custom navigation element">
							<p>In this example, the <code>lot</code> semantic indicates that the EPUB Creator is adding
								a "list of tables" navigation element.</p>

							<pre>&lt;nav
    epub:type="lot"
    aria-labelledby="lot">
   &lt;h2 id="lot">List of tables&lt;/h2>
   &lt;ol>
      &lt;li>
         &lt;span>Tables in Chapter 1&lt;/span>
         &lt;ol>
            &lt;li>
               &lt;a href="chap1.xhtml#table-1.1">
                  Table 1.1
               &lt;/a>
            &lt;/li>
            &lt;li>
               &lt;a href="chap1.xhtml#table-1.2">
                  Table 1.2
               &lt;/a>
            &lt;/li>
         &lt;/ol>
      &lt;/li>
      …
   &lt;/ol>
&lt;/nav></pre>
						</aside>
					</section>
				</section>

				<section id="sec-nav-def-hidden">
					<h4>The <code>hidden</code> attribute</h4>

					<p>In some cases, <a>EPUB Creators</a> might wish to hide parts of the navigation data within the
						content flow (i.e., the Reading System's principal rendering of the <a>spine</a> contents). A
						typical example is the <a href="#sec-nav-pagelist">list of page breaks</a>, which EPUB Creators
						do not want Reading Systems to render as part of the content flow.</p>

					<p> While the <a href="https://www.w3.org/TR/CSS2/visuren.html#propdef-display"><code>display</code>
							property</a> [[CSSSnapshot]] controls the visual rendering of EPUB Navigation Documents in
						Reading Systems with <a>Viewports</a>, not all Reading Systems provide such an interface. To
						control rendering across all Reading Systems, EPUB Creators MUST use the [[HTML]] <a
							data-cite="html#the-hidden-attribute"><code>hidden</code></a> attribute to indicate which
						(if any) portions of the navigation data are excluded from rendering in the content flow. The
							<code>hidden</code> attribute has no effect on how Reading Systems render the navigation
						data outside of the content flow (such as in dedicated navigation user interfaces provided by
						Reading Systems).</p>

					<aside class="example" title="Hiding a nav element in spine">
						<p>In this example, the presence of the <code>hidden</code> attribute on the <code>nav</code>
							element indicates the page list will be excluded from rendering in the content flow when the
							document is rendered in the spine.</p>

						<pre>&lt;nav
    epub:type="page-list"
    hidden="">
   &lt;h2>Pagebreaks of the print version, third edition&lt;/h2>
   &lt;ol>
      &lt;li>
         &lt;a href="frontmatter.xhtml#pi">
            I
         &lt;/a>
      &lt;/li>
      …
   &lt;/ol>
&lt;/nav>
</pre>
					</aside>

					<aside class="example" title="Hiding branches of a nav element">
						<p>In this example, the branch (<code>ol</code> element) not wanted for rendering in the spine
							has the <code>hidden</code> attribute on it. When rendered, this limits the table of content
							to the two top-most hierarchical levels.</p>

						<pre>&lt;nav
    epub:type="toc"
    id="toc">
   &lt;h1>Table of contents&lt;/h1>
   &lt;ol>
      &lt;li>
         &lt;a href="chap1.xhtml">
            Chapter 1
         &lt;/a>
         &lt;ol>
            &lt;li>
               &lt;a href="chap1.xhtml#sec-1.1">
                  Chapter 1.1
               &lt;/a>
               &lt;ol hidden="">
                  &lt;li>
                     &lt;a href="chap1.xhtml#sec-1.1.1">
                        Section 1.1.1
                     &lt;/a>
                  &lt;/li>
                  …
               &lt;/ol>
            &lt;/li>
            …
         &lt;/ol>
      &lt;/li>
      …
   &lt;/ol>
&lt;/nav></pre>
					</aside>
				</section>
			</section>
		</section>
		<section id="sec-fixed-layouts">
			<h2>Fixed Layouts</h2>

			<section id="fxl-intro" class="informative">
				<h3>Introduction</h3>

				<p>EPUB documents, unlike print books or PDF files, are designed to change. The content flows, or
					reflows, to fit the screen and to fit the needs of the user. As noted in <a
						data-cite="epub-overview-33#sec-rendering">Rendering and CSS</a> "content presentation adapts to
					the user, rather than the user having to adapt to a particular presentation of content."
					[[EPUB-OVERVIEW-33]]</p>

				<p>But this principle does not work for all types of documents. Sometimes content and design are so
					intertwined it is not possible to separate them. Any change in appearance risks changing the meaning
					or losing all meaning. <a>Fixed-Layout Documents</a> give <a>EPUB Creators</a> greater control over
					presentation when a reflowable EPUB is not suitable for the content.</p>

				<p>EPUB Creators define fixed layouts using a <a href="#sec-fxl-package">set of Package Document
						properties</a> to control the rendering in <a>Reading Systems</a>. In addition, they set <a
						href="#sec-fxl-package">the dimensions of each Fixed-Layout Document</a> in its respective EPUB
					Content Document.</p>

				<div class="note" id="note-mechanisms">
					<p>EPUB 3 affords multiple mechanisms for representing fixed-layout content. When fixed-layout
						content is necessary, the EPUB Creator's choice of mechanism will depend on many factors
						including desired degree of precision, file size, accessibility, etc. This section does not
						attempt to dictate the EPUB Creator's choice of mechanism.</p>

				</div>
			</section>

			<section id="sec-fxl-package">
				<h3>Fixed-Layout Package Settings</h3>

				<section id="layout">
					<h4>Layout</h4>

					<p>The <code>rendition:layout</code> property specifies whether the content is reflowable or
						pre-paginated.</p>

					<p id="property-layout-global">When the <a href="#layout"><code>rendition:layout</code> property</a>
						is specified on a <code>meta</code> element, it indicates that the paginated or reflowable
						layout style applies globally (i.e., for all spine items).</p>

					<p>EPUB Creators MAY use the following values with the <code>rendition:layout</code> property:</p>

					<dl class="variablelist">
						<dt id="def-layout-reflowable">reflowable</dt>
						<dd>
							<p>The content is not pre-paginated (i.e., Reading Systems apply dynamic pagination when
								rendering). Default value.</p>
						</dd>

						<dt id="def-layout-pre-paginated">pre-paginated</dt>
						<dd>
							<p>The content is pre-paginated (i.e., Reading Systems produce exactly one page per spine <a
									href="#elemdef-spine-itemref"><code>itemref</code></a> when rendering).</p>
						</dd>
					</dl>

					<div class="note" id="uaag">
						<p>Reading Systems typically restrict or deny the application of user or user agent style sheets
							to pre-paginated documents because dynamic style changes are likely to have unintended
							consequence on the intrinsic properties of such documents. EPUB Creators should consider the
							negative impact on usability and accessibility that these restrictions have when choosing to
							use pre-paginated instead of reflowable content. Refer to <a
								data-cite="UAAG20#gl-text-config">Guideline 1.4 - Provide text configuration</a>
							[[UAAG20]] for related information.</p>

					</div>

					<p id="fxl-layout-duplication" data-tests="#fxl-layout-duplication">When the property is set to
							<code>pre-paginated</code> for a spine item, its content dimensions MUST be set as defined
						in <a href="#sec-fixed-layouts"></a>.</p>

					<p>The <code>rendition:layout</code> property MUST NOT be declared more than once.</p>

					<aside class="example" id="fxl-ex1" title="Fixed Layout Document with media queries">
						<p>In this example, media queries [[CSS3-MediaQueries]] are used to apply different style sheets
							for three different device categories. Note that the media queries only affect the style
							sheet applied to the document; the size of the content area set in the <code>viewport</code>
							<code>meta</code> tag is static.</p>

						<p>Package Document</p>

						<pre>&lt;package …>
   &lt;metadata …>
      …
      &lt;meta
          property="rendition:layout">
         pre-paginated
      &lt;/meta>
      …
   &lt;/metadata>
   …
&lt;/package></pre>

						<p>XHTML</p>

						<pre>&lt;html …>
   &lt;head>
      &lt;meta
          name="viewport"
          content="width=1200,
          height=900"/>
      
      &lt;link
          rel="stylesheet"
          href="eink-style.css"
          media="(max-monochrome: 3)"/>
         
      &lt;link
          rel="stylesheet"
          href="skinnytablet-style.css"
          media="((color) and (max-height:600px) and (orientation:landscape),
                  (color) and (max-width:600px) and (orientation:portrait))"/>
      
      &lt;link
          rel="stylesheet"
          href="fattablet-style.css"
          media="((color) and (min-height:601px) and (orientation:landscape),
                  (color) and (min-width:601px) and (orientation:portrait))"/>	
   &lt;/head>
   …
&lt;/html></pre>
					</aside>

					<section id="layout-overrides">
						<h5>Layout Overrides</h5>

						<p id="property-layout-local">EPUB Creators MAY specify the following properties locally on
							spine <a href="#elemdef-spine-itemref"><code>itemref</code> elements</a> to override the <a
								href="#property-layout-global">global value</a> for the given spine item:</p>

						<dl>
							<dt id="layout-pre-paginated">layout-pre-paginated</dt>
							<dd>Specifies that the given spine item is pre-paginated.</dd>

							<dt id="layout-reflowable">layout-reflowable</dt>
							<dd>Specifies that the given spine item is reflowable.</dd>
						</dl>

						<p>EPUB Creators MAY use only one of these overrides on any given spine item.</p>
					</section>
				</section>

				<section id="orientation">
					<h4>Orientation</h4>

					<p>The <code>rendition:orientation</code> property specifies which orientation the EPUB Creator
						intends the content to be rendered in. </p>

					<p id="property-orientation-global">When the <a href="#orientation"
								><code>rendition:orientation</code> property</a> is specified on a <code>meta</code>
						element, it indicates that the intended orientation applies globally (i.e., for all spine
						items).</p>

					<p>EPUB Creators MAY use the following values with the <code>rendition:orientation</code>
						property:</p>

					<dl class="variablelist">
						<dt>landscape</dt>
						<dd>
							<p>Reading Systems should render the content in landscape orientation.</p>
						</dd>

						<dt>portrait</dt>
						<dd>
							<p>Reading Systems should render the content in portrait orientation.</p>
						</dd>

						<dt>auto</dt>
						<dd>
							<p>The content is not orientation constrained. Default value.</p>
						</dd>
					</dl>

					<p id="fxl-orientation-duplication" data-tests="#fxl-orientation-duplication">EPUB Creators MUST NOT
						declare the <code>rendition:orientation</code> property more than once.</p>

					<aside class="example" id="fxl-ex2" title="Specifying global landscape orientation">
						<p>In this example, the content should also render without synthetic spreads.</p>

						<pre>&lt;package …>
   &lt;metadata …>
      …
      &lt;meta
          property="rendition:layout">
         pre-paginated
      &lt;/meta>
      
      &lt;meta
          property="rendition:spread">
         none
      &lt;/meta>
   
      &lt;meta
          property="rendition:orientation">
         landscape
      &lt;/meta>
   &lt;/metadata>
   …
&lt;/package</pre>
					</aside>

					<section id="orientation-overrides">
						<h5>Orientation Overrides</h5>

						<p id="property-orientation-local">EPUB Creators MAY specify the following properties locally on
							spine <a href="#elemdef-spine-itemref"><code>itemref</code> elements</a> to override the <a
								href="#property-orientation-global">global value</a> for the given spine item:</p>

						<dl>
							<dt id="orientation-auto">orientation-auto</dt>
							<dd>Specifies that the Reading System determines the orientation to render the spine item
								in.</dd>

							<dt id="orientation-landscape">orientation-landscape</dt>
							<dd>Specifies that Reading Systems should render the given spine item in landscape
								orientation.</dd>

							<dt id="orientation-portrait">orientation-portrait</dt>
							<dd>Specifies that Reading Systems should render the given spine item in portrait
								orientation.</dd>
						</dl>

						<p>EPUB Creators MAY use only one of these overrides on any given spine item.</p>
					</section>
				</section>

				<section id="spread">
					<h4>Synthetic Spreads</h4>

					<p>The <code>rendition:spread</code> property specifies the intended Reading System synthetic spread
						behavior.</p>

					<p id="property-spread-global">When the <code>rendition:spread</code> property is specified on a
							<code>meta</code> element, it indicates that the intended <a>Synthetic Spread</a> behavior
						applies globally (i.e., for all spine items).</p>

					<p>EPUB Creators MAY use the following values with the <code>rendition:spread</code> property:</p>

					<dl class="variablelist">
						<dt>none</dt>
						<dd>
							<p>Do not incorporate spine items in a Synthetic Spread.</p>
						</dd>

						<dt>landscape</dt>
						<dd>
							<p>Render a Synthetic Spread for spine items only when the device is in landscape
								orientation.</p>
						</dd>

						<dt>portrait (deprecated)</dt>
						<dd>
							<p>The use of spreads only in portrait orientation is <a href="#deprecated"
								>deprecated</a>.</p>
							<p>EPUB Creators should use the value "<code>both</code>" instead, as spreads that are
								readable in portrait orientation are also readable in landscape.</p>
						</dd>

						<dt>both</dt>
						<dd>
							<p>Render a Synthetic Spread regardless of device orientation.</p>
						</dd>

						<dt>auto</dt>
						<dd>
							<p>The EPUB Creator is not defining an explicit Synthetic Spread behavior. Default
								value.</p>
						</dd>
					</dl>

					<p>The <code>rendition:spread</code> property MUST NOT be declared more than once.</p>

					<div class="note">
						<p>When Synthetic Spreads are used in the context of HTML and SVG Content Documents, the
							dimensions given via the <a href="#sec-fxl-icb-html"><code>viewport</code>
								<code>meta</code> element</a> and <a href="#sec-fxl-icb-svg"><code>viewBox</code>
								attribute</a> represents the size of one page in the spread, respectively.</p>

					</div>

					<div class="note">
						<p>Refer to <a href="#sec-spine-elem">spine</a> for information about declaration of global flow
							directionality using the <code>page-progression-direction</code> attribute and that of local
							page-progression-direction within content documents.</p>

					</div>

					<aside class="example" id="fxl-ex3" title="Specifying to use spreads in landscape orientation only">

						<pre>&lt;package …>
   &lt;metadata …>
      …
      &lt;meta
          property="rendition:layout">
         pre-paginated
      &lt;/meta>
      
      &lt;meta
          property="rendition:spread">
         landscape
      &lt;/meta>
   &lt;/metadata>
   …
&lt;/package></pre>
					</aside>

					<aside class="example" id="fxl-ex4" title="Overriding the global spread behavior">
						<p>In this example, the EPUB Creator overrides the global reflowable setting in the spine for
							the title page. The intention is for Reading Systems to render it as a Fixed-Layout Document
							in a right-hand spread slot.</p>

						<p>Note that the EPUB Creator could use the alias <a href="#page-spread"
									><code>rendition:page-spread-right</code></a> in place of
								<code>page-spread-right</code>.</p>


						<pre>&lt;package …>
   &lt;metadata …>
      …
      &lt;meta
          property="rendition:layout">
         reflowable
      &lt;/meta>
      &lt;meta
          property="rendition:spread">
         auto
      &lt;/meta>
   &lt;/metadata>
   
   &lt;spine>
      &lt;itemref
          idref="titlepage"
          properties="page-spread-right
                      rendition:layout-pre-paginated"/>
      …
   &lt;/spine>
   …
&lt;/package></pre>
					</aside>

					<section id="spread-overrides">
						<h5>Synthetic Spread Overrides</h5>

						<p id="property-spread-local">EPUB Creators MAY specify the following properties locally on
							spine <a href="#elemdef-spine-itemref"><code>itemref</code> elements</a> to override the <a
								href="#property-spread-global">global value</a> for the given spine item:</p>

						<dl>
							<dt id="spread-auto">spread-auto</dt>
							<dd>Specifies the Reading System determines when to render a synthetic spread for the spine
								item. </dd>

							<dt id="spread-both">spread-both</dt>
							<dd>Specifies the Reading System should render a synthetic spread for the spine item in both
								portrait and landscape orientations. </dd>

							<dt id="spread-landscape">spread-landscape</dt>
							<dd>Specifies the Reading System should render a synthetic spread for the spine item only
								when in landscape orientation.</dd>

							<dt id="spread-none">spread-none</dt>
							<dd>Specifies the Reading System should not render a synthetic spread for the spine
								item.</dd>

							<dt id="spread-portrait">spread-portrait</dt>
							<dd>The <code>spread-portrait</code> property is <a href="#deprecated">deprecated</a>. Refer
								to its definition in [[EPUBPublications-301]] for more information.</dd>
						</dl>

						<p>EPUB Creators MAY use only one of these overrides on any given spine item.</p>
					</section>
				</section>

				<section id="page-spread">
					<h4>Spread Placement</h4>

					<p>When a Reading System renders a <a>Synthetic Spread</a>, the default behavior is to populate the
						spread by rendering the next <a>EPUB Content Document</a> in the next available unpopulated
						viewport, where the next available viewport is determined by the given <a href="#sec-spine-elem"
							>page progression direction</a> or by local declarations within Content Documents. An EPUB
						Creator MAY override this automatic population behavior and force Reading Systems to place a
						document in a particular viewport by specifying one of the following properties on its spine
							<code>itemref</code> element:</p>

					<dl>
						<dt id="page-spread-center">
							<code>rendition:page-spread-center</code>
						</dt>
						<dd>The <code>rendition:page-spread-center</code> property specifies the forced placement of a
							Content Document in a <a>Synthetic Spread</a>.</dd>

						<dt id="fxl-page-spread-left">
							<code>rendition:page-spread-left</code>
						</dt>
						<dd>The <code>rendition:page-spread-left</code> property is an alias for the <code><a
									href="#page-spread-left">page-spread-left</a></code> property.</dd>

						<dt id="fxl-page-spread-right">
							<code>rendition:page-spread-right</code>
						</dt>
						<dd>The <code>rendition:page-spread-right</code> property is an alias for the <code><a
									href="#page-spread-right">page-spread-right</a></code> property.</dd>
					</dl>

					<p>The <code>rendition:page-spread-left</code> property indicates that the given spine item is to be
						rendered in the left-hand slot in the spread, and <code>rendition:page-spread-right</code> that
						it be rendered in the right-hand slot. The <code>rendition:page-spread-center</code> property
						indicates to override the synthetic spread mode and render a single viewport positioned at the
						center of the screen.</p>

					<p>The <code>rendition:page-spread-left</code>, <code>rendition:page-spread-right</code> and
							<code>rendition:page-spread-center</code> properties apply to both pre-paginated and
						reflowable content, and they only apply when the Reading System is creating Synthetic
						Spreads.</p>

					<p>Although EPUB Creators often indicate to use a spread in certain device orientations, the content
						itself does not represent true spreads (i.e., two consecutive pages that Reading Systems must
						rendered side-by-side for readability, such as a two-page map). To indicate that two consecutive
						pages represent a true spread, EPUB Creators SHOULD use the
							<code>rendition:page-spread-left</code> and <code>rendition:page-spread-right</code>
						properties on the spine items for the two adjacent EPUB Content Documents, and omit the
						properties on spine items where one-up or two-up presentation is equally acceptable.</p>

					<p>EPUB Creators MAY only declare one <code>page-spread-*</code> property on any given spine
						item.</p>

					<div class="note" id="note-page-spread-aliases">
						<p>The <code>rendition:page-spread-left</code> and <code>rendition:page-spread-right</code>
							properties are aliases for the <a href="#page-spread-left"><code>page-spread-left</code></a>
							and <a href="#page-spread-right"><code>page-spread-right</code></a> properties. They allow
							the use of a single vocabulary for all fixed-layout properties. EPUB Creators can use either
							property set, but older Reading Systems might only recognize the unprefixed versions. The
							Working Group is not going to extend the <a href="#app-itemref-properties-vocab">EPUB Spine
								Properties Vocabulary</a> to add an unprefixed <code>page-spread-center</code>
							property.</p>

					</div>
					<aside class="example" id="fxl-ex5" title="Placing individual spine items in a spread">
						<p>In this example, the EPUB Creator intends the Reading System to create a two-page
							fixed-layout center plate using synthetic spreads in any device orientation. Note that the
							EPUB Creator has left spread behavior for the other (reflowable) parts undefined, since the
							global value of <code>rendition:spread</code> initializes to <code>auto</code> by
							default.</p>

						<pre>&lt;package …>
   …
   &lt;spine page-progression-direction="ltr">
      …
      &lt;itemref
          idref="center-plate-left"
          properties="rendition:spread-both rendition:page-spread-left"/>
      &lt;itemref
          idref="center-plate-right"
          properties="rendition:spread-both rendition:page-spread-right"/>
      …
   &lt;/spine>
&lt;/package></pre>
					</aside>

					<aside class="example" id="fxl-ex6" title="Creating a centered layout">
						<p>Note that it is not necessary to specify the <code>spread-none</code> override on the
							centered plate, as the <code>rendition:page-spread-center</code> property already specifies
							semantics that dictates that synthetic spreads be disabled.</p>

						<pre>&lt;package …>
   &lt;metadata …>
      …
      &lt;meta
          property="rendition:layout">
         pre-paginated
      &lt;/meta>
      &lt;meta
          property="rendition:spread">
         auto
      &lt;/meta>
   &lt;/metadata>
   &lt;spine>
      …
      &lt;itemref
          idref="center-plate"
          properties="rendition:page-spread-center"/>
      …
   &lt;/spine>
   …
&lt;/package></pre>
					</aside>
				</section>

				<section id="viewport">
					<h4>Viewport Dimensions (Deprecated)</h4>

					<p>The <code>rendition:viewport</code> property allows <a>EPUB Creators</a> to express the CSS
						initial containing block (ICB) [[CSS2]] for XHTML and SVG Content Documents whose
							<code>rendition:layout</code> property has been set to <code>pre-paginated</code>.</p>

					<p>Use of the property is <a href="#deprecated">deprecated</a>. Refer to its definition in
						[[EPUBPublications-301]] for more information.</p>
				</section>
			</section>

			<section id="sec-fxl-content-dimensions">
				<h3>Content Document Dimensions</h3>

				<p>This section defines rules for the expression and interpretation of dimensional properties of
						<a>Fixed-Layout Documents</a>.</p>

				<p id="confreg-fxl-icb">Fixed-Layout Documents specify their <a
						href="https://www.w3.org/TR/CSS2/visudet.html#containing-block-details">initial containing
						block</a> [[CSS2]] in the manner applicable to their format:</p>

				<dl class="conformance-list" id="sec-fxl-html-svg-dimensions">
					<dt id="sec-fxl-icb-html" data-tests="#fxl-xhtml-icb">Expressing in XHTML</dt>
					<dd>
						<p>For XHTML <a>Fixed-Layout Documents</a>, the <a
								href="https://www.w3.org/TR/CSS2/visudet.html#containing-block-details">initial
								containing block</a> [[CSS2]] dimensions MUST be expressed in a <code>viewport</code>
							<code>meta</code> tag using the syntax defined in [[CSS-Device-Adapt-1]].</p>
						<aside class="example" title="Specifying the initial containing block in a viewport meta tag">
							<pre>&lt;html …>
   &lt;head>
      …
      &lt;meta
          name="viewport"
          content="width=1200, height=600"/>
      …
   &lt;/head>
   …
&lt;/html></pre>
						</aside>
					</dd>

					<dt id="sec-fxl-icb-svg">Expressing in SVG</dt>
					<dd>
						<p>For SVG <a>Fixed-Layout Documents</a>, the initial containing block [[CSS2]] dimensions MUST
							be expressed using the <a href="https://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute"
									><code>viewBox</code> attribute</a> [[SVG]].</p>
						<aside class="example" title="Specifying the initial containing block in the viewBox attribute">
							<p>In this example, the <code>viewBox</code> attribute sets the ICB to an aspect ratio of
								844 pixels wide by 1200 pixels high.</p>

							<pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     version="1.1" 
     viewBox="0 0 844 1200">
   …
&lt;/svg></pre>
						</aside>
					</dd>
				</dl>
			</section>
		</section>
		<section id="sec-ocf">
			<h2>Open Container Format</h2>

			<section id="sec-container-abstract">
				<h3>OCF Abstract Container</h3>

				<section id="sec-container-abstract-intro" class="informative">
					<h4>Introduction</h4>

					<p>The <a>OCF Abstract Container</a> file system model uses a single common <a>Root Directory</a>
						for all the contents. All <a>Local Resources</a> for the <a>EPUB Publication</a> are located
						within the directory tree headed by the Root Directory, but no specific file system structure
						for them is mandated by this specification.</p>

					<p>The file system model also includes a mandatory directory named <code>META-INF</code> that is a
						direct child of the Root Directory and stores the following special files:</p>

					<dl class="variablelist">
						<dt>
							<code>container.xml</code>
							<code>[required]</code>
						</dt>
						<dd>
							<p>Identifies the <a>Package Document(s)</a> that define the EPUB Publication.</p>
						</dd>

						<dt>
							<code>signatures.xml</code>
							<code>[optional]</code>
						</dt>
						<dd>
							<p>Contains digital signatures for various assets.</p>
						</dd>

						<dt>
							<code>encryption.xml</code>
							<code>[optional]</code>
						</dt>
						<dd>
							<p>Contains information about the encryption of <a>Publication Resources</a>. This file is
								mandatory when EPUB Creators use <a href="#sec-font-obfuscation">font
								obfuscation</a>.</p>
						</dd>

						<dt>
							<code>metadata.xml</code>
							<code>[optional]</code>
						</dt>
						<dd>
							<p>Used to store metadata about the <a>OCF ZIP Container</a>.</p>
						</dd>

						<dt>
							<code>rights.xml</code>
							<code>[optional]</code>
						</dt>
						<dd>
							<p>Used to store information about digital rights.</p>
						</dd>

						<dt>
							<code>manifest.xml</code>
							<code>[optional]</code>
						</dt>
						<dd>
							<p>A manifest of container contents as allowed by Open Document Format [[ODF]].</p>
						</dd>
					</dl>

					<p>Refer to <a href="#sec-container-metainf"></a> for conformance requirements for the various files
						in the <code>META-INF</code> directory.</p>
				</section>

				<section id="sec-container-file-and-dir-structure">
					<h4>File and Directory Structure</h4>

					<p>The virtual file system for the <a>OCF Abstract Container</a> MUST have a single common <a>Root
							Directory</a> for all the contents of the container.</p>

					<p>The OCF Abstract Container MUST include a directory for configuration files named
							<code>META-INF</code> that is a direct child of the container's Root Directory. Refer to <a
							href="#sec-container-metainf"></a> for the requirements for the contents of this
						directory.</p>

					<p>The file name <code>mimetype</code> in the Root Directory is reserved for use by <a>OCF ZIP
							Containers</a>, as explained in <a href="#sec-container-zip"></a>.</p>

					<p>EPUB Creators MAY locate all other files within the OCF Abstract Container in any location
						descendant from the Root Directory, provided they are not within the <code>META-INF</code>
						directory. EPUB Creators MUST NOT reference files in the <code>META-INF</code> directory from an
						EPUB Publication.</p>

					<div class="note">
						<p>Some Reading Systems do not provide access to resources outside the directory where the
							Package Document is stored. EPUB Creators should therefore place all resources at or below
							the directory containing the Package Document to avoid interoperability issues.</p>

						<p>This problem is more commonly encountered when <a data-cite="epub-multi-rend-11#container"
								>creating multiple renditions</a> [[EPUB-MULTI-REND-11]] of the publication.</p>

					</div>
				</section>

				<section id="sec-container-filenames">
					<h4>File Paths and File Names</h4>

					<p id="ocf-fn-cs">In the context of the Abstract Container, <a>File Paths</a> and <a>File Names</a>
						are case sensitive.</p>

					<p>In addition, the following restrictions are designed to allow File Paths and File Names to be
						used without modification on most operating systems:</p>

					<ul class="conformance-list">
						<li>
							<p id="ocf-fn-encoding">File Names and Paths MUST be UTF-8 [[Unicode]] encoded.</p>
						</li>
						<li>
							<p id="ocf-fn-length">File Names MUST NOT exceed 255 bytes.</p>
						</li>
						<li>
							<p id="ocf-pn-length">The File Paths for any directory or file within the OCF Abstract
								Container MUST NOT exceed 65535 bytes.</p>
						</li>
						<li>
							<p id="ocf-fn-chars">File Names MUST NOT use the following [[Unicode]] characters, as
								commonly used operating systems may not support these characters consistently:</p>
							<ul>
								<li>
									<p>SOLIDUS: <code>/</code> (<code>U+002F</code>)</p>
								</li>
								<li>
									<p>QUOTATION MARK: <code>"</code> (<code>U+0022</code>)</p>
								</li>
								<li>
									<p>ASTERISK: <code>*</code> (<code>U+002A</code>)</p>
								</li>
								<li>
									<p>FULL STOP as the last character: <code>.</code> (<code>U+002E</code>)</p>
								</li>
								<li>
									<p>COLON: <code>:</code> (<code>U+003A</code>)</p>
								</li>
								<li>
									<p>LESS-THAN SIGN: <code>&lt;</code> (<code>U+003C</code>)</p>
								</li>
								<li>
									<p>GREATER-THAN SIGN: <code>></code> (<code>U+003E</code>)</p>
								</li>
								<li>
									<p>QUESTION MARK: <code>?</code> (<code>U+003F</code>)</p>
								</li>
								<li>
									<p>REVERSE SOLIDUS: <code>\</code> (<code>U+005C</code>)</p>
								</li>
								<li>
									<p>VERTICAL LINE: <code>|</code> (<code>U+007C</code>)</p>
								</li>
								<li>
									<p>DEL (<code>U+007F</code>)</p>
								</li>
								<li>
									<p>C0 range (<code>U+0000 … U+001F</code>)</p>
								</li>
								<li>
									<p>C1 range (<code>U+0080 … U+009F</code>)</p>
								</li>
								<li>
									<p>Private Use Area (<code>U+E000 … U+F8FF</code>)</p>
								</li>
								<li>
									<p>All Unicode Non Characters, specifically:</p>
									<ul>
										<li>
											<p>The 32 contiguous characters in the Basic Multilingual Plane
													(<code>U+FDD0 … U+FDEF</code>)</p>
										</li>
										<li>
											<p>The last two code points of the Basic Multilingual Plane
													(<code>U+FFFE</code> and <code>U+FFFF</code>)</p>
										</li>
										<li>
											<p>The last two code points at the end of the Supplementary Planes
													(<code>U+1FFFE, U+1FFFF … U+EFFFE, U+EFFFF</code>)</p>
										</li>
									</ul>
								</li>
								<li>
									<p>Specials (<code>U+FFF0 … U+FFFF</code>)</p>
								</li>
								<li>
									<p>The Deprecated Characters in the Tags and Variation Selectors Supplement
											(<code>U+E0001</code> and <code>U+E007F</code>)</p>
								</li>
								<li>
									<p>Supplementary Private Use Area-A (<code>U+F0000 … U+FFFFF</code>)</p>
								</li>
								<li>
									<p>Supplementary Private Use Area-B (<code>U+100000 … U+10FFFF</code>)</p>
								</li>
							</ul>
						</li>
						<li>
							<p id="ocf-fn-cn">All File Names within the same directory MUST be unique following Unicode
								canonical normalization [[UAX15]] and then full case folding [[Unicode]]. (Refer to <a
									data-cite="charmod-norm#CanonicalFoldNormalizationStep">Unicode Canonical Case Fold
									Normalization Step</a> [[?CHARMOD-NORM]] for more information.)</p>
						</li>
					</ul>
					<div class="note">
						<p> If EPUB Creators dynamically integrate resources (i.e., where the naming is beyond their
							control), they should be aware that automatic truncation of File Names to keep them within
							the 255 bytes limit can lead to corruption. This is due to the difference between bytes and
							characters in multibyte encodings such as UTF-8; it is, therefore, important to avoid
							mid-character truncation. See the section on <a
								data-cite="international-specs/#char_truncation">"Truncating or limiting the length of
								strings"</a> in [[international-specs]] for more information. </p>

					</div>

					<div class="note">
						<p>EPUB Creators should use an abundance of caution in their file naming when interoperability
							of content is key. The <a href="#ocf-fn-chars">list of restricted characters</a> is intended
							to help avoid some known problem areas, but it does not ensure that all other Unicode
							characters are supported. Although Unicode support is much better now than in earlier
							iterations of EPUB, older tools and toolchains may still be encountered (e.g., ZIP tools
							that only support [[US-ASCII]]).</p>


						<p>If EPUB Creators need to ensure compatibility with EPUB 2 Reading Systems that only accept
							URIs [[RFC3986]], they should further consider restricting resource names to the ASCII
							character set [[US-ASCII]].</p>
					</div>
				</section>

				<section id="sec-file-names-to-path-names">
					<h4>Deriving File Paths</h4>

					<p>To <dfn class="lint-ignore">derive the File Path</dfn>, given a file or directory <var>file</var>
						in the <a href="#sec-container-abstract">OCF Abstract Container</a>, apply the following steps
						(expressed using the terminology of [[INFRA]]):</p>

					<ol class="algorithm">
						<!-- <li>Let <var>file</var> be the directory or file to parse</li> -->
						<li>Let <var>path</var> be an empty <a data-cite="infra#list">list</a>.</li>
						<li>Let <var>current</var> be <var>file</var>.</li>
						<li>While <var>current</var> is not the <a>Root Directory</a>: <ol>
								<li><a data-cite="infra#list-prepend">prepend</a> the <a>File Name</a> of
										<var>current</var> to <var>path</var>;</li>
								<li>set <var>current</var> to the parent directory of <var>current</var>.</li>
							</ol>
						</li>
						<li> Return the <a data-cite="infra#string-concatenate">concatenation</a> of <var>path</var>
							using the <code>U+002F (/)</code> character. </li>
					</ol>
				</section>

				<section id="sec-container-iri">
					<h4>URLs in the OCF Abstract Container</h4>

					<p id="confreq-root-url" data-tests="#pkg-manifest-url,#pkg-relative-url">The <a>container root
							URL</a> is the <a data-cite="url#concept-url">URL</a> [[URL]] of the <a>Root Directory</a>.
						It is implementation-specific, but EPUB Creators MUST assume it has the following
						properties:</p>

					<ul>
						<li>The result of <a data-cite="url#concept-url-parser">parsing</a> "<code>/</code>" with the
								<a>container root URL</a> as <a data-cite="url#concept-base-url"><var>base</var></a> is
							the <a>container root URL</a>.</li>
						<li>The result of <a data-cite="url#concept-url-parser">parsing</a> "<code>..</code>" with the
								<a>container root URL</a> as <a data-cite="url#concept-base-url"><var>base</var></a> is
							the <a>container root URL</a>.</li>
					</ul>

					<p>The <a>content URL</a> of a file or directory in the <a>OCF Abstract Container</a> is the result
						of <a data-cite="url#concept-url-parser">parsing</a> the file's <a>File Path</a> with the
							<a>container root URL</a> as <a data-cite="url#concept-base-url"><var>base</var></a>.</p>

					<div class="note">
						<p>
							<a data-cite="url#concept-url-parser">Parsing</a> may replace some characters in the File
							Path by their <a data-cite="url#percent-encode">percent encoded</a> alternative. For
							example, <code>A/B/C/file&#160;name.xhtml</code> becomes
								<code>A/B/C/file%20name.xhtml</code>. </p>

					</div>

					<p> A string <var>url</var> is a <dfn id="dfn-valid-relative-container-url-with-fragment-string"
							>valid-relative-container-URL-with-fragment string</dfn> if it is a <a
							data-cite="url#path-relative-scheme-less-url-string">path-relative-scheme-less-URL
							string</a>, optionally followed by <code>U+0023 (#)</code> and a <a
							data-cite="url#url-fragment-string">URL-fragment string</a>, and if the following steps
						return <var>true</var>: </p>

					<ol class="algorithm" id="algo-out-of-container">
						<li> Set the <a>container root URL</a> to <code>https://a.example.org/A/</code>. <details>
								<summary>Explanation</summary>
								<p class="note"> The goal of the algorithm is to detect whether <var>url</var> could be
									seen as "leaking" outside the container. To do that, the standard <a
										data-cite="url#concept-url-parser">URL parsing algorithm</a> is used with an
									artificial root URL; the detection of the "leak" is done by comparing the result of
									the parsing with the presence of the first test path segment (<code>A</code>). (Note
									that the artificial container root URL wilfully violates, for the purpose of this
									algorithm, the <a href="#confreq-root-url">required properties</a> by using that
									first test path segment.) </p>
							</details>
						</li>

						<li> Let <var>base</var> be the <a data-cite="url#concept-base-url">base URL</a> that must be
							used to parse <var>url</var> as defined by the context (document or environment) where
								<var>url</var> is used, and according to the <a>content URL</a> of the <a>Package
								Document</a> (see <a href="#sec-parse-package-urls"></a>). <details>
								<summary>Explanation</summary>
								<p class="note"> In the case of a URL in the package document the <var>base</var>
									variable is set to the <a>content URL</a> of the <a>Package Document</a>. In the
									case of a document within the <code>META-INF</code> directory, the <var>base</var>
									variable is set to the <a>container root URL</a> (see <a
										href="#sec-parsing-urls-metainf"></a>). In the case of a URL in an XHTML Content
									Document, the base URL used for parsing is defined by the <a
										data-cite="html#resolving-urls">HTML standard</a>. Typically, it will be the
										<a>content URL</a> of the content document (unless the <a
										href="#sec-xhtml-deviations-base">discouraged</a>
									<code>base</code> element is used). </p>
							</details>
						</li>

						<li> Let <var>testURLRecord</var> be the result of applying the <a
								data-cite="url#concept-url-parser">URL parser</a> to <var>url</var>, with
								<var>base</var>. </li>

						<li> Let <var>testURLStringA</var> be the result of applying the <a
								data-cite="url#concept-url-serializer">URL Serializer</a> to <var>testURLRecord</var>. </li>

						<li> Set the <a>container root URL</a> to <code>https://b.example.org/B/</code>. <details>
								<summary>Explanation</summary>
								<p class="note">The reasons to repeat the same steps twice with different, and
									artificial, settings of the container root URL is to avoid collision which may occur
									if the <var>url</var> string also includes <code>/A/</code>. Consider, for example,
									the case where <var>url</var> is <code>../../A/doc.xhtml</code>.</p>
							</details>
						</li>

						<li> Set <var>base</var> to be the <a data-cite="url#concept-base-url">base URL</a> that must be
							used to parse <var>url</var> as defined by the context (document or environment) where
								<var>url</var> is used, and according to the <a>content URL</a> of the <a>Package
								Document</a> (see <a href="#sec-parse-package-urls"></a>). </li>

						<li> Set <var>testURLRecord</var> to be the result of applying the <a
								data-cite="url#concept-url-parser">URL parser</a> to <var>url</var>, with
								<var>base</var>. </li>

						<li> Let <var>testURLStringB</var> be the result of applying the <a
								data-cite="url#concept-url-serializer">URL Serializer</a> to <var>testURLRecord</var>. </li>

						<li> If <var>testURLStringA</var> does not start with <code>https://a.example.org/</code> or
								<var>testURLStringB</var> does not start with <code>https://b.example.org/</code>,
							return <var>true</var>. <details>
								<summary>Explanation</summary>
								<p class="note"> If any of the result does not share the test URL host, it means that
										<var>url</var>, or its base URL (for example, in HTML, if it is explicitly set
									with the <code>base</code> element), was <em>absolute</em> and points outside the
									container. This is acceptable. </p>
							</details>
						</li>

						<li> If <var>testURLStringA</var> starts with <code>https://a.example.org/A/</code> and
								<var>testURLStringB</var> starts with <code>https://b.example.org/B/</code>, return
								<var>true</var>. <details>
								<summary>Explanation</summary>
								<p class="note">The presence of the first test path segments (<code>A</code>,
									respectively <code>B</code>) indicate that the URL doesn't leak outside the
									container.</p>
							</details>
						</li>

						<li>Return <var>false</var>.</li>
					</ol>

					<p> In the <a>OCF Abstract Container</a>, any URL string MUST be an <a
							data-cite="url#absolute-url-with-fragment-string">absolute-URL-with-fragment-string</a> or a
							<a>valid-relative-container-URL-with-fragment string</a>. </p>

					<div class="note">
						<p> The properties of the <a>container root URL</a> are such that whatever the amount of <a
								data-cite="url#double-dot-path-segment">double-dot path segments</a> in a URL string
							(for example, <code>../../../secret</code>), it is parsed to a <a>content URL</a> (and not
							"leak" outside the container). This avoids potential run-time security issues. The
							additional constraint on <a>valid-relative-container-URL-with-fragment strings</a> ensures
							that such potentially problematic URLs can also be detected when checking the EPUB
							Publication. </p>


						<p> For better interoperability with non-conforming or legacy Reading Systems and toolchains,
							EPUB Creators should not use more <a data-cite="url#double-dot-path-segment">double-dot path
								segments</a> than needed to reach the target container file. </p>

					</div>

					<aside class="example" title="Referencing a file in the same directory">
						<p>In this example, the file <code>image1.jpg</code> is in the same directory as the <a>XHTML
								Content Document</a>.</p>

						<pre>&lt;html …>
   …
   &lt;body>
      &lt;img
          src="image1.jpg"
          alt="…" />
   …
   &lt;/body>
&lt;/html></pre>
					</aside>

					<aside class="example" title='An "out-of-container" URL'>
						<p>Given the following container structure:</p>

						<pre>
							/
							├── mimetype
							├── META-INF
							│   └── container.xml
							└── EPUB
							    └── content.xhtml
						</pre>

						<p> A URL `../../../../EPUB/secret.xhtml` appearing in `content.xhtml` would be parsed by a
							Reading System into a <a>content URL</a> with a path `EPUB/secret.xhtml`, following the
							constraints on the <a>container root URL</a>. However, as the URL could be perceived as one
							of a resource outside the container, and create interoperability issues; it would be
							reported as an error by a checker tool. </p>
					</aside>
				</section>

				<section id="sec-container-metainf">
					<h4><code>META-INF</code> Directory</h4>

					<section id="sec-container-metainf-inc">
						<h5>Inclusion</h5>

						<p>All <a>OCF Abstract Containers</a> MUST include a directory called <code>META-INF</code> in
							their <a>Root Directory</a>.</p>

						<p>This directory is reserved for configuration files, specifically those defined in <a
								href="#sec-container-metainf-files"></a>.</p>
					</section>

					<section id="sec-parsing-urls-metainf">
						<h5>Parsing URLs in the <code>META-INF</code> Directory</h5>

						<p>To parse a URL string <var>url</var> used in files located in the <code>META-INF</code>
							directory the <a data-cite="url#concept-url-parser">URL Parser</a> MUST be applied to
								<var>url</var>, with the <a>container root URL</a> as <a
								data-cite="url#concept-base-url"><var>base</var></a>.</p>

						<aside class="example" title="Resolving paths in the container file">
							<p>If container file (<code>META-INF/container.xml</code>) has the following content:</p>

							<pre>&lt;?xml version="1.0"?>
&lt;container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container">
   &lt;rootfiles>
      &lt;rootfile
          full-path="EPUB/Great_Expectations.opf"
          media-type="application/oebps-package+xml" />	
   &lt;/rootfiles>
&lt;/container></pre>

							<p>then the path <code>EPUB/Great_Expectations.opf</code> is relative to the root directory
								for the OCF Abstract Container and not relative to the <code>META-INF</code>
								directory.</p>
						</aside>
					</section>

					<section id="sec-container-metainf-files">
						<h5>Reserved Files</h5>

						<section id="sec-container-metainf-container.xml">
							<h6>Container File (<code>container.xml</code>)</h6>

							<p>The REQUIRED <code>container.xml</code> file in the <code>META-INF</code> directory
								identifies the <a>Package Documents</a> available in the <a>OCF Abstract
								Container</a>.</p>

							<p>All [[XML]] elements defined in this section are in the
									<code>urn:oasis:names:tc:opendocument:xmlns:container</code> namespace [[XML-NAMES]]
								unless specified otherwise.</p>

							<p>The contents of this file MUST be valid to the definition in this section after removing
								all elements and attributes from other namespaces (including all attributes and contents
								of such elements).</p>

							<p class="note">An <a href="#app-schema-container">XML Schema</a> also informally defines
								the content of this file.</p>

							<section id="sec-container.xml-container-elem">
								<h6>The <code>container</code> Element</h6>

								<p>The <code>container</code> element is the root element of the
										<code>container.xml</code> file.</p>

								<dl id="elemdef-container" class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>container</code>
										</p>
									</dd>

									<dt>Usage</dt>
									<dd>
										<p>Root element of the <code>container.xml</code> file.</p>
									</dd>

									<dt>Attributes</dt>
									<dd>
										<dl>
											<dt>
												<code>version</code>
												<code>[required]</code>
											</dt>
											<dd id="attrdef-container-version">This attribute MUST have the value
													"<code>1.0</code>".</dd>
										</dl>
									</dd>

									<dt>Content Model</dt>
									<dd>
										<p>In this order:</p>
										<ul class="nomark">
											<li><a href="#elemdef-rootfiles"><code>rootfiles</code></a> [exactly
												one]</li>
											<li><a href="#elemdef-links"><code>links</code></a> [0 or 1]</li>
										</ul>
									</dd>
								</dl>
							</section>

							<section id="sec-container.xml-rootfiles-elem">
								<h6>The <code>rootfiles</code> Element</h6>

								<p>The <code>rootfiles</code> element contains a list of <a>Package Documents</a>
									available in the <a>EPUB Container</a>.</p>

								<dl id="elemdef-rootfiles" class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>rootfiles</code>
										</p>
									</dd>

									<dt>Usage</dt>
									<dd>
										<p>REQUIRED first child of <a href="#elemdef-container"
												><code>container</code></a>.</p>
									</dd>

									<dt>Attributes</dt>
									<dd>
										<p>None</p>
									</dd>

									<dt>Content Model</dt>
									<dd>
										<ul class="nomark">
											<li><a href="#elemdef-rootfile"><code>rootfile</code></a> [1 or more]</li>
										</ul>
									</dd>
								</dl>
							</section>

							<section id="sec-container.xml-rootfile-elem">
								<h6>The <code>rootfile</code> Element</h6>

								<p>Each <code>rootfile</code> element identifies the location of one <a>Package
										Document</a> in the <a>EPUB Container</a>.</p>

								<dl id="elemdef-rootfile" class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>rootfile</code>
										</p>
									</dd>

									<dt>Usage</dt>
									<dd>
										<p>As child of the <a href="#elemdef-rootfiles"><code>rootfiles</code></a>
											element. Repeatable.</p>
									</dd>

									<dt>Attributes</dt>
									<dd>
										<dl>
											<dt>
												<code>full-path</code>
												<code>[required]</code>
											</dt>
											<dd>
												<p>Identifies the location of a <a>Package Document</a>.</p>
												<p>The value of the attribute MUST be a <a
														data-cite="url#path-relative-scheme-less-url-string"
														>path-relative-scheme-less-URL string</a> [[URL]]. The path is
													relative to the <a>Root Directory</a>.</p>
											</dd>

											<dt>
												<code>media-type</code>
												<code>[required]</code>
											</dt>
											<dd>
												<p>Identifies the media type of the Package Document.</p>
												<p>The value of the attribute MUST be
														"<code>application/oebps-package+xml</code>".</p>
											</dd>
										</dl>
									</dd>

									<dt>Content Model</dt>
									<dd>
										<p>Empty</p>
									</dd>
								</dl>

								<p>If an EPUB Creator defines more than one <code>rootfile</code> element, each MUST
									reference a Package Document that conforms to the same version of EPUB. Each Package
									Document represents one rendering of the EPUB Publication.</p>

								<div class="note">
									<p>Although the EPUB Container provides the ability to reference more than one
										Package Document, this specification does not define how to interpret, or select
										from, the available options. Refer to [[EPUB-MULTI-REND-11]] for more
										information on how to bundle more than one rendering of the content.</p>

								</div>
							</section>

							<section id="sec-container.xml-links-elem">
								<h6>The <code>links</code> Element</h6>

								<p>The <code id="elemdef-container-links">links</code> element identifies resources
									necessary for the processing of the <a>OCF ZIP Container</a>.</p>

								<dl id="elemdef-links" class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>links</code>
										</p>
									</dd>

									<dt>Usage</dt>
									<dd>
										<p>OPTIONAL second child of <a href="#elemdef-container"
												><code>container</code></a>. Repeatable.</p>
									</dd>

									<dt>Attributes</dt>
									<dd>
										<p>None</p>
									</dd>

									<dt>Content Model</dt>
									<dd>
										<ul class="nomark">
											<li><a href="#elemdef-link"><code>link</code></a> [1 or more]</li>
										</ul>
									</dd>
								</dl>

								<div class="note">
									<p>This specification currently does not define uses for the <code>links</code>
										element. Refer to [[EPUB-Multi-Rend-11]] for an example of its use.</p>

								</div>
							</section>

							<section id="sec-container.xml-link-elem">
								<h6>The <code>link</code> Element</h6>

								<dl id="elemdef-link" class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>link</code>
										</p>
									</dd>

									<dt>Usage</dt>
									<dd>
										<p>As child of the <a href="#elemdef-links"><code>links</code></a> element.
											Repeatable.</p>
									</dd>

									<dt>Attributes</dt>
									<dd>
										<dl>
											<dt>
												<code>href</code>
												<code>[required]</code>
											</dt>
											<dd>
												<p>Identifies the location of a resource.</p>
												<p>The value of the <code>link</code> element <code>href</code>
													attribute MUST be a <a
														data-cite="url#path-relative-scheme-less-url-string"
														>path-relative-scheme-less-URL string</a> [[URL]]. The path is
													relative to the <a>Root Directory</a>.</p>
											</dd>

											<dt>
												<code>media-type</code>
												<code>[optional]</code>
											</dt>
											<dd>
												<p>Identifies the type and format of the referenced resource.</p>
												<p>The value of the attribute MUST be a media type [[RFC2046]].</p>
											</dd>

											<dt>
												<code>rel</code>
												<code>[required]</code>
											</dt>
											<dd>
												<p>Identifies the relationship of the resource.</p>
												<p>The value of the attribute MUST be a space-separated list of
													tokens.</p>
											</dd>
										</dl>
									</dd>

									<dt>Content Model</dt>
									<dd>
										<p>Empty</p>
									</dd>
								</dl>
							</section>

							<section id="sec-container-container.xml-example" class="informative">
								<h6>Examples</h6>

								<aside class="example" title="A basic container file">
									<pre>&lt;?xml version="1.0"?>
&lt;container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container">
   &lt;rootfiles>
      &lt;rootfile
          full-path="EPUB/My_Crazy_Life.opf"
          media-type="application/oebps-package+xml" />
   &lt;/rootfiles>
&lt;/container></pre>
								</aside>
							</section>
						</section>

						<section id="sec-container-metainf-encryption.xml">
							<h6>Encryption File (<code>encryption.xml</code>)</h6>

							<p>The OPTIONAL <code>encryption.xml</code> file in the <code>META-INF</code> directory
								holds all encryption information on the contents of the container. If an EPUB Creator
								encrypts any resources within the container, they MUST include an
									<code>encryption.xml</code> file to provide information about the encryption
								used.</p>

							<section id="sec-encryption.xml-encryption">
								<h6>The <code>encryption</code> element</h6>

								<dl class="elemdef" id="elemdef-encryption">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>encryption</code>
										</p>
									</dd>

									<dt>Namespace</dt>
									<dd>
										<p><code>urn:oasis:names:tc:opendocument:xmlns:container</code></p>
									</dd>

									<dt>Usage</dt>
									<dd>
										<p>Root element of the <code>encryption.xml</code> file.</p>
									</dd>

									<dt>Attributes</dt>
									<dd>
										<p>None</p>
									</dd>

									<dt>Content Model</dt>
									<dd>
										<p>In any order:</p>
										<ul class="nomark">
											<li><code>EncryptedKey</code> [1 or more]</li>
											<li><code>EncryptedData</code> [1 or more]</li>
										</ul>
									</dd>
								</dl>

								<p>The <code>encryption</code> element contains child elements of type
										<code>EncryptedKey</code> and <code>EncryptedData</code> as defined by
									[[XMLENC-CORE1]].</p>

								<p>An <code id="elemdef-encryption-EncryptedKey">EncryptedKey</code> element describes
									each encryption key used in the container, while an <code
										id="elemdef-encryption-EncryptedData">EncryptedData</code> element describes
									each encrypted file. Each <code>EncryptedData</code> element refers to an
										<code>EncryptedKey</code> element, as described in XML Encryption.</p>

								<p class="note">An <a href="#app-schema-encryption">XML Schema</a> also informally
									defines the content of the <code>encryption.xml</code> file.</p>

								<p>OCF encrypts individual files independently, trading off some security for improved
									performance, allowing the container contents to be incrementally decrypted.
									Encryption in this way exposes the directory structure and file naming of the whole
									package.</p>

								<p>OCF uses XML Encryption [[XMLENC-CORE1]] to provide a framework for encryption,
									allowing a variety of algorithms to be used. XML Encryption specifies a process for
									encrypting arbitrary data and representing the result in XML. Even though an <a>OCF
										Abstract Container</a> may contain non-XML data, EPUB Creators can use XML
									Encryption to encrypt all data in an OCF Abstract Container. OCF encryption supports
									only the encryption of entire files within the container, not parts of files. EPUB
									Creators MUST NOT encrypt the <code>encryption.xml</code> file when present.</p>

								<p>Encrypted data replaces unencrypted data in an OCF Abstract Container. For example,
									if an EPUB Creator encrypts an image named <code>photo.jpeg</code>, they should
									replace the contents of the <code>photo.jpeg</code> resource with its encrypted
									contents. Within the ZIP directory, EPUB Creators SHOULD store encrypted files
									rather than Deflate-compress them.</p>

								<p id="encryption-obfuscation">Note that some situations require obfuscating the storage
									of embedded fonts referenced by an <a>EPUB Publication</a> to make them more
									difficult to extract for unrestricted use. Although obfuscation is not encryption,
									Reading Systems use the <code>encryption.xml</code> file in conjunction with the <a
										href="#sec-font-obfuscation">font obfuscation algorithm</a> to identify fonts to
									de-obfuscated.</p>

								<p id="encryption-restrictions">EPUB Creators MUST NOT encrypt or obfuscate the
									following files:</p>

								<ul class="nomark">
									<li>
										<code>mimetype</code>
									</li>
									<li>
										<code>META-INF/container.xml</code>
									</li>
									<li>
										<code>META-INF/encryption.xml</code>
									</li>
									<li>
										<code>META-INF/manifest.xml</code>
									</li>
									<li>
										<code>META-INF/metadata.xml</code>
									</li>
									<li>
										<code>META-INF/rights.xml</code>
									</li>
									<li>
										<code>META-INF/signatures.xml</code>
									</li>
									<li>
										<a>
											<code>Package Document</code>
										</a>
									</li>
								</ul>
								<p>EPUB Creators MAY subsequently encrypt signed resources using the Decryption
									Transform for XML Signature [[XMLENC-DECRYPT]]. This feature enables a Reading
									System to distinguish data encrypted before signing from data encrypted after
									signing.</p>

								<aside class="example" title="An encrypted image">
									<p>In this example, adapted from <a data-cite="xmlenc-core1#sec-eg-Symmetric-Key"
											>Section 2.2.1 </a> of [[XMLENC-CORE1]], the resource
											<code>image.jpeg</code> is encrypted using a symmetric key algorithm (AES)
										and the symmetric key is further encrypted using an asymmetric key algorithm
										(RSA) with a key of "John Smith".</p>

									<pre>&lt;encryption
    xmlns ="urn:oasis:names:tc:opendocument:xmlns:container"
    xmlns:enc="http://www.w3.org/2001/04/xmlenc#"
    xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
   &lt;enc:EncryptedKey Id="EK">
      &lt;enc:EncryptionMethod
          Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"/>
      &lt;ds:KeyInfo>
         &lt;ds:KeyName>
            John Smith
         &lt;/ds:KeyName>
      &lt;/ds:KeyInfo>
      &lt;enc:CipherData>
         &lt;enc:CipherValue>
            xyzabc
         &lt;/enc:CipherValue>
      &lt;/enc:CipherData>
   &lt;/enc:EncryptedKey>
   &lt;enc:EncryptedData Id="ED1">
      &lt;enc:EncryptionMethod
          Algorithm="http://www.w3.org/2001/04/xmlenc#kw-aes128"/>
      &lt;ds:KeyInfo>
         &lt;ds:RetrievalMethod
             URI="#EK"
             Type="http://www.w3.org/2001/04/xmlenc#EncryptedKey"/>
      &lt;/ds:KeyInfo>
      &lt;enc:CipherData>
         &lt;enc:CipherReference
             URI="image.jpeg"/>
      &lt;/enc:CipherData>
   &lt;/enc:EncryptedData>
&lt;/encryption></pre>
								</aside>
							</section>

							<section id="sec-enc-compression">
								<h6>Order of Compression and Encryption</h6>

								<p>When stored in a ZIP container, EPUB Creators SHOULD compress streams of data with
										<a>Non-Codec</a> content types before encrypting them. EPUB Creators MUST use
									Deflate compression. This practice ensures that file entries stored in the ZIP
									container have a smaller size.</p>

								<p>EPUB Creators SHOULD NOT compress streams of data with <a>Codec</a> content types
									before encrypting them. In such cases, additional compression introduces unnecessary
									processing overhead at production time (especially with large resource files) and
									impacts audio/video playback performance at consumption time. In some cases, the
									combination of compression with some encryption schemes might even compromise the
									ability of Reading Systems to handle partial content requests (e.g. HTTP byte
									ranges), due to the technical impossibility to determine the length of the full
									resource ahead of media playback (e.g. HTTP Content-Length header).</p>

								<p>When EPUB Creators compress streams of data before encrypting, they SHOULD provide
									additional <code>EncryptionProperties</code> metadata to specify the size of the
									initial resource (i.e., before compression and encryption), as per the
										<code>Compression</code> XML element defined below. When EPUB Creators do not
									compress streams of data before encrypting, they MAY provide the additional
										<code>EncryptionProperties</code> metadata to specify the size of the initial
									resource (i.e., before encryption).</p>

								<dl class="elemdef" id="elemdef-enc-Compression">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>Compression</code>
										</p>
									</dd>

									<dt>Namespace</dt>
									<dd>
										<p>
											<code>http://www.idpf.org/2016/encryption#compression</code>
										</p>
									</dd>

									<dt>Usage</dt>
									<dd>
										<p>OPTIONAL child of <code>EncryptionProperty</code>.</p>
									</dd>

									<dt>Attributes</dt>
									<dd>
										<dl class="variablelist">
											<dt>Method <code>[required]</code></dt>
											<dd>
												<p>Identifies the compression method used.</p>
												<p>Value is either "<code>0</code>" (no compression) or "<code>8</code>"
													(Deflate algorithm).</p>
											</dd>

											<dt>OriginalLength <code>[required]</code></dt>
											<dd>
												<p>Represents the size of the initial resource (number of bytes).</p>
												<p>Value is a positive integer.</p>
											</dd>
										</dl>
									</dd>

									<dt>Content Model</dt>
									<dd>
										<p>Empty</p>
									</dd>
								</dl>

								<aside class="example" title="A compressed video">
									<p>In this example, the EPUB Creator has Deflate compressed the MP4 file. Its
										original size was 3500000 bytes.</p>

									<pre>&lt;encryption
    xmlns="urn:oasis:names:tc:opendocument:xmlns:container">
   &lt;enc:EncryptedData 
       xmlns:enc="http://www.w3.org/2001/04/xmlenc#">
      …
      &lt;enc:CipherData>
         &lt;enc:CipherReference
             URI="OEPBS/video.mp4"/>
      &lt;/enc:CipherData>
      &lt;enc:EncryptionProperties>
         &lt;enc:EncryptionProperty
             xmlns:ns="http://www.idpf.org/2016/encryption#compression">
            &lt;ns:Compression
                Method="8"
                OriginalLength="3500000"/>
         &lt;/enc:EncryptionProperty>
      &lt;/enc:EncryptionProperties>
      …
   &lt;/enc:EncryptedData>
&lt;/encryption></pre>
								</aside>
							</section>
						</section>

						<section id="sec-container-metainf-manifest.xml">
							<h6>Manifest File (<code>manifest.xml</code>)</h6>

							<p>The OPTIONAL <code>manifest.xml</code> file in the <code>META-INF</code> directory
								provides a manifest of files in the Container.</p>

							<p>The OCF specification does not mandate a format for the manifest.</p>

							<p>Note that <a>Package Documents</a> specify the only manifests used for processing <a>EPUB
									Publications</a>. Reading Systems do not use this file.</p>

							<div class="note">This feature exists only for compatibility with [[ODF]].</div>
						</section>

						<section id="sec-container-metainf-metadata.xml">
							<h6>Metadata File (<code>metadata.xml</code>)</h6>

							<p>EPUB Creators MUST use the OPTIONAL <code>metadata.xml</code> file in the
									<code>META-INF</code> directory only for container-level metadata.</p>

							<p>If EPUB Creators include a <code>metadata.xml</code> file, they SHOULD use only
								namespace-qualified elements [[XML-NAMES]] in it. The file SHOULD contain the root
								element <code>metadata</code> in the namespace
									<code>http://www.idpf.org/2013/metadata</code>, but this specification allows other
								root elements for backwards compatibility.</p>

							<p>This version of the specification does not define metadata for use in the
									<code>metadata.xml</code> file. Future versions of this specification MAY define
								container-level metadata.</p>
						</section>

						<section id="sec-container-metainf-rights.xml">
							<h6>Rights Management File (<code>rights.xml</code>)</h6>

							<p>This specification resrves the OPTIONAL <code>rights.xml</code> file in the
									<code>META-INF</code> directory for digital rights management (DRM) information for
								trusted exchange of EPUB Publications among rights holders, intermediaries, and
								users.</p>

							<p>When EPUB Creators do not include a <code>rights.xml</code> file, no part of the
								container is rights governed at the container level. Rights expressions might exist
								within the EPUB Publications.</p>

							<p>If EPUB Creators do not include a <code>rights.xml</code> file, no part of the OCF
								Abstract Container is rights governed.</p>
						</section>

						<section id="sec-container-metainf-signatures.xml">
							<h6>Digital Signatures File (<code>signatures.xml</code>)</h6>

							<div class="note">
								<p>Adding a digital signature is not a guarantee that a malicious actor cannot tamper
									with an EPUB Publication as Reading Systems do not have to check signatures.</p>

							</div>

							<p>The OPTIONAL <code>signatures.xml</code> file in the <code>META-INF</code> directory
								holds digital signatures for the container and its contents.</p>

							<section id="sec-signatures.xml-signatures">
								<h6>The <code>signatures</code> element</h6>

								<dl class="elemdef" id="elemdef-signatures">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>signatures</code>
										</p>
									</dd>

									<dt>Namespace</dt>
									<dd>
										<p><code>urn:oasis:names:tc:opendocument:xmlns:container</code></p>
									</dd>

									<dt>Usage</dt>
									<dd>
										<p>Root element of the <code>signature.xml</code> file.</p>
									</dd>

									<dt>Attributes</dt>
									<dd>
										<p>None</p>
									</dd>

									<dt>Content Model</dt>
									<dd>
										<ul class="nomark">
											<li><code>Signature</code> [1 or more]</li>
										</ul>
									</dd>
								</dl>

								<p>The <code>signature</code> element contains child elements of type
										<code>Signature</code>, as defined by [[XMLDSIG-CORE1]]. EPUB Creators can apply
									signatures to an EPUB Publication as a whole or to its parts, and can specify the
									signing of any kind of data (i.e., not just XML).</p>

								<p class="note">An <a href="#app-schema-signatures">XML Schema</a> also informally
									defines the content of the <code>signatures.xml</code> file.</p>

								<p>When an EPUB Creator does not include a <code>signatures.xml</code> file, they are
									not signing any part of the container at the container level. Digital signing might
									exist within the <a>EPUB Publication</a>.</p>

								<p id="sig-container">When an EPUB Creator creates a data signature for the container,
									they SHOULD add the signature as the last child <code>Signature</code> element of
									the <code>signatures</code> element.</p>

								<div class="note">
									<p>Each <code>Signature</code> in the <code>signatures.xml</code> file identifies by
										URL [[URL]] the data to which the signature applies, using the [[XMLDSIG-CORE1]]
											<code>Manifest</code> element and its <code>Reference</code> sub-elements.
										EPUB Creator may sign individual container files separately or together.
										Separately signing each file creates a digest value for the resource that
										Reading Systems can validate independently. This approach might make a Signature
										element larger. If EPUB Creators sign files together, they can list the set of
										signed files in a single XML Signature <code>Manifest</code> element and
										reference them by one or more <code>Signature</code> elements.</p>

								</div>

								<p id="sig-restrictions">EPUB Creators can sign any or all files in the container in
									their entirety, except for the <code>signatures.xml</code> file since that file will
									contain the computed signature information. Whether and how EPUB Creators sign the
										<code>signatures.xml</code> file depends on their objective.</p>

								<p>If the EPUB Creator wants to allow signatures to be added or removed from the
									container without invalidating their signature, they SHOULD NOT sign the
										<code>signatures.xml</code> file.</p>

								<p>If the EPUB Creator wants any addition or removal of a signature to invalidate their
									signature, they can use the Enveloped Signature transform defined in <a
										data-cite="xmldsig-core#sec-EnvelopedSignature">Section 6.6.4</a> of
									[[XMLDSIG-CORE1]] to sign the entire preexisting signature file excluding the
										<code>Signature</code> being created. This transform would sign all previous
									signatures, and it would become invalid if a subsequent signature were added to the
									package.</p>

								<div class="note">
									<p>If the EPUB Creator wants the removal of an existing signature to invalidate the
										their signature, but also wants to allow the addition of signatures, they could
										use an XPath transform to sign just the existing signatures. The details of such
										a transform are outside the scope of this specification, however.</p>

								</div>

								<p>The [[XMLDSIG-CORE1]] specification does not associate any semantics with a
									signature; an agent might include semantic information, for example, by adding
									information to the Signature element that describes the signature. The
									[[XMLDSIG-CORE1]] specification describes how additional information can be added to
									a signature, such as by use the <code>SignatureProperties</code> element.</p>

								<aside class="example" title="Signing resources">
									<p>In this example, based on the examples found in <a
											data-cite="xmldsig-core1#sec-Overview">Section 2</a> of [[XMLDSIG-CORE1]],
										one signature applies to two resources (<code>EPUB/book.xhtml</code> and
											<code>EPUB/images/cover.jpeg</code>).</p>

									<pre>&lt;signatures
    xmlns="urn:oasis:names:tc:opendocument:xmlns:container">
   &lt;Signature
       Id="sig"
       xmlns="http://www.w3.org/2000/09/xmldsig#">
      &lt;SignedInfo>
         &lt;CanonicalizationMethod 
             Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>
            &lt;SignatureMethod
                Algorithm="http://www.w3.org/2000/09/xmldsig#dsa-sha1"/>
            &lt;Reference
                URI="#Manifest1">
               &lt;DigestMethod
                   Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
               &lt;DigestValue>
                  j6lwx3rvEPO0vKtMup4NbeVu8nk=
               &lt;/DigestValue>
            &lt;/Reference>
      &lt;/SignedInfo>
      &lt;SignatureValue>
         …
      &lt;/SignatureValue>
      &lt;KeyInfo>
         &lt;KeyValue>
            &lt;DSAKeyValue>
               &lt;P>…&lt;/P>
               &lt;Q>…&lt;/Q>
               &lt;G>…&lt;/G>
               &lt;Y>…&lt;/Y> 
            &lt;/DSAKeyValue>
         &lt;/KeyValue>
      &lt;/KeyInfo>
      &lt;Object>
         &lt;Manifest
             Id="Manifest1">
            &lt;Reference
                URI="EPUB/book.xhtml">                    
               &lt;Transforms>                                                
                  &lt;Transform
                      Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>                        
               &lt;/Transforms>
               &lt;DigestMethod
                   Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
               &lt;DigestValue>
               &lt;/DigestValue>
            &lt;/Reference>
            &lt;Reference URI="EPUB/images/cover.jpeg">
               &lt;Transforms>                                                
                  &lt;Transform
                      Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>                        
               &lt;/Transforms>
               &lt;DigestMethod
                   Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
               &lt;DigestValue>
               &lt;/DigestValue>
            &lt;/Reference>
         &lt;/Manifest>
      &lt;/Object>
   &lt;/Signature> 
&lt;/signatures></pre>
								</aside>
							</section>
						</section>
					</section>
				</section>
			</section>

			<section id="sec-container-zip">
				<h3>OCF ZIP Container</h3>

				<section id="sec-container-zip-intro" class="informative">
					<h4>Introduction</h4>

					<p>An <a>OCF ZIP Container</a> is a physical single-file manifestation of an <a>OCF Abstract
							Container</a>. The Container allows:</p>

					<ul>
						<li>
							<p>the exchange of in-progress <a>EPUB Publication</a> between different individuals and/or
								different organizations;</p>
						</li>
						<li>
							<p>the transfer of EPUB Publications from a publisher or conversion house to the
								distribution or sales channel; and</p>
						</li>
						<li>
							<p>the delivery of EPUB Publications to <a>EPUB Reading Systems</a> or users.</p>
						</li>
					</ul>
				</section>

				<section id="sec-zip-container-zipreqs">
					<h4>ZIP File Requirements</h4>

					<p>An <a>OCF ZIP Container</a> uses the ZIP format as specified by [[ZIP]], but with the following
						constraints and clarifications:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-zip-abstr">The contents of the OCF ZIP Container MUST be a conforming <a
									href="#sec-container-abstract">OCF Abstract Container</a>.</p>
						</li>
						<li>
							<p id="confreq-zip-mult">OCF ZIP Containers MUST NOT use the features in the ZIP application
								note [[ZIP]] that allow ZIP files to be spanned across multiple storage media or be
								split into multiple files.</p>
						</li>
						<li>
							<p id="confreq-zip-comp">OCF ZIP Containers MUST include only stored (uncompressed) and
								Deflate-compressed ZIP entries within the ZIP archive.</p>
						</li>
						<li>
							<p id="confreq-zip-64">OCF ZIP Containers MAY use the ZIP64 extensions defined as "Version
								1" in section V, subsection G of the application note [[ZIP]] and SHOULD use only those
								extensions when the content requires them.</p>
						</li>
						<li>
							<p id="confreq-zip-enc">OCF ZIP Containers MUST NOT use the encryption features defined by
								the ZIP format; instead, encryption MUST be done using the features described in <a
									href="#sec-container-metainf-encryption.xml"></a>.</p>
						</li>
						<li>
							<p id="confreq-zip-utf8">OCF ZIP Containers MUST encode File System Names using UTF-8
								[[Unicode]].</p>
						</li>
					</ul>
					<p>The following constraints apply to specific fields in the OCF ZIP Container archive:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-zip-fld-version">In the local file header table, EPUB Creators MUST set the
									<code>version needed to extract</code> fields to the values <code>10</code>,
									<code>20</code> or <code>45</code> to match the maximum version level needed by the
								given file (e.g., <code>20</code> for Deflate, <code>45</code> for ZIP64).</p>
						</li>
						<li>
							<p id="confreq-zip-fld-comp">In the local file header table, EPUB Creators MUST set the
									<code>compression</code> method field to the values <code>0</code> or
								<code>8</code>.</p>
						</li>
					</ul>
				</section>

				<section id="sec-zip-container-mime">
					<h4>OCF ZIP Container Media Type Identification</h4>

					<p>EPUB Creators MUST include the <code>mimetype</code> file as the first file in the <a>OCF ZIP
							Container</a>. In addition:</p>

					<ul>
						<li>The contents of the <code>mimetype</code> file MUST be the MIME media type [[RFC2046]]
							string <code>application/epub+zip</code> encoded in US-ASCII [[US-ASCII]].</li>
						<li>The <code>mimetype</code> file MUST NOT contain any leading or trailing padding or white
							space.</li>
						<li>The <code>mimetype</code> file MUST NOT begin with the Unicode byte order mark U+FEFF.</li>
						<li>EPUB Creators MUST NOT compress or encrypt the <code>mimetype</code> file, and MUST NOT
							include an extra field in its ZIP header.</li>
					</ul>
					<div class="note">
						<p>Refer to <a href="#app-media-type"></a> for further information about the
								<code>application/epub+zip</code> media type.</p>

					</div>
				</section>
			</section>

			<section id="sec-font-obfuscation">
				<h3>Font Obfuscation</h3>

				<div class="caution">
					<p>Better methods of protecting fonts exist. Both [[WOFF]] and [[WOFF2]] fonts, for example, allow
						the embedding of licensing information and also provide some protection through font table
						compression. The use of remotely hosted fonts also allows for font subsetting. EPUB Creators are
						advised to use font obfuscation as defined in this section only when no other options are
						available to them.</p>

				</div>

				<section id="fobfus-intro" class="informative">
					<h4>Introduction</h4>

					<p>Since an <a>OCF ZIP Container</a> is fundamentally a ZIP file, commonly available ZIP tools can
						be used to extract any unencrypted content stream from the package. Moreover, the nature of ZIP
						files means that their contents might appear like any other native container on some systems
						(e.g., a folder).</p>

					<p>While this simplicity of ZIP files is quite useful, it also poses a problem when ease of
						extraction of fonts is not a desired side-effect of not encrypting them. An <a>EPUB Creator</a>
						who wishes to include a third-party font, for example, typically does not want that font
						extracted and re-used by others. More critically, many commercial fonts allow embedding, but
						embedding a font implies making it an integral part of the EPUB Publication, not just providing
						the original font file along with the content.</p>

					<p>Since integrated ZIP support is so ubiquitous in modern operating systems, simply placing a font
						in the ZIP archive is insufficient to signify that the font cannot be reused in other contexts.
						This uncertainty can undermine the otherwise useful font embedding capability of EPUB
						Publications.</p>

					<p>To discourage reuse of the font, some font vendors might only allow use of their fonts in EPUB
						Publications if those fonts are bound in some way to the EPUB Publication. That is, if the font
						file cannot be installed directly for use on an operating system with the built-in tools of that
						computing device, and it cannot be directly used by other EPUB Publications.</p>

					<p>It is beyond the scope of this specification to provide a digital rights management or
						enforcement system for fonts. This section instead defines a method of obfuscation that will
						require additional work on the part of the final OCF recipient to gain general access to any
						obfuscated fonts.</p>

					<p>Note this specification does not claim that this constitutes encryption, nor does it guarantee
						that the resource will be secure from copyright infringement. The hope is that this algorithm
						will meet the requirements of most vendors who require some assurance that their fonts cannot
						simply be extracted by unzipping the Container.</p>

					<p>Also note that the algorithm is restricted to obfuscating fonts. It is not intended as a general
						purpose mechanism for obfuscating any resource in the EPUB Container.</p>

					<p>In the case of fonts, this mechanism simply provides a stumbling block for those who are unaware
						of the license details. It will not prevent a determined user from gaining full access to the
						font. Given an OCF Container, it is possible to apply the algorithms defined to extract the raw
						font file. Whether this method of obfuscation satisfies the requirements of individual font
						licenses remains a question for the licensor and licensee.</p>
				</section>

				<section id="obfus-keygen">
					<h4>Obfuscation Key</h4>

					<p>EPUB Creators MUST derive the key used in the obfuscation algorithm from the <a>Unique
							Identifier</a>.</p>

					<p>All white space characters, as defined in <a data-cite="xml#sec-common-syn">section 2.3 of the
							XML 1.0 specification</a> [[XML]], MUST be removed from this identifier — specifically, the
						Unicode code points <code>U+0020</code>, <code>U+0009</code>, <code>U+000D</code> and
							<code>U+000A</code>.</p>

					<p>EPUB Creators MUST generate a SHA-1 digest of the UTF-8 representation of the resulting string as
						specified by the Secure Hash Standard [[FIPS-180-4]]. They can then use this digest as the key
						for the algorithm.</p>
				</section>

				<section id="obfus-algorithm">
					<h4>Obfuscation Algorithm</h4>

					<p>The algorithm employed to obfuscate fonts consists of modifying the first 1040 bytes (~1KB) of
						the font file. (In the unlikely event that the font file is less than 1040 bytes, this process
						will modify the entire file.)</p>

					<p>To obfuscate the original data, store, as the first byte of the embedded font, the result of
						performing a logical exclusive or (XOR) on the first byte of the raw font file and the first
						byte of the <a href="#obfus-keygen">obfuscation key</a>.</p>

					<p>Repeat this process with the next byte of source and key and continue for all bytes in the key.
						At this point, the process continues starting with the first byte of the key and 21st byte of
						the source. Once 1040 bytes are encoded in this way (or the end of the source is reached),
						directly copy any remaining data in the source to the destination.</p>

					<p>EPUB Creators MUST obfuscate fonts before compressing and adding them to the OCF Container. Note
						that as obfuscation is not encryption, this requirement is not a violation of the one in <a
							href="#sec-container-metainf-encryption.xml"></a> to compress fonts before encrypting
						them.</p>

					<p>The following pseudo-code exemplifies the obfuscation algorithm.</p>

					<ol class="algorithm">
						<li>set <var>ocf</var> to OCF container file</li>
						<li>set <var>source</var> to font file</li>
						<li>set <var>destination</var> to obfuscated font file</li>
						<li>set <var>keyData</var> to key for file</li>
						<li>set <var>outer</var> to 0</li>
						<li>
							<span>while <var>outer</var> &lt; 52 and not (<var>source</var> at EOF)</span>
							<ol>
								<li>set <var>inner</var> to 0</li>
								<li>
									<span>while <var>inner</var> &lt; 20 and not (<var>source</var> at EOF)</span>
									<ol>
										<li>read 1 byte from <var>source</var> (Assumes read advances file
											position)</li>
										<li>set <var>sourceByte</var> to result of read</li>
										<li>set <var>keyByte</var> to byte <var>inner</var> of <var>keyData</var></li>
										<li>set <var>obfuscatedByte</var> to (<var>sourceByte</var> XOR
												<var>keyByte</var>)</li>
										<li>write <var>obfuscatedByte</var> to <var>destination</var></li>
										<li>increment <var>inner</var></li>
									</ol>
									<span>end while</span>
								</li>
								<li>increment <var>outer</var></li>
							</ol>
							<span>end while</span>
						</li>
						<li>
							<span>if not (<var>source</var> at EOF) then</span>
							<ol>
								<li>read <var>source</var> to EOF</li>
								<li>write result of read to <var>destination</var></li>
							</ol>
							<span>end if</span>
						</li>
						<li>Deflate <var>destination</var></li>
						<li>store <var>destination</var> as <var>source</var> in <var>ocf</var></li>
					</ol>
				</section>

				<section id="obfus-specifying">
					<h4>Specifying Obfuscated Fonts</h4>

					<p>Although not technically encrypted data, all obfuscated fonts MUST have an entry in the <code
							class="filename">encryption.xml</code> file accompanying the EPUB Publication (see <a
							href="#sec-container-metainf-encryption.xml"></a>).</p>

					<p>EPUB Creators MUST specify an <code>EncryptedData</code> element for each obfuscated font. Each
							<code>EncryptedData</code> element MUST contain a child <code>EncryptionMethod</code>
						element whose <code>Algorithm</code> attribute has the value
							<code>http://www.idpf.org/2008/embedding</code>. The presence of this attribute signals the
						use of the algorithm described in this specification.</p>

					<p>EPUB Creators MUST list the path to the obfuscated font in the <code>CipherReference</code> child
						of the <code>CipherData</code> element. As the obfuscation algorithm is restricted to fonts, the
							<code>URI</code> attribute of the <code>CipherReference</code> element MUST reference a <a
							href="#cmt-grp-font">Font Core Media Type</a>.</p>

					<aside class="example" title="An entry for an obfuscated font">
						<pre>&lt;encryption 
    xmlns="urn:oasis:names:tc:opendocument:xmlns:container" 
    xmlns:enc="http://www.w3.org/2001/04/xmlenc#">
   &lt;enc:EncryptedData> 
      &lt;enc:EncryptionMethod
          Algorithm="http://www.idpf.org/2008/embedding"/> 
      &lt;enc:CipherData> 
         &lt;enc:CipherReference
             URI="EPUB/Fonts/BKANT.TTF"/>  
      &lt;/enc:CipherData> 
   &lt;/enc:EncryptedData>  
&lt;/encryption></pre>
					</aside>

					<p>To prevent trivial copying of the embedded font to other EPUB Publications, EPUB Creators MUST
						NOT provide the <a href="#obfus-keygen">obfuscation key</a> in the <code>encryption.xml</code>
						file.</p>
				</section>
			</section>
		</section>
		<section id="sec-media-overlays">
			<h2>Media Overlays</h2>

			<section id="sec-overlays-introduction" class="informative">
				<h4>Introduction</h4>

				<p>Mainstream ebooks, educational tools and ebooks formatted for persons with print disabilities are
					some examples of works that contain synchronized audio narration. In EPUB 3, EPUB Creators can
					create these types of books using Media Overlay Documents to describe the timing for the
					pre-recorded audio narration and how it relates to the EPUB Content Document markup. The
					specification defines the file format for Media Overlays as a subset of [[SMIL3]], a W3C
					recommendation for representing synchronized multimedia information in XML.</p>

				<p>The text and audio synchronization enabled by Media Overlays provides enhanced accessibility for any
					user who has difficulty following the text of a traditional book. Media Overlays also provide a
					continuous listening experience for readers who are unable to read the text for any reason,
					something that traditional audio embedding techniques cannot offer. They are even useful for
					purposes not traditionally considered accessibility concerns (e.g., for language learning).</p>

				<p>The Media Overlays feature is transparent to <a>EPUB Reading Systems</a> that do not support the
					feature. The inclusion of Media Overlays in an EPUB Publication has no impact on the ability of
					Media Overlay-unaware Reading Systems to render the EPUB Publication as though the Media Overlays
					are not present.</p>

				<p>Media Overlays in EPUB are not an equivalent to audiobooks, as audiobooks are primarily audio-based
					with text occasionally provided as an alternate format. The W3C [[Audiobooks]] recommendation is for
					building audio publications.</p>

				<p>Although future versions of this specification might incorporate support for video media (e.g.,
					synchronized text/sign-language books), this version supports only synchronizing audio media with
					the EPUB Content Document.</p>
			</section>

			<section id="sec-overlay-docs">
				<h3>Media Overlay Documents</h3>

				<section id="sec-overlay-req">
					<h4>Media Overlay Document Requirements</h4>

					<p>A <a>Media Overlay Document</a>:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-mo-docprops-schema">MUST be valid to the Media Overlays schema as defined in
									<a href="#app-schema-overlays"></a> and conform to all content conformance
								constraints expressed in <a href="#sec-overlays-def"></a>.</p>
						</li>
						<li>
							<p id="confreq-mo-docprops-references">MAY refer to more than one EPUB Content Document, but
								more than one Media Overlay Document MUST NOT reference the same EPUB Content
								Document.</p>
						</li>
						<li>
							<p id="confreq-mo-docprops-semantics">SHOULD use <a href="#sec-docs-structural-semantic"
									>semantic markup</a> where appropriate.</p>
						</li>
					</ul>
				</section>

				<section id="sec-overlays-def">
					<h3>Media Overlay Document Definition</h3>

					<p>All elements [[XML]] defined in this section are in the <code>https://www.w3.org/ns/SMIL</code>
						namespace [[XML-NAMES]] unless otherwise specified.</p>

					<section id="sec-smil-smil-elem">
						<h5>The <code>smil</code> Element</h5>

						<p>The <code>smil</code> element is the root element of all Media Overlay Documents.</p>

						<dl class="elemdef" id="elemdef-smil">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>smil</code>
								</p>
							</dd>

							<dt>Usage</dt>
							<dd>
								<p>The <code>smil</code> element is the root element of the Media Overlay Document.</p>
							</dd>

							<dt>Attributes</dt>
							<dd>
								<dl>
									<dt>
										<code>version</code>
										<code>[required]</code>
									</dt>
									<dd>
										<p>Specifies the version number of the [[SMIL3]] specification to which the
											Media Overlay adheres.</p>
										<p>This attribute MUST have the value "<code>3.0</code>".</p>
									</dd>

									<dt>
										<code>id</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The ID [[XML]] of the element, which MUST be unique within the document
											scope.</p>
									</dd>

									<dt id="attrdef-smil-prefix">
										<code>epub:prefix</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>Declares additional metadata vocabulary prefixes.</p>
										<p>Refer to <a href="#sec-docs-structural-semantic"></a> for more
											information.</p>
									</dd>
								</dl>
							</dd>

							<dt>Content Model</dt>
							<dd>
								<p>In this order:</p>
								<ul class="nomark">
									<li>
										<p>
											<a href="#elemdef-smil-head">
												<code>head</code>
											</a>
											<code>[0 or 1]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-smil-body">
												<code>body</code>
											</a>
											<code>[exactly 1]</code>
										</p>
									</li>
								</ul>
							</dd>
						</dl>
					</section>

					<section id="sec-smil-head-elem">
						<h5>The <code>head</code> Element</h5>

						<p>The <code>head</code> element is the container for metadata in the Media Overlay
							Document.</p>

						<dl class="elemdef" id="elemdef-smil-head">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>head</code>
								</p>
							</dd>

							<dt>Usage</dt>
							<dd>
								<p>The <code>head</code> element is the OPTIONAL first child of the <a
										href="#elemdef-smil"><code>smil</code></a> element.</p>
							</dd>

							<dt>Attributes</dt>
							<dd>
								<p>None</p>
							</dd>

							<dt>Content Model</dt>
							<dd>
								<p>
									<a href="#elemdef-smil-metadata">
										<code>metadata</code>
									</a>
									<code>[0 or 1]</code>
								</p>
							</dd>
						</dl>

						<p>As this specification does not define any metadata properties that must occur in the Media
							Overlay Document, the <code>head</code> element is OPTIONAL.</p>
					</section>

					<section id="sec-smil-metadata-elem">
						<h5>The <code>metadata</code> Element</h5>

						<p>The <code>metadata</code> element represents metadata for the Media Overlay Document. The
								<code>metadata</code> element is an extension point that allows the inclusion of
							metadata from any metainformation structuring language.</p>

						<dl class="elemdef" id="elemdef-smil-metadata">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>metadata</code>
								</p>
							</dd>

							<dt>Usage</dt>
							<dd>
								<p>As a child of the <a href="#elemdef-smil-head"><code>head</code></a> element.</p>
							</dd>

							<dt>Attributes</dt>
							<dd>
								<p>None</p>
							</dd>

							<dt>Content Model</dt>
							<dd>
								<p><code>[0 or more]</code> elements from any namespace</p>
							</dd>
						</dl>

						<p>This specification defines no metadata properties that MUST occur in the Media Overlay
							Document; the <code>metadata</code> element is provided for custom metadata
							requirements.</p>
					</section>

					<section id="sec-smil-body-elem">
						<h5>The <code>body</code> Element</h5>

						<p>The <code>body</code> element is the starting point for the presentation contained in the
							Media Overlay Document. It contains the main sequence of <code>par</code> and
								<code>seq</code> elements.</p>

						<dl class="elemdef" id="elemdef-smil-body">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>body</code>
								</p>
							</dd>

							<dt>Usage</dt>
							<dd>
								<p>The <code>body</code> element is the REQUIRED second child of the <a
										href="#elemdef-smil"><code>smil</code></a> element.</p>
							</dd>

							<dt>Attributes</dt>
							<dd>
								<dl>
									<dt id="addrdef-smil-body-type">
										<code>epub:type</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>An expression of the structural semantics of the corresponding element in the
												<a>EPUB Content Document</a>.</p>
										<p>The value is a white space separated list of <a href="#sec-property-datatype"
												>property</a> types. Refer to <a href="#sec-docs-structural-semantic"
											></a> for more information.</p>
									</dd>

									<dt>
										<code>id</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The ID [[XML]] of the element, which MUST be unique within the document
											scope.</p>
									</dd>

									<dt id="attrdef-body-textref">
										<code>epub:textref</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>Identifies an associated fragment of an EPUB Content Document.</p>
										<p>The value MUST be a <a data-cite="url#path-relative-scheme-less-url-string"
												>path-relative-scheme-less-URL string</a>, optionally followed by
												<code>U+0023 (#)</code> and a <a data-cite="url#url-fragment-string"
												>URL-fragment string</a>.</p>
									</dd>
								</dl>
							</dd>

							<dt>Content Model</dt>
							<dd>
								<p>In any order:</p>
								<ul class="nomark">
									<li>
										<p>
											<a href="#elemdef-smil-seq">
												<code>seq</code>
											</a>
											<code>[0 or more]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-smil-par">
												<code>par</code>
											</a>
											<code>[0 or more]</code>
										</p>
									</li>
								</ul>
								<p>MUST include at least one <code>par</code> or <code>seq</code>.</p>
							</dd>
						</dl>
					</section>

					<section id="sec-smil-seq-elem">
						<h5>The <code>seq</code> Element</h5>

						<p>The <code>seq</code> element contains a sequential rendering of media objects.</p>

						<dl class="elemdef" id="elemdef-smil-seq">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>seq</code>
								</p>
							</dd>

							<dt>Usage</dt>
							<dd>
								<p>One or more <code>seq</code> elements MAY occur as children of the <a
										href="#elemdef-smil-body"><code>body</code> element</a> and of the <a
										href="#elemdef-smil-seq"><code>seq</code> element</a>.</p>
							</dd>

							<dt>Attributes</dt>
							<dd>
								<dl>
									<dt>
										<code>epub:type</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>An expression of the structural semantics of the corresponding element in the
												<a>EPUB Content Document</a>.</p>
										<p>The value is a white space separated list of <a href="#sec-property-datatype"
												>property</a> types. Refer to <a href="#sec-docs-structural-semantic"
											></a> for more information.</p>
									</dd>

									<dt>
										<code>id</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The ID [[XML]] of the element, which MUST be unique within the document
											scope.</p>
									</dd>

									<dt id="attrdef-seq-textref">
										<code>epub:textref</code>
										<code>[required]</code>
									</dt>
									<dd>
										<p>Identifies an associated fragment of an EPUB Content Document.</p>
										<p>The value MUST be a <a data-cite="url#path-relative-scheme-less-url-string"
												>path-relative-scheme-less-URL string</a>, optionally followed by
												<code>U+0023 (#)</code> and a <a data-cite="url#url-fragment-string"
												>URL-fragment string</a>.</p>
										<p>Refer to <a href="#sec-media-overlays-structure"></a> for more
											information.</p>
									</dd>
								</dl>
							</dd>

							<dt>Content Model</dt>
							<dd>
								<p>In any order:</p>
								<ul class="nomark">
									<li>
										<p>
											<a href="#elemdef-smil-seq">
												<code>seq</code>
											</a>
											<code>[0 or more]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-smil-par">
												<code>par</code>
											</a>
											<code>[0 or more]</code>
										</p>
									</li>
								</ul>
								<p>MUST include at least one <code>par</code> or <code>seq</code>.</p>
							</dd>
						</dl>
					</section>

					<section id="sec-smil-par-elem">
						<h5>The <code>par</code> Element</h5>

						<p>The <code>par</code> element defines the parallel rendering of media objects.</p>

						<dl class="elemdef" id="elemdef-smil-par">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>par</code>
								</p>
							</dd>

							<dt>Usage</dt>
							<dd>
								<p>One or more <code>par</code> elements MAY occur as children of the <a
										href="#elemdef-smil-body"><code>body</code></a> and <a href="#elemdef-smil-seq"
											><code>seq</code></a> elements.</p>
							</dd>

							<dt>Attributes</dt>
							<dd>
								<dl>
									<dt>
										<code>epub:type</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>An expression of the structural semantics of the corresponding element in the
												<a>EPUB Content Document</a>.</p>
										<p>The value is a white space separated list of <a href="#sec-property-datatype"
												>property</a> types. Refer to <a href="#sec-docs-structural-semantic"
											></a> for more information.</p>
									</dd>

									<dt>
										<code>id</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The ID [[XML]] of the element, which MUST be unique within the document
											scope.</p>
									</dd>
								</dl>
							</dd>

							<dt>Content Model</dt>
							<dd>
								<p>In any order:</p>
								<ul class="nomark">
									<li>
										<p>
											<a href="#elemdef-smil-text">
												<code>text</code>
											</a>
											<code>[exactly 1]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-smil-audio">
												<code>audio</code>
											</a>
											<code>[0 or 1]</code>
										</p>
									</li>
								</ul>
								<p>The <a href="#elemdef-smil-audio"><code>audio</code> element</a> is OPTIONAL only if
									its sibling <a href="#elemdef-smil-text"><code>text</code> element</a> refers to
									audio or video media (see <a href="#sec-embedded-media"></a>), or to textual content
									intended for rendering via <a href="#sec-tts">text-to-speech</a>.</p>
							</dd>
						</dl>
					</section>

					<section id="sec-smil-text-elem">
						<h5>The <code>text</code> Element</h5>

						<p>The <code>text</code> element references an element in the <a>EPUB Content Document</a>. A
								<code>text</code> element typically refers to a textual element but can also refer to
							other EPUB Content Document media elements (see <a href="#sec-embedded-media"></a>).</p>

						<dl class="elemdef" id="elemdef-smil-text">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>text</code>
								</p>
							</dd>

							<dt>Usage</dt>
							<dd>
								<p>As a REQUIRED child of the <a href="#elemdef-smil-par"><code>par</code></a>
									element.</p>
							</dd>

							<dt>Attributes</dt>
							<dd>
								<dl>
									<dt>
										<code>src</code>
										<code>[required]</code>
									</dt>
									<dd>
										<p>Identifies the associated fragment of an EPUB Content Document.</p>
										<p>The value MUST be a <a data-cite="url#path-relative-scheme-less-url-string"
												>path-relative-scheme-less-URL string</a>, optionally followed by
												<code>U+0023 (#)</code> and a <a data-cite="url#url-fragment-string"
												>URL-fragment string</a>.</p>
									</dd>

									<dt>
										<code>id</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The ID [[XML]] of the element, which MUST be unique within the document
											scope.</p>
									</dd>
								</dl>
							</dd>

							<dt>Content Model</dt>
							<dd>
								<p>Empty</p>
							</dd>
						</dl>
					</section>

					<section id="sec-smil-audio-elem">
						<h5>The <code>audio</code> Element</h5>

						<p>The <code>audio</code> element represents a clip of audio media.</p>

						<dl class="elemdef" id="elemdef-smil-audio">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>audio</code>
								</p>
							</dd>

							<dt>Usage</dt>
							<dd>
								<p>A REQUIRED child of the <a href="#elemdef-smil-par"><code>par</code> element</a>
									unless its sibling <a href="#elemdef-smil-text"><code>text</code> element</a> refers
									to audio or video media, or to textual content intended for rendering via <a
										href="#sec-tts">text-to-speech</a>, in which case it is OPTIONAL (see <a
										href="#sec-embedded-media"></a>).</p>
							</dd>

							<dt>Attributes</dt>
							<dd>
								<dl>
									<dt>
										<code>id</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The ID [[XML]] of the element, which MUST be unique within the document
											scope.</p>
									</dd>

									<dt>
										<code>src</code>
										<code>[required]</code>
									</dt>
									<dd>
										<p>The <a data-cite="url#relative-url-string">relative-</a> or <a
												data-cite="url#absolute-url-string">absolute-URL string</a> [[URL]]
											reference to an audio file. The audio file MUST be one of the audio formats
											listed in the <a href="#sec-core-media-types">Core Media Type Resources</a>
											table.</p>
									</dd>

									<dt id="attrdef-smil-clipBegin">
										<code>clipBegin</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>A clock value that specifies the offset into the physical media corresponding
											to the start point of an audio clip.</p>
										<p>MUST be a [[SMIL3]] <a data-cite="smil3/smil-timing.html#q22">clock
											value</a>.</p>
										<p>See <a href="#clock-examples"></a>.</p>
									</dd>

									<dt id="attrdef-smil-clipEnd">
										<code>clipEnd</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>A clock value that specifies the offset into the physical media corresponding
											to the end point of an audio clip.</p>
										<p>MUST be a [[SMIL3]] <a data-cite="smil3/smil-timing.html#q22">clock
											value</a>.</p>
										<p>See <a href="#clock-examples"></a>.</p>
										<p>The chronological offset of the terminating position MUST be after the
											starting offset specified in the <code>clipBegin</code> attribute.</p>
									</dd>
								</dl>
							</dd>

							<dt>Content Model</dt>
							<dd>
								<p>Empty</p>
							</dd>
						</dl>
					</section>
				</section>
			</section>

			<section id="sec-overlay-doc-create">
				<h3>Creating Media Overlays</h3>

				<section id="sec-docs-intro" class="informative">
					<h4>Introduction</h4>

					<p>EPUB Creators can represent a pre-recorded narration of a publication as a series of audio clips,
						each corresponding to part of an <a>EPUB Content Document</a>. A single audio clip, for example,
						typically represents a single phrase or paragraph, but infers no order relative to the other
						clips or to the text of a document. Media Overlays solve this problem of synchronization by
						tying the structured audio narration to its corresponding text (or other media) in the EPUB
						Content Document using [[SMIL3]] markup. Media Overlays are, in fact, a simplified subset of
						SMIL 3.0 that define the playback sequence of these clips.</p>

					<p>The SMIL elements primarily used for structuring Media Overlays are <a href="#elemdef-smil-body"
								><code>body</code></a> (used for the main sequence), <a href="#elemdef-smil-seq"
								><code>seq</code></a> (sequence) and <a href="#elemdef-smil-par"><code>par</code></a>
						(parallel). (Refer to <a href="#sec-overlays-def"></a> for more information on these and other
						SMIL elements.)</p>

					<p>The <code>par</code> element is the basic building block of an Overlay and corresponds to a
						phrase in the EPUB Content Document. The element provides two key pieces of information for
						synchronizing content: 1) the audio clip containing the narration for the phrase; and 2) a
						pointer to the associated EPUB Content Document fragment. The <code>par</code> element uses two
						media element children to represent this information: an <a href="#elemdef-smil-audio"
								><code>audio</code></a> element and a <a href="#elemdef-smil-text"><code>text</code></a>
						element. Since <code>par</code> elements render their children in parallel, Reading Systems play
						the audio clip and EPUB Content Document fragment at the same time, resulting in a synchronized
						presentation.</p>

					<p>The <code>text</code> element <code>src</code> attribute references the associated phrase,
						sentence, or other segment of the EPUB Content Document by its URL [[URL]] reference. The
							<code>audio</code> element <code>src</code> attribute similarly references the location of
						the corresponding audio clip and adds the OPTIONAL <a href="#attrdef-smil-clipBegin"
								><code>clipBegin</code></a> and <a href="#attrdef-smil-clipEnd"><code>clipEnd</code></a>
						attributes to indicate a specific offset within the clip.</p>

					<aside class="example" title="Media Overlays markup for a single phrase or sentence">
						<pre>&lt;par>                        
   &lt;text
       src="chapter1.xhtml#sentence1"/>
   &lt;audio
       src="chapter1_audio.mp3"
       clipBegin="23s"
       clipEnd="30s"/>
&lt;/par></pre>
					</aside>
					<p>EPUB Creators place <code>par</code> elements together sequentially to form a series of phrases
						or sentences. Not every element of the EPUB Content Document will have a corresponding
							<code>par</code> element in the Media Overlay, only those relevant to the audio
						narration.</p>

					<aside class="example" title="A basic Media Overlay Document containing a sequence of phrases">
						<p>In this example, the <code>body</code> element acts as the main sequence for the whole
							document.</p>

						<pre>&lt;smil
    xmlns="http://www.w3.org/ns/SMIL" 
    version="3.0">
   &lt;body>
      &lt;par id="par1">
         &lt;text
             src="chapter1.xhtml#sentence1"/>
         &lt;audio
             src="chapter1_audio.mp3"
             clipBegin="0s"
             clipEnd="10s"/>
      &lt;/par>
      &lt;par id="par2">
         &lt;text
             src="chapter1.xhtml#sentence2"/>
         &lt;audio
             src="chapter1_audio.mp3"
             clipBegin="10s"
             clipEnd="20s"/>
      &lt;/par>
      &lt;par id="par3">
         &lt;text
             src="chapter1.xhtml#sentence3"/>
         &lt;audio
             src="chapter1_audio.mp3"
             clipBegin="20s"
             clipEnd="30s"/>
      &lt;/par>
   &lt;/body>
&lt;/smil></pre>
					</aside>
					<p>EPUB Creators can also add <code>par</code> elements to <code>seq</code> elements to define more
						complex structures such as parts and chapters (see <a href="#sec-media-overlays-structure"
						></a>).</p>
				</section>

				<section id="sec-docs-relations">
					<h4>Relationship to the EPUB Content Document</h4>

					<div class="note">
						<p>In this section, the <a>EPUB Content Document</a> is assumed to be an <a>XHTML Content
								Document</a>. While EPUB Creators may use Media Overlays with <a>SVG Content
								Documents</a>, playback behavior might not be consistent and therefore interoperability
							is not guaranteed.</p>

					</div>
					<section id="sec-media-overlays-structure">
						<h5>Overlay Structure</h5>

						<p>The <a href="#elemdef-smil-body"><code>body</code></a> of a Media Overlay Document consists
							of two elements: the <a href="#elemdef-smil-par"><code>par</code> element</a> and the <a
								href="#elemdef-smil-seq"><code>seq</code> element</a>. The ordering of these elements
							represents how Reading Systems render the content in the corresponding EPUB Content
							Documents during playback.</p>

						<p>The <code>par</code> element represents a segment of content to render, such as a word,
							phrase, sentence, table cell, list item, image, or other identifiable piece of content in
							the markup. Each element identifies both the content to display (in the <a
								href="#elemdef-smil-text"><code>text</code> element</a>) and audio to synchronize (in
							the <a href="#elemdef-smil-audio"><code>audio</code> element</a>) during playback.</p>

						<p>The <code>seq</code> element represents sequences &#8212; sets of <code>seq</code> and/or
								<code>par</code> elements that together represent a logical component of the content.
							EPUB Creators can use it to represent nested containers such as sections, asides, headers,
							tables, lists, and footnotes. It allows EPUB Creators to retain the structure inherent in
							these containers in the Media Overlay Document.</p>

						<p>The <code>seq</code> element MUST contain an <a href="#attrdef-body-textref"
									><code>epub:textref</code> attribute</a>. As <code>seq</code> elements do not
							provide synchronization instructions, this attribute allows a Reading System to match the
							fragment to a location in the text.</p>

						<div class="note">
							<p>The reason for grouping structures like sections, figures, tables, and footnotes in a
									<code>seq</code> element is so that Reading Systems can identify their start and end
								positions during playback. Reading Systems can then offer playback options tailored to
								the layout of the content, such as jumping past a long figure, turning off rendering of
								page break announcements (see <a href="#sec-behaviors-skip-escape"></a>), or customizing
								the reading mode to suit structures such as tables.</p>
						</div>

						<aside class="example" id="example-mo-nesting" title="A Media Overlay with nested seq
							elements">
							<p>This example shows a chapter with both a section header and a figure.</p>

							<p>Media Overlay Document:</p>

							<pre>&lt;smil
    xmlns="http://www.w3.org/ns/SMIL"
    xmlns:epub="http://www.idpf.org/2007/ops"
    version="3.0">
   &lt;body>

      &lt;!-- a chapter -->
      
      &lt;seq
          id="id1"
          epub:textref="chapter1.xhtml#sectionstart"
          epub:type="chapter">

         &lt;!-- the section title -->
         
         &lt;par id="id2">
            &lt;text
                src="chapter1.xhtml#section1_title"/>
            &lt;audio
                src="chapter1_audio.mp3"
                clipBegin="0:23:23.84"
                clipEnd="0:23:34.221"/>
         &lt;/par>

         &lt;!-- some sentences in the chapter -->
         
         &lt;par id="id3">
            &lt;text
                src="chapter1.xhtml#text1"/>
            &lt;audio
                src="chapter1_audio.mp3"
                clipBegin="0:23:34.221"
                clipEnd="0:23:59.003"/>
         &lt;/par>
         &lt;par id="id4">
            &lt;text
                src="chapter1.xhtml#text2"/>
            &lt;audio
                src="chapter1_audio.mp3"
                clipBegin="0:23:59.003"
                clipEnd="0:24:15.000"/>
         &lt;/par>

         &lt;!-- a figure -->
         
         &lt;seq
             id="id7"
             epub:textref="chapter1.xhtml#figure">
            &lt;par id="id8">
               &lt;text
                   src="chapter1.xhtml#photo"/>
               &lt;audio
                   src="chapter1_audio.mp3"
                   clipBegin="0:24:18.123"
                   clipEnd="0:24:28.764"/>
            &lt;/par>
            &lt;par id="id9">
               &lt;text
                   src="chapter1.xhtml#caption"/>
               &lt;audio
                   src="chapter1_audio.mp3"
                   clipBegin="0:24:28.764"
                   clipEnd="0:24:50.010"/>
            &lt;/par>
         &lt;/seq>

         &lt;!-- more sentences in the chapter (outside the figure) -->
         
         &lt;par id="id12">
            &lt;text
                src="chapter1.xhtml#text3"/>
            &lt;audio
                src="chapter1_audio.mp3"
                clipBegin="0:25:45.515"
                clipEnd="0:26:30.203"/>
         &lt;/par>
         &lt;par id="id13">
            &lt;text
                src="chapter1.xhtml#text4"/>
            &lt;audio
                src="chapter1_audio.mp3"
                clipBegin="0:26:30.203"
                clipEnd="0:27:15.000"/>
         &lt;/par>
      &lt;/seq>
   &lt;/body>
&lt;/smil></pre>

							<p>XHTML Content Document:</p>

							<pre>&lt;html …>
   &lt;head>
      &lt;title>
         Media Overlays Example of
         EPUB Content Document
      &lt;/title>
   &lt;/head>
   &lt;body id="sec1">
      &lt;section
          id="sectionstart"
          epub:type="chapter">
         
         &lt;h1 id="section1_title">
            The Section Title
         &lt;/h1>
         
         &lt;p id="text1">
            The first phrase of the main text body.
         &lt;/p>
         
         &lt;p id="text2">
            The second phrase of the main text body.
         &lt;/p>
         
         &lt;figure id="figure">
            &lt;img id="photo"
                src="photo.png" 
                alt="a photograph for which there is a caption" />
            
            &lt;figcaption id="caption">
               The photo caption
            &lt;/figcaption>
         &lt;/figure>
         
         &lt;p id="text3">
            The third phrase of the main text body.
         &lt;/p>
         
         &lt;p id="text4">
            The fourth phrase of the main text body.
         &lt;/p>
      &lt;/section>
   &lt;/body>
&lt;/html></pre>
						</aside>
					</section>

					<section id="sec-media-overlays-fragids">
						<h5>Referencing Document Fragments</h5>

						<p>The <code>epub:textref</code> attribute and the <a href="#elemdef-smil-text"
									><code>text</code> element's</a>
							<code>src</code> attribute both require a fragment identifier that references a specific
							fragment (e.g., an element or text string) of the associated <a>EPUB Content
							Document</a>.</p>

						<p>For XHTML and SVG Content Documents, the fragment SHOULD be a reference to a <a
								data-cite="html#target-element">target element</a> [[HTML]] or an <a
								href="https://www.w3.org/TR/SVG/linking.html#SVGFragmentIdentifiers">SVG Fragment
								Identifier</a> [[SVG]], respectively.</p>

						<p>EPUB Creators MAY use other fragment identifier schemes, but Reading Systems may not support
							such identifiers.</p>
					</section>

					<section id="sec-media-overlays-granularity" class="informative">
						<h5>Overlay Granularity</h5>

						<p>The granularity level of the Media Overlay depends on how EPUB Creators mark up the EPUB
							Content Document and the type of fragment identifier they use in the <a
								href="#elemdef-smil-text"><code>text</code> elements'</a>
							<code>src</code> attributes. For example, when referencing <a
								data-cite="html#target-element">target elements</a> [[HTML]], if the finest level of
							markup is at the paragraph level, then that is the finest possible level for Media Overlay
							synchronization. Likewise, if sub-paragraph markup is available, such as [[HTML]] <a
								data-cite="html#the-span-element"><code>span</code></a> elements representing phrases or
							sentences, then finer granularity is possible in the Media Overlay. Finer granularity gives
							users more precise results for synchronized playback when navigating by word or phrase and
							when searching the text but increases the file size of the Media Overlay Documents. Fragment
							identifier schemes that do not rely on the presence of elements could provide even finer
							granularity, where supported.</p>
					</section>

					<section id="sec-embedded-media">
						<h5>Embedded Media</h5>

						<p>Any <a>EPUB Content Document</a> associated with a Media Overlay MAY contain embedded media
							such as video, audio, and images. EPUB Creators MAY use the Media Overlay <a
								href="#elemdef-smil-text"><code>text</code> element</a> in such instances to reference
							the embedded media by its element's <code>id</code> attribute value.</p>

						<section id="sec-emb-audio-video">
							<h6>Embedded Audio and Video</h6>

							<p>When a <code>text</code> element references embedded audio or video, the <a
									href="#elemdef-smil-audio"><code>audio</code></a> sibling element is OPTIONAL.
								Reading Systems will intiate playback of the media in the absence of an
									<code>audio</code> element.</p>

							<p><a>EPUB Creators</a> SHOULD avoid using scripts to control playback of referenced
								embedded EPUB Content Document media, as this might conflict with Media Overlays
								playback behavior.</p>

							<p>EPUB Creators should carefully examine any overlapping audio situations and deal with
								them at the production stage, as Reading Systems handling of simultaneous volume levels
								is optional.</p>
						</section>

						<section id="sec-emb-img">
							<h6>Embedded Images</h6>

							<p>When a <code>text</code> element references an embedded image, the <a
									href="#elemdef-smil-audio"><code>audio</code></a> sibling element is OPTIONAL. In
								the absence of an <code>audio</code> element, Reading Systems will voice the image using
									<a href="#sec-tts">Text-to-Speech rendering</a>.</p>

							<p>EPUB Creators MUST ensure they provide fallback text for an image when an omitting an
									<code>audio</code> element (e.g., using the [[HTML]] <code>alt</code>
								attribute).</p>
						</section>
					</section>

					<section id="sec-tts">
						<h5>Text-to-Speech Rendering</h5>

						<p>This specification allows the use of text-to-speech (TTS) &#8212; the rendering of the
							textual content of an <a>EPUB Publication</a> as artificial human speech using a synthesized
							voice &#8212; in addition to pre-recorded audio clips.</p>

						<p>A Media Overlay <a href="#elemdef-smil-par"><code>par</code> element</a> MAY omit an <a
								href="#elemdef-smil-audio"><code>audio</code> element</a> when its <a
								href="#elemdef-smil-text"><code>text</code> element</a> references text or an image. In
							these cases, Reading Systems are expected to render the referenced fragment via TTS, so EPUB
							Creators MUST ensure the fragment is appropriate for TTS rendering (e.g., contains a textual
							EPUB Content Document element or has a text fallback).</p>

						<div class="note">
							<p>See <a data-cite="epub-tts-10#">EPUB 3 Text-to-Speech Support</a> [[EPUB-TTS-10]] for
								more information about using TTS technologies in EPUB Publications.</p>

						</div>
					</section>
				</section>

				<section id="sec-docs-structural-semantic">
					<h4>Structural Semantics in Overlays</h4>

					<p>To express <a href="#app-structural-semantics">structural semantics</a> in <a>Media Overlay
							Documents</a>, EPUB Creators MAY specify the <a href="#attrdef-epub-type"
								><code>epub:type</code> attribute</a> on <a href="#elemdef-smil-par"
							><code>par</code></a>, <a href="#elemdef-smil-seq"><code>seq</code></a>, and <a
							href="#elemdef-smil-body"><code>body</code></a> elements.</p>

					<p>The <code>epub:type</code> attribute facilitates Reading System behavior appropriate for the
						semantic type(s) indicated. Examples of these behaviors are <a href="#sec-behaviors-skip-escape"
							>skippability and escapability</a> and <a data-cite="epub-rs-33#note-table-reading-mode"
							>table reading mode</a> [[?EPUB-RS-33]].</p>

					<p>Media Overlays MAY use the applicable <a href="#sec-vocab-assoc">vocabulary association
							mechanisms</a> for the <code>epub:type</code> attribute to define additional semantics.</p>

					<aside class="example" title="Semantic markup for a Media Overlay containing a figure">
						<pre>&lt;smil
    xmlns="http://www.w3.org/ns/SMIL" 
    xmlns:epub="http://www.idpf.org/2007/ops"
    version="3.0">
   &lt;body>
      &lt;seq
          id="id1"
          epub:textref="chapter1.xhtml#figure"
          epub:type="figure">
         &lt;par id="id2">
            &lt;text
                src="chapter1.xhtml#figuretitle"/>
            &lt;audio
                src="chapter1_audio.mp3"
                clipBegin="0:24:15.000"
                clipEnd="0:24:18.123"/>
         &lt;/par>
         &lt;par id="id3">
            &lt;text
                src="chapter1.xhtml#figurecaption"/>
            &lt;audio
                src="chapter1_audio.mp3"
                clipBegin="0:24:18.123"
                clipEnd="0:24:38.530"/>
         &lt;/par>
         &lt;par id="id4">
            &lt;text
                src="chapter1.xhtml#figuretext1"/>
            &lt;audio
                src="chapter1_audio.mp3"
                clipBegin="0:24:38.530"
                clipEnd="0:25:00.515"/>
         &lt;/par>
      &lt;/seq>
   &lt;/body>
&lt;/smil></pre>
					</aside>
				</section>

				<section id="sec-docs-assoc-style">
					<h4>Associating Style Information</h4>

					<p>EPUB Creators MAY express visual rendering information for the currently playing <a>EPUB Content
							Document</a> element in a CSS Style Sheet using author-defined classes.</p>

					<p>When used, EPUB Creators MUST declare the class names in the Package Document using the <a
							href="#active-class"><code>active-class</code></a> and <a href="#playback-active-class"
								><code>playback-active-class</code></a> properties.</p>

					<p>EPUB Creators MUST define exactly one CSS class name in each property they define. Each property
						MUST define a <a href="https://www.w3.org/TR/CSS2/syndata.html#characters">valid CSS class
							name</a> not including any <a href="https://www.w3.org/TR/CSS2/selector.html">selectors</a>
						[[CSS2]]. This specification <strong>does not</strong> reserve names for use with these
						properties.</p>

					<p>EPUB Creators MAY define any CSS properties for the specified CSS classes, but must ensure that
						each EPUB Content Document with an associated Media Overlay Document includes a link to the CSS
						style sheet with the class definitions. Reading Systems might provide their own styling, or no
						styling at all, in the absence of a linked definition.</p>

					<p>EPUB Creators MUST NOT use the <code>active-class</code> and <code>playback-active-class</code>
						properties in conjunction with a <a href="#attrdef-refines"><code>refines</code> attribute</a>
						as they always apply to the entire <a>EPUB Publication</a>.</p>

					<aside class="example" title="Associating style information with the
						currently playing EPUB Content Document">

						<p>The author-defined CSS class names are declared using the metadata properties <a
								href="#active-class"><code>active-class</code></a> and <a href="#playback-active-class"
									><code>playback-active-class</code></a> in the Package Document:</p>

						<pre>&lt;package …>
   &lt;metadata …>
      …
      &lt;meta
          property="media:active-class">
         my-active-item
      &lt;/meta>
      &lt;meta
          property="media:playback-active-class">
         my-document-playing
      &lt;/meta>
      …
   &lt;/metadata>
   …
&lt;/package></pre>

						<p>The CSS Style Sheet containing the author-defined class names:</p>

						<pre>/* emphasize the active element */
.my-active-item {
    background-color: yellow;
    color: black !important;
}

/* fade out the inactive text */
html.my-document-playing * {
    color: gray;
}
</pre>

						<p>The relevant EPUB Content Document excerpt:</p>

						<pre>&lt;html>
   …
   &lt;body>
      …
      &lt;span id="txt1">
         This is the first phrase.
      &lt;/span>
      &lt;span id="txt2">
         This is the second phrase.
      &lt;/span>
      &lt;span id="txt3">
         This is the third phrase.
      &lt;/span>
      …
   &lt;/body>
&lt;/html></pre>

						<p>In this example, the Reading System would apply the author-defined
								<code>my-active-item</code> class to each text element in the EPUB Content Document as
							it became active during playback. Conversely, Reading Systems would remove the class name
							when the element is no longer active. The user would see each EPUB Content Document element
							styled with a yellow background for the duration of that element's playback.</p>

						<p>The Reading System would also apply the author-defined <code>my-document-playing</code> class
							to the document element of the EPUB Content Document when Media Overlays playback begins.
							The Reading System would remove the class name when playback stops. In the case of an XHTML
							Content Document, the Reading System would apply the class name to the <code>html</code>
							element. In the case of an SVG Content Document, the Reading System would apply the class
							name to the <code>svg</code> element. The user would see all the inactive text elements turn
							gray during Media Overlays playback. When playback stopped, the elements' colors would
							return to their defaults.</p>

					</aside>
				</section>

				<section id="sec-docs-package">
					<h4>Media Overlays Packaging</h4>

					<section id="sec-package-including">
						<h5>Including Media Overlays</h5>

						<p>If an <a>EPUB Content Document</a> is wholly or partially referenced by a Media Overlay, then
							its <a>manifest</a>
							<a href="#elemdef-package-item"><code>item</code> element</a> MUST specify a
								<code>media-overlay</code> attribute. The attribute MUST reference the ID [[XML]] of the
							manifest <code>item</code> for the corresponding Media Overlay Document.</p>

						<p>EPUB Creators MUST only specify the <code>media-overlay</code> attribute on manifest
								<code>item</code> elements that reference <a>EPUB Content Documents</a>.</p>

						<p>Manifest items for Media Overlay Documents MUST have the media type
								<code>application/smil+xml</code>.</p>

						<aside class="example" title="Entries for an EPUB Content Document and its associated
							Media Overlay in the Package Document manifest">
							<pre>&lt;package …>
   …
   &lt;manifest>
      &lt;item
          id="ch1" 
          href="chapter1.xhtml" 
          media-type="application/xhtml+xml" 
          media-overlay="ch1_audio"/>
   
      &lt;item
          id="ch1_audio" 
          href="chapter1_audio.smil" 
          media-type="application/smil+xml"/>
      …
   &lt;/manifest>
&lt;/package></pre>
						</aside>
					</section>

					<section id="sec-mo-package-metadata">
						<h5>Overlays Package Metadata</h5>

						<p id="total-duration">EPUB Creators MUST specify the duration of the entire <a>EPUB
								Publication</a> in the <a>Package Document</a> using a <a href="#elemdef-meta"
									><code>meta</code> element</a> with the <a href="#duration"><code>duration</code>
								property</a>.</p>

						<p>In addition, EPUB Creators MUST provide the duration of each Media Overlay Document. EPUB
							Creators may use the <a href="#attrdef-refines"><code>refines</code> attribute</a> to
							associate each duration declaration to the corresponding <a>manifest</a>
							<a href="#elemdef-package-item"><code>item</code></a>.</p>

						<p>The sum of the durations for each Media Overlay Document SHOULD equal the <a
								href="#total-duration">total duration</a>.</p>

						<p><a>EPUB Creators</a> MAY also specify <a href="#narrator"><code>narrator</code></a>
							information in the Package Document, as well as <a href="#sec-docs-assoc-style"
								>author-defined CSS class names</a> to apply to the currently playing EPUB Content
							Document element.</p>

						<aside class="example" title="Media Overlays metadata in the Package Document">
							<pre>&lt;package …>
   &lt;metadata …>
      …
      &lt;meta
          property="media:duration"
          refines="#ch1_audio">
         0:32:29
      &lt;/meta>
      
      &lt;meta
          property="media:duration"
          refines="#ch2_audio">
         0:34:02
      &lt;/meta>
      
      &lt;meta
          property="media:duration"
          refines="#ch3_audio">
         0:29:49
      &lt;/meta>
      
      &lt;meta
          property="media:duration">
         1:36:20
      &lt;/meta>
      
      &lt;meta
          property="media:narrator">
         Joe Speaker
      &lt;/meta>
      
      &lt;meta
          property="media:active-class">
         my-active-item
      &lt;/meta>
      
      &lt;meta
          property="media:playback-active-class">
         my-document-playing
      &lt;/meta>
      …
   &lt;/metadata>
&lt;/package></pre>
						</aside>
						<div class="note">
							<p>The <code>media:</code> prefix is <a href="#sec-metadata-reserved-prefixes">reserved</a>
								for inclusion of these properties in package metadata.</p>

						</div>
					</section>
				</section>
			</section>

			<section id="sec-behaviors-skip-escape">
				<h3>Skippability and Escapability</h3>

				<section id="sec-skippability">
					<h4>Skippability</h4>

					<p>While reading, users may want to turn on or off certain features of the content, such as
						footnotes, page numbers, or other types of secondary content. This feature is called
						skippability. Reading Systems use the semantic information provided by Media Overlay elements'
							<a href="#sec-docs-structural-semantic"><code>epub:type</code></a> attribute to determine
						when to offer users the option of skippable features.</p>

					<aside class="example" title="Media Overlay with a page break">
						<p>In this example, a Reading System could offer the user the option of turning on and off the
							page break/page number announcements, which are often cumbersome to listen to.</p>

						<p>Media Overlay Document:</p>

						<pre>&lt;smil
    xmlns="http://www.w3.org/ns/SMIL" 
    xmlns:epub="http://www.idpf.org/2007/ops"
    version="3.0">
   &lt;body>
      &lt;!-- a paragraph -->
      &lt;par id="id1">
         &lt;text
             src="chapter1.xhtml#para1"/>
         &lt;audio
             src="chapter1_audio.mp3"
             clipBegin="0:23:22.000"
             clipEnd="0:24:15.000"/>
      &lt;/par>

      &lt;!-- a page number -->
      &lt;par
          id="id2"
          epub:type="pagebreak">
         &lt;text
             src="chapter1.xhtml#pgbreak1"/>
         &lt;audio
             src="chapter1_audio.mp3"
             clipBegin="0:24:15.000"
             clipEnd="0:24:18.123"/>
      &lt;/par>

      &lt;!-- another paragraph -->
      &lt;par id="id3">
         &lt;text
             src="chapter1.xhtml#para2"/>
         &lt;audio
             src="chapter1_audio.mp3"
             clipBegin="0:24:18.123"
             clipEnd="0:25:28.530"/>
      &lt;/par>
   &lt;/body>
&lt;/smil>
</pre>

						<p>EPUB Content Document:</p>

						<pre>&lt;html … >
   …
   &lt;body>
      &lt;p id="para1">
         This is the paragraph before the page break …
      &lt;/p>
      
      &lt;span
          id="pgbreak1"
          role="doc-pagebreak"
          aria-label="14"/>
      
      &lt;p id="para2">
         This is the paragraph after the page break …
      &lt;/p>
   &lt;/body>
&lt;/html></pre>
					</aside>

					<p>The following non-exhaustive list represents terms from the Structural Semantics
						Vocabulary [[?EPUB-SSV-11]] for which Reading Systems may offer the option of skippability:</p>

					<ul>
						<li>
							<p>footnote</p>
						</li>
						<li>
							<p>endnote</p>
						</li>
						<li>
							<p>pagebreak</p>
						</li>
					</ul>
					<div class="note">
						<p>Reading System are not required to support for skippability based on <code>epub:type</code>
							values.</p>

					</div>
				</section>

				<section id="sec-escapability">
					<h4>Escapability</h4>

					<p>Escapable items are nested structures, such as tables and lists, that users might wish to skip
						over, continuing to read from the point immediately after the nested structure. The escapability
						feature differs from the skippability feature in that it does not enable or disable entire types
						of items, but provides an exit from them (e.g., a user can listen to some of the content before
						choosing to escape).</p>

					<aside class="example" title="Escapable structures">
						<p>In this example, the Media Overlay Document for an EPUB Content Document contains a
							paragraph, a table, and another paragraph. A Reading System that supported escapability
							would give the user the option to interrupt playback of the table to continue playing the
							next paragraph.</p>

						<pre>&lt;smil
    xmlns="http://www.w3.org/ns/SMIL" 
    xmlns:epub="http://www.idpf.org/2007/ops"
    version="3.0">
   &lt;body>
      &lt;!-- a paragraph, part of the regular document text -->
      &lt;par id="id1">
         &lt;text
             src="c01.xhtml#para1"/>
         &lt;audio
             src="chapter1_audio.mp3"
             clipBegin="0:23:22.000"
             clipEnd="0:24:15.000"/>
      &lt;/par>

      &lt;!-- a table with two nested rows -->
      &lt;seq
          id="id2"
          epub:textref="c01.xhtml#t1"
          epub:type="table">
         
         &lt;seq
             id="id3"
             epub:textref="c01.xhtml#tr1"
             epub:type="table-row">
            
            &lt;par
                id="id4"
                epub:type="table-cell">
               &lt;text
                   src="c01.xhtml#td1"/>
               &lt;audio
                   src="chapter1_audio.mp3"
                   clipBegin="0:24:15.000"
                   clipEnd="0:24:18.123"/>
            &lt;/par>
            
            &lt;par
                id="id5"
                epub:type="table-cell">
               &lt;text
                   src="c01.xhtml#td2"/>
               &lt;audio
                   src="chapter1_audio.mp3"
                   clipBegin="0:24:18.123"
                   clipEnd="0:25:28.530"/>
            &lt;/par>
            
            &lt;par
                id="id6"
                epub:type="table-cell">
               &lt;text
                   src="c01.xhtml#td3"/>
               &lt;audio
                   src="chapter1_audio.mp3"
                   clipBegin="0:25:28.530"
                   clipEnd="0:25:45.515"/>
            &lt;/par>
         &lt;/seq>
         
         &lt;seq
             id="id7"
             epub:textref="c01.xhtml#tr2"
             epub:type="table-row">
            
            &lt;par
                id="id8"
                epub:type="table-cell">
               &lt;text
                   src="c01.xhtml#td4"/>
               &lt;audio
                   src="chapter1_audio.mp3"
                   clipBegin="0:25:45.515"
                   clipEnd="0:26:45.700"/>
            &lt;/par>
            
            &lt;par
                id="id9"
                epub:type="table-cell">
               &lt;text
                   src="chapter1.xhtml#td5"/>
               &lt;audio
                   src="chapter1_audio.mp3"
                   clipBegin="0:26:45.700"
                   clipEnd="0:28:02.033"/>
            &lt;/par>
            
            &lt;par
                id="id10"
                epub:type="table-cell">
               &lt;text
                   src="chapter1.xhtml#td6"/>
               &lt;audio
                   src="chapter1_audio.mp3"
                   clipBegin="0:28:02.033"
                   clipEnd="0:28:52.207"/>
            &lt;/par>
         &lt;/seq>
      &lt;/seq>

      &lt;!-- another paragraph -->
      &lt;par id="id11">
         &lt;text
             src="c01.xhtml#para2"/>
         &lt;audio
             src="chapter1_audio.mp3"
             clipBegin="0:28:52.207"
             clipEnd="0:30:01.000"/>
      &lt;/par>
   &lt;/body>
&lt;/smil></pre>
					</aside>

					<p>The following non-exhaustive list represents terms from the Structural Semantics
						Vocabulary [[?EPUB-SSV-11]] for which Reading Systems may offer the option of escapability:</p>

					<ul>
						<li>
							<p>table</p>
						</li>
						<li>
							<p>table-row</p>
						</li>
						<li>
							<p>table-cell</p>
						</li>
						<li>
							<p>list</p>
						</li>
						<li>
							<p>list-item</p>
						</li>
						<li>
							<p>figure</p>
						</li>
					</ul>
				</section>
			</section>

			<section id="sec-nav-doc">
				<h3>Navigation Document Overlays</h3>

				<p>As the <a>EPUB Navigation Document</a> is an <a>XHTML Content Document</a>, <a>EPUB Creators</a> MAY
					associate an audio Media Overlay with it. Unlike traditional XHTML Content Documents, however,
						<a>Reading Systems</a> must present the EPUB Navigation Document to users even when it is not
					included in the <a>spine</a> (see <a data-cite="epub-rs-33#sec-nav">Navigation Document
						Processing</a> [[?EPUB-RS-33]]). As a result, the method in which an associated Media Overlay
					behaves can change depending on the context:</p>

				<ul>
					<li>
						<p>When included in the spine, playback of the EPUB Navigation Document's Media Overlay obeys
							the same conformance requirements as with any other XHTML Content Document.</p>
					</li>
					<li>
						<p>When exposed in a presentation context that allows users to access and activate the links,
							Reading Systems MAY implement additional presentation behaviors to expose audio feedback
							when user access navigation links.</p>
					</li>
				</ul>
				<div class="note">
					<p>Specific implementation details are beyond the scope of this specification. The <a
							href="https://www.daisy.org/guidelines/epub/media-overlays-playback-requirements">DAISY
							Media Overlays Playback Requirements</a> document describes best practices for EPUB Creators
						and provides recommendations for Reading System developers.</p>

				</div>
			</section>
		</section>
		<section id="sec-accessibility" class="informative">
			<h2>Accessibility</h2>

			<p>EPUB 3 builds upon the Open Web Platform expressly so that it can leverage the structure, semantics and,
				by extension, accessibility built into its underlying technologies.</p>

			<p>The requirements and practices for creating accessible web content have already been documented in the
				W3C's <a href="https://www.w3.org/TR/wcag2/">Web Content Accessibility Guidelines (WCAG)</a> [[WCAG2]].
				These guidelines also form the basis for defining accessibility in EPUB Publications.</p>

			<p>As the current WCAG guidelines (version 2) are heavily focused on web pages, a separate specification, <a
					data-cite="epub-a11y-11#">EPUB Accessibility</a> [[EPUB-A11Y-11]], defines how to apply the standard
				to <a>EPUB Publications</a>. It also adds EPUB-specific requirements and recommendations for metadata,
				pagination, and media overlays.</p>

			<p>This specification recommends that EPUB Publications <a href="#confreq-a11y">conform to the EPUB
					Accessibility standard</a>. A benefit of following this recommendation is that it helps ensure that
				EPUB Publications meet the accessibility requirements legislated in jurisdictions around the world,
				ensuring EPUB Creators are not locked out of potential markets.</p>

			<p><a>EPUB Creators</a>, however, should look beyond legal imperatives and treat accessibility as a
				requirement for all their content. The more accessible that EPUB Publications are, the greater the
				potential audience for them.</p>

			<div class="note">
				<p>This specification does not integrate the accessibility requirements to allow them to adapt and
					evolve independent of the EPUB specification &#8212; accessibility practices often need more
					frequent updating. The accessibility specification is also intended for use with past, present, and
					future versions of EPUB. The approach of a separate specification ensures that the evolution of EPUB
					does not lock accessibility in time (i.e., it allows producers of older versions of EPUB to
					reference the latest accessibility requirements).</p>

			</div>
		</section>
		<section id="sec-security-privacy" class="informative">
			<h2>Security and Privacy</h2>

			<div class="ednote">
				<p>This is a very initial draft intended only as a starting point. It is inspired by the <a
						href="https://www.w3.org/TR/pub-manifest/#security-privacy">relevant section of the Publication
						Manifest</a> specification. It will require more work.</p>

			</div>

			<p>The particularity of an <a>EPUB Publication</a> is its structure. The EPUB format provides a means of
				representing, packaging, and encoding structured and semantically enhanced Web content — including HTML,
				CSS, SVG, JavaScript, and other resources — for distribution in a single-file container.</p>

			<p>This means that, essentially, the security and privacy issues are reliant on the features of those
				formats. In particular:</p>

			<ul>
				<li>EPUB 3 allows references to remotely hosted resources from within <a>EPUB Content Documents</a>, but
					also from the <a>Package Document</a> (e.g., in a <a href="#sec-item-elem"><code>item</code></a>
					element which allows both local and remote references). This is not unlike any external reference
					from an average Web site that potentially exposes users to malicious content, and EPUB Creators
					should take general Web security principles into account (e.g., cross-origin resource sharing).</li>
				<li>The <a href="#sec-package-doc">Package Document</a> allows personally identifiable information about
					an EPUB Publication's creator(s) (e.g., names, identifying URLs) to be included, so authoring tools
					could expose unexpected information if explicit author approval of metadata is not required.</li>
			</ul>
			<p>In general, EPUB 3 tries to avoid extending the underlying technologies it builds on, but it has
				introduced some new features. These additions are not known to present any new privacy or security
				issues:</p>

			<ul>
				<li>
					<p><a href="#sec-xhtml-content-switch">Content switching</a> and <a href="#sec-xhtml-epub-trigger"
							>multimedia control elements</a> (both now deprecated) only allow hiding of content and
						script-less control of playback in HTML.</p>
				</li>
				<li>
					<p>The <a href="#sec-epub-type-attribute">expression of structural semantics</a> in HTML and SVG
						only allows the annotation of elements.</p>
				</li>
				<li>
					<p>The <a data-cite="epub-rs-33#app-epubReadingSystem"><code>epubReadingSystem</code> object</a>
						[[EPUB-RS-33]] only allows EPUB Creators to query information about the current Reading
						System.</p>
				</li>
			</ul>
		</section>
		<section id="app-overview-unsupported" class="appendix">
			<h2>Unsupported Features</h2>

			<p>This specification contains certain features that are not yet fully supported in Reading Systems, that
				the Working Group no longer recommends for use, or that are only retained for interoperability with EPUB
				2 Reading Systems. This section defines the meanings of the designations attached to these features and
				their support expectations.</p>

			<section id="risky">
				<h3>Risky Features</h3>

				<p>A <strong>risky</strong> feature is a feature introduced prior to EPUB 3.3 for which the Working
					Group has not been able to establish enough <a
						href="https://www.w3.org/Consortium/Process/#adequate-implementation">implementation
						experience</a>.</p>

				<p>These features are considered important to retain despite this limitation because they are known to
					be implemented by EPUB Creators (i.e., their deprecation would invalidate existing content) and/or
					they are integral to the content model on which EPUB is built.</p>

				<p>If this specification designates a feature as risky, the following hold true:</p>

				<ul>
					<li>
						<p><a>EPUB Creators</a> MAY use the features as described.</p>
					</li>
					<li>
						<p><a>Reading Systems</a> SHOULD support the feature as described.</p>
					</li>
				</ul>

				<p>Validation tools SHOULD alert EPUB Creators to the presence of risky features when encountered in
					EPUB Publications but MUST NOT treat their inclusion as a violation of the standard (i.e., not emit
					errors or warnings).</p>

				<div class="caution">
					<p>Whether risky labels are removed or replaced by deprecation in a future version of the standard
						cannot be determined at this time. EPUB Creators should strongly consider the interoperability
						problems that may arise both now and in the future when using these features.</p>
				</div>

				<div class="note">
					<p>The marking of features as risky is a one-time event to account for the different process under
						which EPUB was developed prior to being brought into W3C. This label will not be used for new
						features developed under W3C processes.</p>
				</div>
			</section>

			<section id="deprecated">
				<h3>Deprecated Features</h3>

				<p>A <strong>deprecated</strong> feature is one the Working Group no longer recommends for use in this
					version of the specification. Deprecated features typically have limited or no support in Reading
					Systems and/or usage in EPUB Publications. If this specification designates a feature as deprecated,
					the following hold true:</p>

				<ul>
					<li>
						<p><a>EPUB Creators</a> SHOULD NOT not to use the feature in their <a>EPUB Publications</a>.</p>
					</li>
					<li>
						<p><a>Reading Systems</a> MAY support the feature.</p>
						<p class="note">Developers should consider the unlikelihood of encountering content with
							deprecated features before adding new support for them.</p>
					</li>
				</ul>
				<p>Validation tools SHOULD alert EPUB Creators to the presence of deprecated features when encountered
					in EPUB Publications.</p>
			</section>

			<section id="legacy">
				<h3>Legacy Features</h3>

				<p>A <strong>legacy</strong> feature is one that the Working Group has retained only for authoring
					content that is compatible with versions of EPUB prior to 3.0. If this specification designates a
					feature as legacy, the following hold true:</p>

				<ul>
					<li>
						<p><a>EPUB Creators</a> MAY include the legacy feature for compatibility purposes.</p>
					</li>
					<li>
						<p><a>Reading Systems</a> MUST NOT support the legacy feature in content that conforms to this
							version of EPUB.</p>
					</li>
				</ul>
				<p>Validation tools SHOULD NOT alert EPUB Creators about the presence of legacy features in an <a>EPUB
						Publication</a>, as their inclusion is valid for backwards compatibility. Validation tools MUST
					alert EPUB Creators if a legacy feature does not conform to its definition or otherwise breaks a
					usage requirement.</p>
			</section>
		</section>
		<section id="app-identifiers-allowed" class="appendix">
			<h2>Allowed External Identifiers</h2>

			<p>The following table lists the <a aria-label="public identifiers" data-cite="xml#dt-pubid">public </a> and
					<a data-cite="xml#dt-sysid">system identifiers</a> [[XML]] allowed in <a data-cite="xml#dt-doctype"
					>document type declarations</a>. [[XML]]</p>

			<p>EPUB Creators MAY use these external identifiers only in <a>Publication Resources</a> with the listed
				media types specified in their <a href="#sec-manifest-elem">manifest</a> declarations. (Refer to <a
					href="#sec-xml-constraints"></a> for more information.)</p>

			<table>
				<thead>
					<tr>
						<th>Media Type(s)</th>
						<th>Public Identifier</th>
						<th>System Identifier</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<ul class="flat">
								<li>
									<code>application/mathml+xml</code>
								</li>
								<li>
									<code>application/mathml-presentation+xml</code>
								</li>
								<li>
									<code>application/mathml-content+xml</code>
								</li>
							</ul>
						</td>
						<td>
							<code>-//W3C//DTD MathML 3.0//EN</code>
						</td>
						<td>
							<code>http://www.w3.org/Math/DTD/mathml3/mathml3.dtd</code>
						</td>
					</tr>
					<tr>
						<td>
							<code>application/svg+xml</code>
						</td>
						<td>
							<code>-//W3C//DTD SVG 1.1//EN</code>
						</td>
						<td>
							<code>http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd</code>
						</td>
					</tr>
				</tbody>
			</table>
		</section>
		<section id="app-structural-semantics" class="appendix">
			<h2>Expressing Structural Semantics</h2>

			<section id="sec-structural-semantics-intro">
				<h3>Introduction</h3>

				<p>Structural semantics add additional meaning about the specific structural purpose an element plays.
					The <a href="#sec-epub-type-attribute"><code>epub:type</code> attribute</a> is used to express
					domain-specific semantics in <a>EPUB Content Documents</a> and <a>Media Overlay Documents</a>, with
					the structural information it carries complementing the underlying vocabulary.</p>

				<p>The applied semantics refine the meaning of their containing elements without changing their nature
					for assistive technologies, as happens when using the similar <a data-cite="html#attr-aria-role"
							><code>role</code> attribute</a> [[HTML]]. The attribute does not enhance the accessibility
					of the content, in other words, only provides hints about the purpose.</p>

				<p>Semantic metadata enriches content for use in publishing workflows and for author-defined purposes.
					It also allows Reading Systems to learn more about the structure and content of a document (e.g., to
					enable <a href="#sec-behaviors-skip-escape">skippability and escapability</a> in Media
					Overlays).</p>

				<p>This specification defines a method for adding structural semantics using <em>the attribute
					axis</em>: instead of adding new elements, EPUB Creators can append the <code>epub:type</code>
					attribute to existing elements to add the desired semantics.</p>
			</section>

			<section id="sec-epub-type-attribute">
				<h3>The <code>epub:type</code> Attribute</h3>

				<dl class="elemdef" id="attrdef-epub-type">
					<dt>Attribute Name</dt>
					<dd>
						<p>
							<code>type</code>
						</p>
					</dd>

					<dt>Namespace</dt>
					<dd>
						<p>
							<code>http://www.idpf.org/2007/ops</code>
						</p>
					</dd>

					<dt>Usage</dt>
					<dd>
						<p><a data-cite="html#global-attributes">Global attribute</a>. EPUB Creators MAY specify on all
							elements.</p>
					</dd>

					<dt>Value</dt>
					<dd>
						<p>A white space-separated list of <a href="#sec-property-datatype">property</a> values, with
							restrictions as defined in <a href="#sec-vocab-assoc"></a>.</p>
						<p>White space is the set of characters as defined in [[XML]].</p>
					</dd>
				</dl>

				<div class="note">
					<p>Although the <code>epub:type</code> attribute is similar in nature to the <a
							data-cite="html#attr-aria-role"><code>role</code> attribute</a> [[HTML]], the attributes
						serve different purposes. The values of the <code>epub:type</code> attribute do not enhance the
						accessibility of EPUB Publications, for example, they do not map to accessibility <abbr
							title="Application Programming Interfaces">APIs</abbr> used by assistive technologies. The
							<code>epub:type</code> attribute is only intended for publishing semantics and Reading
						System enhancements. Refer to <a data-cite="dpub-aria-1.0#">Digital Publishing WAI-ARIA Module
							1.0</a> [[DPUB-ARIA-1.0]] for more information about accessible publishing roles.</p>

				</div>

				<p>The <code>epub:type</code> attribute inflects semantics on the element on which it appears. Its value
					is one or more white space-separated terms stemming from external vocabularies associated with the
					document instance.</p>

				<p>The inflected semantic MUST express a subclass of the semantic of the carrying element. In the case
					of semantically neutral elements, such as the [[HTML]] <a data-cite="html#the-div-element"
							><code>div</code></a> and <a data-cite="html#the-span-element"><code>span</code></a>
					elements, the inflected semantic MUST NOT attach a meaning that is already conveyed by an existing
					element (e.g., that a <code>div</code> represents a paragraph or section).</p>

				<p>The <a href="#sec-default-vocab">default vocabulary</a> for the <code>epub:type</code> attribute is
					the EPUB 3 Structural Semantics Vocabulary [[?EPUB-SSV-11]]. EPUB Creators MAY include unprefixed
					terms that are not part of this vocabulary, but the preferred method for adding custom semantics is
					to use <a href="#sec-prefix-attr">prefixes</a> for them. Refer to <a href="#sec-vocab-assoc"></a>
					for more information.</p>

				<aside class="example" id="ex.epubtype.note" title="Identifying a preamble">
					<pre>&lt;html
    …
    xmlns:epub="http://www.idpf.org/2007/ops">
   …
   &lt;body>
      …
      &lt;section epub:type="preamble">
         …    
      &lt;/section>
      …
   &lt;/body>
&lt;/html></pre>
				</aside>

				<aside class="example" id="ex.epubtype.gloss" title="Identifying a glossary">
					<pre>&lt;html
    …
    xmlns:epub="http://www.idpf.org/2007/ops">
   …
   &lt;body>
      …
      &lt;dl epub:type="glossary">
         …    
      &lt;/dl>        
      …
   &lt;/body>
&lt;/html></pre>
				</aside>

				<aside class="example" id="ex.epubtype.pg" title="Adding page break semantics">
					<pre>&lt;html
    …
    xmlns:epub="http://www.idpf.org/2007/ops">
   …
   &lt;body>
      …
      &lt;p>
         … 
         &lt;span
            epub:type="pagebreak"
            id="p234"
            role="doc-pagebreak"
            aria-label="234"/>
         …
      &lt;/p>    
      …
   &lt;/body>
&lt;/html></pre>
				</aside>
			</section>
		</section>
		<section id="app-vocabs" class="appendix">
			<h2>Vocabularies</h2>

			<p>This appendix defines a general set of mechanisms by which attributes in this specification can reference
				terms from vocabularies. It also defines EPUB-specific vocabularies for use with the attributes.</p>

			<section id="sec-vocab-assoc">
				<h3>Vocabulary Association Mechanisms</h3>

				<section id="sec-vocab-assoc-intro" class="informative">
					<h4>Introduction</h4>

					<p>EPUB defines a formal method of referencing terms and properties defined in metadata and semantic
						vocabularies using the <a href="#sec-property-datatype"><var>property</var> data type</a>. The
							<code>epub:type</code> attribute uses this data type in <a>EPUB Content Documents</a> and
							<a>Media Overlay Documents</a> to add <a href="#app-structural-semantics">structural
							semantics</a>, for example, while the <code>property</code> and <code>rel</code> attributes
						use the data type to define properties and relationships in the <a>Package Document</a>.</p>

					<p>A <var>property</var> value is like a CURIE [[RDFA-CORE]] &#8212; it represents a URL [[URL]] in
						compact form. The expression consists of a prefix and a reference, where the prefix — whether
						literal or implied — is a shorthand mapping of a URL that typically resolves to a term
						vocabulary. When a Reading System converts the prefix to its URL representation and combines
						with the reference, the resulting URL normally resolves to a fragment within that vocabulary
						that contains human- and/or machine-readable information about the term.</p>

					<p>To reduce the complexity for authoring, each attribute that takes a <var>property</var> data type
						also defines a <a href="#sec-default-vocab">default vocabulary</a>. Terms and properties
						referenced from the default vocabularies do not include a prefix as the mapping <a>Reading
							Systems</a> use to map to a URL is predefined.</p>

					<p>The power of the <var>property</var> data type lies in its easy extensibility. To incorporate new
						terms and properties, EPUB Creators only need to declare a <a href="#sec-prefix-attr"
						>prefix</a>. In another authoring convenience, this specification also <a
							href="#sec-metadata-reserved-prefixes">reserves prefixes</a> for many commonly used
						publishing vocabularies (i.e., their declaration is optional).</p>

					<p>The following sections provide additional details on the <var>property</var> data type and
						vocabulary association mechanism.</p>
				</section>

				<section id="sec-property-datatype">
					<h4>The <var>property</var> Data Type</h4>

					<p>The <var>property</var> data type is a compact means of expressing a URL [[URL]] and consists of
						an OPTIONAL prefix separated from a reference by a colon.</p>

					<table class="productionset">
						<caption>(EBNF productions <a
								href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=26153"
								>ISO/IEC 14977</a>)<br />All terminal symbols are in the Unicode Block 'Basic Latin'
							(U+0000 to U+007F). </caption>
						<tr>
							<td id="property.ebnf.property">
								<a href="#property.ebnf.property">property</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td>[ <a href="#property.ebnf.prefix">prefix</a> , ":" ] , <a
									href="#property.ebnf.reference">reference</a>; </td>
							<td> </td>
						</tr>
						<tr>
							<td id="property.ebnf.prefix">
								<a href="#property.ebnf.prefix">prefix</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td>? xsd:NCName ? ;</td>
							<td> </td>
						</tr>
						<tr>
							<td id="property.ebnf.reference">
								<a href="#property.ebnf.reference">reference</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td>? <a data-cite="url#path-relative-scheme-less-url-string">path-relative-scheme-less-URL
									string</a> [[URL]] ? ;</td>
							<td>/* as defined in [[URL]] */<br /></td>
						</tr>
					</table>

					<p>This specification derives the <var>property</var> data type from the CURIE data type defined in
						[[RDFA-CORE]]. A <var>property</var> represents a subset of CURIEs.</p>

					<aside class="example" title="Expanding a metadata property value">
						<p>In this example, the <var>property</var> value is composed of the prefix <code>dcterms</code>
							and the reference <code>modified</code>.</p>

						<pre>&lt;meta property="dcterms:modified">2011-01-01T12:00:00Z&lt;/meta></pre>

						<p>After <a data-cite="epub-rs-33#sec-property-datatype">processing</a> [[EPUB-RS-33]], this
							property would expand to the following URL:</p>

						<pre class="nohighlight">http://purl.org/dc/terms/modified</pre>

						<p>as the <code>dcterms:</code> prefix is a <a href="#sec-metadata-reserved-prefixes">reserved
								prefix</a> that maps to the URL "<code>http://purl.org/dc/terms/</code>".</p>
					</aside>

					<p>When an EPUB Creator omits a prefix from a <var>property</var> value, the expressed reference
						represents a term from the <a href="#sec-default-vocab">default vocabulary</a> for that
						attribute.</p>

					<aside class="example" title="Expanding a manifest property value">
						<p>In this example, the <a href="#mathml"><code>mathml</code> property</a> is specified on a
							manifest <a href="#elemdef-package-item"><code>item</code></a> element:</p>

						<pre>&lt;item … properties="mathml"/></pre>

						<p>This property expands to:</p>

						<pre>http://idpf.org/epub/vocab/package/item/#mathml</pre>

						<p>when the prefix URL for the vocabulary is concatenated with the reference.</p>
					</aside>

					<p>An empty string does not represent a valid <var>property</var> value, even though it is valid to
						the definition above.</p>
				</section>

				<section id="sec-default-vocab">
					<h5>Default Vocabularies</h5>

					<p>A default vocabulary is one that EPUB Creators do not have to declare a <a
							href="#sec-prefix-attr">prefix</a> for in order to use its terms and properties where a <a
							href="#sec-property-datatype"><var>property</var> value</a> is expected. EPUB Creators MUST
						NOT add a prefix to terms and properties from a default vocabulary.</p>

					<p>EPUB Creators MUST NOT assign a prefix to the URLs associated with these vocabularies using the
							<a href="#sec-prefix-attr"><code>prefix</code></a> attribute.</p>

					<div class="note">
						<p>Refer to the definition of each attribute that takes a <a href="#sec-property-datatype"
									><var>property</var> data type</a> for more information about its default
							vocabulary.</p>

					</div>
				</section>

				<section id="sec-prefix-attr">
					<h4>The <code>prefix</code> Attribute</h4>

					<p>The <code>prefix</code> attribute defines prefix mappings for use in <a
							href="#sec-property-datatype"><var>property</var> values</a>.</p>

					<p>The value of the <code>prefix</code> attribute is a white space-separated list of one or more
						prefix-to-URL mappings of the form:</p>

					<table class="productionset">
						<caption>(EBNF productions <a
								href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=26153"
								>ISO/IEC 14977</a>)<br />All terminal symbols are in the Unicode Block 'Basic Latin'
							(U+0000 to U+007F). </caption>
						<tr>
							<td id="prefix.ebnf.def">
								<a href="#prefix.ebnf.def">prefixes</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td><a href="#prefix.ebnf.mapping">mapping</a> , { <a href="#prefix.ebnf.whitespace"
									>whitespace</a>, { <a href="#prefix.ebnf.space">whitespace</a> } , <a
									href="#prefix.ebnf.mapping">mapping</a> } ; </td>
							<td> </td>
						</tr>
						<tr>
							<td id="prefix.ebnf.mapping">
								<a href="#prefix.ebnf.mapping">mapping</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td><a href="#prefix.ebnf.prefix">prefix</a> , ":" , <a href="#prefix.ebnf.space">space</a>
								, { <a href="#prefix.ebnf.space">space</a> } , ? xsd:anyURI ? ; </td>
							<td> </td>
						</tr>
						<tr>
							<td id="prefix.ebnf.prefix">
								<a href="#prefix.ebnf.prefix">prefix</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td>? xsd:NCName ? ;</td>
							<td> </td>
						</tr>
						<tr>
							<td id="prefix.ebnf.space">
								<a href="#prefix.ebnf.space">space</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td>#x20 ;</td>
							<td> </td>
						</tr>
						<tr>
							<td id="prefix.ebnf.whitespace">
								<a href="#prefix.ebnf.whitespace">whitespace</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td>(#x20 | #x9 | #xD | #xA) ;</td>
							<td> </td>
						</tr>
					</table>

					<p>EPUB Creators MUST only specify the <code>prefix</code> attribute on the root element of the
						respective format.</p>

					<p>The attribute is not namespaced when used in the <a>Package Document</a>.</p>

					<aside class="example" title="Declaring prefixes in the Package Document">
						<p>In this example, the EPUB Creator declares prefixes for the Friend of a Friend
								(<code>foaf</code>) and DBPedia (<code>dbp</code>) vocabularies.</p>

						<pre>&lt;package
    … 
    prefix="foaf: http://xmlns.com/foaf/spec/
            dbp: http://dbpedia.org/ontology/">
   …
&lt;/package></pre>
					</aside>

					<p>EPUB Creators MUST declare the attribute in the namespace
							<code>http://www.idpf.org/2007/ops</code> in <a>EPUB Content Documents</a> and <a>Media
							Overlay Documents</a>.</p>

					<aside class="example" title="Declaring prefixes in an XHTML Content Document">
						<p>In this example, the EPUB Creator declares a prefix for the Z39.98 Structural Semantics
							Vocabulary.</p>

						<pre>&lt;html …
      xmlns:epub="http://www.idpf.org/2007/ops"
      epub:prefix="z3998: https://www.daisy.org/z3998/2012/vocab/structure/">
   …
&lt;/html></pre>
					</aside>

					<div class="note">
						<p>Although the <code>prefix</code> attribute is modeled on the identically named
								<code>prefix</code> attribute in [[RDFA-CORE]], EPUB Creators cannot use the attributes
							interchangeably. The <code>prefix</code> attribute without a namespace in EPUB Content
							Documents is the RDFa attribute.</p>

						<p>It is common for both attributes to appear in EPUB Content Documents that also specify RDFa
							expressions.</p>

						<pre>&lt;html … prefix="…"
        xmlns:epub="http://www.idpf.org/2007/ops"
        epub:prefix="…">   …
&lt;/html></pre>
					</div>

					<p>Note that for <a href="#sec-xhtml-svg">embedded SVG</a>, prefixes MUST be declared on the
						[[HTML]] root <a data-cite="html#the-html-element"><code>html</code> element</a>.</p>

					<p>To avoid conflicts, EPUB Creators MUST NOT use the <code>prefix</code> attribute to declare a
						prefix that maps to the <a href="#sec-default-vocab">default vocabulary</a>.</p>

					<p>EPUB Creators MUST NOT declare the prefix '_' as this specification reserves this prefix for
						future compatibility with RDFa [[RDFA-CORE]] processing.</p>

					<p>For future compatibility with alternative serializations of the Package Document, EPUB Creators
						MUST NOT declare a prefix for the Dublin Core <em>/elements/1.1/</em> namespace [[DCTERMS]].
							<a>EPUB Creators</a> MUST use only the [[DCTERMS]] elements <a href="#sec-pkg-metadata"
							>allowed in the Package Document metadata</a>.</p>
				</section>

				<section id="sec-reserved-prefixes">
					<h4>Reserved Prefixes</h4>

					<div class="caution">
						<p>Although reserved prefixes are an authoring convenience, EPUB Creators should avoid relying
							on them as they may cause interoperability issues. Validation tools will often reject new
							prefixes until their developers update the tools to the latest version of the specification,
							for example. EPUB Creators should declare all prefixes they use to avoid such issues.</p>

					</div>

					<p><a>EPUB Creators</a> MAY use reserved prefixes in attributes that expect a <a
							href="#sec-property-datatype"><var>property</var> value</a> without declaring them in a <a
							href="#sec-prefix-attr"><code>prefix</code> attribute</a>.</p>


					<p>EPUB Creators SHOULD NOT override reserved prefixes in the <a href="#sec-prefix-attr"
								><code>prefix</code> attribute</a>.</p>

					<p>The reserved prefixes an EPUB Creators can use depends on the context:</p>

					<dl class="conformance-list">
						<dt>Package Document</dt>
						<dd id="sec-metadata-reserved-prefixes">
							<p>EPUB Creators MAY use the following prefixes in <a>Package Document</a> attributes
								without having to declare them.</p>
							<table id="tbl-pkg-reserved-prefixes" class="prefix">
								<thead>
									<tr>
										<th>Prefix</th>
										<th>URL</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>a11y</td>
										<td>http://www.idpf.org/epub/vocab/package/a11y/#</td>
									</tr>
									<tr>
										<td>dcterms</td>
										<td>http://purl.org/dc/terms/</td>
									</tr>
									<tr>
										<td>marc</td>
										<td>http://id.loc.gov/vocabulary/</td>
									</tr>
									<tr>
										<td>media</td>
										<td>http://www.idpf.org/epub/vocab/overlays/#</td>
									</tr>
									<tr>
										<td>onix</td>
										<td>http://www.editeur.org/ONIX/book/codelists/current.html#</td>
									</tr>
									<tr>
										<td>rendition</td>
										<td>http://www.idpf.org/vocab/rendition/#</td>
									</tr>
									<tr>
										<td>schema</td>
										<td>http://schema.org/</td>
									</tr>
									<tr>
										<td>xsd</td>
										<td>http://www.w3.org/2001/XMLSchema#</td>
									</tr>
								</tbody>
							</table>
						</dd>

						<dt id="sec-content-reserved-prefixes">Structural Semantics</dt>
						<dd>
							<p>EPUB Creators MAY use the following reserved prefixes in the <a
									href="#app-structural-semantics"><code>epub:type</code> attribute</a> without having
								to declare them.</p>
							<table id="tbl-reserved-prefixes" class="prefix">
								<thead>
									<tr>
										<th>Prefix</th>
										<th>URL</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>msv</td>
										<td>http://www.idpf.org/epub/vocab/structure/magazine/#</td>
									</tr>
									<tr>
										<td>prism</td>
										<td>http://www.prismstandard.org/specifications/3.0/PRISM_CV_Spec_3.0.htm#</td>
									</tr>
								</tbody>
							</table>
						</dd>
					</dl>
				</section>
			</section>

			<div data-include="vocab/meta-property.html" data-oninclude="fixIncludes" data-include-replace="true"></div>
			<div data-include="vocab/link.html" data-oninclude="fixIncludes" data-include-replace="true"></div>
			<div data-include="vocab/rendering.html" data-oninclude="fixIncludes" data-include-replace="true"></div>
			<div data-include="vocab/item-properties.html" data-oninclude="fixIncludes" data-include-replace="true"></div>
			<div data-include="vocab/itemref-properties.html" data-oninclude="fixIncludes" data-include-replace="true"></div>
			<div data-include="vocab/overlays.html" data-oninclude="fixIncludes" data-include-replace="true"></div>
		</section>
		<section id="css-prefixes" class="appendix">
			<h2>Prefixed CSS Properties</h2>

			<p>This appendix describes the prefixed CSS properties supported by EPUB. </p>

			<section id="sec-css-prefixed-writing-modes">
				<h5>CSS Writing Modes</h5>

				<p>This section describes the <code>-epub-</code> prefixed properties for [[CSS-Writing-Modes-3]].</p>

				<section id="sec-css-prefixed-writing-modes-text-orientation">
					<h6>The <code>-epub-text-orientation</code> Property</h6>

					<p>This is a prefixed version of the CSS <code>text-orientation</code> property.</p>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>-epub-text-orientation</code></td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> mixed | upright | sideways | sideways-right </td>
							</tr>
						</tbody>
					</table>

					<p>Previous versions of EPUB 3 used additional values of <code>-epub-text-orientation</code>. User
						agents MUST interpret these values according to the following table: </p>

					<table class="data">
						<thead>
							<tr>
								<th>Deprecated value</th>
								<th>Value to be used</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><code>vertical-right</code></td>
								<td><code>mixed</code></td>
							</tr>
							<tr>
								<td><code>rotate-right</code></td>
								<td><code>sideways</code></td>
							</tr>
							<tr>
								<td><code>rotate-normal</code></td>
								<td><code>sideways</code></td>
							</tr>
						</tbody>
					</table>
				</section>

				<section id="sec-css-prefixed-writing-modes-writing-mode">
					<h6>The <code>-epub-writing-mode</code> Property</h6>

					<p>This is a prefixed version of the CSS <code>writing-mode</code> property, with the same syntax
						and behavior.</p>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>-epub-writing-mode</code></td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> horizontal-tb | vertical-rl | vertical-lr </td>
							</tr>
						</tbody>
					</table>
				</section>

				<section id="sec-css-prefixed-writing-modes-text-combine">
					<h6>The <code>-epub-text-combine-horizontal</code> and <code>-epub-text-combine</code>
						Properties</h6>

					<p>These are prefixed versions of <code>text-combine-upright</code>, although
							<code>-epub-text-combine</code> is deprecated. See the table below for how values of both
						properties translate to unprefixed CSS.</p>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>-epub-text-combine-horizontal</code></td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> none | all </td>
							</tr>
						</tbody>
					</table>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>-epub-text-combine</code> (deprecated)</td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> none | horizontal | horizontal &lt;number> </td>
							</tr>
						</tbody>
					</table>

					<p>The following table shows how to map from the prefixed versions to the current CSS versions.</p>

					<table class="data">
						<thead>
							<tr>
								<th>Prefixed version</th>
								<th>CSS equivalent</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><code>-epub-text-combine-horizontal: none</code></td>
								<td><code>text-combine-upright: none</code></td>
							</tr>
							<tr>
								<td><code>-epub-text-combine-horizontal: all</code></td>
								<td><code>text-combine-upright: all</code></td>
							</tr>
							<tr>
								<td><code>-epub-text-combine: none</code></td>
								<td><code>text-combine-upright: none</code></td>
							</tr>
							<tr>
								<td><code>-epub-text-combine: horizontal</code></td>
								<td><code>text-combine-upright: all</code></td>
							</tr>
							<tr>
								<td><code>-epub-text-combine: horizontal &lt;number></code></td>
								<td>Error</td>
							</tr>
						</tbody>
					</table>
				</section>
			</section>

			<section id="sec-css-prefixed-text">
				<h5>CSS Text Level 3</h5>

				<p>This section describes the <code>-epub-</code> prefixed properties (and one prefixed value) for
					[[CSS-Text-3]].</p>

				<section id="sec-css-prefixed-text-epub-hyphens">
					<h6>The <code>-epub-hyphens</code> Property</h6>

					<p>This is a prefixed version of the <code>hyphens</code> property.</p>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>-epub-hyphens</code></td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> none | manual | auto | all </td>
							</tr>
						</tbody>
					</table>

					<p class="note">The <code>all</code> value is no longer supported in CSS.</p>
				</section>

				<section id="sec-css-prefixed-text-epub-line-break">
					<h6>The <code>-epub-line-break</code> Property</h6>

					<p>This is a prefixed version of the <code>line-break</code> property.</p>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>-epub-line-break</code></td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> auto | loose | normal | strict </td>
							</tr>
						</tbody>
					</table>
				</section>

				<section id="sec-css-prefixed-text-epub-text-align-last">
					<h6>The <code>-epub-text-align-last</code> Property</h6>

					<p>This is a prefixed version of the <code>text-align-last</code> property.</p>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>-epub-text-align-last</code></td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> auto | start | end | left | right | center | justify </td>
							</tr>
						</tbody>
					</table>
				</section>

				<section id="sec-css-prefixed-text-epub-word-break">
					<h6>The <code>-epub-word-break</code> Property</h6>

					<p>This is a prefixed version of the <code>word-break</code> property.</p>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>-epub-word-break</code></td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> normal | keep-all | break-all </td>
							</tr>
						</tbody>
					</table>
				</section>

				<section id="sec-css-prefixed-text-text-transform">
					<h6>The <code>text-transform</code> Property</h6>

					<p>This is a prefixed value for the <code>text-transform</code> property.</p>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>text-transform</code></td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> -epub-fullwidth </td>
							</tr>
						</tbody>
					</table>

					<p>The following table describes the equivalent value in CSS.</p>

					<table class="data">
						<thead>
							<tr>
								<th>EPUB version</th>
								<th>CSS equivalent</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><code>text-transform: -epub-fullwidth</code></td>
								<td><code>text-transform: full-width</code></td>
							</tr>
						</tbody>
					</table>
				</section>
			</section>

			<section id="sec-css-prefixed-text-decoration">
				<h5>CSS Text Decoration Level 3</h5>

				<p>This section describes the <code>-epub-</code> prefixed properties for [[CSS-Text-Decor-3]].</p>

				<section id="sec-css-prefixed-text-epub-text-emphasis-color">
					<h6>The <code>-epub-text-emphasis-color</code> Property</h6>

					<p>This is a prefixed version of the <code>text-emphasis-color</code> property.</p>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>-epub-text-emphasis-color</code></td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> &lt;color> </td>
							</tr>
						</tbody>
					</table>
				</section>

				<section id="sec-css-prefixed-text-epub-text-emphasis-position">
					<h6>The <code>-epub-text-emphasis-position</code> Property</h6>

					<p>This is a prefixed version of the <code>text-emphasis-position</code> property.</p>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>-epub-text-emphasis-position</code></td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> [ over | under ] &amp;&amp; [ right | left ] </td>
							</tr>
						</tbody>
					</table>
				</section>

				<section id="sec-css-prefixed-text-epub-text-emphasis-style">
					<h6>The <code>-epub-text-emphasis-style</code> Property</h6>

					<p>This is a prefixed version of the <code>text-emphasis-style</code> property.</p>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>-epub-text-emphasis-style</code></td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> none | [ [ filled | open ] || [ dot | circle | double-circle | triangle | sesame ]
									] | &lt;string> </td>
							</tr>
						</tbody>
					</table>
				</section>

				<section id="sec-css-prefixed-text-epub-text-underline-position">
					<h6>The <code>-epub-text-underline-position</code> Property</h6>

					<p>This is a prefixed version of the <code>text-underline-position</code> property. One value is no
						longer supported by CSS.</p>

					<table class="def propdef">
						<tbody>
							<tr>
								<th>Name: </th>
								<td><code>-epub-text-underline-position</code></td>
							</tr>
							<tr class="value">
								<th>Value:</th>
								<td> auto | [ under || [ left | right ] ] | alphabetic </td>
							</tr>
						</tbody>
					</table>

					<p>The following table describes the equivalent value in CSS.</p>

					<table class="data">
						<thead>
							<tr>
								<th>EPUB version</th>
								<th>CSS equivalent</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><code>-epub-text-underline-position: alphabetic</code></td>
								<td><code>text-underline-position: auto</code></td>
							</tr>
						</tbody>
					</table>
				</section>
			</section>
		</section>
		<section id="app-schemas" class="appendix informative">
			<h2>Schemas</h2>

			<section id="app-package-schema">
				<h3>Package Document Schema</h3>

				<p>A non-normative schema for Package Documents is available at <a
						href="https://github.com/w3c/epubcheck/tree/master/src/main/resources/com/adobe/epubcheck/schema/30/package-30.nvdl"
						>https://github.com/w3c/epubcheck/tree/master/src/main/resources/com/adobe/epubcheck/schema/30/package-30.nvdl</a>.</p>

				<p>Validation using this schema requires a processor that supports [[NVDL]], [[RelaxNG-Schema]],
					[[ISOSchematron]] and [[XMLSCHEMA-2]].</p>

				<div class="note">
					<p>The NVDL schema layer can be substituted by a multi-pass validation using the embedded RELAX NG
						and ISO Schematron schemas alone.</p>

				</div>

				<div class="note">
					<p>These schemas may be updated and corrected outside of formal revisions of this specification. As
						a result, they are subject to change at any time. </p>

				</div>
			</section>

			<section id="app-ocf-schema">
				<h3>OCF Schemas</h3>

				<section id="app-schema-container">
					<h4>Schema for <code>container.xml</code></h4>

					<p>A non-normative schema for <code>container.xml</code> files is available at <a
							href="https://github.com/w3c/epubcheck/tree/master/src/main/resources/com/adobe/epubcheck/schema/30/ocf-container-30.nvdl">
							<code>https://github.com/w3c/epubcheck/tree/master/src/main/resources/com/adobe/epubcheck/schema/30/ocf-container-30.nvdl</code></a>.</p>

					<p>Validation using this schema requires a processor that supports [[RelaxNG-Schema]] and
						[[XMLSCHEMA-2]].</p>
				</section>

				<section id="app-schema-encryption">
					<h4>Schema for <code>encryption.xml</code></h4>

					<p>The schema for <code>encryption.xml</code> files is included in
						[[XMLSEC-RNGSCHEMA-20130411]].</p>
				</section>

				<section id="app-schema-signatures">
					<h4>Schema for <code>signatures.xml</code></h4>

					<p>The schema for <code>signatures.xml</code> files is included in
						[[XMLSEC-RNGSCHEMA-20130411]].</p>
				</section>
			</section>

			<section id="app-schema-overlays">
				<h3>Media Overlays Schema</h3>

				<p>A non-normative schema for Media Overlays is available at <a
						href="https://github.com/w3c/epubcheck/tree/master/src/main/resources/com/adobe/epubcheck/schema/30/media-overlay-30.nvdl"
						>https://github.com/w3c/epubcheck/tree/main/src/master/resources/com/adobe/epubcheck/schema/30/media-overlay-30.nvdl</a>.</p>

				<p>Validation using this schema requires a processor that supports [[NVDL]], [[RelaxNG-Schema]],
					[[ISOSchematron]] and [[XMLSCHEMA-2]].</p>

				<div class="note">
					<p>The NVDL schema layer can be substituted by a multi-pass validation using the embedded RELAX NG
						and ISO Schematron schemas alone.</p>

				</div>
			</section>
		</section>
		<section id="app-examples" class="appendix informative">
			<h2>Detailed Examples</h2>

			<section id="scripted-contexts-example">
				<h3>Scripting Contexts</h3>

				<p>Consider the following example Package Document:</p>

				<pre>&lt;package …>
    …
    &lt;manifest>
        …
        &lt;item id="chap01" 
            href="scripted01.xhtml" 
            media-type="application/xhtml+xml"
            properties="scripted"/>
        &lt;item id="inset01" 
            href="scripted02.xhtml" 
            media-type="application/xhtml+xml"
            properties="scripted"/>
        &lt;item id="slideshowjs" 
            href="slideshow.js" 
            media-type="text/javascript"/>
    &lt;/manifest>
    
    &lt;spine …>
        &lt;itemref idref="chap01"/>
        …
    &lt;/spine>
    …
&lt;/package></pre>
				<p>and the following file <code>scripted01.xhtml</code>:</p>

				<pre>&lt;html …>
    &lt;head>
        …
        &lt;script type="text/javascript">
            alert("Reading System name: " + navigator.epubReadingSystem.name);
        &lt;/script>
    &lt;/head>
    &lt;body>
        …
        &lt;iframe src="scripted02.xhtml" … />
        …
    &lt;/body>
&lt;/html></pre>
				<p>and the following file <code>scripted02.xhtml</code>:</p>

				<pre>&lt;html …>
    &lt;head>
        …
        &lt;script type="text/javascript" href="slideshow.js">&lt;/script>
    &lt;/head>
    &lt;body>
        …
    &lt;/body>
&lt;/html></pre>
				<p>From these examples, it is true that:</p>

				<ul>
					<li>
						<p>the code in the <code>script</code> element in the <code>head</code> in
								<code>scripted01.xhtml</code> is a <a href="#sec-scripted-spine">spine-level script</a>
							because the document is referenced from the spine; and</p>
					</li>
					<li>
						<p>the code in the <code>script</code> element in <code>scripted02.xhtml</code> is a <a
								href="#sec-scripted-container-constrained">container-constrained script</a> because the
							HTML file it occurs in is included in <code>scripted01.xhtml</code> via the
								<code>iframe</code> element.</p>
					</li>
				</ul>
			</section>

			<section id="ocf-example">
				<h3>Packaged EPUB</h3>

				<p>This example demonstrates the use of the OCF format to contain a signed and encrypted EPUB
					Publication within an <a>OCF ZIP Container</a>.</p>

				<p>Ordered list of files in the OCF ZIP Container:</p>

				<pre>mimetype
META-INF/container.xml
META-INF/signatures.xml
META-INF/encryption.xml
EPUB/As_You_Like_It.opf
EPUB/book.html
EPUB/nav.html
EPUB/images/cover.png</pre>

				<p>The contents of the <code>mimetype</code> file</p>

				<pre>application/epub+zip</pre>

				<p>The contents of the <code>META-INF/container.xml</code> file</p>

				<pre>&lt;?xml version="1.0"?>
&lt;container
    version="1.0"
    xmlns="urn:oasis:names:tc:opendocument:xmlns:container">
   &lt;rootfiles>
      &lt;rootfile
          full-path="EPUB/As_You_Like_It.opf"
          media-type="application/oebps-package+xml"/>
   &lt;/rootfiles>
&lt;/container></pre>

				<p>The contents of the <code>META-INF/signatures.xml</code> file</p>

				<pre>&lt;signatures
    xmlns="urn:oasis:names:tc:opendocument:xmlns:container">
   &lt;Signature
       Id="AsYouLikeItSignature"
       xmlns="http://www.w3.org/2000/09/xmldsig#">
        
      &lt;!--
           SignedInfo is the information that is actually signed.
           In this case, the SHA-1 algorithm is used to sign the 
           canonical form of the XML documents enumerated in the
           Object element below.
      -->
      
      &lt;SignedInfo>
         &lt;CanonicalizationMethod
             Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>
         &lt;SignatureMethod
             Algorithm="http://www.w3.org/2000/09/xmldsig#dsa-sha1"/>
         &lt;Reference
             URI="#AsYouLikeIt">
            &lt;DigestMethod
                Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            &lt;DigestValue>
               …
            &lt;/DigestValue>
         &lt;/Reference>
      &lt;/SignedInfo>
      
      &lt;!--
           The signed value of the digest above, using the DSA 
           algorithm
      -->
      &lt;SignatureValue>
         …
      &lt;/SignatureValue>
      
      &lt;!--
           The key used to validate the signature
      -->
      &lt;KeyInfo>
         &lt;KeyValue>
            &lt;DSAKeyValue>
               &lt;P>…&lt;/P>
               &lt;Q>…&lt;/Q>
               &lt;G>…&lt;/G>
               &lt;Y>…&lt;/Y>
            &lt;/DSAKeyValue>
         &lt;/KeyValue>
      &lt;/KeyInfo>
      
      &lt;!--
           The list of resources to sign (note that the canonical
           form of XML documents is signed, while the binary form
           of all other resources is used)
      -->
      &lt;Object>
         &lt;Manifest
             Id="AsYouLikeIt">
            &lt;Reference
                URI="EPUB/As_You_Like_It.opf">
               &lt;Transforms>
                  &lt;Transform
                      Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>
               &lt;/Transforms>
               &lt;DigestMethod
                   Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
               &lt;DigestValue>
               &lt;/DigestValue>
            &lt;/Reference>
            
            &lt;Reference URI="EPUB/book.html">
               &lt;Transforms>
                  &lt;Transform
                      Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>
               &lt;/Transforms>
               &lt;DigestMethod
                   Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
               &lt;DigestValue>
               &lt;/DigestValue>
            &lt;/Reference>
            
            &lt;Reference
                URI="EPUB/images/cover.png">
               &lt;DigestMethod
                   Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
               &lt;DigestValue>
               &lt;/DigestValue>
            &lt;/Reference>
         &lt;/Manifest>
      &lt;/Object>
   &lt;/Signature>
&lt;/signatures></pre>

				<p>The contents of the <code>META-INF/encryption.xml</code> file</p>

				<pre>&lt;?xml version="1.0"?>
&lt;encryption
    xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
    xmlns:enc="http://www.w3.org/2001/04/xmlenc#"
    xmlns:ds="http://www.w3.org/2000/09/xmldsig#">

   &lt;!--
        The RSA-encrypted AES-128 symmetric key used to encrypt
        data enumerated in EncryptedData blocks below
   -->
   &lt;enc:EncryptedKey
       Id="EK">
      &lt;enc:EncryptionMethod
          Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"/>
      &lt;ds:KeyInfo>
         &lt;ds:KeyName>
            John Smith
         &lt;/ds:KeyName>
      &lt;/ds:KeyInfo>
      &lt;enc:CipherData>
         &lt;enc:CipherValue>
            xyzabc…
         &lt;/enc:CipherValue>
      &lt;/enc:CipherData>
   &lt;/enc:EncryptedKey>

   &lt;!--
        Each EncryptedData block identifies a single resource
        that has been encrypted using the AES-128 algorithm.
        The data remains stored, in its encrypted form, in the
        original file within the container.
   -->
   &lt;enc:EncryptedData Id="ED1">
      &lt;enc:EncryptionMethod
          Algorithm="http://www.w3.org/2001/04/xmlenc#kw-aes128"/>
      &lt;ds:KeyInfo>
         &lt;ds:RetrievalMethod
             URI="#EK"
             Type="http://www.w3.org/2001/04/xmlenc#EncryptedKey"/>
      &lt;/ds:KeyInfo>
      &lt;enc:CipherData>
         &lt;enc:CipherReference
             URI="EPUB/book.html"/>
      &lt;/enc:CipherData>
   &lt;/enc:EncryptedData>

   &lt;enc:EncryptedData Id="ED2">
      &lt;enc:EncryptionMethod
          Algorithm="http://www.w3.org/2001/04/xmlenc#kw-aes128"/>
      &lt;ds:KeyInfo>
         &lt;ds:RetrievalMethod
             URI="#EK" Type="http://www.w3.org/2001/04/xmlenc#EncryptedKey"/>
      &lt;/ds:KeyInfo>
      &lt;enc:CipherData>
         &lt;enc:CipherReference
             URI="EPUB/images/cover.png"/>
      &lt;/enc:CipherData>
   &lt;/enc:EncryptedData>
&lt;/encryption></pre>

				<p>The contents of the <code>EPUB/As_You_Like_It.opf</code> file</p>

				<pre>&lt;?xml version="1.0"?>
&lt;package
    version="3.0"
    xml:lang="en"
    xmlns="http://www.idpf.org/2007/opf"
    unique-identifier="pub-id">
    
   &lt;metadata
       xmlns:dc="http://purl.org/dc/elements/1.1/">
      
      &lt;dc:identifier
          id="pub-id">
         urn:uuid:B9B412F2-CAAD-4A44-B91F-A375068478A0
      &lt;/dc:identifier>
      
      &lt;dc:language>
         en
      &lt;/dc:language>
      
      &lt;dc:title>
         As You Like It
      &lt;/dc:title>
       
      &lt;dc:creator
          id="creator">
         William Shakespeare
      &lt;/dc:creator>
      
      &lt;meta
          property="dcterms:modified">
         2000-03-24T00:00:00Z
      &lt;/meta>
      
      &lt;dc:publisher>
         Project Gutenberg
      &lt;/dc:publisher>
      
      &lt;dc:date>
         2000-03-24
      &lt;/dc:date>
      
      &lt;meta
          property="dcterms:dateCopyrighted">
         9999-01-01
      &lt;/meta>
      
      &lt;dc:identifier
          id="isbn13">
         urn:isbn:9780741014559
      &lt;/dc:identifier>
      
      &lt;dc:identifier
          id="isbn10">
         0-7410-1455-6
      &lt;/dc:identifier>
      
      &lt;link
          rel="xml-signature"
          href="../META-INF/signatures.xml#AsYouLikeItSignature"/>
   &lt;/metadata>
    
   &lt;manifest>
      &lt;item id="r4915" 
          href="book.html" 
          media-type="application/xhtml+xml"/>
      &lt;item id="r7184" 
          href="images/cover.png" 
          media-type="image/png"/>
      &lt;item id="nav" 
          href="nav.html" 
          media-type="application/xhtml+xml" 
          properties="nav"/>
   &lt;/manifest>
   
   &lt;spine>
      &lt;itemref
          idref="r4915"/>
   &lt;/spine>
&lt;/package></pre>
			</section>

			<section id="clock-examples">
				<h3>Clock Values</h3>

				<p>The following are examples of allowed clock values:</p>

				<ul>
					<li>
						<p><code>5:34:31.396</code> = 5 hours, 34 minutes, 31 seconds, and 396 milliseconds</p>
					</li>
					<li>
						<p><code>124:59:36</code> = 124 hours, 59 minutes, and 36 seconds</p>
					</li>
					<li>
						<p><code>0:05:01.2</code> = 5 minutes, 1 second, and 200 milliseconds</p>
					</li>
					<li>
						<p><code>0:00:04</code> = 4 seconds</p>
					</li>
					<li>
						<p><code>09:58</code> = 9 minutes and 58 seconds</p>
					</li>
					<li>
						<p><code>00:56.78</code> = 56 seconds and 780 milliseconds</p>
					</li>
					<li>
						<p><code>76.2s</code> = 76.2 seconds = 76 seconds and 200 milliseconds</p>
					</li>
					<li>
						<p><code>7.75h</code> = 7.75 hours = 7 hours and 45 minutes</p>
					</li>
					<li>
						<p><code>13min</code> = 13 minutes</p>
					</li>
					<li>
						<p><code>2345ms</code> = 2345 milliseconds</p>
					</li>
					<li>
						<p><code>12.345</code> = 12 seconds and 345 milliseconds</p>
					</li>
				</ul>
			</section>
		</section>
		<section id="app-media-types" class="appendix informative">
			<h2>Media Type Registrations</h2>

			<section id="app-media-type-app-oebps-package">
				<h3>The <code>application/oebps-package+xml</code> Media Type</h3>

				<p>This appendix registers the media type <code>application/oebps-package+xml</code> for the EPUB
					Package Document. This registration supersedes [[RFC4839]].</p>

				<p>The Package Document is an XML file that describes an EPUB Publication. It identifies the resources
					in the EPUB Publication and provides metadata information. The Package Document and its related
					specifications are maintained and defined by the <a href="https://www.w3.org">World Wide Web
						Consortium</a> (W3C).</p>

				<dl class="variablelist">
					<dt>MIME media type name:</dt>
					<dd>
						<p>
							<code>application</code>
						</p>
					</dd>

					<dt>MIME subtype name:</dt>
					<dd>
						<p>
							<code>oebps-package+xml</code>
						</p>
					</dd>

					<dt>Required parameters:</dt>
					<dd>
						<p>None.</p>
					</dd>

					<dt>Optional parameters:</dt>
					<dd>
						<p>None.</p>
					</dd>

					<dt>Encoding considerations:</dt>
					<dd>
						<p>Package Documents are UTF-8 or UTF-16 encoded XML.</p>
					</dd>

					<dt>Security considerations:</dt>
					<dd>
						<p>Package Documents contain well-formed XML conforming to the XML 1.0 specification.</p>
						<p>Clearly, it is possible to author malicious files which, for example, contain malformed data.
							Most XML parsers protect themselves from such attacks by rigorously enforcing
							conformance.</p>
						<p>All processors that read Package Documents should rigorously check the size and validity of
							data retrieved.</p>
						<p>There is no current provision in the EPUB 3 specification for encryption, signing, or
							authentication within the Package Document format.</p>
					</dd>

					<dt>Interoperability considerations:</dt>
					<dd>
						<p>None.</p>
					</dd>

					<dt>Published specification:</dt>
					<dd>
						<p>This media type registration is for the EPUB Package Document, as described by the EPUB 3
							specification located at <a href="https://www.w3.org/TR/epub-33/"
								>https://www.w3.org/TR/epub-33/</a>.</p>
						<p>The EPUB 3 specification supersedes the Open Packaging Format 2.0.1 specification, which is
							located at <a href="http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm"
								>http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm</a> and which also uses the <code
								class="media-type">application/oepbs-package+xml</code> media type.</p>
					</dd>

					<dt>Applications which use this media type:</dt>
					<dd>
						<p>This media type is in wide use for the distribution of ebooks in the EPUB format.</p>
					</dd>

					<dt>Additional information:</dt>
					<dd>
						<dl class="variablelist">
							<dt>Magic number(s):</dt>
							<dd>
								<p>none</p>
							</dd>

							<dt>File extension(s):</dt>
							<dd>
								<p>
									<code>.opf</code>
								</p>
							</dd>

							<dt>Macintosh File Type Code(s):</dt>
							<dd>
								<p>TEXT</p>
							</dd>

							<dt>Fragment Identifiers:</dt>
							<dd>
								<p>EPUB Canonical Fragment Identifiers are custom fragment identifiers that can resolve
									to <code>application/oebps-package+xml</code> documents.</p>
							</dd>
						</dl>
					</dd>

					<dt>Person &amp; email address to contact for further information:</dt>
					<dd>
						<p>public-epub3@w3.org</p>
					</dd>

					<dt>Intended usage:</dt>
					<dd>
						<p>COMMON</p>
					</dd>

					<dt>Author/Change controller:</dt>
					<dd>
						<p>World Wide Web Consortium (W3C)</p>
					</dd>
				</dl>
			</section>

			<section class="informative" id="app-media-type">
				<h3>The <code>application/epub+zip</code> Media Type</h3>

				<p>This appendix registers the media type <code>application/epub+zip</code> for the EPUB Open Container
					Format (OCF).</p>

				<p>An <a>OCF ZIP Container</a>, or <a>EPUB Container</a>, file is a container technology based on the
					[[ZIP]] archive format. It is used to encapsulate the EPUB Publication. OCF and its related
					standards are maintained and defined by the <a href="https://www.w3.org">World Wide Web
						Consortium</a> (W3C).</p>

				<dl class="variablelist">
					<dt>MIME media type name:</dt>
					<dd>
						<p>
							<code>application</code>
						</p>
					</dd>

					<dt>MIME subtype name:</dt>
					<dd>
						<p>
							<code>epub+zip</code>
						</p>
					</dd>

					<dt>Required parameters:</dt>
					<dd>
						<p>None.</p>
					</dd>

					<dt>Optional parameters:</dt>
					<dd>
						<p>None.</p>
					</dd>

					<dt>Encoding considerations:</dt>
					<dd>
						<p>OCF ZIP Container files are binary files encoded in the <a class="media-type"
								href="https://www.iana.org/assignments/media-types/application/zip">
								<code>application/zip</code></a> media type.</p>
					</dd>

					<dt>Security considerations:</dt>
					<dd>
						<p>All processors that read OCF ZIP Container files should rigorously check the size and
							validity of data retrieved.</p>
						<p>In addition, because of the various content types that can be embedded in OCF ZIP Container
							files, <code>application/epub+zip</code> may describe content that poses security
							implications beyond those noted here. However, only in cases where the processor recognizes
							and processes the additional content, or where further processing of that content is
							dispatched to other processors, would security issues potentially arise. In such cases,
							matters of security would fall outside the domain of this registration document.</p>
						<p>Security considerations that apply to <code>application/zip</code> also apply to OCF ZIP
							Container files.</p>
					</dd>

					<dt>Interoperability considerations:</dt>
					<dd>
						<p>None.</p>
					</dd>

					<dt>Published specification:</dt>
					<dd>
						<p>This media type registration is for the EPUB Open Container Format (OCF), as described by the
							EPUB 3 specification located at <a href="https://www.w3.org/TR/epub-33/"
									><code>https://www.w3.org/TR/epub-33/</code></a>.</p>
						<p>The EPUB 3 specification supersedes both <a
								href="https://datatracker.ietf.org/doc/html/rfc4839">RFC 4839</a> and the Open Container
							Format 2.0.1 specification, which is located at <a
								href="http://www.idpf.org/doc_library/epub/OCF_2.0.1_draft.doc"
									><code>http://www.idpf.org/doc_library/epub/OCF_2.0.1_draft.doc</code></a>, and
							which also uses the <code>application/epub+zip</code> media type.</p>
					</dd>

					<dt>Applications that use this media type:</dt>
					<dd>
						<p>This media type is in wide use for the distribution of ebooks in the EPUB format.</p>
					</dd>

					<dt>Additional information:</dt>
					<dd>
						<dl class="variablelist">
							<dt>Magic number(s):</dt>
							<dd>
								<p>0: <code>PK 0x03 0x04</code>, 30: <code>mimetype</code>, 38:
										<code>application/epub+zip</code></p>
							</dd>

							<dt>File extension(s):</dt>
							<dd>
								<p>OCF ZIP Container files are most often identified with the extension
										<code>.epub</code>.</p>
							</dd>

							<dt>Macintosh file type code(s):</dt>
							<dd>
								<p>ZIP</p>
							</dd>

							<dt>Fragment identifiers:</dt>
							<dd>
								<p>EPUB Canonical Fragment Identifiers are custom fragment identifiers that can resolve
									to <code>application/epub+zip</code> and <code>application/oebps-package+xml</code>
									documents.</p>
							</dd>
						</dl>
					</dd>

					<dt>Person &amp; email address to contact for further information:</dt>
					<dd>
						<p>public-epub3@w3.org</p>
					</dd>

					<dt>Intended usage:</dt>
					<dd>
						<p>COMMON</p>
					</dd>

					<dt>Author/change controller:</dt>
					<dd>
						<p>World Wide Web Consortium (W3C)</p>
					</dd>
				</dl>
			</section>
		</section>
		<section id="change-log" class="appendix informative">
			<h2>Change Log</h2>

			<p>Note that this change log only identifies substantive changes since <a
					href="https://www.w3.org/publishing/epub/epub-spec.html">EPUB 3.2</a> &#8212; those that affect the
				conformance of <a>EPUB Publications</a> or are similarly noteworthy.</p>

			<p>For a list of all issues addressed during the revision, refer to the <a
					href="https://github.com/w3c/epub-specs/issues?q=is%3Aissue+is%3Aclosed+label%3AEPUB33+-label%3ASpec-RS+"
					>Working Group's issue tracker</a>.</p>

			<ul>
				<li>03-Dec-2021: Added a new risky class for unsupported features. See <a
						href="https://github.com/w3c/epub-specs/issues/1944">issue 1944</a>.</li>

				<li>03-Dec-2021: Remove the element-based restrictions on remote resources. See <a
						href="https://github.com/w3c/epub-specs/issues/1913">issue 1913</a>.</li>
				<li>26-Nov-2021: A requirement and an algorithm to detect out-of-container URLs has been added to the
					specification. See <a href="https://github.com/w3c/epub-specs/issues/1912">issue 1912</a>
				</li>
				<li>18-Nov-2021: Change to only disallow deprecated characters in the Tags and Variation Selectors
					Supplement. See <a href="https://github.com/w3c/epub-specs/issues/1885">issue 1885</a>.</li>
				<li>12-Nov-2021: Change the recommendation to use SHA-1 to encrypt the obfuscation key to a requirement.
					See <a href="https://github.com/w3c/epub-specs/issues/1873">issue 1873</a>.</li>
				<li>12-Nov-2021: Restrict the obfuscation algorithm to fonts and add caution to use better protection
					methods whenever possible. See <a href="https://github.com/w3c/epub-specs/issues/1873">issue
						1873</a>.</li>
				<li>12-Nov-2021: Removed the statement about rights.xml being reserved for future standardization of DRM
					information. See <a href="https://github.com/w3c/epub-specs/issues/181">issue 1874</a>.</li>
				<li>10-Nov-2021: Proper definition of the content URL and handling of relative URLs. See <a
						href="https://github.com/w3c/epub-specs/issues/1374">issue 1374</a> and <a
						href="https://github.com/w3c/epub-specs/issues/1888">issue 1888</a></li>
				<li>29-Oct-2021: Recommended that EPUB Creators not use path-absolute-URL strings for referencing
					resources due to the lack of a consistent root. See <a
						href="https://github.com/w3c/epub-specs/issues/1681">issue 1681</a>.</li>
				<li>18-Oct-2021: Clarified the contexts from which remote resources may be referenced. See <a
						href="https://github.com/w3c/epub-specs/issues/1857">issue 1857</a>.</li>
				<li>12-Oct-2021: The Structure Semantics Vocabulary has been moved into a separate Working Group Note.
					See <a href="https://github.com/w3c/epub-specs/issues/1763">issue 1763</a>.</li>
				<li>27-Aug-2021: Add clarifications for including landmarks, such as limiting the number, recommending
					known semantics, and ensuring the labels are human readable. Also added recommendation to not
					include nested lists to match the page list. See <a
						href="https://github.com/w3c/epub-specs/issues/1761">issue 1761</a>.</li>
				<li>22-July-2021: Clarified TTS handling of images in media overlays. See <a
						href="https://github.com/w3c/epub-specs/issues/1745">issue 1745</a>.</li>
				<li>09-July-2021: Restored the custom attributes section due to known usage but without reference to the
					attribute registry. See <a href="https://github.com/w3c/epub-specs/issues/1602">issue 1602</a>.</li>
				<li>09-July-2021: Added the "Relationship to URL" section to explain the use of URL standard terminology
					in this document relative to resource formats that do not reference it. See <a
						href="https://github.com/w3c/epub-specs/issues/1726">issue 1726</a>.</li>
				<li>05-July-2021: Removed the section on private use area characters from the XHTML restrictions. The
					issues are more complex than what is covered and not in scope of EPUB to define. See <a
						href="https://github.com/w3c/epub-specs/issues/1732">issue 1732</a>.</li>
				<li>28-June-2021: Added a note discouraging EPUB Creators from referencing resources outside the
					directory containing the Package Document to avoid interoperability issues. See <a
						href="https://github.com/w3c/epub-specs/issues/1687">issue 1687</a></li>
				<li>23-June-2021: Added the <code>base</code> element to the list of discouraged XHTML constructs. See
						<a href="https://github.com/w3c/epub-specs/issues/1699">issue 1699</a>.</li>
				<li>18-June-2021: Moved requirements for authoring SSML, PLS lexicons and CSS 3 Speech to the <a
						href="https://www.w3.org/TR/epub-tts-10">EPUB 3 Text-to-Speech Enhancements</a> note. The
					ability to use these technologies in EPUB 3 Publications remains unchanged. See <a
						href="https://github.com/w3c/epub-specs/issues/1690">issue 1690</a>.</li>
				<li>16-June-2021: Absolute URLs with <code>file</code> scheme should not be used on manifest items. See
						<a href="https://github.com/w3c/epub-specs/issues/1688">issue 1688</a>.</li>
				<li>31-May-2021: Require Unicode normalization and full case folding (in this order) for file name
					uniqueness comparisons. See <a href="https://github.com/w3c/epub-specs/issues/1631">issue 1631</a>
					and <a href="https://github.com/w3c/epub-specs/pull/1648">pull request 1648</a>.</li>
				<li>31-May-2021: Confirmed that SVG Content Documents do not have to be valid to the SVG specification,
					only meet the well-formedness and ID requirements currently referenced and the restrictions imposed
					by this specification. See <a href="https://github.com/w3c/epub-specs/issues/1323">issue
					1323</a>.</li>
				<li>12-May-2021: Clarified that manifest items must not contain fragment identifiers. See <a
						href="https://github.com/w3c/epub-specs/issues/1303">issue 1303</a>.</li>
				<li>12-May-2021: Changed all references to URIs/IRIs to URLs and references to RFCs 3986 and 3987 to the
					URL standard. See <a href="https://github.com/w3c/epub-specs/issues/808">issue 808</a>.</li>
				<li>08-May-2021: Added clarifying text that <code>link</code> element can be used to link individual
					metadata properties in an alternative format. See <a
						href="https://github.com/w3c/epub-specs/issues/1666">issue 1666</a>.</li>
				<li>06-May-2021: Noted that the working group will no longer maintain the publication type and
					collection role registries and removed dependence on the latter for validating collection types (use
					of NMToken values remains restricted to extension specifications). The registry of authority codes
					is now integrated into the property definition. See <a
						href="https://github.com/w3c/epub-specs/pull/1664">pull request 1664</a>.</li>
				<li>06-May-2021: Added <code>application/ecmascript</code> as a core media type for scripts. See <a
						href="https://github.com/w3c/epub-specs/issues/1353">issue 1353</a>.</li>
				<li>06-May-2021: Added new section on fragment identifiers to Media Overlays and now recommend HTML
					target element references and SVG fragment identifiers instead of requiring conformance to the
					incompatible XPointer Shorthand syntax. See <a href="https://github.com/w3c/epub-specs/issues/1586"
						>issue 1586</a>.</li>
				<li>28-Apr-2021: Drop requirement for resources referenced from HTML <code>link</code> elements to have
					core media type fallbacks. See <a href="https://github.com/w3c/epub-specs/issues/1312">issue
						1312</a>.</li>
				<li>22-Apr-2021: The usage of UTF-16 for CSS and XML has been changed, UTF-8 is the recommended
					encoding. See <a href="https://github.com/w3c/epub-specs/issues/1628">issue 1628</a>.</li>
				<li>19-Apr-2021: The use of custom attributes in EPUB Content Documents is no longer supported. See <a
						href="https://github.com/w3c/epub-specs/issues/1602">issue 1602</a>.</li>
				<li>13-Apr-2021: Require path names in OCF to also be UTF-8 encoded. See <a
						href="https://github.com/w3c/epub-specs/issues/1630">issue 1630</a>.</li>
				<li>12-Apr-2021: Added a reference to the SVG <code>direction</code> attribute in <a href="#sec-css-req"
					></a>. See <a href="https://github.com/w3c/epub-specs/issues/1613">issue 1614</a>.</li>
				<li>09-Apr-2021: Added a new section dedicated to accessibility in EPUB Publications.</li>
				<li>04-May-2021: Removed requirements around SVG <code>requiredExtensions</code> attribute. See <a
						href="https://github.com/w3c/epub-specs/issues/1087">issue 1087</a>.</li>
				<li>26-Mar-2021: Removed requirement for page list ordering to reflect the order of page breaks in the
					content. See <a href="https://github.com/w3c/epub-specs/issues/1500">issue 1500</a>.</li>
				<li>26-Mar-2021: Allowed <code>creator</code> and <code>contributor</code> elements to have multiple
					roles and allowed roles for <code>publisher</code>. See <a
						href="https://github.com/w3c/epub-specs/issues/1129">issue 1129</a> and <a
						href="https://github.com/w3c/epub-specs/issues/1583">issue 1583</a></li>
				<li>23-Mar-2021: Clarified the requirements for the use of data URLs in EPUB Publications. See <a
						href="https://github.com/w3c/epub-specs/issues/1564">issue 1564</a>.</li>
				<li>17-Mar-2021: Include non characters at the end of the supplementary planes in list of characters not
					allowed in file names. See <a href="https://github.com/w3c/epub-specs/issues/1538">issue
					1538</a>.</li>
				<li>15-Mar-2021: Removed the normative dependencies on XML schemas and added element and attribute
					definitions for the <code>container.xml</code>, <code>encryption.xml</code> and
						<code>signatures.xml</code> files. All schemas are considered informative. See <a
						href="https://github.com/w3c/epub-specs/issues/1566">issue 1566</a>.</li>
				<li>10-Mar-2021: Require that resources referenced from an EPUB Publication not be located in the
						<code>META-INF</code> directory. See <a href="https://github.com/w3c/epub-specs/issues/1205"
						>issue 1205</a>.</li>
				<li>08-Mar-2021: The fix for <a href="https://github.com/w3c/epub-specs/issues/1322">issue 1322</a> on
					20-Jan-2021 incorrectly mentioned EPUB Content Documents having durations. Corrected to Media
					Overlay Documents.</li>
				<li>08-Mar-2021: Added recommendation that <code>refines</code> attribute use fragment identifiers to
					reference Publication Resources. See <a href="https://github.com/w3c/epub-specs/issues/1361">issue
						1361</a>.</li>
				<li>08-Mar-2021: Change requirement that Media Overlay <code>par</code> and <code>seq</code> ordering
					match the default reading order to guidance. See <a
						href="https://github.com/w3c/epub-specs/issues/1458">issue 1458</a></li>
				<li>05-Mar-2021: Clarified that whitespace within metadata element values is collapsed per the [[Infra]]
					specification definition. See <a href="https://github.com/w3c/epub-specs/issues/1528">issue
					1528</a>.</li>
				<li>26-Feb-2021: Created a new section for describing general metadata value requirements, specifically
					whitespace handling. See <a href="https://github.com/w3c/epub-specs/issues/1528">issue
					1528</a>.</li>
				<li>17-Feb-2020: File extension recommendations have been removed (affects the Package Document, XHTML
					Content Documents, Media Overlay Documents). See <a
						href="https://github.com/w3c/epub-specs/issues/1294">issue 1294</a>.</li>
				<li>15-Feb-2021: Clarified that <code>nav</code> elements without an <code>epub:type</code> attribute
					are not subject to the EPUB Navigation Document's content model restrictions. See <a
						href="https://github.com/w3c/epub-specs/issues/976">issue 976</a>.</li>
				<li>10-Feb-2021: A very first draft for <a href="#sec-security-privacy"></a> has been added.</li>
				<li>04-Feb-2021: Clarify that the value of <code>dc:language</code> elements must be well-formed
					language tags. See <a href="https://github.com/w3c/epub-specs/issues/1325">issue 1325</a>.</li>
				<li>02-Feb-2021: Added <code>auto</code> value for <code>dir</code> attribute and clarified the
					precedence of the attribute. See <a href="https://github.com/w3c/epub-specs/issues/1491">issue
						1491</a> and <a href="https://github.com/w3c/epub-specs/issues/1494">issue 1494</a>.</li>
				<li>02-Feb-2021: Added the <code>hreflang</code> attribute to <code>link</code> elements to identify the
					language of linked resources. See <a href="https://github.com/w3c/epub-specs/issues/1488">issue
						1488</a>.</li>
				<li>20-Jan-2021: Clarified that user-defined media overlay style classes must be declared in the Package
					Document metadata. See <a href="https://github.com/w3c/epub-specs/issues/1319">issue 1319</a>.</li>
				<li>20-Jan-2021: Add recommendation that the sum of the media overlay durations for each Content
					Document match the total duration specified for the EPUB Publication. See <a
						href="https://github.com/w3c/epub-specs/issues/1322">issue 1322</a>.</li>
				<li>20-Jan-2021: Clarified that the <code>epub:type</code> attribute does not improve the accessibility
					of publications. Added pointers to the <code>role</code> attribute and the DPUB-ARIA vocabulary for
					accessibility.</li>
				<li>13-Jan-2021: The requirement for progressive enhancement with spine-level scripting has been changed
					to a recommendation that top-level content documents remain consumable when scripting is not
					available. See <a href="https://github.com/w3c/epub-specs/issues/1444">issue 1444</a>.</li>
				<li>24-Dec-2020: The specification no longer makes reference to a release identifier, but the
					requirement to include a last modification date remains for backwards compatibility. See <a
						href="https://github.com/w3c/epub-specs/issues/1440">issue 1440</a>.</li>
				<li>16-Dec-2020: Terminology and requirements related to "renditions" of an EPUB Publication have been
					simplified to improve the readability of the specifications (i.e., to align with the generally
					understood concept that an EPUB Publication has only a single rendering described by a single
					Package Document). These changes do not affect the ability to include multiple renditions, which are
					now more fully covered in [[EPUB-MULTI-REND-11]]. See <a
						href="https://github.com/w3c/epub-specs/issues/1436">issue 1436</a>.</li>
				<li>14-Nov-2020: The term "semantic inflection" is no longer used to describe the process of adding
					structural semantics to elements. The term is not widely understood outside of EPUB, and is
					unnecessarily complex. The specification now simply refers to "expressing" or "adding" structual
					semantics.</li>
				<li>09-Nov-2020: The requirement that the ordering of the <code>toc nav</code> match the ordering of
					EPUB Content Documents in the spine, and the elements within each file, has been reduced to a
					recommendation. See <a href="https://github.com/w3c/epub-specs/issues/1283">issue 1283</a>.</li>
				<li>06-Nov-2020: Clarified that HTML <code>script</code> elements that contain <a
						href="#sec-scripted-context">data blocks are not instances of scripting</a>. See <a
						href="https://github.com/w3c/epub-specs/issues/1352">issue 1352</a>.</li>
				<li>06-Nov-2020: Added WebP to the <a href="#cmt-grp-image">image core media types</a>. See <a
						href="https://github.com/w3c/epub-specs/issues/1344">issue 1344</a>.</li>
				<li>06-Nov-2020: A <a href="#app-identifiers-allowed">restricted set of external identifiers</a> are now
					allowed in publication resources. <a href="#sec-xml-constraints">References to external entities</a>
					from the internal DTD subset remain restricted, however. See <a
						href="https://github.com/w3c/epub-specs/issues/1338">issue 1338</a>.</li>
				<li>12-Oct-2020: Added OPUS to the <a href="#cmt-grp-audio">audio core media types</a> with a warning
					that it is still subject to review depending on support in Mac/iOS. See <a
						href="https://github.com/w3c/epub-specs/issues/645">issue 645</a>.</li>
				<li>30-Sept-2020: The structure of the EPUB core specifications has been simplified to ease
					understanding and access to information. This specification now consolidates the authoring
					requirements from the EPUB 3.2 specification together with the Packages, Content Documents, OCF and
					Media Overlays specifications. A separate document, EPUB Reading Systems 3.3, consolidates the
					reading system requirements from those documents.</li>
			</ul>
		</section>
		<div data-include="../common/acknowledgements-dedication.html" data-oninclude="fixIncludes"
			data-include-replace="true"></div>
	</body>
</html>
