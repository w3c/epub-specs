<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
	<head>
		<meta charset="utf-8" />
		<title>EPUB 3.3</title>
		<script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove"></script>
		<script src="../common/js/biblio.js" class="remove"></script>
		<script src="../common/js/confreq-permalinks.js" class="remove"></script>
		<script src="../common/js/css-inline.js" class="remove"></script>
		<script class="remove">
			//<![CDATA[
            var respecConfig = {
                group: "epub",
                wgPublicList: "public-epub-wg",
                specStatus: "ED",
                shortName: "epub-33",
                edDraftURI: "https://w3c.github.io/epub-specs/epub33/core/",
                previousPublishDate: "2021-01-12",
                previousMaturity: "FPWD",
                copyrightStart: "1999",
                editors:[
                {
                    name: "Matt Garrish",
                    company: "DAISY Consortium",
                    companyURL: "https://daisy.org",
					w3cid: 51655
                },
				{
					name: "Ivan Herman",
					url: "https://www.w3.org/People/Ivan/",
					company: "W3C",
					w3cid: 7382,
					orcid: "0000-0003-0782-2704",
					companyURL: "https://www.w3.org",
				},
				{
					name: "Dave Cramer",
					company: "Hachette Livre",
					companyURL: "https://www.hachettebookgroup.com",
					w3cid: 65283
				}],
                formerEditors: [
                {
                    name: "Garth Conboy",
                    company: "Google",
                    companyURL: "https://www.google.com",
					w3cid: 92141
                },
                {
                    name: "Dave Cramer",
                    company: "Hachette Livre",
                    companyURL: "https://www.hachettebookgroup.com",
                    w3cid: 65283
                },
                {
                    name: "Marisa DeMeglio",
                    company: "DAISY Consortium",
                    companyURL: "https://daisy.org",
					w3cid: 35713
                },                {
                    name: "Daniel Weck",
                    company: "DAISY Consortium",
                    companyURL: "https://daisy.org",
					w3cid: 45653
                }],
                includePermalinks: true,
                permalinkEdge: true,
                permalinkHide: false,
                diffTool: "http://www.aptest.com/standards/htmldiff/htmldiff.pl",
                github: {
                    repoURL: "https://github.com/w3c/epub-specs",
                    branch: "main"
                },
                localBiblio: biblio,
                preProcess:[inlineCustomCSS],
                postProcess:[addConformanceLinks]
            };//]]>
      </script>
	</head>
	<body>
		<section id="abstract">
			<p>EPUB® 3 defines a distribution and interchange format for digital publications and documents. The EPUB
				format provides a means of representing, packaging, and encoding structured and semantically enhanced
				Web content — including HTML, CSS, SVG, and other resources — for distribution in a single-file
				container.</p>
			<p>This specification defines the authoring requirements for EPUB Publications and represents the third
				major revision of the standard.</p>
		</section>
		<section id="sotd"></section>
		<section id="sec-introduction">
			<h2>Introduction</h2>

			<section id="sec-intro-overview">
				<h3>Overview</h3>

				<p>EPUB 3 has been widely adopted as the format for digital books (ebooks), and this revision continues
					to increase the format's capabilities to better support a wider range of publication requirements,
					including complex layouts, rich media and interactivity, and global typography features. The
					expectation is that the EPUB 3 format will be utilized for a broad range of content, including
					books, magazines, and educational, professional, and scientific publications.</p>

				<p>This specification represents the core of EPUB 3 and includes the conformance requirements for
						<a>EPUB Publications</a> — the product of the standard. The other specifications that comprise
					EPUB 3 are as follows:</p>

				<ul>
					<li>
						<p><a href="https://www.w3.org/TR/epub-rs-33/">EPUB 3 Reading Systems</a> [[!EPUB-RS-33]] —
							defines the processing requirements for <a>EPUB Reading Systems</a> — the applications that
							consume EPUB Publications and present their content to users.</p>
					</li>
					<li>
						<p><a href="http://www.w3.org/TR/epub-a11y-11">EPUB Accessibility</a> [[!EPUB-A11Y-11]] —
							defines accessibility conformance and discovery requirements for EPUB Publications.</p>
					</li>
				</ul>

				<p>These specifications represent the formal list recognized as belonging to EPUB 3 and that contain
					functionality normatively referenced as part of the standard. New functionality is also added
					periodically through the development of extension specifications. Features and functionality defined
					outside of core revisions to the standard, while not formally recognized in this specification, are
					nonetheless available for use by <a>Authors</a> and Reading System developers.</p>

				<p>The informative <a href="https://www.w3.org/TR/epub-overview-33/">EPUB 3 Overview</a>
					[[EPUB-OVERVIEW-33]] provides a general introduction to EPUB 3. A list of technical changes from the
					previous version is also available in the <a href="#change-log">change log</a>.</p>
			</section>

			<section id="sec-intro-spec-org" class="informative">
				<h3>Organization</h3>

				<p>This section reviews the organization of the EPUB specifications through the central product they
					define: the <a>EPUB Publication</a>.</p>

				<p>An EPUB Publication is typically represented by a single <a>Package Document</a>. This document
					includes metadata used by <a>Reading Systems</a> to present the content to the user, such as the
					title and author for display in a bookshelf as well as rendering metadata (e.g., whether the content
					is reflowable or has a fixed layout). It also provides a manifest of resources and includes a
						<a>spine</a> that lists the default sequence in which to render documents as a user progresses
					through the content. The requirements for the Package Document are defined in <a
						href="#sec-package-doc"></a>.</p>

				<p>An EPUB Publication also includes another key file called the <a>EPUB Navigation Document</a>. This
					document provides critical navigation capabilities, such as the table of contents, that allow users
					to navigate the content quickly and easily. This document is defined in <a href="#sec-nav"></a>.</p>

				<!--
				<figure>
					<figcaption> The following example visually represents the structure of the EPUB format. </figcaption>
					<object data="images/epub.svg" width="350">
						<img src="images/epub.png" width="350" alt="" />
					</object>
				</figure>
-->

				<p>The actual content of an EPUB Publication &#8212; what users are presented with when they begin
					reading &#8212; is built on the Open Web Platform and comes in two flavors: <a
						data-lt="XHTML Content Document">XHTML</a> and <a data-lt="SVG Content Document">SVG</a>. Called
						<a>EPUB Content Documents</a>, these documents typically reference many additional resources
					required for their proper rendering, such as images, audio and video clips, scripts, and style
					sheets.</p>

				<p>Detailed information about the rules and requirements to produce EPUB Content Documents is provided
					in <a href="#sec-contentdocs"></a>, and accessibility requirements are defined in
					[[EPUB-A11Y-11]].</p>

				<p><a>Media Overlay Documents</a> complement EPUB Content Documents. They provide declarative markup for
					synchronizing the text in EPUB Content Documents with prerecorded audio. The result is the ability
					to create a read-aloud experience where text is highlighted as it is narrated. Media Overlay
					Documents are defined in <a href="#sec-media-overlays"></a>.</p>

				<p>The EPUB Publication's resources are bundled for distribution in a ZIP-based archive with the file
					extension <code>.epub</code>. As conformant ZIP archives, EPUB Publications can be unzipped by many
					software programs, simplifying both their production and consumption.</p>

				<p>The container format not only provides a means of determining that the zipped content represents an
					EPUB Publication (the <code>mimetype</code> file), but also provides a universally-named directory
					of informative resources (<code>/META-INF</code>). Key among these resources is the
						<code>container.xml</code> file, which directs Reading Systems to the available Package
					Documents. The container format is defined in <a href="#sec-ocf"></a>.</p>

				<p>While conceptually simple, an EPUB Publication is more than just a collection of HTML pages and
					dependent assets in a ZIP package as presented here. Additional information about the primary
					features and functionality that EPUB Publications provide to enhance the reading experience is
					available from the referenced specifications, and a more general introduction to the features of
					EPUB 3 is provided in the informative [[EPUB-OVERVIEW-33]].</p>

				<p>The processing requirements for <a>Reading Systems</a> are defined in [[EPUB-RS-33]]. Although it is
					not necessary that Authors read that document to create EPUB Publications, an understanding of how
					Reading Systems present the content can help craft publications for optimal presentation to
					users.</p>
			</section>

			<section id="sec-intro-relations" class="informative">
				<h3>Relationship to Other Specifications</h3>

				<section id="sec-overview-relations-html">
					<h4>Relationship to HTML</h4>

					<p>The [[HTML]] standard is continuously evolving &#8212; there are no longer versioned releases of
						it. That standard, in turn, references various technologies that continue to evolve, such as
						MathML, SVG, CSS, and JavaScript.</p>

					<p>The benefit of this approach for EPUB is that EPUB Publications always keep pace with changes to
						the Web without the need for new revisions. Authors, however, will need to keep track of the
						various changes to HTML and the technologies it references, and ensure that their processes are
						kept up to date.</p>

					<div class="warning">
						<p>As HTML evolves, it is possible that features that were valid in previous versions could
							become obsolete or be removed. In general, however, features are typically only removed if
							serious issues with them arise (e.g., lack of support in browsers, security issues).</p>
					</div>

					<p>The <a href="#sec-xhtml">XHTML profile defined by this specification</a> inherits all definitions
						of semantics, structure and processing behaviors from HTML unless otherwise specified.</p>

					<p>In addition, this specification <a href="#sec-xhtml-extensions">defines a set of extensions</a>
						to the [[HTML]] document model that <a>Authors</a> can include in <a>XHTML Content
						Documents</a>.</p>
				</section>

				<section id="sec-overview-relations-svg">
					<h4>Relationship to SVG</h4>

					<p>This specification does not reference a specific version of [[SVG]], but instead uses an undated
						reference. Whenever there is any ambiguity in this reference, the latest recommended
						specification is the authoritative reference.</p>

					<p>This approach ensures that EPUB will always keep pace with changes to the SVG standard. Authors
						and Reading System developers will need to keep track of changes to the SVG standard and ensure
						that their processes are kept up to date.</p>

					<div class="caution">
						<p>As SVG evolves, it is possible that features that were valid in previous versions could
							become obsolete or be removed. It is anticipated that the W3C will make any such changes
							carefully to ensure minimal disruption for Authors, but in the case of a
							backwards-incompatible revision the use of an undated reference could be revisited.</p>
					</div>
				</section>

				<section id="sec-overview-relations-css">
					<h4>Relationship to CSS</h4>

					<p>EPUB 3 supports CSS as defined by the CSS Working Group Snapshot [[CSSSnapshot]]. EPUB 3 also
						maintains some prefixed CSS properties, to ensure consistent support for global languages.</p>
				</section>

				<section id="d46451e218">
					<h4>Relationship to SMIL</h4>

					<p>This specification relies on a subset of [[SMIL3]], from which the EPUB Media Overlays elements
						and attributes defined in <a href="#sec-overlays-def"></a> are derived.</p>
				</section>
			</section>

			<section id="sec-terminology">
				<h3>Terminology</h3>

				<p>The following terms are specific to EPUB 3. They are capitalized wherever used.</p>

				<p>Only the first instance of a term in a section is linked to its definition.</p>

				<dl class="termlist">
					<dt>
						<dfn id="dfn-author" data-lt="Authors">Author</dfn>
					</dt>
					<dd>
						<p>The person(s) or organization responsible for the creation of an <a>EPUB Publication</a>. The
							Author is not necessarily the creator of the content.</p>
					</dd>
					<dt>
						<dfn id="dfn-codec" data-lt="Codecs">Codec</dfn>
					</dt>
					<dd>
						<p>Codec refers to content that has intrinsic binary format qualities, such as video and audio
							media types which are already designed for optimum compression, or which provide optimized
							streaming capabilities.</p>
					</dd>
					<dt>
						<dfn id="dfn-content-display-area">Content Display Area</dfn>
					</dt>
					<dd>
						<p>The area within the <a>Viewport</a> dedicated to the display of <a>EPUB Content
							Documents</a>. The Content Display Area excludes any borders, margins, headers, footers, or
							other decoration a <a>EPUB Reading System</a> might inject into the Viewport.</p>
						<p>In the case of <a>synthetic spreads</a>, the Viewport contains two Content Display Areas.</p>
					</dd>
					<dt>
						<dfn id="dfn-core-media-type-resource" data-lt="Core Media Type Resources">Core Media Type
							Resource</dfn>
					</dt>
					<dd>
						<p>A <a>Publication Resource</a> that does not require the provision of a <a
								href="#sec-foreign-restrictions">fallback</a> (cf. <a>Foreign Resource</a>).</p>
					</dd>
					<dt>
						<dfn id="dfn-epub-container" data-lt="EPUB Containers">EPUB Container</dfn>
					</dt>
					<dt>
						<dfn id="dfn-zip-container">OCF ZIP Container</dfn>
					</dt>
					<dd>
						<p>The ZIP-based packaging and distribution format for <a>EPUB Publications</a> defined in <a
								href="#sec-container-zip"></a>.</p>
						<p>EPUB Container and OCF ZIP Container are synonymous.</p>
					</dd>
					<dt>
						<dfn id="dfn-epub-content-document" data-lt="EPUB Content Documents">EPUB Content Document</dfn>
					</dt>
					<dd>
						<p>A <a>Publication Resource</a> with an XHTML or SVG media type that contains all or part of
							the content of an EPUB Publication (i.e., the textual, visual and/or audio content). These
							resources have to conform to their respective <a data-lt="XHTML Content Document">XHTML</a>
							or <a data-lt="SVG Content Document">SVG</a> definitions to be used in the spine or be
							referenced from another EPUB Content Document.</p>
						<p>An EPUB Content Document is a <a>Core Media Type Resource</a>, so can be included without the
							provision of <a href="#sec-foreign-restrictions">fallbacks</a>.</p>
					</dd>
					<dt>
						<dfn id="dfn-epub-navigation-document" data-lt="EPUB Navigation Documents">EPUB Navigation
							Document</dfn>
					</dt>
					<dd>
						<p>A specialization of the <a>XHTML Content Document</a> that contains human- and
							machine-readable global navigation information. The EPUB Navigation Document conforms to the
							constraints expressed in <a href="#sec-nav"></a>.</p>
					</dd>
					<dt>
						<dfn id="dfn-epub-publication" data-lt="EPUB Publications">EPUB Publication</dfn>
					</dt>
					<dd>
						<p>A logical document entity consisting of a set of interrelated <a
								data-lt="Publication Resource">resources</a> packaged in an <a>EPUB Container</a>.</p>
						<p>An EPUB Publication typically represents a single intellectual or artistic work, but this
							specification does not restrict the nature of the content.</p>
					</dd>
					<dt><dfn id="dfn-epub-reading-system" data-lt="EPUB Reading Systems|Reading System|Reading Systems"
							>EPUB Reading System</dfn> (or Reading System)</dt>
					<dd>
						<p>A system that processes <a>EPUB Publications</a> for presentation to a user in a manner
							conformant with this specification.</p>
					</dd>
					<dt>
						<dfn id="dfn-file-name" data-lt="File Names">File Name</dfn>
					</dt>
					<dd>
						<p>The name of any type of file within an <a>OCF Abstract Container</a>, whether a directory or
							a file within a directory.</p>
					</dd>
					<dt>
						<dfn id="dfn-fixed-layout-document" data-lt="Fixed-Layout Documents">Fixed-Layout Document</dfn>
					</dt>
					<dd>
						<p>An <a>EPUB Content Document</a> with fixed dimensions directly referenced from the
								<a>spine</a>. Fixed-Layout Documents are designated <code>pre-paginated</code> in the
								<a>Package Document</a>, as defined in <a href="#sec-fixed-layouts"></a>.</p>
					</dd>
					<dt>
						<dfn id="dfn-foreign-resource" data-lt="Foreign Resources">Foreign Resource</dfn>
					</dt>
					<dd>
						<p>A <a>Publication Resource</a> that is not a <a>Core Media Type Resource</a>. Foreign
							Resources are subject to the fallback requirements defined in <a
								href="#sec-foreign-restrictions"></a>.</p>
					</dd>
					<dt>
						<dfn id="dfn-local-resource" data-lt="Local Resources">Local Resource</dfn>
					</dt>
					<dd>
						<p>A resource that is located inside the <a>EPUB Container</a>.</p>
						<p>Refer to <a href="#sec-resource-locations"></a> for media type specific rules for resource
							locations.</p>
					</dd>
					<dt>
						<dfn id="dfn-manifest" data-lt="Manifests">Manifest</dfn>
					</dt>
					<dd>
						<p>The section of the <a>Package Document</a> that lists the <a>Publication Resources</a>.</p>
						<p>Refer to <a href="#sec-manifest-elem"></a> for more information.</p>
					</dd>
					<dt>
						<dfn id="dfn-media-overlay-document" data-lt="Media Overlay Documents">Media Overlay
							Document</dfn>
					</dt>
					<dd>
						<p>An XML document that associates the <a>XHTML Content Document</a> with pre-recorded audio
							narration to provide a synchronized playback experience, as defined in <a
								href="#sec-media-overlays"></a>.</p>
					</dd>
					<dt>
						<dfn id="dfn-non-codec" data-lt="Non-Codecs">Non-Codec</dfn>
					</dt>
					<dd>
						<p>Non-Codec refers to content types that benefit from compression due to the nature of their
							internal data structure, such as file formats based on character strings (for example, HTML,
							CSS, etc.).</p>
					</dd>
					<dt>
						<dfn id="dfn-ocf-abstract-container" data-lt="OCF Abstract Containers">OCF Abstract
							Container</dfn>
					</dt>
					<dd>
						<p>The OCF Abstract Container defines a file system model for the contents of the <a>OCF ZIP
								Container</a>, as defined in <a href="#sec-container-abstract"></a>.</p>
					</dd>
					<dt>
						<dfn id="dfn-package-document" data-lt="Package Documents|Package Document(s)">Package
							Document</dfn>
					</dt>
					<dd>
						<p>A <a>Publication Resource</a> that describes the rendering of an <a>EPUB Publication</a>, as
							defined in <a href="#sec-package-doc"></a>. The Package Document carries meta information
							about the EPUB Publication, provides a manifest of resources and defines a default reading
							order.</p>
					</dd>
					<dt>
						<dfn id="dfn-path-name" data-lt="Path Names">Path Name</dfn>
					</dt>
					<dd>
						<p>For a given directory within the <a href="#sec-container-abstract">OCF Abstract
							Container</a>, the string holding all directory <a>File Name</a> in the full path
							concatenated together with a <code>/</code> (<code>U+002F</code>) character separating the
							directory File Names.</p>
						<p>For a given file within the OCF Abstract Container, the Path Name is the string holding all
							directory File Names concatenated together with a <code>/</code> character separating the
							directory File Names, followed by a <code>/</code> character and then the File Name of the
							file.</p>
					</dd>
					<dt>
						<dfn id="dfn-publication-resource" data-lt="Publication Resources">Publication Resource</dfn>
					</dt>
					<dd>
						<p>A resource that contains content or instructions that contribute to the logic and rendering
							of an <a>EPUB Publication</a>. In the absence of this resource, the EPUB Publication might
							not render as intended by the <a>Author</a>. Examples of Publication Resources include the
								<a>Package Document</a>, <a>EPUB Content Document</a>, CSS Style Sheets, audio, video,
							images, embedded fonts, and scripts.</p>
						<p>Publication Resources are listed in the Package Document <a href="#sec-manifest-elem"
								>manifest</a> and bundled in the <a>EPUB Container</a> file unless specified otherwise
							in <a href="#sec-resource-locations"></a>.</p>
						<p>Examples of resources that are not Publication Resources include those identified by the
							Package Document <a href="#sec-link-elem"><code>link</code> element</a> and those identified
							in outbound hyperlinks that resolve to <a>Remote Resources</a> (e.g., referenced from the
								<code>href</code> attribute of an [[!HTML]] <a
								href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element"
									><code>a</code></a> element).</p>
					</dd>
					<dt>
						<dfn id="dfn-remote-resource" data-lt="Remote Resources">Remote Resource</dfn>
					</dt>
					<dd>
						<p>A resource that is located outside of the <a>EPUB Container</a>, typically, but not
							necessarily, online.</p>
						<p>Refer to <a href="#sec-resource-locations"></a> for media type specific rules for resource
							locations.</p>
					</dd>
					<dt>
						<dfn id="dfn-root-directory">Root Directory</dfn>
					</dt>
					<dd>
						<p>The root directory represents the base of the <a>OCF Abstract Container</a> file system. This
							directory is virtual in nature: a <a>EPUB Reading System</a> might or might not generate a
							physical root directory for the contents of the OCF Abstract Container if the contents are
							unzipped.</p>
					</dd>
					<dt>
						<dfn id="dfn-scripted-content-document" data-lt="Scripted Content Documents">Scripted Content
							Document</dfn>
					</dt>
					<dd>
						<p>An <a>EPUB Content Document</a> that includes scripting or an <a>XHTML Content Document</a>
							that contains [[!HTML]] <a href="https://html.spec.whatwg.org/multipage/forms.html#forms"
								>forms</a>.</p>
						<p>Refer to <a href="#sec-scripted-content"></a> for more information.</p>
					</dd>
					<dt>
						<dfn id="dfn-spine">Spine</dfn>
					</dt>
					<dd>
						<p>An ordered list of <a>Publication Resources</a> in the <a>Package Document</a>, <a
								href="#confreq-spine-itemtypes">typically EPUB Content Documents</a>, that represent the
							default reading order.</p>
						<p>Refer to <a href="#sec-spine-elem"></a> for more information.</p>
					</dd>
					<dt>
						<dfn id="dfn-svg-content-document" data-lt="SVG Content Documents">SVG Content Document</dfn>
					</dt>
					<dd>
						<p>An <a>EPUB Content Document</a> that conforms to the constraints expressed in <a
								href="#sec-svg"></a>.</p>
					</dd>
					<dt>
						<dfn id="dfn-synthetic-spread" data-lt="Synthetic Spreads">Synthetic Spread</dfn>
					</dt>
					<dd>
						<p>The rendering of two adjacent pages simultaneously on a device screen.</p>
					</dd>
					<dt><dfn id="dfn-text-to-speech">Text-to-Speech</dfn> (TTS)</dt>
					<dd>
						<p>The rendering of the textual content of an <a>EPUB Publication</a> as artificial human speech
							using a synthesized voice.</p>
					</dd>
					<dt>
						<dfn id="dfn-top-level-content-document" data-lt="Top-level Content Documents">Top-level Content
							Document</dfn>
					</dt>
					<dd>
						<p>An <a>EPUB Content Document</a> referenced from the <a>spine</a>, whether directly or via a
								<a href="#sec-foreign-restrictions-manifest">fallback chain</a>.</p>
					</dd>
					<dt>
						<dfn id="dfn-unique-identifier">Unique Identifier</dfn>
					</dt>
					<dd>
						<p>The primary identifier for an <a>EPUB Publication</a> in the <a>Package Document</a>, as
							identified by the <a href="#attrdef-package-unique-identifier"
									><code>unique-identifier</code> attribute</a>.</p>
						<p>Significant revision, abridgement, etc. of the content requires a new Unique Identifier.</p>
					</dd>
					<dt>
						<dfn id="dfn-viewport">Viewport</dfn>
					</dt>
					<dd>
						<p>The region of an <a>EPUB Reading System</a> in which an <a>EPUB Publication</a> is rendered
							visually to a user.</p>
					</dd>
					<dt>
						<dfn id="dfn-xhtml-content-document" data-lt="XHTML Content Documents">XHTML Content
							Document</dfn>
					</dt>
					<dd>
						<p>An <a>EPUB Content Document</a> that conforms to the profile of [[!HTML]] defined in <a
								href="#sec-xhtml"></a>.</p>
						<p>XHTML Content Documents use the <a
								href="https://html.spec.whatwg.org/multipage/xhtml.html#xhtml">XHTML syntax</a> defined
							in [[!HTML]].</p>
					</dd>
				</dl>
			</section>

			<section id="conformance"></section>

			<section id="sec-intro-shorthands">
				<h3>Authoring Shorthands</h3>

				<section id="sec-shorthands-prefixes">
					<h4>Prefixes</h4>

					<p>In <a>Package Document</a> metadata examples, <a href="#sec-metadata-reserved-prefixes">reserved
							prefixes</a> are used without declaration.</p>
				</section>

				<section id="sec-shorthands-ns">
					<h4>Namespaces</h4>

					<p>For convenience, the following namespace prefixes [[!XML-NAMES]] are used in this specification
						without explicitly being declared. To use any of these prefixes in an <a>EPUB Content
							Document</a>, a declaration is REQUIRED.</p>

					<table class="mapping">
						<tr>
							<th>prefix</th>
							<th>URI</th>
						</tr>
						<tr>
							<td>
								<code>epub</code>
							</td>
							<td>
								<code>http://www.idpf.org/2007/ops</code>
							</td>
						</tr>
						<tr>
							<td>
								<code>ssml</code>
							</td>
							<td>
								<code>https://www.w3.org/2001/10/synthesis</code>
							</td>
						</tr>
					</table>
				</section>
			</section>
		</section>
		<section id="sec-publications">
			<h2>EPUB Publications</h2>

			<section id="sec-epub-conf">
				<h3>Conformance Criteria</h3>

				<p>The minimal requirements for an EPUB Publication are that:</p>

				<ul class="conformance-list">
					<li>
						<p id="confreq-package">It MUST define at least one rendering of its content as follows:</p>
						<ul class="conformance-list">
							<li>
								<p id="confreq-package-doc">It MUST contain a <a>Package Document</a> that conforms to
										<a href="#sec-package-doc"></a> and meet all <a>Publication Resource</a>
									requirements for the Package Document.</p>
							</li>
							<li>
								<p id="confreq-nav">It MUST contain an <a>EPUB Navigation Document</a> that conforms to
										<a href="#sec-nav-doc"></a>.</p>
							</li>
						</ul>
					</li>
					<li>
						<p id="confreq-res-location">Its Publication Resources MUST adhere to the requirements in <a
								href="#sec-publication-resources"></a>.</p>
					</li>
					<li>
						<p id="confreq-a11y">It SHOULD conform to the accessibility requirements defined in
							[[!EPUB-A11Y-11]].</p>
					</li>
					<li>
						<p id="confreq-ocf">It MUST be packaged in an <a>EPUB Container</a> as defined in <a
								href="#sec-ocf"></a>.</p>
					</li>
				</ul>

				<p>Specific conformance details are covered in the rest of this specification.</p>
			</section>

			<section id="sec-publication-resources">
				<h3>Publication Resources</h3>

				<section id="sec-core-media-types">
					<h4>Core Media Types</h4>

					<section id="sec-cmt-intro">
						<h5>Introduction</h5>

						<p>An <a>EPUB Publication</a> typically consists of many <a>Publication Resources</a>. These
							resources are divided into two categories: those that can be included without fallbacks
								(<a>Core Media Type Resources</a>) and those that cannot (<a>Foreign Resources</a>).</p>

						<p>Formats are typically only included as Core Media Type Resources when it can be shown that
							they have broad support in web browser cores &#8212; the rendering engines on which EPUB 3
							Reading Systems are built. They are an agreement between Reading System developers and
								<a>Authors</a> to ensure the predictability of rendering of EPUB Publications.</p>

						<p>Inclusion as a Core Media Type Resource does not mean that all Reading Systems will support
							the rendering of a resource, however. Only Reading Systems that can render the type of
							resource have to (e.g., a Reading System with a <a>Viewport</a> has to support image Core
							Media Type Resources, but a Reading System without a Viewport does not). Refer to <a
								href="https://www.w3.org/TR/epub-rs-33/#sec-rs-conf-general">Conformance
								Requirements</a> [[EPUB-RS-33]] for more information about which Reading Systems
							rendering capabilities require support for which Core Media Type Resources.</p>

						<p>Foreign Resources come with no guarantee of rendering support, which is why they require a
							fallback to a Core Media Type Resource. EPUB Publications are designed to be fully
							consumable on any conforming Reading System, so providing a fallback is necessary to ensure
							that the use of Foreign Resources does not impact on the ability of the user to consume the
							content.</p>

						<p>This section lists the <a href="#sec-cmt-supported">set of Core Media Type Resources</a> and
							identifies <a href="#sec-foreign-restrictions">fallback mechanisms</a> that can be used to
							satisfy the consumability requirement.</p>

						<div class="note">
							<p>EPUB also exempts some [[HTML]] elements from support requirements (see <a
									href="#sec-xhtml-fallbacks"></a>). Resources referenced from these elements are
								neither Core Media Type Resources nor Foreign Resources &#8212; they do not require
								fallbacks, but they also have no support requirements.</p>
						</div>
					</section>

					<section id="sec-cmt-supported">
						<h5>Supported Media Types</h5>

						<p><a>Publication Resources</a> that conform to the following MIME media type [[!RFC2046]]
							specifications can be included in an EPUB Publication without fallbacks.</p>

						<p>The columns in the following table represent the following information:</p>

						<ul>
							<li>
								<p><strong>Media Type</strong>—The MIME media type [[!RFC2046]] used to represent the
									given Publication Resource in the <a href="#sec-manifest-elem">manifest</a>.</p>
								<p>If more than one media type is listed, the first one is the preferred media type. The
									preferred media type is strongly encouraged for all new EPUB Publications.</p>
							</li>
							<li><strong>Content Type Definition</strong>—The specification to which the given Core Media
								Type Resource has to conform.</li>
							<li><strong>Applies to</strong>—The Publication Resource type(s) that the Media Type and
								Content Type Definition applies to.</li>
						</ul>

						<table id="tbl-core-media-types">
							<thead>
								<tr>
									<th id="tbl-cmt-string">Media Type</th>
									<th id="tbl-cmt-def">Content Type Definition</th>
									<th id="tbl-cmt-appl">Applies to</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<th colspan="3" id="cmt-grp-image" class="tbl-group">Images</th>
								</tr>
								<tr>
									<td id="cmt-gif">
										<code>image/gif</code>
									</td>
									<td> [[!GIF]] </td>
									<td>GIF Images</td>
								</tr>
								<tr>
									<td id="cmt-jpeg">
										<code>image/jpeg</code>
									</td>
									<td> [[!JPEG]] </td>
									<td>JPEG Images</td>
								</tr>
								<tr>
									<td id="cmt-png">
										<code>image/png</code>
									</td>
									<td> [[!PNG]] </td>
									<td>PNG Images</td>
								</tr>
								<tr>
									<td id="cmt-svg">
										<code>image/svg+xml</code>
									</td>
									<td>
										<a href="#sec-svg">SVG Content Documents</a>
									</td>
									<td>SVG documents</td>
								</tr>
								<tr>
									<td id="cmt-webp">
										<code>image/webp</code>
									</td>
									<td> [[!WebP-Container]], [[!WebP-LB]] </td>
									<td>WebP Images</td>
								</tr>

								<tr>
									<th colspan="3" id="cmt-grp-audio" class="tbl-group">Audio</th>
								</tr>
								<tr>
									<td id="cmt-mp3">
										<code>audio/mpeg</code>
									</td>
									<td> [[!MP3]] </td>
									<td>MP3 audio</td>
								</tr>
								<tr>
									<td id="cmt-mp4-aac">
										<code>audio/mp4</code>
									</td>
									<td> [[!MPEG4-Audio]], [[!MP4]] </td>
									<td>AAC LC audio using MP4 container</td>
								</tr>
								<tr>
									<td id="cmt-ogg-opus">
										<code>audio/opus</code>
									</td>
									<td>[[!RFC7845]]</td>
									<td>OPUS audio using OGG container</td>
								</tr>
								<tr>
									<th colspan="3" id="cmt-grp-video" class="tbl-group">Video</th>
								</tr>
								<tr>
									<td colspan="3" id="cmt-vide-note">EPUB 3 allows any video codecs to be included
										without fallbacks, although none are technically considered Core Media Type
										Resources. Refer to the note in <a
											href="https://www.w3.org/TR/epub-rs-33/#note-video-codecs">Conformance —
											General Requirements</a> [[EPUB-RS-33]] for informative recommendations on
										support for video codecs in EPUB Publications. </td>
								</tr>
								<tr>
									<th colspan="3" id="cmt-grp-text" class="tbl-group">Style</th>
								</tr>
								<tr>
									<td id="cmt-css">
										<code>text/css</code>
									</td>
									<td>
										<a href="#sec-css">CSS Style Sheets</a>
									</td>
									<td>CSS Style Sheets.</td>
								</tr>
								<tr>
									<th colspan="3" id="cmt-grp-font" class="tbl-group">Fonts</th>
								</tr>
								<tr>
									<td colspan="3" id="cmt-font-note"> EPUB 3 allows any font resource to be included
										without a fallback, as CSS already defines fallback rules for fonts. Refer to
										the <a href="https://www.w3.org/TR/epub-rs-33/#confreq-css-rs-fonts">Reading
											System support requirements for fonts</a> [[!EPUB-RS-33]] for more
										information.</td>
								</tr>
								<tr>
									<td id="cmt-sfnt">
										<code>font/ttf</code>
										<br />
										<code>application/font-sfnt</code>
									</td>
									<td>[[!TrueType]] </td>
									<td>TrueType fonts</td>
								</tr>
								<tr>
									<td id="cmt-otf">
										<code>font/otf</code>
										<br />
										<code>application/font-sfnt</code>
										<br />
										<code>application/vnd.ms-opentype</code>
									</td>
									<td>[[!OpenType]]</td>
									<td>OpenType fonts</td>

								</tr>
								<tr>
									<td id="cmt-woff">
										<code>font/woff</code>
										<br />
										<code>application/font-woff</code>
									</td>
									<td> [[!WOFF]] </td>
									<td>WOFF fonts</td>
								</tr>
								<tr>
									<td id="cmt-woff2">
										<code>font/woff2</code>
									</td>
									<td> [[!WOFF2]] </td>
									<td>WOFF2 fonts</td>
								</tr>
								<tr>
									<th colspan="3" id="cmt-grp-other" class="tbl-group">Other</th>
								</tr>

								<tr>
									<td id="cmt-xhtml">
										<code>application/xhtml+xml</code>
									</td>
									<td>
										<a href="#sec-xhtml">XHTML Content Documents</a>
									</td>
									<td><a>XHTML Content Documents</a> that use the <a
											href="https://html.spec.whatwg.org/multipage/xhtml.html#xhtml">XHTML
											syntax</a> [[!HTML]]. </td>
								</tr>
								<tr>
									<td id="cmt-js">
										<code>application/javascript</code>
										<br />
										<code>text/javascript</code>
									</td>
									<td> [[!RFC4329]] </td>
									<td>Scripts.</td>
								</tr>
								<tr>
									<td id="cmt-ncx">
										<code>application/x-dtbncx+xml</code>
									</td>
									<td> [[!OPF-201]] </td>
									<td>The <a href="#legacy">legacy</a> NCX.</td>
								</tr>

								<tr>
									<td id="cmt-smil">
										<code>application/smil+xml</code>
									</td>
									<td>
										<a href="#sec-media-overlays">Media Overlays</a>
									</td>
									<td>EPUB Media Overlay documents</td>
								</tr>
								<tr>
									<td id="cmt-pls">
										<code>application/pls+xml</code>
									</td>
									<td> [[!PRONUNCIATION-LEXICON]] </td>
									<td><a>Text-to-Speech</a> (TTS) Pronunciation lexicons</td>
								</tr>
							</tbody>
						</table>
						<div class="issue" data-number="645">
							<p>Although, OPUS/OGG has good support in Android, MacOS, Windows, and Linux, Apple,
								starting with iOS 11, only supports the OPUS codec in a CAF container. The working group
								will monitor support for OPUS in iOS and may remove OPUS as a core media type if the
								level of support is inadequate.</p>
						</div>
						<div class="issue" data-number="1344">
							<p>WebP is currently not defined in a stable specification and its media type has not been
								registered with IANA. Apple also only supports WebP on macOS 11. The working group will
								continue to monitor these issues.</p>
						</div>
					</section>

					<section id="sec-foreign-restrictions">
						<h5>Foreign Resources</h5>

						<p id="confreq-foreign-no-fallback">Foreign Resources MAY be included in an EPUB Publication
							without a fallback provided they are not referenced from <a href="#sec-itemref-elem">spine
									<code>itemref</code> elements</a> or directly rendered in their native format in
							EPUB Content Documents (e.g., via [[!HTML]] <a
								href="https://html.spec.whatwg.org/multipage/embedded-content.html#embedded-content"
								>embedded content</a> and [[!SVG]] <a
								href="https://www.w3.org/TR/SVG/embedded.html#ImageElement"><code>image</code></a> and
								<a href="https://www.w3.org/TR/SVG/embedded.html#ForeignObjectElement"
									><code>foreignObject</code></a> elements).</p>

						<p class="note">This exception allows Authors to include resources in the <a>EPUB Container</a>
							that are not for use by EPUB Reading Systems. The primary case for this exception is to
							allow data files to travel with an EPUB Publication, whether for use by scripts in its
							constituent EPUB Content Documents or for use by external applications (e.g., a scientific
							journal might include a data set with instructions on how to extract it from the EPUB
							Container).</p>

						<p id="confreq-cmt">When a <a>Foreign Resource</a> is included in the spine or directly rendered
							in its native format in an EPUB Content Document, a fallback <a>Core Media Type Resource</a>
							MUST be included. Fallbacks take one of the following forms:</p>

						<ul>
							<li>
								<p>intrinsic fallback mechanisms provided by the host format (e.g., [[HTML]] elements
									often provide the ability to reference more than one media type or to display an
									alternate embedded message when a media type cannot be rendered); or</p>
							</li>
							<li>
								<p><a href="#sec-foreign-restrictions-manifest">manifest fallbacks</a>.</p>
							</li>
						</ul>

						<p>Manifest fallbacks are a feature of the <a>Package Document</a> that create fallback chains
							to Core Media Type Resources. They are used to create fallbacks for Foreign Resources in the
								<a href="#sec-spine-elem">spine</a> and when intrinsic fallback capabilities are not
							available (e.g., for the [[!HTML]] <a
								href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element"
									><code>img</code></a> element).</p>

						<p>Refer to the [[!HTML]] and [[!SVG]] specifications for the intrinsic fallback capabilities
							their elements provide.</p>
					</section>
				</section>

				<section id="sec-resource-locations">
					<h4>Resource Locations</h4>

					<p>All <a>Publication Resources</a> MUST be <a href="#sec-container-iri">located in the EPUB
							Container</a>, with the following exceptions:</p>

					<ul class="conformance-list">
						<li>
							<p id="sec-resource-locations-audio"><a href="#cmt-grp-audio">Audio resources</a> MAY be
								located outside the EPUB Container.</p>
						</li>
						<li>
							<p id="sec-resource-locations-video"><a href="#cmt-grp-video">Video resources</a> MAY be
								located outside the EPUB Container.</p>
						</li>
						<li>
							<p id="sec-resource-locations-script">Resources retrieved by scripts MAY be located outside
								the EPUB Container.</p>
						</li>
						<li>
							<p id="sec-resource-locations-fonts"><a href="#cmt-grp-font">Font resources</a> MAY be
								located outside the EPUB Container.</p>
						</li>
					</ul>

					<aside class="example">
						<p>The following example shows a reference to an audio file in an <a>XHTML Content Document</a>
							that is located inside the EPUB Container.</p>
						<pre>&lt;audio src="audio/ch01.mp4" controls="controls"/&gt;</pre>
					</aside>

					<aside class="example">
						<p>The following example shows a reference to an audio file in an XHTML Content Document that is
							located outside the EPUB Container.</p>
						<pre>&lt;audio src="http://www.example.com/book/audio/ch01.mp4" controls="controls"/&gt;</pre>
					</aside>

					<div class="note">
						<p>Authors are encouraged to locate audio, video, and script resources inside the EPUB Container
							whenever feasible to allow users access to the entire presentation regardless of
							connectivity status.</p>
					</div>

					<div class="note">
						<p>The rules in this section for Publication Resource locations apply regardless of whether the
							given resource is a <a>Core Media Type Resource</a> or a <a>Foreign Resource</a>.</p>
					</div>

					<div class="note">
						<p>The inclusion of Remote Resources is indicated via the <a href="#remote-resources"
									><code>remote-resources</code> property</a> on the <a>manifest</a>
							<a href="#sec-item-elem"><code>item</code> element</a>.</p>
					</div>
				</section>

				<section id="sec-xml-constraints">
					<h4>XML Conformance</h4>

					<p>Any <a>Publication Resource</a> that is an XML-Based Media Type has to meet the following
						constraints:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-xml-wellformed"> It MUST be a conformant XML 1.0 Document as defined in <a
									href="https://www.w3.org/TR/2009/REC-XML-NAMES-20091208/#Conformance">Conformance of
									Documents</a> [[!XML-NAMES]].</p>
						</li>
						<li>
							<p id="confreq-xml-identifiers">It MAY only specify a <a
									href="https://www.w3.org/TR/2008/REC-xml-20081126/#dt-doctype">document type
									declaration</a> that references an <a
									href="https://www.w3.org/TR/2008/REC-xml-20081126/#NT-ExternalID">external
									identifier</a> appropriate for its media type &#8212; as defined in <a
									href="#app-identifiers-allowed"></a> &#8212; or that omits external identifiers
								[[!XML]].</p>
						</li>
						<li>
							<p id="confreq-xml-entities">It MUST NOT contain <a
									href="https://www.w3.org/TR/2008/REC-xml-20081126/#dt-extent">external entity</a>
								declarations in the internal DTD subset [[!XML]].</p>
						</li>
						<li>
							<p id="confreq-xml-xinc"> It MUST NOT make use of XInclude [[!XInclude]].</p>
						</li>
						<li>
							<p id="confreq-xml-enc"> It MUST be encoded in UTF-8 or UTF-16 [[!Unicode]].</p>
						</li>
					</ul>

					<p>The above constraints apply regardless of whether the given Publication Resource is a <a>Core
							Media Type Resource</a> or a <a>Foreign Resource</a>.</p>


					<div class="note">
						<p>Although EPUB Reading Systems are <a
								href="https://www.w3.org/TR/epub-rs-33/#confreq-rs-xml-base">required to support</a>
							[[EPUB-RS-33]] the XML `base` attribute [[XMLBase]], [[HTML]] and [[SVG]] are removing
							support. Authors are advised to avoid using this feature.</p>
					</div>
				</section>
			</section>

			<section id="sec-package-doc">
				<h3>Package Document</h3>

				<section id="sec-package-intro" class="informative">
					<h4>Introduction</h4>

					<p>The <a>Package Document</a> is an XML document that consists of a set of elements that each
						encapsulate information about a particular aspect of an <a>EPUB Publication</a>. These elements
						serve to centralize metadata, detail the individual resources, and provide the reading order and
						other information necessary for its rendering.</p>

					<p>The following list summarizes the information found in the Package Document:</p>

					<ul>
						<li>
							<p><a href="#sec-pkg-metadata">Metadata</a> — mechanisms to include and/or reference
								metadata.</p>
						</li>
						<li>
							<p>A <a href="#sec-manifest-elem">manifest</a> — identifies via IRI [[RFC3987]], and
								describes via MIME media type [[RFC4839]], the set of <a>Publication Resources</a>.</p>
						</li>
						<li>
							<p>A <a href="#sec-spine-elem">spine</a> — an ordered sequence of ID references to top-level
								resources in the manifest from which all other resources in the set can be reached or
								utilized. The spine defines the default reading order.</p>
						</li>
						<li>
							<p><a href="#sec-collection-elem">Collections</a> — a method of encapsulating and
								identifying subcomponents within the Package.</p>
						</li>
						<li>
							<p><a href="#sec-foreign-restrictions-manifest">Manifest fallback chains</a> — a mechanism
								that defines an ordered list of top-level resources as content equivalents. A Reading
								System can then choose between the resources based on which it is capable of
								rendering.</p>
						</li>
					</ul>

					<div class="note">
						<p>An EPUB Publication can reference more than one Package Document, allowing for alternative
							representations of the content. For more information, refer to <a
								href="#sec-container-metainf-container.xml"></a></p>
					</div>

					<div class="note">
						<p>Refer to <a href="#app-media-type-app-oebps-package"></a> for information about the file
							properties of Package Documents.</p>
					</div>
				</section>

				<section id="sec-package-def">
					<h4>Package Document Definition</h4>

					<p>All [[!XML]] elements defined in this section are in the
							<code>http://www.idpf.org/2007/opf</code> namespace [[!XML-NAMES]] unless otherwise
						specified.</p>

					<p>When an element defined in this section has mandatory text content, that content is referred to
						as the value of the element in the explanatory descriptions.</p>

					<section id="sec-package-elem">
						<h5>The <code>package</code> Element</h5>

						<p>The <code>package</code> element is the root element of the <a>Package Document</a>.</p>

						<dl id="elemdef-opf-package" class="elemdef">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>package</code>
								</p>
							</dd>
							<dt>Usage</dt>
							<dd>
								<p>The <code>package</code> element is the root element of the Package Document.</p>
							</dd>
							<dt>Attributes</dt>
							<dd>
								<ul class="nomark">
									<li>
										<p>
											<a href="#attrdef-dir">
												<code>dir</code>
											</a>
											<code>[optional]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#attrdef-id">
												<code>id</code>
											</a>
											<code>[optional]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#attrdef-package-prefix">
												<code>prefix</code>
											</a>
											<code>[optional]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#attrdef-xml-lang">
												<code>xml:lang</code>
											</a>
											<code>[optional]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#attrdef-package-unique-identifier">
												<code>unique-identifier</code>
											</a>
											<code>[required]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#attrdef-package-version">
												<code>version</code>
											</a>
											<code>[required]</code>
										</p>
									</li>
								</ul>
							</dd>
							<dt>Content Model</dt>
							<dd>
								<p>In this order:</p>
								<ul class="nomark">
									<li>
										<p>
											<a class="codelink" href="#elemdef-opf-metadata">
												<code>metadata</code>
											</a>
											<code>[exactly 1]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-opf-manifest">
												<code>manifest</code>
											</a>
											<code>[exactly 1]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-opf-spine">
												<code>spine</code>
											</a>
											<code>[exactly 1]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#sec-opf2-guide">
												<code>guide</code>
											</a>
											<code>[0 or 1]</code>
											<a href="#legacy" class="legacy">(legacy)</a>
										</p>
									</li>
									<li>
										<p>
											<a href="#sec-opf-bindings">
												<code>bindings</code>
											</a>
											<code>[0 or 1]</code>
											<a href="#deprecated" class="deprecated">(deprecated)</a>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-collection">
												<code>collection</code>
											</a>
											<code>[0 or more]</code>
										</p>
									</li>
								</ul>
							</dd>
						</dl>

						<p id="attrdef-package-version">The <code>version</code> attribute specifies the EPUB
							specification version to which the given EPUB Publication conforms. The attribute MUST have
							the value "<code>3.0</code>" to indicate conformance with EPUB 3.</p>

						<div class="note">
							<p>Updates to this specification do not represent new versions of EPUB 3 (i.e., each new 3.X
								specification is a continuation of the EPUB 3 format). The Working Group is committed to
								minimizing any changes that would invalidate existing content, allowing the
									<code>version</code> attribute value to remain unchanged.</p>
						</div>

						<p id="attrdef-package-unique-identifier">The <code>unique-identifier</code> attribute takes an
							IDREF [[!XML]] that identifies the <a class="codelink" href="#sec-opf-dcidentifier"
									><code>dc:identifier</code></a> element that provides the preferred, or primary,
							identifier.</p>

						<p id="attrdef-package-prefix">The <code>prefix</code> attribute provides a declaration
							mechanism for prefixes not <a href="#sec-metadata-reserved-prefixes">reserved by this
								specification</a>. Refer to <a href="#sec-prefix-attr"></a> for more information.</p>

					</section>

					<section id="sec-shared-attrs">
						<h5>Shared Attributes</h5>

						<p>This section provides definitions for shared attributes (i.e., attributes that are allowed on
							two or more elements).</p>

						<dl class="variablelist">
							<dt id="attrdef-dir">
								<code>dir</code>
							</dt>
							<dd>
								<p>Specifies the base direction [[!BIDI]] of the carrying element and its
									descendants.</p>
								<p>Allowed values are:</p>
								<ul>
									<li><code>ltr</code> &#8212; left-to-right base direction;</li>
									<li><code>rtl</code> &#8212; right-to-left base direction; and</li>
									<li><code>auto</code> &#8212; base direction is determined using the Unicode Bidi
										Algorithm [[BIDI]].</li>
								</ul>
								<p>The value <code>auto</code> is assumed when the attribute is not specified or
									contains an invalid value.</p>
								<div class="note">
									<p>The base direction specified in the <code>dir</code> attribute does not affect
										the ordering of characters within directional runs, only the relative ordering
										of those runs and the placement of weak directional characters such as
										punctuation.</p>
								</div>
								<div class="example">
									<pre>&lt;package … dir="ltr"&gt;</pre>
								</div>
								<p>Allowed on: <a href="#sec-collection-elem"><code>collection</code></a>, <a
										href="#sec-opf-dccontributor"><code>dc:contributor</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:coverage</code></a>, <a
										href="#sec-opf-dccreator"><code>dc:creator</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:description</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:publisher</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:relation</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:rights</code></a>, <a
										href="#sec-opf-dcsubject"><code>dc:subject</code></a>, <a
										href="#sec-opf-dctitle"><code>dc:title</code></a>, <a href="#sec-meta-elem"
											><code>meta</code></a> and <a href="#sec-package-elem"
										><code>package</code></a>.</p>
							</dd>
							<dt id="attrdef-href">
								<code>href</code>
							</dt>
							<dd>
								<p>An absolute or relative IRI reference [[!RFC3987]] to a resource.</p>
								<div class="example">
									<pre>&lt;link rel="record"
      href="meta/9780000000001.xml" 
      media-type="application/marc"/&gt;</pre>
								</div>
								<p>Allowed on: <a href="#sec-item-elem"><code>item</code></a> and <a
										href="#sec-link-elem"><code>link</code></a>.</p>
							</dd>
							<dt id="attrdef-id">
								<code>id</code>
							</dt>
							<dd>
								<p>The ID [[!XML]] of the element, which MUST be unique within the document scope.</p>
								<div class="example">
									<pre>&lt;dc:identifier id="pub-id"&gt;urn:isbn:97800000000001&lt;/dc:identifier&gt;</pre>
								</div>
								<p>Allowed on: <a href="#sec-collection-elem"><code>collection</code></a>, <a
										href="#sec-opf-dccontributor"><code>dc:contributor</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:coverage</code></a>, <a
										href="#sec-opf-dccreator"><code>dc:creator</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:date</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:description</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:format</code></a>, <a
										href="#sec-opf-dcidentifier"><code>dc:identifier</code></a>, <a
										href="#sec-opf-dclanguage"><code>dc:language</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:publisher</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:relation</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:rights</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:source</code></a>, <a
										href="#sec-opf-dcsubject"><code>dc:subject</code></a>, <a
										href="#sec-opf-dctitle"><code>dc:title</code></a>, <a href="#sec-opf-dctype"
											><code>dc:type</code></a>, <a href="#sec-item-elem"><code>item</code></a>,
										<a href="#sec-itemref-elem"><code>itemref</code></a>, <a href="#sec-link-elem"
											><code>link</code></a>, <a href="#sec-manifest-elem"
										><code>manifest</code></a>, <a href="#sec-meta-elem"><code>meta</code></a>, <a
										href="#sec-package-elem"><code>package</code></a> and <a href="#sec-spine-elem"
											><code>spine</code></a>.</p>
							</dd>
							<dt id="attrdef-media-type">
								<code>media-type</code>
							</dt>
							<dd>
								<p>A media type [[!RFC2046]] that specifies the type and format of the referenced
									resource.</p>
								<div class="example">
									<pre>&lt;link rel="record"
      href="http://example.org/meta/12389347?format=xmp"
      media-type="application/xml"
      properties="xmp"/&gt;</pre>
								</div>
								<p>Allowed on: <a href="#sec-item-elem"><code>item</code></a> and <a
										href="#sec-link-elem"><code>link</code></a>.</p>
							</dd>
							<dt id="attrdef-properties">
								<code>properties</code>
							</dt>
							<dd>
								<p>A space-separated list of <a href="#sec-property-datatype">property</a> values.</p>
								<p>Refer to each element's definition for the <a href="#sec-default-vocab">reserved
										vocabulary</a> that can be used with the attribute.</p>
								<div class="example">
									<pre>&lt;item id="nav" 
    href="nav.xhtml" 
    properties="nav"
    media-type="application/xhtml+xml"/&gt;</pre>
								</div>
								<p>Allowed on: <a href="#sec-item-elem"><code>item</code></a>, <a
										href="#sec-itemref-elem"><code>itemref</code></a> and <a href="#sec-link-elem"
											><code>link</code></a>.</p>
							</dd>
							<dt id="attrdef-refines">
								<code>refines</code>
							</dt>
							<dd>
								<p>Establishes an association between the current expression and the element or resource
									identified by its value. The value of the attribute must be a relative IRI
									[[!RFC3987]] that references the resource or element being described.</p>
								<p>The <code>refines</code> attribute is OPTIONAL depending on the type of metadata
									being expressed. When omitted, the element defines a <a href="#primary-expression"
										>primary expression</a>.</p>
								<p>Allowed on: <a href="#sec-link-elem"><code>link</code></a> and <a
										href="#sec-meta-elem"><code>meta</code></a>.</p>
							</dd>
							<dt id="attrdef-xml-lang">
								<code>xml:lang</code>
							</dt>
							<dd>
								<p>Specifies the language used in the contents and attribute values of the carrying
									element and its descendants, as defined in section <a
										href="https://www.w3.org/TR/2008/REC-xml-20081126/#sec-lang-tag">2.12 Language
										Identification</a> of [[!XML]]. The value of each <code>xml:lang</code>
									attribute MUST be a <a href="https://tools.ietf.org/html/bcp47#section-2.2.9"
										>well-formed language tag</a> [[!BCP47]].</p>
								<div class="example">
									<pre>&lt;package … xml:lang="ja"&gt;
   …
&lt;/package&gt;</pre>
								</div>
								<p>Allowed on: <a href="#sec-collection-elem"><code>collection</code></a>, <a
										href="#sec-opf-dccontributor"><code>dc:contributor</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:coverage</code></a>, <a
										href="#sec-opf-dccreator"><code>dc:creator</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:description</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:publisher</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:relation</code></a>, <a
										href="#sec-opf-dcmes-optional-def"><code>dc:rights</code></a>, <a
										href="#sec-opf-dcsubject"><code>dc:subject</code></a>, <a
										href="#sec-opf-dctitle"><code>dc:title</code></a>, <a href="#sec-meta-elem"
											><code>meta</code></a> and <a href="#sec-package-elem"
										><code>package</code></a>.</p>
							</dd>
						</dl>
					</section>

					<section id="sec-pkg-metadata">
						<h5>Metadata Section</h5>

						<section id="sec-metadata-elem">
							<h6>The <code>metadata</code> Element</h6>

							<p>The <code>metadata</code> element encapsulates meta information.</p>

							<dl id="elemdef-opf-metadata" class="elemdef">
								<dt>Element Name</dt>
								<dd>
									<p>
										<code>metadata</code>
									</p>
								</dd>
								<dt>Usage</dt>
								<dd>
									<p>REQUIRED first child of <a href="#elemdef-opf-package"
										><code>package</code></a>.</p>
								</dd>
								<dt>Attributes</dt>
								<dd>
									<p>None</p>
								</dd>
								<dt>Content Model</dt>
								<dd>
									<p>In any order:</p>
									<ul class="nomark">
										<li>
											<p>
												<a class="codelink" href="#elemdef-opf-dcidentifier">
													<code>dc:identifier</code>
												</a>
												<code>[1 or more]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#elemdef-opf-dctitle">
													<code>dc:title</code>
												</a>
												<code>[1 or more]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#elemdef-opf-dclanguage">
													<code>dc:language</code>
												</a>
												<code>[1 or more]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#sec-opf-dcmes-optional">
													<code>DCMES Optional Elements</code>
												</a>
												<code>[0 or more]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#elemdef-meta">
													<code>meta</code>
												</a>
												<code>[1 or more]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#sec-opf2-meta">OPF2 <code>meta</code></a>
												<code>[0 or more]</code>
												<a href="#legacy" class="legacy">(legacy)</a>
											</p>
										</li>
										<li>
											<p>
												<a href="#elemdef-opf-link">
													<code>link</code>
												</a>
												<code>[0 or more]</code>
											</p>
										</li>
									</ul>
								</dd>
							</dl>

							<p>The Package Document <code>metadata</code> element has two primary functions:</p>

							<ol type="1">
								<li>
									<p>to provide a minimal set of meta information for Reading Systems to use to
										internally catalogue an <a>EPUB Publication</a> and make it available to a user
										(e.g., to present in a bookshelf).</p>
								</li>
								<li>
									<p>to provide access to all rendering metadata needed to control the layout and
										display of the content (e.g., <a href="#sec-fxl-package">fixed-layout
											properties</a>).</p>
								</li>
							</ol>

							<p>The Package Document is not designed to provide complex metadata encoding capabilities.
								If more detailed information about an EPUB Publication is needed, metadata records
								(e.g., that conform to an international standard such as [[!ONIX]] or are created for
								custom purposes) can be associated using the <a href="#sec-link-elem"
									><code>link</code></a> element. This approach allows the metadata to be processed in
								its native form, avoiding the potential problems and information loss caused by
								translating to use the minimal Package Document structure.</p>

							<p id="core-metadata-reqs">In keeping with this philosophy, the Package Document only has
								the following minimal metadata requirements: it MUST contain the [[!DC11]] <a
									href="#sec-opf-dcidentifier"><code>title</code></a>, <a
									href="#elemdef-opf-dcidentifier"><code>identifier</code></a>, and <a
									href="#elemdef-opf-dclanguage"><code>language</code></a> elements together with the
								[[!DCTERMS]] <a href="#last-modified-date"><code>modified</code> property</a>. All other
								metadata is OPTIONAL.</p>

							<aside class="example">
								<p>The following example shows the minimal set of metadata that Authors have to include
									in the Package Document.</p>
								<pre>&lt;package … unique-identifier="pub-id"&gt;
    …
    &lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
        &lt;dc:identifier id="pub-id"&gt;urn:uuid:A1B0D67E-2E81-4DF5-9E67-A64CBE366809&lt;/dc:identifier&gt;
        &lt;dc:title&gt;Norwegian Wood&lt;/dc:title&gt;
        &lt;dc:language&gt;en&lt;/dc:language&gt;
        &lt;meta property="dcterms:modified"&gt;2011-01-01T12:00:00Z&lt;/meta&gt;
    &lt;/metadata&gt;
    …
&lt;/package&gt;
</pre>
							</aside>

							<p>The <a href="#sec-meta-elem"><code>meta</code> element</a> provides a generic mechanism
								for including <a href="#sec-vocab-assoc">metadata properties from any vocabulary</a>. It
								is typically used to include rendering metadata defined in EPUB specifications, but MAY
								be used for any metadata purposes.</p>

							<div class="note">
								<p>See [[EPUB-A11Y-11]] for accessibility metadata recommendations.</p>
							</div>

						</section>

						<section id="sec-opf-dcmes-required">
							<h6>DCMES Required Elements</h6>

							<section id="sec-opf-dcidentifier">
								<h6>The <code>identifier</code> Element</h6>

								<p>The [[!DC11]] <code>identifier</code> element contains an identifier such as a <abbr
										title="Universally Unique Identifier">UUID</abbr>, <abbr
										title="Digital Object Identfier">DOI</abbr> or <abbr
										title="International Standard Book Number">ISBN</abbr>.</p>

								<dl id="elemdef-opf-dcidentifier" class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>dc:identifier</code>
										</p>
									</dd>
									<dt>Namespace</dt>
									<dd>
										<p>
											<code>http://purl.org/dc/elements/1.1/</code>
										</p>
									</dd>
									<dt>Usage</dt>
									<dd>
										<p>REQUIRED child of <a class="codelink" href="#elemdef-opf-metadata"
													><code>metadata</code></a>.</p>
									</dd>
									<dt>Attributes</dt>
									<dd>
										<ul class="nomark">
											<li>
												<p>
													<a href="#attrdef-id">
														<code>id</code>
													</a>
													<code>[conditionally required]</code>
												</p>
											</li>
										</ul>
									</dd>
									<dt>Content Model</dt>
									<dd>
										<p>Text</p>
									</dd>
								</dl>

								<p>The <a>Author</a> MUST provide an identifier that is unique to one and only one
										<a>EPUB Publication</a> &#8212; its <a>Unique Identifier</a> &#8212; in an
										<code>identifier</code> element. This <code>identifier</code> element MUST
									specify an <code>id</code> attribute whose value is referenced from the <a
										href="#elemdef-opf-package"><code>package</code> element's</a>
									<a href="#attrdef-package-unique-identifier"><code>unique-identifier</code>
										attribute</a>.</p>

								<aside class="example">
									<p>The following example shows the unique <code>identifier</code> element.</p>
									<pre>&lt;package … unique-identifier="pub-id"&gt;
    &lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
        &lt;dc:identifier id="pub-id"&gt;
            urn:uuid:A1B0D67E-2E81-4DF5-9E67-A64CBE366809
        &lt;/dc:identifier&gt;
        …
    &lt;/metadata&gt;
&lt;/package&gt;</pre>
								</aside>

								<p>Although not static, changes to the Unique Identifier for an EPUB Publication SHOULD
									be made as infrequently as possible. Unique Identifiers are intended to have maximal
									persistence both for referencing and distribution purposes. New identifiers SHOULD
									NOT be issued when making minor revisions such as updating metadata, fixing errata,
									or making similar minor changes.</p>

								<p>Authors MAY specify additional identifiers.</p>

								<p>The <a href="#identifier-type"><code>identifier-type</code> property</a> is used to
									indicate that an <code>identifier</code> conforms to an established system or has
									been granted by an issuing authority.</p>

								<aside class="example">
									<p>The following example shows how an identifier can be additionally marked as a <a
											href="https://doi.org">DOI</a> using the identifier-type property. Here, <a
											href="https://ns.editeur.org/onix/en/5">ONIX codelist 5</a> is used to
										describe the product identifier type.</p>
									<pre>&lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/">
    &lt;dc:identifier id="pub-id">urn:doi:10.1016/j.iheduc.2008.03.001&lt;/dc:identifier>
    &lt;meta refines="#pub-id" property="identifier-type" scheme="onix:codelist5">06&lt;/meta>
    …
&lt;/metadata></pre>
								</aside>

								<p>This specification imposes no additional restrictions or the requirements of the
									identifier except that it MUST be at least one character in length after white space
									has been trimmed. It is strongly advised that the identifier be a fully qualified
									URI, however.</p>
							</section>

							<section id="sec-opf-dctitle">
								<h6>The <code>title</code> Element</h6>

								<p>The [[!DC11]] <code>title</code> element represents an instance of a name for the
										<a>EPUB Publication</a>.</p>

								<dl id="elemdef-opf-dctitle" class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>dc:title</code>
										</p>
									</dd>
									<dt>Namespace</dt>
									<dd>
										<p>
											<code>http://purl.org/dc/elements/1.1/</code>
										</p>
									</dd>
									<dt>Usage</dt>
									<dd>
										<p>REQUIRED child of <a class="codelink" href="#elemdef-opf-metadata"
													><code>metadata</code></a>.</p>
									</dd>
									<dt>Attributes</dt>
									<dd>
										<ul class="nomark">
											<li>
												<p>
													<a href="#attrdef-dir">
														<code>dir</code>
													</a>
													<code>[optional]</code>
												</p>
											</li>
											<li>
												<p>
													<a href="#attrdef-id">
														<code>id</code>
													</a>
													<code>[optional]</code>
												</p>
											</li>
											<li>
												<p>
													<a href="#attrdef-xml-lang">
														<code>xml:lang</code>
													</a>
													<code>[optional]</code>
												</p>
											</li>
										</ul>
									</dd>
									<dt>Content Model</dt>
									<dd>
										<p>Text</p>
									</dd>
								</dl>

								<p>The <code>metadata</code> section MUST contain at least one <code>title</code>
									element containing the title for the EPUB Publication.</p>

								<aside class="example">
									<p>The following example shows a basic title element.</p>
									<pre>&lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
    &lt;dc:title&gt;Norwegian Wood&lt;/dc:title&gt;
    …
&lt;/metadata&gt;
</pre>
								</aside>

								<p id="title-order">The first <code>title</code> element in document order is the main
									title of the EPUB Publication (i.e., the primary one Reading Systems present to
									users).</p>

								<aside class="example">
									<p>The following example shows a multi-part title:</p>
									<pre>&lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
    &lt;dc:title&gt;THE LORD OF THE RINGS&lt;/dc:title&gt;
    &lt;dc:title&gt;Part One: The Fellowship of the Ring&lt;/dc:title&gt;
    …
&lt;/metadata&gt;
</pre>
									<p>The same title could be expressed using a single <code>dc:title</code> element as
										follows:</p>
									<pre>&lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
    &lt;dc:title&gt;
        THE LORD OF THE RINGS, Part One: The Fellowship of the Ring
    &lt;/dc:title&gt;
    …
&lt;/metadata&gt;
</pre>
								</aside>

								<p>This specification imposes no additional restrictions or requirements on the title
									except that it MUST be at least one character in length after white space has been
									trimmed.</p>
							</section>

							<section id="sec-opf-dclanguage">
								<h6>The <code>language</code> Element</h6>

								<p>The [[!DC11]] <code>language</code> element specifies the language of the content of
									the <a>EPUB Publication</a>.</p>

								<dl id="elemdef-opf-dclanguage" class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>dc:language</code>
										</p>
									</dd>
									<dt>Namespace</dt>
									<dd>
										<p>
											<code>http://purl.org/dc/elements/1.1/</code>
										</p>
									</dd>
									<dt>Usage</dt>
									<dd>
										<p>REQUIRED child of <a class="codelink" href="#elemdef-opf-metadata"
													><code>metadata</code></a>. Repeatable.</p>
									</dd>
									<dt>Attributes</dt>
									<dd>
										<p>
											<a href="#attrdef-id">
												<code>id</code>
											</a>
											<code>[optional]</code>
										</p>
									</dd>
									<dt>Content Model</dt>
									<dd>
										<p>Text</p>
									</dd>
								</dl>

								<p>The <code>metadata</code> section MUST contain at least one <code>language</code>
									element. The value of each <code>language</code> element MUST be a <a
										href="https://tools.ietf.org/html/bcp47#section-2.2.9">well-formed language
										tag</a> [[!BCP47]].</p>

								<aside class="example">
									<p>The following example shows an <a>EPUB Publication</a> is in U.S. English.</p>
									<pre>&lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
    …
    &lt;dc:language&gt;en-US&lt;/dc:language&gt;
    …
&lt;/metadata&gt;
</pre>
								</aside>

								<p>Although additional <code>language</code> elements MAY be specified for multilingual
									Publications, the first <code>language</code> element in document order is
									considered the primary language of the EPUB Publication.</p>

								<div class="note">
									<p><a>Publication Resources</a> do not inherit their language from the
											<code>dc:language</code> element(s). The language of a resource has to be
										set using the intrinsic methods of the format.</p>
								</div>
							</section>
						</section>

						<section id="sec-opf-dcmes-optional">
							<h6>DCMES Optional Elements</h6>

							<section id="sec-opf-dcmes-optional-def">
								<h6>General Definition</h6>

								<p>All [[!DC11]] elements except for <a href="#sec-opf-dcidentifier"
											><code>identifier</code></a>, <a href="#sec-opf-dclanguage"
											><code>language</code></a>, and <a href="#sec-opf-dctitle"
											><code>title</code></a> are designated as OPTIONAL. These elements conform
									to the following generalized definition:</p>

								<dl class="elemdef">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>contributor</code> | <code>coverage</code> | <code>creator</code> |
												<code>date</code> | <code>description</code> | <code>format</code> |
												<code>publisher</code> | <code>relation</code> | <code>rights</code> |
												<code>source</code> | <code>subject</code> | <code>type</code></p>
									</dd>
									<dt>Namespace</dt>
									<dd>
										<p>
											<code>http://purl.org/dc/elements/1.1/</code>
										</p>
									</dd>
									<dt>Usage</dt>
									<dd>
										<p>OPTIONAL child of <a class="codelink" href="#elemdef-opf-metadata"
													><code>metadata</code></a>. Repeatable.</p>
									</dd>
									<dt>Attributes</dt>
									<dd>
										<ul class="nomark">
											<li>
												<p><a href="#attrdef-dir"><code>dir</code></a>
													<code>[optional]</code> – only allowed on <code>contributor</code>,
														<code>coverage</code>, <code>creator</code>,
														<code>description</code>, <code>publisher</code>,
														<code>relation</code>, <code>rights</code>, and
														<code>subject</code>.</p>
											</li>
											<li>
												<p><a href="#attrdef-id"><code>id</code></a>
													<code>[optional]</code> – allowed on any element.</p>
											</li>
											<li>
												<p><a href="#attrdef-xml-lang"><code>xml:lang</code></a>
													<code>[optional]</code> – only allowed on <code>contributor</code>,
														<code>coverage</code>, <code>creator</code>,
														<code>description</code>, <code>publisher</code>,
														<code>relation</code>, <code>rights</code>, and
														<code>subject</code>.</p>
											</li>
										</ul>
									</dd>
									<dt>Content Model</dt>
									<dd>
										<p>Text</p>
									</dd>
								</dl>

								<p>The value of all OPTIONAL [[!DC11]] elements MUST be at least one character in length
									after white space has been trimmed.</p>

								<p>This specification does not modify the [[!DC11]] element definitions except as noted
									in the following sections.</p>
							</section>

							<section id="sec-opf-dccontributor">
								<h6>The <code>contributor</code> Element</h6>

								<p>The [[!DC11]] <code>contributor</code> element is used to represent the name of a
									person, organization, etc. that played a secondary role in the creation of the
									content.</p>

								<p>The requirements for the <code>contributor</code> element are identical to those for
									the <a href="#sec-opf-dccreator"><code>creator</code> element</a> in all other
									respects.</p>

							</section>

							<section id="sec-opf-dccreator">
								<h6>The <code>creator</code> Element</h6>

								<p>The [[!DC11]] <code>creator</code> element represents the name of a person,
									organization, etc. responsible for the creation of the content. The <a href="#role"
											><code>role</code> property</a> can be <a href="#subexpression">associated
										with the element</a> to indicate the function the creator played.</p>

								<aside class="example">
									<p>The following example shows how to represent a creator as an author using a <a
											href="http://id.loc.gov/vocabulary/relators.html">MARC relators</a>
										term.</p>
									<pre>&lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/">
    …
    &lt;dc:creator id="creator">Haruki Murakami&lt;/dc:creator>
    &lt;meta refines="#creator" property="role" scheme="marc:relators" id="role">aut&lt;/meta>
    …
&lt;/metadata></pre>
								</aside>

								<p>The <code>creator</code> element SHOULD contain the name of the creator as the Author
									intends it to be displayed to a user. The <a href="#file-as"><code>file-as</code>
										property</a> MAY be <a href="#subexpression">associated with the element</a> to
									include a normalized form of the name, and the <a href="#alternate-script"
											><code>alternate-script</code> property</a> to represent a creator's name in
									another language or script.</p>

								<aside class="example">
									<p>The following example shows how a creator name can be included to facilitate
										sorting and rendering.</p>
									<pre>&lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/">
    …
    &lt;dc:creator id="creator">Haruki Murakami&lt;/dc:creator>
    &lt;meta refines="#creator" property="role" scheme="marc:relators" id="role">aut&lt;/meta>
    &lt;meta refines="#creator" property="alternate-script" xml:lang="ja">村上 春樹&lt;/meta>
    &lt;meta refines="#creator" property="file-as">Murakami, Haruki&lt;/meta>
    …
&lt;/metadata></pre>
								</aside>

								<p>If an EPUB Publication has more than one creator, each SHOULD be specified in a
									separate <code>creator</code> element.</p>

								<p>The document order of <code>creator</code> elements in the <code>metadata</code>
									section determines the display priority, where the first <code>creator</code>
									element encountered is the primary creator.</p>

								<aside class="example">
									<p>In the following example, Lewis Carroll is the primary creator as he is listed
										first.</p>
									<pre>&lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
    …
    &lt;dc:creator id="creator01"&gt;Lewis Carroll&lt;/dc:creator&gt;
    &lt;dc:creator id="creator02"&gt;John Tenniel&lt;/dc:creator&gt;
    …
&lt;/metadata&gt;
</pre>
								</aside>

								<p>Secondary contributors SHOULD be represented using the <a
										href="#sec-opf-dccontributor"><code>contributor</code> element</a>.</p>
							</section>

							<section id="sec-opf-dcdate">
								<h6>The <code>date</code> Element</h6>

								<p>The [[!DC11]] <code>date</code> element MUST only be used to define the publication
									date of the <a>EPUB Publication</a>. The publication date is not the same as the <a
										href="#last-modified-date">last modified date</a> (the last time the EPUB
									Publication was changed).</p>

								<p>It is RECOMMENDED that the date string conform to [[!ISO8601]], particularly the
									subset expressed in W3C Date and Time Formats [[!DateTime]], as such strings are
									both human and machine readable.</p>

								<aside class="example">
									<p>The following example shows a publication date.</p>
									<pre>&lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
    …
    &lt;dc:date&gt;2000-01-01T00:00:00Z&lt;/dc:date&gt;
    …
&lt;/metadata&gt;
</pre>
								</aside>

								<p>Additional dates SHOULD be expressed using the specialized date properties available
									in the [[!DCTERMS]] vocabulary, or similar.</p>

								<p>Only one <code>date</code> element is allowed.</p>
							</section>

							<section id="sec-opf-dcsubject">
								<h6>The <code>subject</code> Element</h6>

								<p>The [[!DC11]] <code>subject</code> element identifies the subject of the EPUB
									Publication. The value of the element SHOULD be the human-readable heading or label,
									but MAY be the code value if the subject taxonomy does not provide a separate
									descriptive label.</p>

								<p>Authors MAY identify the system or scheme the element's value is drawn from using the
										<a href="#authority"><code>authority</code> property</a>.</p>

								<p>When a scheme is identified, a subject code MUST be <a href="#subexpression"
										>associated with the element</a> using the <a href="#term"><code>term</code>
										property</a>.</p>

								<aside class="example">
									<p>The following example shows a BISAC code and heading.</p>
									<pre>&lt;dc:subject id="subject01"&gt;FICTION / Occult &amp;amp; Supernatural&lt;/dc:subject&gt;
&lt;meta refines="#subject01" property="authority">BISAC&lt;/meta>
&lt;meta refines="#subject01" property="term">FIC024000&lt;/meta></pre>
								</aside>

								<aside class="example">
									<p>The following example shows the use of an IRI for the scheme.</p>
									<pre>&lt;dc:subject id="sbj01"&gt;Number Theory&lt;/dc:subject&gt;
&lt;meta refines="#sbj01" property="authority">http://www.ams.org/msc/msc2010.html&lt;/meta>
&lt;meta refines="#sbj01" property="term">11&lt;/meta></pre>
								</aside>

								<p>The <code>term</code> property MUST NOT be <a href="#subexpression">associated with a
											<code>subject</code> element</a> that does not specify a scheme.</p>

								<p>The values of the <code>subject</code> element and <code>term</code> property are
									case sensitive only when the designated scheme requires.</p>
							</section>

							<section id="sec-opf-dctype">
								<h6>The <code>type</code> Element</h6>

								<p>The [[!DC11]] <code>type</code> element is used to indicate that the EPUB Publication
									is of a specialized type (e.g., annotations or a dictionary packaged in EPUB
									format).</p>

								<p>An informative registry of specialized EPUB Publication types for use with this
									element is maintained in the [[TypesRegistry]], but Authors MAY use any text string
									as a value.</p>
							</section>

						</section>

						<section id="sec-meta-elem">
							<h6>The <code>meta</code> Element</h6>

							<p>The <code>meta</code> element provides a generic means of including package metadata.</p>

							<dl id="elemdef-meta" class="elemdef">
								<dt>Element Name</dt>
								<dd>
									<p>
										<code>meta</code>
									</p>
								</dd>
								<dt>Usage</dt>
								<dd>
									<p>As child of the <a class="codelink" href="#elemdef-opf-metadata"
												><code>metadata</code></a> element. Repeatable.</p>
								</dd>
								<dt>Attributes</dt>
								<dd>
									<ul class="nomark">
										<li>
											<p>
												<a href="#attrdef-dir">
													<code>dir</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-id">
													<code>id</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-meta-property">
													<code>property</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-refines">
													<code>refines</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-scheme">
													<code>scheme</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-xml-lang">
													<code>xml:lang</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
									</ul>
								</dd>
								<dt>Content Model</dt>
								<dd>
									<p>Text</p>
								</dd>
							</dl>

							<p id="attrdef-meta-property">Each <code>meta</code> element defines a metadata expression.
								The <code>property</code> attribute takes a <a href="#sec-property-datatype"
										><var>property</var> data type value</a> that defines the statement being made
								in the expression, and the text content of the element represents the assertion. (Refer
								to <a href="#sec-vocab-assoc"></a> for more information.)</p>

							<p>This specification defines two types of metadata expressions that can be defined using
								the <code>meta</code> element:</p>

							<ul>
								<li id="primary-expression">A <em>primary expression</em> is one in which the expression
									defined in the <code>meta</code> element establishes some aspect of the <a>EPUB
										Publication</a>. A <code>meta</code> element that omits a refines attribute
									defines a primary expression.</li>

								<li id="subexpression">A <em>subexpression</em> is one in which the expression defined
									in the <code>meta</code> element is associated with another expression or resource
									using the <code>refines</code> attribute to enhance its meaning. A subexpression
									might refine a media clip, for example, by expressing its duration, or refine a
									creator or contributor expression by defining the role of the person.</li>
							</ul>

							<p>Subexpressions are not limited to refining only primary expressions and resources; they
								MAY be used to refine the meaning of other subexpressions, thereby creating chains of
								information.</p>

							<p class="note">All the DCMES [[!DC11]] elements represent primary expressions, and permit
								refinement by meta element subexpressions.</p>

							<p>The <a href="#app-meta-property-vocab">Meta Properties Vocabulary</a> is the <a
									href="#sec-default-vocab">default vocabulary</a> for use with the
									<code>property</code> attribute. If the attribute's value does not include a prefix,
								the following IRI [[!RFC3987]] stem MUST be used to generate the resulting IRI:
									<code>http://idpf.org/epub/vocab/package/meta/#</code></p>

							<p>Authors MAY add terms from other vocabularies as defined in <a href="#sec-vocab-assoc"
								></a>.</p>

							<aside class="example">
								<p>The following example shows various property declarations using <a
										href="#sec-reserved-prefixes">reserved prefixes</a>.</p>

								<pre>&lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
    …
    &lt;meta property="dcterms:modified"&gt;2016-02-29T12:34:56Z&lt;/meta&gt;
    &lt;meta property="rendition:layout"&gt;pre-paginated&lt;/meta&gt;
    &lt;meta property="media:active-class"&gt;my-active-item&lt;/meta&gt;
    …
&lt;/metadata&gt;
</pre>
							</aside>

							<p id="attrdef-scheme">The <code>scheme</code> attribute identifies the system or scheme
								that the element's value is drawn from. The value of the attribute MUST be a <a
									href="#sec-property-datatype"><var>property</var> data type value</a> that resolves
								to the resource that defines the scheme.</p>

							<aside class="example">
								<p>The following example shows the <code>scheme</code> attribute used to indicate the
									value of the <code>meta</code> tag is drawn from ONIX code list 5.</p>
								<pre>&lt;meta refines="#isbn-id" property="identifier-type" scheme="onix:codelist5">15&lt;/meta></pre>
							</aside>

							<p>Every <code>meta</code> element MUST express a value that is at least one character in
								length after white space normalization.</p>

						</section>

						<section id="sec-metadata-last-modified">
							<h5>Last Modified Date</h5>

							<p id="last-modified-date">The <code>metadata</code> section MUST contain exactly one
								[[!DCTERMS]] <code>modified</code> property containing the last modification date. The
								value of this property MUST be an [[!XMLSCHEMA-2]] dateTime conformant date of the form:
									<code>CCYY-MM-DDThh:mm:ssZ</code></p>

							<p>The last modification date MUST be expressed in Coordinated Universal Time (UTC) and MUST
								be terminated by the "<code>Z</code>" (Zulu) time zone indicator.</p>

							<aside class="example">
								<p>The following example shows a last modification date.</p>
								<pre>&lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
    …
    &lt;meta property="dcterms:modified"&gt;2016-01-01T00:00:01Z&lt;/meta&gt;
    …
&lt;/metadata&gt;</pre>
							</aside>

							<p>Authors MUST update the last modified date whenever changes are made to the EPUB
								Publication.</p>

							<p>Additional modified properties MAY be specified in the Package Document metadata, but
								they MUST have a different subject (i.e., they require a <code>refines</code> attribute
								that references an element or resource).</p>

							<div class="note">
								<p>The requirements for the last modification date are to ensure compatibility with
									earlier versions of EPUB 3 that defined a <a
										href="https://www.w3.org/publishing/epub32/epub-packages.html#sec-metadata-elem-identifiers-pid"
										>release identifier</a> [[EPUBPackages-32]] for EPUB Publications.</p>
							</div>
						</section>

						<section id="sec-link-elem">
							<h6>The <code>link</code> Element</h6>

							<p>The <code>link</code> element is used to associate resources with the <a>EPUB
									Publication</a>, such as metadata records.</p>

							<dl id="elemdef-opf-link" class="elemdef">
								<dt>Element Name</dt>
								<dd>
									<p>
										<code>link</code>
									</p>
								</dd>
								<dt>Usage</dt>
								<dd>
									<p>As a child of <a class="codelink" href="#elemdef-opf-metadata"
												><code>metadata</code></a>. Repeatable.</p>
								</dd>
								<dt>Attributes</dt>
								<dd>
									<ul class="nomark">
										<li>
											<p>
												<a href="#attrdef-href">
													<code>href</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-hreflang">
													<code>hreflang</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-id">
													<code>id</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-link-media-type">
													<code>media-type</code>
												</a>
												<code>[conditionally required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-properties">
													<code>properties</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-refines">
													<code>refines</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-link-rel">
													<code>rel</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
									</ul>
								</dd>
								<dt>Content Model</dt>
								<dd>
									<p>Empty</p>
								</dd>
							</dl>

							<p>The <a href="#sec-metadata-elem"><code>metadata</code> element</a> MAY contain zero or
								more <code>link</code> elements, each of which identifies the location of a linked
								resource in its REQUIRED <code>href</code> attribute</p>

							<p id="linked-res-manifest">Linked resources are not <a>Publication Resources</a> and MUST
								NOT be listed in the <a href="#sec-manifest-elem">manifest</a>. A linked resource MAY be
								embedded in a Publication Resource that is listed in the manifest, however, in which
								case it MUST be a <a href="#sec-core-media-types">Core Media Type Resource</a> (e.g., an
									<a>EPUB Content Document</a> could contain a metadata record serialized as
								[[RDFA-CORE]] or [[JSON-LD]]).</p>

							<aside class="example">
								<p>The following example shows a reference to a metadata record embedded in a
										<code>script</code> element inside an <a>XHTML Content Document</a>. Note that
									the media type of the embedded record is obtained from <code>type</code> attribute
									on the <code>script</code> element; it is not specified in the <code>link</code>
									element.</p>
								<pre>&lt;metadata&gt;
    … 
    &lt;link rel="record"
          href="front.xhtml#meta-json"
          media-type="application/xhtml+xml"
          hreflang="en"/&gt;
    …
&lt;/metadata&gt;</pre>
							</aside>

							<p id="linked-res-location">Linked resources MAY be located <a data-lt="Local Resource"
									>locally</a> or <a data-lt="Remote Resource">remotely</a>, but Authors need to be
								aware that <a>Reading Systems</a> are not required to retrieve to Remote Resources
								(i.e., the resource might not be available).</p>

							<p id="attrdef-link-media-type">The <a href="#attrdef-media-type"><code>media-type</code>
									attribute</a> is OPTIONAL when a linked resource is located outside the EPUB
								Container, as more than one media type could be served from the same IRI. The attribute
								is REQUIRED for all <a>Local Resources</a>.</p>

							<p id="attrdef-hreflang">The OPTIONAL <code>hreflang</code> attribute identifies the
								language of the linked resource. The value MUST be a <a
									href="https://tools.ietf.org/html/bcp47#section-2.2.9">well-formed language tag</a>
								[[!BCP47]].</p>

							<p id="attrdef-link-rel">The REQUIRED <code>rel</code> attribute takes a space-separated
								list of <a href="#sec-property-datatype">property</a> values that establish the
								relationship the resource has with the EPUB Publication.</p>

							<aside class="example">
								<p>The following example shows the <code>link</code> element used to associate a local
									MARC XML record.</p>
								<pre>&lt;link rel="record"
      href="meta/9780000000001.xml" 
      media-type="application/marc"/&gt;</pre>
							</aside>

							<p>The value of the <code>media-type</code> attribute is not always sufficient to identify
								the type of linked resource (e.g., many XML-based record formats use the media type
									"<code>application/xml</code>"). To aid Reading Systems in the identification of
								such generic resources, the <code>properties</code> attribute can be specified with a
								semantic identifier.</p>

							<aside class="example">
								<p>The following example shows the <code>properties</code> attribute used to identify a
									remote XMP record.</p>
								<pre>&lt;link rel="record"
      href="http://example.org/meta/12389347?format=xmp"
      media-type="application/xml"
      properties="xmp"/&gt;</pre>
							</aside>

							<p>The <a href="#app-link-vocab">Metadata Link Vocabulary</a> is the <a
									href="#sec-default-vocab">default vocabulary</a> for the <code>rel</code> and
									<code>properties</code> attributes. If any of these attributes' values do not
								include a prefix, the following IRI [[!RFC3987]] stem MUST be used to generate the
								resulting IRI for them: <code>http://idpf.org/epub/vocab/package/link/#</code></p>

							<p><a>Authors</a> MAY add relationships and properties from other vocabularies as defined in
									<a href="#sec-vocab-assoc"></a>.</p>

							<aside class="example">
								<p>The following example shows the <code>link</code> element used to associate an
									informational web page. Note that as <code>foaf</code> is not a <a
										href="#sec-metadata-reserved-prefixes">predefined prefix</a>, it MUST be
									declared in the <a href="#attrdef-package-prefix">prefix attribute</a>.</p>
								<pre>&lt;package … prefix="foaf: http://xmlns.com/foaf/spec/"&gt;
    &lt;metadata&gt;
        … 
        &lt;link rel="foaf:homepage"
              href="http://example.org/book-info/12389347" /&gt;
        …
    &lt;/metadata&gt; 
    …
&lt;/package&gt;
</pre>
							</aside>

							<p id="sec-linked-records">Linked records are only intended to enhance the information
								available to Reading Systems, and the package metadata typically contains important
								rendering information.</p>

							<aside class="example">
								<p>The following example shows a remote record that has higher precedence than a local
									record, which in turn has higher precedence than the metadata found in the
										<code>metadata</code> element.</p>
								<pre>&lt;metadata&gt;
    … 
    &lt;link rel="record"
          href="http://example.org/onix/12389347"
          media-type="application/xml"
          properties="onix" /&gt;
    
    &lt;link rel="record"
          href="meta/meta.jsonld"
          media-type="application/ld+json" /&gt;
    …
&lt;/metadata&gt;</pre>
							</aside>

							<div class="note">
								<p>Due to the variety of metadata record formats and serializations that can be linked
									to an EPUB Publication, and the complexity of comparing metadata properties between
									them, this specification does not require Reading Systems to process linked
									records.</p>
							</div>
						</section>
					</section>

					<section id="sec-pkg-manifest">
						<h5>Manifest Section</h5>

						<section id="sec-manifest-elem">
							<h6>The <code>manifest</code> Element</h6>

							<p>The <code>manifest</code> element provides an exhaustive list of <a>Publication
									Resources</a> used in the rendering of the content.</p>

							<dl id="elemdef-opf-manifest" class="elemdef">
								<dt>Element name</dt>
								<dd>
									<p>
										<code>manifest</code>
									</p>
								</dd>
								<dt>Usage</dt>
								<dd>
									<p>REQUIRED second child of <a class="codelink" href="#elemdef-opf-package"
												><code>package</code></a>, following <a class="codelink"
											href="#elemdef-opf-metadata"><code>metadata</code></a>.</p>
								</dd>
								<dt>Attributes</dt>
								<dd>
									<p>
										<a href="#attrdef-id">
											<code>id</code>
										</a>
										<code>[optional]</code>
									</p>
								</dd>
								<dt>Content Model</dt>
								<dd>
									<p>
										<a class="codelink" href="#elemdef-package-item">
											<code>item</code>
										</a>
										<code>[1 or more]</code>
									</p>
								</dd>
							</dl>

							<p id="confreq-rendition-manifest">All <a>Publication Resources</a> MUST be listed in the
									<code>manifest</code>, regardless of whether they are <a data-lt="Local Resource"
									>Local</a> or <a>Remote Resources</a>. Each is represented by an <a class="codelink"
									href="#sec-item-elem"><code>item</code></a> element.</p>

							<p>Note that the <code>manifest</code> is not self-referencing: it MUST NOT specify an
									<code>item</code> element that refers to the Package Document itself.</p>

							<div class="note">
								<p>This specification supports internationalized resource naming, so elements and
									attributes that reference Publication Resources accept IRIs as their value. For
									compatibility with older Reading Systems that only accept URIs, resource names need
									to be restricted to the ASCII character set.</p>
							</div>
						</section>

						<section id="sec-item-elem">
							<h6>The <code>item</code> Element</h6>

							<p>The <code>item</code> element represents a <a>Publication Resource</a>.</p>

							<dl id="elemdef-package-item" class="elemdef">
								<dt>Element Name</dt>
								<dd>
									<p>
										<code>item</code>
									</p>
								</dd>
								<dt>Usage</dt>
								<dd>
									<p>As a child of <a class="codelink" href="#elemdef-opf-manifest"
												><code>manifest</code></a>. Repeatable.</p>
								</dd>
								<dt>Attributes</dt>
								<dd>
									<ul class="nomark">
										<li>
											<p>
												<a href="#attrdef-item-fallback">
													<code>fallback</code>
												</a>
												<code>[conditionally required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-href">
													<code>href</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-id">
													<code>id</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-item-media-overlay">
													<code>media-overlay</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-item-media-type">
													<code>media-type</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-properties">
													<code>properties</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
									</ul>
								</dd>
								<dt>Content Model</dt>
								<dd>
									<p>Empty</p>
								</dd>
							</dl>

							<p>Each <code>item</code> element identifies a <a>Publication Resource</a> by the IRI
								[[!RFC3987]] provided in its <code>href</code> attribute. The IRI MAY be absolute or
								relative. In the case of relative IRIs, the IRI of the Package Document is used as the
								base when resolving to absolute IRIs. The resulting absolute IRI MUST be unique within
								the <code>manifest</code> scope.</p>

							<p id="attrdef-item-media-type">The Publication Resource identified by an <code>item</code>
								element MUST conform to the applicable specification(s) as inferred from the MIME media
								type provided in the <a href="#attrdef-media-type"><code>media-type</code>
								attribute</a>. <a>Core Media Type Resources</a> MUST use the media type designated in <a
									href="#sec-cmt-supported"></a>.</p>

							<p id="attrdef-item-fallback">The <code>fallback</code> attribute takes an IDREF [[!XML]]
								that identifies a fallback for the Publication Resource referenced from the
									<code>item</code> element. Fallbacks MAY be provided for <a>Core Media Type
									Resources</a> (e.g., to provide a static alternative to a <a>Scripted Content
									Document</a>). Fallback requirements for Foreign Resources are defined in <a
									href="#sec-foreign-restrictions-manifest"></a>.</p>

							<p id="attrdef-item-properties">The <a href="#app-item-properties-vocab">Manifest Properties
									Vocabulary</a> is the <a href="#sec-default-vocab">default vocabulary</a> for the
									<code>properties</code> attribute. If any of the attribute's values do not include a
								prefix, the following IRI [[!RFC3987]] stem MUST be used to generate the resulting IRI
								for them: <code>http://idpf.org/epub/vocab/package/item/#</code></p>

							<p>Authors MAY add terms from other vocabularies as defined in <a href="#sec-vocab-assoc"
								></a>.</p>

							<p>Authors MUST declare all applicable descriptive metadata properties for each Publication
								Resource in this attribute.</p>

							<p>Exactly one <code>item</code> MUST be declared as the <a>EPUB Navigation Document</a>
								using the <code>nav</code> property.</p>

							<p id="attrdef-item-media-overlay">The <code>media-overlay</code> attribute takes an IDREF
								[[!XML]] that identifies the <a>Media Overlay Document</a> for the resource described by
								this <code>item</code>. Refer to <a href="#sec-docs-package"></a> for more
								information.</p>

							<div class="note">
								<p>The order of <code>item</code> elements in the <code>manifest</code> is not
									significant. The presentation sequence of content documents is provided in the <a
										class="codelink" href="#sec-spine-elem"><code>spine</code></a>.</p>
							</div>

							<h6>Examples</h6>

							<div class="example" id="example-manifest-cmt">

								<p>The following example shows a <code>manifest</code> that contains only <a>Core Media
										Type Resources</a>.</p>
								<pre>&lt;manifest&gt;
    &lt;item id="nav" 
          href="nav.xhtml" 
          properties="nav"
          media-type="application/xhtml+xml"/&gt;
    &lt;item id="intro" 
          href="intro.xhtml" 
          media-type="application/xhtml+xml"/&gt;
    &lt;item id="c1" 
          href="chap1.xhtml" 
          media-type="application/xhtml+xml"/&gt;
    &lt;item id="c1-answerkey" 
          href="chap1-answerkey.xhtml" 
          media-type="application/xhtml+xml"/&gt;
    &lt;item id="c2" 
          href="chap2.xhtml" 
          media-type="application/xhtml+xml"/&gt;
    &lt;item id="c2-answerkey" 
          href="chap2-answerkey.xhtml" 
          media-type="application/xhtml+xml"/&gt;
    &lt;item id="c3" 
          href="chap3.xhtml" 
          media-type="application/xhtml+xml"/&gt;
    &lt;item id="c3-answerkey" 
          href="chap3-answerkey.xhtml" 
          media-type="application/xhtml+xml"/&gt;    
    &lt;item id="notes" 
          href="notes.xhtml" 
          media-type="application/xhtml+xml"/&gt;
    &lt;item id="cover" 
          href="./images/cover.svg" 
          properties="cover-image"
          media-type="image/svg+xml"/&gt;
    &lt;item id="f1" 
          href="./images/fig1.jpg" 
          media-type="image/jpeg"/&gt;
    &lt;item id="f2" 
          href="./images/fig2.jpg" 
          media-type="image/jpeg"/&gt;
    &lt;item id="css" 
          href="./style/book.css" 
          media-type="text/css"/&gt;   
    &lt;item id="pls" 
          href="./speech/dict.pls" 
          media-type="application/pls+xml"/&gt;
&lt;/manifest&gt;
</pre>
							</div>

							<aside class="example" id="example-manifest-flbk">
								<p>The following example shows a <code>manifest</code> that references two <a>Foreign
										Resources</a> and therefore uses the <a
										href="#sec-foreign-restrictions-manifest">fallback chain mechanism</a> to supply
									content alternatives. The fallback chain terminates with a <a>Core Media Type
										Resource</a>.</p>
								<pre>&lt;manifest&gt;
    &lt;item id="item1" 
          href="chap1_docbook.xml" 
          media-type="application/docbook+xml" 
          fallback="fall1"/&gt;
    &lt;item id="fall1" 
          href="chap1.xml" 
          media-type="application/z3998-auth+xml" 
          fallback="fall2" /&gt;
    &lt;item id="fall2" 
          href="chap1.xhtml" 
          media-type="application/xhtml+xml"/&gt; 
    … 
&lt;/manifest&gt;
</pre>
							</aside>

							<aside class="example">
								<p>The following example shows a reference to a remote audio file that has to be
									referenced from the manifest (the audio is rendered inline in the XHTML Content
									Document, so it is a Publication Resource).</p>
								<pre>XHTML:
&lt;audio src="http://www.example.com/book/audio/ch01.mp4" controls="controls"/&gt;

Manifest:
&lt;item id="audio01"
      href="http://www.example.com/book/audio/ch01.mp4"
      media-type="audio/mp4"/&gt;</pre>
							</aside>

							<aside class="example">
								<p>The following example shows a link to the same audio file, but in this case the file
									is not listed in the manifest (hyperlinked Remote Resources are not Publication
									Resources). The audio file would only be listed in the manifest if the Author has
									also referenced it from an [[HTML]] embedded content element, as above (i.e., in a
									context where it is used as a Publication Resource).</p>
								<pre>XHTML:
&lt;a href="http://www.example.com/book/audio/ch01.mp4"&gt;Go to audio file&lt;/a&gt;

Manifest:
No Entry</pre>
							</aside>

							<aside class="example">
								<p>The following example shows a link to a local version of the audio file. Because
									audio files are not EPUB Content Documents, it requires a fallback to an EPUB
									Content Document (it also has to be listed in the <a href="#sec-spine-elem"
										>spine</a>).</p>
								<pre>XHTML:
&lt;a href="audio/ch01.mp4"&gt;Open Audio File&lt;/a&gt;

Manifest:
&lt;item id="audio01"
      href="audio/ch01.mp4"
      media-type="audio/mp4"
      fallback="#audio01-xhtml"/&gt;</pre>
							</aside>

						</section>

						<section id="sec-foreign-restrictions-manifest">
							<h6>Manifest Fallbacks</h6>

							<p>Foreign Resources MAY be referenced in contexts in which an intrinsic fallback cannot be
								provided (e.g., directly from <a>spine</a>
								<a href="#elemdef-spine-itemref"><code>itemref</code> elements</a>; from [[!HTML]]
									<code>img</code>, <code>iframe</code> and <code>link</code> elements in <a>XHTML
									Content Documents</a>; and from <code>@import</code> rules in CSS Style Sheets).
								Manifest fallbacks MUST be provided in such cases.</p>

							<p>Manifest fallbacks are provided using the <a href="#attrdef-item-fallback"
										><code>fallback</code> attribute</a> on the <a>manifest</a>
								<a href="#elemdef-package-item"><code>item</code></a> element that represents the
								Publication Resource. The <code>fallback</code> attribute's IDREF [[!XML]] value MUST
								resolve to another <code>item</code> in the <code>manifest</code>. This fallback
									<code>item</code> MAY itself specify another fallback <code>item</code>, and so
								on.</p>

							<p>The ordered list of all the ID references that can be reached starting from a given
								item's <code>fallback</code> attribute represents the <em>fallback chain</em> for that
								item. The order of the resources in the fallback chain represents the Author's preferred
								fallback order.</p>

							<p>Fallback chains MUST conform to one of the following requirements, as appropriate:</p>

							<ul>
								<li>
									<p>For Foreign Resources referenced directly from spine <a
											href="#elemdef-spine-itemref"><code>itemref</code> elements</a>, the chain
										MUST contain at least one <a>EPUB Content Document</a>.</p>
								</li>
								<li>
									<p>For Foreign Resources for which an intrinsic fallback cannot be provided, the
										chain MUST contain at least one <a>Core Media Type Resource</a>.</p>
								</li>
							</ul>

							<p>Fallback chains MUST NOT contain circular or self-references to <code>item</code>
								elements in the chain. User agents MUST terminate the fallback chain at the first
								reference to a manifest item that has already been encountered.</p>

							<p>Fallbacks MAY also be provided for <a>Top-Level Content Documents</a> that are EPUB
								Content Documents. An example of when this feature can be utilized is when providing <a
									href="#confreq-cd-scripted-flbk">fallbacks for scripted content</a>.</p>
						</section>

						<section id="sec-opf-bindings">
							<h6>The <code>bindings</code> Element (Deprecated)</h6>

							<p>The <code>bindings</code> element defines a set of custom handlers for media types not
								supported by this specification. Its use is <a href="#deprecated">deprecated</a>.</p>

							<p>Refer to [[!EPUBPublications-301]] for more information about this element.</p>
						</section>
					</section>

					<section id="sec-pkg-spine">
						<h5>Spine Section</h5>

						<section id="sec-spine-elem">
							<h6>The <code>spine</code> Element</h6>

							<p>The <code>spine</code> element defines an ordered list of <a href="#sec-itemref-elem"
									>manifest <code>item</code> references</a> that represent the default reading
								order.</p>

							<dl id="elemdef-opf-spine" class="elemdef">
								<dt>Element name</dt>
								<dd>
									<p>
										<code>spine</code>
									</p>
								</dd>
								<dt>Usage</dt>
								<dd>
									<p>REQUIRED third child of <a class="codelink" href="#elemdef-opf-package"
												><code>package</code></a>, following <a class="codelink"
											href="#elemdef-opf-manifest"><code>manifest</code></a>.</p>
								</dd>
								<dt>Attributes</dt>
								<dd>
									<ul class="nomark">
										<li>
											<p>
												<a href="#attrdef-id">
													<code>id</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-spine-page-progression-direction">
													<code>page-progression-direction</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#sec-opf2-ncx">
													<code>toc</code>
												</a>
												<code>[optional]</code>
												<a href="#legacy" class="legacy">(legacy)</a>
											</p>
										</li>
									</ul>
								</dd>
								<dt>Content Model</dt>
								<dd>
									<p>
										<a class="codelink" href="#elemdef-spine-itemref">
											<code>itemref</code>
										</a>
										<code>[1 or more]</code>
									</p>
								</dd>
							</dl>

							<p id="confreq-pub-resource">The <code>spine</code> MUST specify at least one <a>Publication
									Resource</a>.</p>

							<p id="spine-inclusion-req">All Publication Resources that are hyperlinked to from
								Publication Resources in the <code>spine</code> MUST themselves be listed in the
									<code>spine</code>, where hyperlinking is defined to be any linking mechanism that
								requires the user to navigate away from the current resource. Common hyperlinking
								mechanisms include the <code>href</code> attribute of the [[!HTML]] <a
									href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element"
										><code>a</code></a> and <a
									href="https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element"
										><code>area</code></a> elements and scripted links (e.g., using DOM Events
								and/or form elements). The requirement to list hyperlinked resources applies recursively
								(i.e., all Publication Resources hyperlinked from hyperlinked Publication Resources also
								have to be listed, and so on.).</p>

							<p>All Publication Resources hyperlinked to from the <a>EPUB Navigation Document</a> also
								MUST be listed in the <code>spine</code>, regardless of whether the Navigation Document
								is itself listed in the <code>spine</code>.</p>

							<div class="note">
								<p>As <a>Remote Resources</a> referenced from hyperlinks are not Publication Resources,
									they are not subject to the requirement to include in the spine (e.g., Web pages and
									resources).</p>
							</div>

							<p>Embedded Publication Resources (e.g., via the [[!HTML]] <a
									href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"
										><code>iframe</code></a> element) do not have to be listed in the
									<code>spine</code>.</p>

							<p id="attrdef-spine-page-progression-direction">The <code>page-progression-direction</code>
								attribute sets the global direction in which the content flows. Allowed values are
									<code>ltr</code> (left-to-right), <code>rtl</code> (right-to-left) and
									<code>default</code>. When the <code>default</code> value is specified, the Author
								is expressing no preference and the Reading System can choose the rendering
								direction.</p>

							<p>Although the <code>page-progression-direction</code> attribute sets the global flow
								direction, individual Content Documents and parts of Content Documents MAY override this
								setting (e.g., via the <code>writing-mode</code> CSS property). Reading Systems can also
								provide mechanisms to override the default direction (e.g., buttons or settings that
								allow the application of alternate style sheets).</p>

							<p>The <a href="#legacy">legacy</a>
								<code>toc</code> attribute takes an IDREF [[!XML]] that identifies the manifest item
								that represents the <a href="#sec-opf2-ncx">NCX</a>.</p>
						</section>

						<section id="sec-itemref-elem">
							<h6>The <code>itemref</code> Element</h6>

							<p>The <code>itemref</code> element identifies a <a>Publication Resource</a> in the default
								reading order.</p>

							<dl id="elemdef-spine-itemref" class="elemdef">
								<dt>Element Name</dt>
								<dd>
									<p>
										<code>itemref</code>
									</p>
								</dd>
								<dt>Usage</dt>
								<dd>
									<p>As a child of <a class="codelink" href="#elemdef-opf-spine"
											><code>spine</code></a>. Repeatable.</p>
								</dd>
								<dt>Attributes</dt>
								<dd>
									<ul class="nomark">
										<li>
											<p>
												<a href="#attrdef-id">
													<code>id</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-itemref-idref">
													<code>idref</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-itemref-linear">
													<code>linear</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-properties">
													<code>properties</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
									</ul>
								</dd>
								<dt>Content Model</dt>
								<dd>
									<p>Empty</p>
								</dd>
							</dl>

							<p id="attrdef-itemref-idref">Each <code>itemref</code> element MUST reference the ID
								[[!XML]] of a unique <a href="#elemdef-package-item"><code>item</code></a> in the
									<a>manifest</a> via the IDREF [[!XML]] in its <code>idref</code> attribute (i.e.,
								two or more <code>itemref</code> elements cannot reference the same
								<code>item</code>).</p>

							<p id="confreq-spine-itemtypes">Each referenced manifest <code>item</code> MUST be either a)
								an <a>EPUB Content Document</a> or b) another type of <a>Publication Resource</a> which,
									<em>regardless of whether it is a <a>Core Media Type Resource</a> or a <a>Foreign
										Resource</a></em>, MUST include an EPUB Content Document in its <a
									href="#sec-foreign-restrictions-manifest">fallback chain</a>.</p>

							<div class="note">
								<p>Although EPUB Publications <a href="#confreq-nav">require an EPUB Navigation
										Document</a>, it is not mandatory to include it in the <code>spine</code>.</p>
							</div>

							<p id="attrdef-itemref-linear">The <code>linear</code> attribute indicates whether the
								referenced <code>item</code> contains content that contributes to the primary reading
								order and has to be read sequentially ("<code>yes</code>") or auxiliary content that
								enhances or augments the primary content and can be accessed out of sequence
									("<code>no</code>"). Examples of auxiliary content include notes, descriptions, and
								answer keys.</p>

							<p>The <code>linear</code> attribute allows Reading Systems to distinguish content that a
								user needs to access as part of the default reading order from supplementary content
								which might, for example, be presented in a popup window or omitted from an aural
								rendering.</p>

							<p>The <a>spine</a> MUST contain at least one <code>itemref</code> whose <code>linear</code>
								attribute value is either explicitly or implicitly set to "<code>yes</code>". An
									<code>itemref</code> that omits the <code>linear</code> attribute is assumed to have
								the value "<code>yes</code>".</p>

							<p>Authors MUST provide a means of accessing all non-linear content (e.g., hyperlinks in the
								content or from the <a href="#sec-nav">EPUB Navigation Document</a>).</p>

							<p id="attrdef-itemref-properties">The <a href="#app-itemref-properties-vocab">Spine
									Properties Vocabulary</a> is the <a href="#sec-default-vocab">default vocabulary</a>
								for the <code>properties</code> attribute. If any of the attribute's values do not
								include a prefix, the following IRI [[!RFC3987]] stem MUST be used to generate the
								resulting IRI for them: <code>http://idpf.org/epub/vocab/package/itemref/#</code></p>

							<p>Authors MAY add terms from other vocabularies as defined in <a href="#sec-vocab-assoc"
								></a>.</p>

							<p>All applicable descriptive metadata properties defined in the <a
									href="#app-itemref-properties-vocab">Spine Properties Vocabulary</a> SHOULD be
								declared.</p>

							<h6>Examples</h6>

							<aside class="example">
								<p>The following example shows a <code>spine</code> element corresponding to <a
										href="#example-manifest-cmt">the manifest example above</a>.</p>
								<pre>&lt;spine page-progression-direction="ltr"&gt;
    &lt;itemref idref="intro"/&gt;
    &lt;itemref idref="c1"/&gt;
    &lt;itemref idref="c1-answerkey" linear="no"/&gt;
    &lt;itemref idref="c2"/&gt;
    &lt;itemref idref="c2-answerkey" linear="no"/&gt;
    &lt;itemref idref="c3"/&gt;
    &lt;itemref idref="c3-answerkey" linear="no"/&gt;
    &lt;itemref idref="notes" linear="no"/&gt;
&lt;/spine&gt;
</pre>
							</aside>
						</section>
					</section>

					<section id="sec-pkg-collections">
						<h5>Collections</h5>

						<section id="sec-collection-elem">
							<h6>The <code>collection</code> Element</h6>

							<p>The <code>collection</code> element defines a related group of resources.</p>

							<dl id="elemdef-collection" class="elemdef">
								<dt>Element Name</dt>
								<dd>
									<p>
										<code>collection</code>
									</p>
								</dd>
								<dt>Usage</dt>
								<dd>
									<p>OPTIONAL sixth element of <code>package</code>. Repeatable.</p>
								</dd>
								<dt>Attributes</dt>
								<dd>
									<ul class="nomark">
										<li>
											<p>
												<a href="#attrdef-dir">
													<code>dir</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-id">
													<code>id</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-collection-role">
													<code>role</code>
												</a>
												<code>[required]</code>
											</p>
										</li>
										<li>
											<p>
												<a href="#attrdef-xml-lang">
													<code>xml:lang</code>
												</a>
												<code>[optional]</code>
											</p>
										</li>
									</ul>
								</dd>
								<dt>Content Model</dt>
								<dd>
									<p>In this order: <a href="#elemdef-collection-metadata"><code>metadata</code></a>
										<code>[0 or 1]</code>, ( <a href="#elemdef-collection"
											><code>collection</code></a>
										<code>[1 or more]</code> or ( <a href="#elemdef-collection"
												><code>collection</code></a>
										<code>[0 or more]</code>, <a href="#elemdef-collection-link"
											><code>link</code></a>
										<code>[1 or more]</code> ))</p>
								</dd>
							</dl>

							<p>The <code>collection</code> element allows resources to be assembled into logical groups
								for a variety of potential uses: enabling content that has been split across multiple
									<a>EPUB Content Documents</a> to be reassembled back into a meaningful unit (e.g.,
								an index split across multiple documents), identifying resources for specialized
								purposes (e.g., preview content), or collecting together resources that present
								additional information about the <a>EPUB Publication</a>.</p>

							<p>The <code>collection</code> element, as defined in this section, represents a generic
								framework from which specializations are intended to be derived (e.g., through EPUB
								sub-specifications). Such specializations MUST define the purpose of the
									<code>collection</code> element, as well as all requirements for its valid
								production and use (specifically any requirements that differ from the general framework
								presented below).</p>

							<p id="attrdef-collection-role">Each specialization MUST define a role value that uniquely
								identifies all conformant <code>collection</code> elements. The role of each
									<code>collection</code> element in the Package Document MUST be identified in its
									<code>role</code> attribute, whose value MUST be one or more NMTOKENs
								[[!XMLSCHEMA-2]] and/or absolute IRIs [[!RFC3987]]. The use of NMTOKEN values is
								reserved for roles not defined in EPUB, which are maintained in the [[!RoleRegistry]].
								NMTOKEN values not defined in the registry are not valid. No roles are defined in this
								section.</p>

							<p>Third parties MAY define custom roles for the <code>collection</code> element, but such
								roles MUST be identified using absolute IRIs. Custom roles MUST NOT incorporate the
								string "<code>idpf.org</code>" in the host component of their identifying IRI.</p>

							<div class="note">
								<p>To facilitate interoperability of custom roles across Reading Systems, implementers
									are strongly encouraged to document their use of the <code>collection</code> element
									in [[RoleExtensions]].</p>
							</div>

							<p id="elemdef-collection-metadata">The OPTIONAL <code>metadata</code> element child of
									<code>collection</code> is an adaptation of the package <a
									href="#elemdef-opf-metadata"><code>metadata</code> element</a>, with the following
								differences in syntax and semantics:</p>

							<ul>
								<li>
									<p>No metadata is mandatory by default.</p>
								</li>
								<li>
									<p>Package-level restrictions on the use of metadata elements MAY be overridden.</p>
								</li>
								<li>
									<p>All <a href="#primary-expression">primary metadata expressions</a> apply to the
											<code>collection</code>.</p>
								</li>
								<li>
									<p>The <a href="#attrdef-refines"><code>refines</code> attribute</a> MUST NOT
										reference elements outside the containing <code>collection</code>.</p>
								</li>
								<li>
									<p>It MUST NOT contain <a href="#sec-opf2-meta">OPF2 <code>meta</code>
										elements</a>.</p>
								</li>
							</ul>

							<p>A <code>collection</code> MAY define sub-collections through the inclusion of one or more
								child <code>collection</code> elements.</p>

							<p id="elemdef-collection-link">The <code>link</code> element child of
									<code>collection</code> is an adaptation of the metadata <a href="#elemdef-opf-link"
										><code>link</code> element</a>, with the following differences in syntax and
								semantics:</p>

							<ul>
								<li>
									<p>The <code>rel</code> attribute is OPTIONAL.</p>
								</li>
								<li>
									<p>The <code>properties</code> attribute also accepts <a
											href="#app-item-properties-vocab">manifest <code>item</code> properties</a>
										without a prefix (e.g., so that a collection can declare its own Navigation
										Document or cover image).</p>
								</li>
								<li>
									<p>The <code>refines</code> attribute MUST NOT be specified.</p>
								</li>
							</ul>

							<p>Each <code>link</code> element MUST reference a resource that is a member of the group.
								The order of <code>link</code> elements is not significant.</p>

							<p>Specializations of the <code>collection</code> element MAY tailor the requirements
								defined above to better reflect their needs (e.g., requiring metadata, imposing further
								restrictions on the use of elements and attributes, or making the order of
									<code>link</code> elements significant). However, the resulting content model MUST
								represent a valid subset of the one defined in this section (e.g., specializations
								cannot introduce new elements or attributes, or re-introduce those expressly forbidden
								above). Specializations MUST NOT define collections in a way that overrides the
								requirements of the <a href="#elemdef-opf-manifest"><code>manifest</code></a> and <a
									href="#elemdef-opf-spine"><code>spine</code></a>.</p>

							<p>The rendering of an EPUB Publication MUST NOT be dependent on the recognition of
									<code>collection</code> elements. The content MUST remain consumable by a user
								without any information loss or other significant deterioration.</p>

							<h6>Examples</h6>

							<aside class="example" id="example-collection">
								<p>The following example shows the assembly of two <a>XHTML Content Documents</a> that
									represent a single unit.</p>
								<pre>&lt;package …&gt;
    …
    &lt;collection role="http://example.org/roles/unit"&gt;
        &lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
            &lt;dc:title&gt;Foo Bar&lt;/dc:title&gt;
        &lt;/metadata&gt;
        &lt;link href="EPUB/xhtml/foo-1.xhtml"/&gt;
        &lt;link href="EPUB/xhtml/foo-2.xhtml"/&gt;
    &lt;/collection&gt;
    …
&lt;/package&gt;</pre>
							</aside>

						</section>

					</section>

					<section id="sec-pkg-legacy">
						<h5>Legacy Content</h5>

						<section id="sec-opf2-meta">
							<h6>The <code>meta</code> Element</h6>

							<p>The <a href="http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.2"
										><code>meta</code> element</a> [[!OPF-201]] is a <a href="#legacy">legacy</a>
								feature that previously provided a means of including generic metadata. It is replaced
								in EPUB 3 by the updated <a href="#sec-meta-elem"><code>meta</code> element</a>, which
								uses different attributes and requires text content.</p>

							<p>For more information about the <code>meta</code> element, refer to its definition in
								[[!OPF-201]].</p>
						</section>

						<section id="sec-opf2-guide">
							<h6>The <code>guide</code> Element</h6>

							<p>The <a href="http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.6"
										><code>guide</code> element</a> [[!OPF-201]] is a <a href="#legacy">legacy</a>
								feature that previously provided machine-processable navigation to key structures. It is
								replaced in EPUB 3 by <a href="#sec-nav-landmarks">landmarks</a> in the <a>EPUB
									Navigation Document</a>.</p>

							<p>For more information about the <code>guide</code> element, refer to its definition in
								[[!OPF-201]].</p>
						</section>

						<section id="sec-opf2-ncx">
							<h6>NCX</h6>

							<p>The <a href="http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.4.1">NCX</a>
								[[!OPF-201]] is a <a href="#legacy">legacy</a> feature that previously provided the
								table of contents. It is replaced in EPUB 3 by the <a href="#sec-nav">EPUB Navigation
									Document</a>.</p>

							<p>For more information about the NCX, refer to its definition in [[!OPF-201]].</p>
						</section>
					</section>
				</section>
			</section>
		</section>
		<section id="sec-contentdocs">
			<h2>EPUB Content Documents</h2>

			<section id="sec-xhtml">
				<h3>XHTML Content Documents</h3>

				<section id="sec-xhtml-intro">
					<h4>Introduction</h4>

					<p>This section defines a profile of [[!HTML]] for creating XHTML Content Documents. An instance of
						an XML document that conforms to this profile is a <a>Core Media Type Resource</a> and is
						referred to in this specification as an <a>XHTML Content Document</a>.</p>

					<p>Unless otherwise specified, this specification inherits all definitions of semantics, structure,
						and processing behaviors from the [[!HTML]] specification.</p>
				</section>

				<section id="sec-xhtml-req">
					<h4>XHTML Requirements</h4>

					<p>An XHTML Content Document has to meet the following basic requirements:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-cd-html-docprops-syntax">It MUST be an [[!HTML]] document that conforms to
								the <a href="https://html.spec.whatwg.org/multipage/xhtml.html#xhtml">XHTML</a>
								syntax.</p>
						</li>
						<li>
							<p id="confreq-cd-html-docprops-html">It MUST conform to the conformance criteria for all
								document constructs defined by [[!HTML]] unless explicitly overridden in <a
									href="#sec-xhtml-deviations"></a>.</p>
						</li>
						<li>
							<p id="confreq-cd-html-docprops-schema">It MAY include extensions to the [[!HTML]] grammar
								as defined in <a href="#sec-xhtml-extensions"></a>, and MUST conform to all content
								conformance constraints defined therein.</p>
						</li>
					</ul>
					<div class="note">
						<p>The recommendation that EPUB Publications follow the accessibility requirements in
							[[EPUB-A11Y-11]] applies to XHTML Content Documents. See <a href="#confreq-a11y"
								>Accessibility</a>.</p>
					</div>
				</section>

				<section id="sec-xhtml-extensions">
					<h4>HTML Extensions</h4>

					<p>This section defines EPUB 3 <a>XHTML Content Document</a> extensions to the underlying [[!HTML]]
						document model.</p>

					<div class="note">
						<p>Although [[HTML]] allows user agents to support <a
								href="https://html.spec.whatwg.org/multipage/infrastructure.html#extensibility-2"
								>vendor-neutral extensions</a>, unless such extensions are listed in this section, they
							are not supported features of EPUB 3.</p>
					</div>

					<section id="sec-xhtml-structural-semantics">
						<h5>Structural Semantics</h5>

						<p>The <a href="#sec-epub-type-attribute"><code>epub:type</code> attribute</a> MAY be used in
								<a>XHTML Content Documents</a> to express <a href="#sec-structural-semantics-intro"
								>structural semantics</a>.</p>

						<p>As the [[!HTML]] <a
								href="https://html.spec.whatwg.org/multipage/semantics.html#the-head-element"
									><code>head</code> element</a> contains metadata for the document, structural
							semantics expressed on this element or any descendant of it have no meaning.</p>
					</section>

					<section id="sec-xhtml-rdfa">
						<h5>RDFa</h5>

						<p>The [[!HTML-RDFA]] specification defines a set of attributes that MAY be used in <a>XHTML
								Content Documents</a> to semantically enrich the content. The use of these attributes
							MUST conform to the requirements defined in [[!HTML-RDFA]].</p>

						<p>The [[!HTML-RDFA]] specification defines changes to the [[!HTML]] content model when RDFa
							attributes are used. This modified content model is valid in XHTML Content Documents.</p>

						<div class="note">
							<p>The listing of RDFa is does not express a preference on the part of the Working Group,
								only that these attributes represent an extension of the HTML grammar. Authors can also
								specify <a href="https://html.spec.whatwg.org/multipage/microdata.html#microdata"
									>microdata attributes</a> [[HTML]] and <a href="https://www.w3.org/TR/json-ld/"
									>linked data</a> [[JSON-LD11]] in XHTML Content Documents as both are natively
								supported.</p>
						</div>
					</section>

					<section id="sec-xhtml-ssml-attrib">
						<h5>SSML Attributes</h5>

						<section id="sec-cd-ssml-intro">
							<h6>Introduction</h6>

							<p>The W3C Speech Synthesis Markup Language [[!SSML]] is a language used for assisting
									<a>Text-to-Speech</a> (TTS) engines in generating synthetic speech. Although SSML is
								designed as a standalone document type, it also defines semantics suitable for use
								within other markup languages.</p>

							<p>This specification recasts the [[!SSML]] <a
									href="https://www.w3.org/TR/2010/REC-speech-synthesis11-20100907/#S3.1.10"
										><code>phoneme</code> element</a> as two attributes — <code>ssml:ph</code> and
									<code>ssml:alphabet</code> — and makes them available within XHTML Content
								Documents.</p>

							<p>Reading Systems with <a>Text-to-Speech</a> (TTS) capabilities SHOULD support the SSML
								Attributes as defined below.</p>

							<div class="note">
								<p>For more information on EPUB 3 features related to synthetic speech, refer to <a
										href="https://www.w3.org/TR/epub-overview-33/#sec-tts">Text-to-speech</a>
									[[EPUB-OVERVIEW-33]].</p>
							</div>
						</section>

						<section id="sec-cd-ssml-ph-attrib">
							<h6>The <code>ssml:ph</code> attribute</h6>

							<p>The <code>ssml:ph</code> attribute specifies a phonemic/phonetic pronunciation of the
								text represented by the element the attribute is specified on.</p>

							<dl class="elemdef" id="attrdef-ssml-ph">
								<dt>Attribute Name</dt>
								<dd>
									<p>
										<code>ph</code>
									</p>
								</dd>
								<dt>Namespace</dt>
								<dd>
									<p>
										<code>https://www.w3.org/2001/10/synthesis</code>
									</p>
								</dd>
								<dt>Usage</dt>
								<dd>
									<p><a href="https://html.spec.whatwg.org/multipage/dom.html#global-attributes"
											>Global attribute</a>. MAY be specified on all elements with which a
										phonetic equivalent can logically be associated (e.g., elements that contain
										textual information).</p>
									<p>MUST NOT be specified on a descendant of an element that already carries this
										attribute.</p>
								</dd>
								<dt>Value</dt>
								<dd>
									<p>A phonemic/phonetic expression, syntactically valid with respect to <a
											href="#sec-cd-ssml-alphabet-attrib">the phonemic/phonetic alphabet being
											used</a>.</p>
								</dd>
							</dl>

							<p>This attribute inherits all the semantics of the [[!SSML]] <code>phoneme</code> element
									<a href="https://www.w3.org/TR/2010/REC-speech-synthesis11-20100907/#S3.1.10"
										><code>ph</code></a> attribute, with the following addition:</p>

							<ul class="conformance-list">
								<li>
									<p id="ssml-ph-concat">When the <code>ssml:ph</code> attribute appears on an element
										that has text node descendants, the corresponding document text to which the
										pronunciation applies is the string that results from concatenating the
										descendant text nodes, in document order. The specified phonetic pronunciation
										MUST therefore logically match the element's textual data in its entirety (i.e.,
										not just an isolated part of its content).</p>
								</li>
							</ul>
						</section>

						<section id="sec-cd-ssml-alphabet-attrib">
							<h6>The <code>ssml:alphabet</code> attribute</h6>

							<p>The <code>ssml:alphabet</code> attribute specifies which phonemic/phonetic pronunciation
								alphabet is used in the value of the <a href="#attrdef-ssml-ph"><code>ssml:ph</code></a>
								attribute.</p>

							<dl class="elemdef" id="attrdef-ssml-alphabet">
								<dt>Attribute Name</dt>
								<dd>
									<p>
										<code>alphabet</code>
									</p>
								</dd>
								<dt>Namespace</dt>
								<dd>
									<p>
										<code>https://www.w3.org/2001/10/synthesis</code>
									</p>
								</dd>
								<dt>Usage</dt>
								<dd>
									<p><a href="https://html.spec.whatwg.org/multipage/dom.html#global-attributes"
											>Global attribute</a>. MAY be specified on any element.</p>
								</dd>
								<dt>Value</dt>
								<dd>
									<p>The name of the pronunciation alphabet used in the value of <a
											href="#attrdef-ssml-ph"><code>ssml:ph</code></a> (inherited).</p>
								</dd>
							</dl>

							<p>This attribute inherits all the semantics of the [[!SSML]] <code>phoneme</code> element
									<a href="https://www.w3.org/TR/2010/REC-speech-synthesis11-20100907/#S3.1.10"
										><code>alphabet</code></a> attribute, with the following addition:</p>

							<ul class="conformance-list">
								<li>
									<p id="ssml-alphabet-inherit">The value of the <code>ssml:alphabet</code> attribute
										is inherited in the document tree. The pronunciation alphabet used in a given
											<code>ssml:ph</code> attribute value is determined by locating the first
										occurrence of the <code>ssml:alphabet</code> attribute starting with the element
										on which the <code>ssml:ph</code> attribute appears, followed by the nearest
										ancestor element.</p>
								</li>
							</ul>

							<div class="note">
								<p>Although the [[SSML]] specification refers to a registry of alphabets, one has not
									been published. As the charter of the W3C Voice Browser Working Group has expired,
									the publication of such a registry is not anticipated. Authors therefore need to
									reference Reading System support documentation to determine what alphabet values are
									supported. Some common alphabets include x-JEITA (also x-JEITA-IT-4002 and
									x-JEITA-IT-4006) and x-sampa.</p>
							</div>
						</section>
					</section>

					<section id="sec-xhtml-content-switch">
						<h5>Content Switching (Deprecated)</h5>

						<p>The <code>switch</code> element provides a simple mechanism through which <a>Authors</a> can
							tailor the content displayed to users, one that is not dependent on the scripting
							capabilities of the <a>EPUB Reading System</a>.</p>

						<p>Use of the <code>switch</code> element is <a href="#deprecated">deprecated</a>. Refer to its
							definition in [[!EPUBContentDocs-301]] for usage information.</p>
					</section>

					<section id="sec-xhtml-epub-trigger">
						<h5>The <code>epub:trigger</code> Element (Deprecated)</h5>

						<p>The <code>trigger</code> element enables the creation of markup-defined user interfaces for
							controlling multimedia objects, such as audio and video playback, in both scripted and
							non-scripted contexts.</p>

						<p>Use of the <code>trigger</code> element is <a href="#deprecated">deprecated</a>. Refer to its
							definition in [[!EPUBContentDocs-301]] for usage information.</p>
					</section>

					<section id="sec-xhtml-custom-attributes">
						<h5>Custom Attributes</h5>

						<p><a>Authors</a> MAY specify <a
								href="https://www.w3.org/TR/epub-rs-33/#sec-xhtml-custom-attributes">custom
								attributes</a> [[!EPUB-RS-33]] in <a>XHTML Content Documents</a> to take advantage of
							Reading System-specific functionality not defined in this specification.</p>

						<p>Custom attributes MAY be specified on any element in an XHTML Content Document.</p>

						<p>When using custom attributes, the content MUST remain consumable by a user without any
							information loss or other significant deterioration, regardless of the Reading System it is
							rendered on.</p>

						<div class="note">
							<p>Refer to [[AttributeExtensions]] for a registry of custom attributes.</p>
						</div>
					</section>
				</section>

				<section id="sec-xhtml-deviations">
					<h4>HTML Deviations and Constraints</h4>

					<p>This section defines deviations from, and constraints on, the underlying [[!HTML]] document model
						applicable to EPUB 3 <a>XHTML Content Documents</a>.</p>

					<section id="sec-xhtml-mathml">
						<h5>Embedded MathML</h5>

						<p>XHTML Content Documents support embedded [[MATHML3]]. Occurrences of MathML markup MUST
							conform to the constraints expressed in the MathML specification [[!MATHML3]], with the
							following additional restrictions:</p>

						<dl class="conformance-list">
							<dt id="math-pres">Presentation MathML</dt>
							<dd>
								<p id="confreq-mathml-pres">The <code>math</code> element MUST contain only <a
										href="https://www.w3.org/TR/MathML3/chapter3.html">Presentation MathML</a>,
									except within the <code>annotation-xml</code> element.</p>
							</dd>
							<dt id="math-cont">Content MathML</dt>
							<dd>
								<p id="confreq-mathml-annot-cont"><a href="https://www.w3.org/TR/MathML3/chapter4.html"
										>Content MathML</a> MAY be included within MathML markup in XHTML Content
									Documents, and, when present, MUST occur within an <code>annotation-xml</code> child
									element of a <code>semantics</code> element.</p>
								<p id="confreq-mathml-annot-cont-attrs">When Content MathML is included as per the
									previous condition, the given <code>annotation-xml</code> element's
										<code>encoding</code> attribute MUST be set to either of the
									functionally-equivalent values <code>MathML-Content</code> or
										<code>application/mathml-content+xml</code>, and its <code>name</code> attribute
									MUST be set to <code>contentequiv</code>.</p>
							</dd>
							<dt id="math-deprecated">Deprecated MathML</dt>
							<dd>
								<p id="confreq-mathml-deprecated">Elements and attributes marked as deprecated in
									[[!MATHML3]] MUST NOT be included within MathML markup in XHTML Content
									Documents.</p>
							</dd>
						</dl>

						<p>This subset is designed to ease the implementation burden on Reading Systems and to promote
							accessibility, while retaining compatibility with [[HTML]] user agents.</p>

						<div class="note">
							<p>The <a href="#mathml"><code>mathml</code> property</a> of the <a>manifest</a>
								<code>item</code> element indicates that an XHTML Content Document contains embedded
								MathML.</p>
						</div>
					</section>

					<section id="sec-xhtml-svg">
						<h5>Embedded SVG</h5>

						<p><a>XHTML Content Documents</a> support the embedding of <a
								href="https://www.w3.org/TR/SVG/conform.html#ConformingSVGXMLFragments">SVG document
								fragments</a> [[!SVG]] <em>by reference</em> (embedding via reference, for example, from
							an <code>img</code> or <code>object</code> element) and <em>by inclusion</em> (embedding via
							direct inclusion of the <code>svg</code> element in the XHTML Content Document).</p>

						<p>The content conformance constraints for SVG embedded in XHTML Content Documents are the same
							as defined for <a>SVG Content Documents</a> in <a href="#sec-svg-restrictions"></a>.</p>

						<div class="note">
							<p>The <a href="#svg"><code>svg</code> property</a> of the <a>manifest</a>
								<a href="#sec-item-elem"><code>item</code> element</a> indicates that an XHTML Content
								Document contains embedded SVG.</p>
						</div>
					</section>

					<section id="sec-xhtml-deviations-unicode">
						<h5>Unicode Restrictions</h5>

						<p>This section lists restrictions on the Unicode character repertoire.</p>

						<dl class="variablelist">
							<dt>Private Use Characters and Embedded Fonts</dt>
							<dd>
								<p id="confreq-html-unicode-pua">Any included characters that map to a code point within
									one of the Private Use Area (PUA) ranges as defined in [[!Unicode]] MUST occur
									within a string that is styled or attributed in a manner that includes a reference
									to an embedded font [[!CSS-Fonts-3]] that contains an appropriate glyph for that
									code point.</p>
							</dd>
						</dl>
					</section>

					<section id="sec-xhtml-deviations-discouraged" class="informative">
						<h5>Discouraged Constructs</h5>

						<section id="sec-xhtml-deviations-rp">
							<h6>The <code>rp</code> Element</h6>

							<p id="confreq-html-vocab-rp">The [[HTML]] <a
									href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-rp-element"
										><code>rp</code></a> element is intended to provide a fallback for older
									<a>Reading Systems</a> that do not recognize ruby markup (i.e., a parenthesis
								display around <code>ruby</code> markup). As EPUB 3 Reading Systems are ruby-aware, and
								can provide fallbacks, the use of <code>rp</code> elements is discouraged.</p>
						</section>

						<section id="sec-xhtml-deviations-embed">
							<h6>The <code>embed</code> Element</h6>

							<p id="confreq-html-vocab-embed">Since the [[!HTML]] <a
									href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-embed-element"
										><code>embed</code></a> element does not include intrinsic facilities to provide
								fallback content for Reading Systems that do not support scripting, <a>Authors</a> are
								discouraged from using the element when the referenced resource includes scripting. The
								[[!HTML]] <a
									href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-object-element"
										><code>object</code> element</a> can be used instead, as it includes intrinsic
								fallback capabilities.</p>
						</section>
					</section>

					<section id="sec-xhtml-fallbacks">
						<h5>Foreign Resource Restrictions</h5>

						<p id="confreq-resources-cd-fallback">Foreign Resources MAY be referenced from elements that
							have intrinsic fallback mechanisms, where an intrinsic fallback method is the capability to
							offer an alternative presentation if the foreign resource is not supported. For example,
							most [[!HTML]] <a
								href="https://html.spec.whatwg.org/multipage/embedded-content.html#embedded-content"
								>embedded content elements</a> provide options for alternative rendering, such as
							allowing multiple sources to be specified or allowing embedded HTML content for when a
							resource cannot be rendered. A <a>Core Media Type Resource</a> or embedded HTML content MUST
							be provided via the given element's intrinsic fallback mechanism when a Foreign Resource is
							referenced.</p>

						<p id="confreq-resources-cd-fallback-media">[[!HTML]] <a
								href="https://html.spec.whatwg.org/multipage/dom.html#flow-content">flow content</a> MAY
							be embedded within the <a
								href="https://html.spec.whatwg.org/multipage/media.html#the-audio-element"
									><code>audio</code></a> and <a
								href="https://html.spec.whatwg.org/multipage/media.html#the-video-element"
									><code>video</code></a> elements for rendering in older Reading Systems that do not
							recognize these elements (e.g., EPUB 2 Reading Systems), but it does not represent a
							fallback Core Media Type Resource.</p>

						<p id="confreq-resources-cd-fallback-img">Due to the variety of sources that can be associated
							with to the [[!HTML]] <a
								href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element"
									><code>img</code> element</a>, the following fallback conditions apply to its
							use:</p>

						<ul>
							<li>
								<p>If it is the child of a <a
										href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-picture-element"
											><code>picture</code> element</a>:</p>
								<ul>
									<li>it MUST reference Core Media Type Resources from its <code>src</code> and
											<code>srcset</code> attributes, when those attributes are specified;
										and</li>
									<li>each sibling <a
											href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element"
												><code>source</code> element</a> MUST reference a Core Media Type
										Resource from its <code>src</code> and <code>srcset</code> attributes unless it
										specifies a media type in its <code>type</code> attribute that is not a Core
										Media Type.</li>
								</ul>
							</li>
							<li>Otherwise, it MAY reference Foreign Resources in its <code>src</code> and
									<code>srcset</code> attributes provided <a href="#sec-foreign-restrictions-manifest"
									>manifest fallbacks</a> are defined.</li>
						</ul>

						<p>The following [[!HTML]] elements can refer to <a href="#sec-core-media-types">Foreign
								Resources</a> without having to provide a fallback Core Media Type Resource:</p>

						<ul>
							<li>
								<p id="confreq-resources-cd-fallback-link"><a
										href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element"
											><code>link</code></a> — when its <code>rel</code> attribute has <a
										href="#confreq-cd-pls-assoc">the value "<code>pronunciation</code>"</a></p>
							</li>
							<li>
								<p id="confreq-resources-cd-fallback-track">
									<a href="https://html.spec.whatwg.org/multipage/media.html#the-track-element">
										<code>track</code>
									</a>
								</p>
							</li>
							<li>
								<p id="confreq-resources-cd-fallback-video"><a
										href="https://html.spec.whatwg.org/multipage/media.html#the-video-element"
											><code>video</code></a> — including any child <a
										href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element"
											><code>source</code></a> elements</p>
							</li>
						</ul>

						<p>Foreign Resources MAY be referenced from the preceding three elements without the provision
							of a fallback Core Media Type Resource.</p>

						<div class="note">
							<p>Refer to <a href="#sec-foreign-restrictions-manifest">manifest fallbacks</a> for the
								provision of fallbacks for elements without intrinsic mechanisms, such as the [[HTML]]
									<a
									href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"
										><code>iframe</code></a>.</p>
						</div>
					</section>
				</section>
			</section>

			<section id="sec-svg">
				<h3>SVG Content Documents</h3>

				<div class="caution">
					<p>Some features of [[!SVG]] are not fully supported in <a>Reading Systems</a> or supported across
						all platforms on which Reading Systems run. When utilizing such features, <a>Authors</a> need to
						consider the inherent risks in terms of the potential impact on interoperability and document
						longevity.</p>
				</div>

				<section id="sec-svg-intro" class="informative">
					<h4>Introduction</h4>

					<p>The Scalable Vector Graphics (SVG) specification [[SVG]] defines a format for representing
						final-form vector graphics and text.</p>

					<p>Although <a>Authors</a> typically use <a href="#sec-xhtml">XHTML Content Documents</a> as the <a
							data-lt="Top-level Content Document">top-level</a> document type, the use of <a>SVG Content
							Documents</a> is also permitted. SVGs are typically only used in certain special
						circumstances, such as when final-form page images are the only suitable representation of the
						content (e.g., for cover art or in the context of manga or comic books).</p>

					<p>This section defines a profile for [[SVG]] documents. An instance of an XML document that
						conforms to this profile is a <a>Core Media Type Resource</a> and is referred to in this
						specification as an <a>SVG Content Document</a>.</p>

					<div class="note">
						<p>This section defines conformance requirements for <a>SVG Content Documents</a>. Refer to <a
								href="#sec-xhtml-svg"></a> for the conformance requirements for SVG embedded in XHTML
							Content Documents.</p>
					</div>
				</section>

				<section id="sec-svg-req">
					<h4>SVG Requirements</h4>

					<p>An SVG Content Document has to meet the following requirements:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-cd-svg-docprops-schema">It MUST be an <a
									href="https://www.w3.org/TR/SVG/conform.html#ConformingSVGStandAloneFiles">SVG
									document fragment</a> [[!SVG]] and conform to all content conformance constraints
								expressed in <a href="#sec-svg-restrictions"></a>.</p>
						</li>
						<li>
							<p id="confreq-svg-structural-semantics">It MAY specify the <a href="#attrdef-epub-type"
										><code>epub:type</code></a> attribute for expressing <a
									href="#app-structural-semantics">structural semantics</a> and use all applicable <a
									href="#sec-vocab-assoc">vocabulary association mechanisms</a>.</p>
						</li>
					</ul>

					<div class="note">
						<p>The recommendation that EPUB Publications follow the accessibility requirements in
							[[EPUB-A11Y-11]] applies to SVG Content Documents. See <a href="#confreq-a11y"
								>Accessibility</a>.</p>
					</div>
				</section>

				<section id="sec-svg-restrictions">
					<h4>Restrictions on SVG</h4>

					<p>This specification restricts the content model of <a>SVG Content Documents</a> and <a
							href="#sec-xhtml-svg">SVG embedded in XHTML Content Documents</a> as follows:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-svg-foreignObject">The [[!SVG]] <a
									href="https://www.w3.org/TR/SVG/embedded.html#ForeignObjectElement"
										><code>foreignObject</code></a> element MUST adhere to the following
								criteria:</p>
							<ul class="conformance-list">
								<li>
									<p id="confreq-svg-foreignObject-xhtml-content">It MUST contain either [[!HTML]] <a
											href="https://html.spec.whatwg.org/multipage/dom.html#flow-content">flow
											content</a> or exactly one [[!HTML]] <a
											href="https://html.spec.whatwg.org/multipage/sections.html#the-body-element"
												><code>body</code> element</a>.</p>
									<p class="note">In the case of <a href="#sec-xhtml-svg">embedded SVGs</a>, a
											<code>body</code> element is not permitted per the <a
											href="https://html.spec.whatwg.org/multipage/embedded-content-other.html#svg-0"
											>restrictions on SVG</a> defined in [[HTML]].</p>
								</li>
								<li>
									<p id="confreq-svg-foreignObject-xhtml-frag">Its content MUST be a valid document
										fragment that conforms to the XHTML Content Document model defined in <a
											href="#sec-xhtml-req"></a>.</p>
								</li>
								<li>
									<p id="confreq-svg-foreignObject-reqext">Its <code>requiredExtensions</code>
										attribute, if given, MUST be set to
										"<code>http://www.idpf.org/2007/ops</code>".</p>
								</li>
							</ul>
						</li>
						<li>
							<p id="confreq-svg-title">The [[!SVG]] <a
									href="https://www.w3.org/TR/SVG/struct.html#TitleElement"><code>title</code></a>
								element MUST contain only valid <a href="#sec-xhtml-req">XHTML Content Document Phrasing
									content</a>.</p>
						</li>
					</ul>
				</section>
			</section>

			<section id="sec-css">
				<h3>CSS Style Sheets</h3>

				<section id="sec-css-intro" class="informative">
					<h4>Introduction</h4>

					<p>CSS is an integral part of the Open Web Platform. Readers, publishers, and document authors
						expect CSS to "just work," as they expect HTML to just work.</p>

					<p>In the past, EPUB defined a profile of CSS that mandated support for certain properties and
						provided prefixed versions of numerous other properties. Although the CSS Working Group no
						longer recommends the use of prefixed properties, this specification has to maintain some
						prefixed properties to avoid breaking existing content. But with the minor exceptions defined in
						this section, EPUB defers to the W3C to define CSS.</p>

					<div class="note">
						<p>Keep in mind that some <a>Reading Systems</a> will not support all desired features of CSS.
							In particular, the following are known to be problematic:</p>
						<ul>
							<li>
								<p>Reading System-induced pagination can interact poorly with style sheets. Pagination
									is sometimes done using columns, which can result in incorrect values for viewport
									sizes. Fixed and absolute positioning are particularly problematic.</p>
							</li>
							<li>
								<p>Some types of screens will render animations and transitions poorly (e.g., those with
									high latency).</p>
							</li>
						</ul>
					</div>
				</section>

				<section id="sec-css-req">
					<h4>CSS Requirements</h4>

					<p>A CSS style sheets has to meet the following requirements:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-css-props">It MAY include any CSS properties, with the following
								exceptions:</p>
							<ul class="conformance-list">
								<li>
									<p id="confreq-css-props-exc-direction">It MUST NOT use the <a
											href="https://www.w3.org/TR/css3-writing-modes/#direction"
												><code>direction</code> property</a> [[!CSS-Writing-Modes-3]]. Use the
										[[!HTML]] <a
											href="https://html.spec.whatwg.org/multipage/dom.html#the-dir-attribute"
												><code>dir</code> attribute</a> to set the inline base direction.</p>
								</li>
								<li>
									<p id="confreq-css-props-exc-unicode-bidi">It MUST NOT use the <a
											href="https://www.w3.org/TR/css3-writing-modes/#unicode-bidi"
												><code>unicode-bidi</code> property</a> [[!CSS-Writing-Modes-3]]. Use
										[[!HTML]] <a
											href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-bdo-element"
												><code>bdo</code> elements</a> and <a
											href="https://html.spec.whatwg.org/multipage/dom.html#the-dir-attribute"
												><code>dir</code> attributes</a> to control bidirectionality.</p>
								</li>
							</ul>
						</li>
						<li>
							<p id="confreq-css-prefixed">It MAY include the prefixed properties defined in <a
									href="#sec-css-prefixed"></a>.</p>
						</li>
						<li>
							<p id="confreq-css-encoding">It MUST be encoded in UTF-8 or UTF-16 [[!Unicode]].</p>
						</li>
					</ul>
				</section>

				<section id="sec-css-prefixed">
					<h4>Prefixed Properties</h4>

					<div class="caution">
						<p><a>Authors</a> are strongly encouraged to use unprefixed properties and <a>Reading
								Systems</a> to support current CSS specifications. The widely-used prefixed properties
							from [[!EPUBContentDocs-301]] have been retained, but support for the other properties has
							been removed. Authors are advised to use CSS-native solutions for the removed properties
							where and when they are available.</p>
						<p>Authors currently using these prefixed properties are advised to move to unprefixed versions
							as soon as support allows, as these properties are not anticipated to be supported in the
							next major version of EPUB.</p>
					</div>

					<section id="sec-css-prefixed-writing-modes">
						<h5>CSS Writing Modes</h5>

						<p>The following table lists the <code>-epub-</code> prefixed properties for
							[[!CSS-Writing-Modes-3]]. The Value column indicates the value the property accepts. The
							Prior EPUB Mapping column indicates values/properties that were used in previous versions of
							EPUB 3. An asterisk (*) denotes that the older property or value is now deprecated. The
							final column describes how to implement the prefixed property based on
							[[!CSS-Writing-Modes-3-20151215]].</p>

						<table>
							<thead>
								<tr>
									<th>Property</th>
									<th>Value</th>
									<th>Prior EPUB Mapping</th>
									<th>Mapping to [[!CSS-Writing-Modes-3-20151215]]</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>-epub-text-orientation</code>
									</td>
									<td>
										<code>upright</code>
									</td>
									<td>
										<code>upright</code>
									</td>
									<td>
										<code>upright</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-orientation</code>
									</td>
									<td>
										<code>mixed</code>
									</td>
									<td>
										<code>vertical-right</code>
										<span aria-label="deprecated">*</span>
									</td>
									<td>
										<code>mixed</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-orientation</code>
									</td>
									<td>
										<code>sideways-right</code>
									</td>
									<td>
										<code>sideways-right</code>
									</td>
									<td>
										<code>sideways</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-orientation</code>
									</td>
									<td>
										<code>sideways-right</code>
									</td>
									<td>
										<code>rotate-right</code>
										<span aria-label="deprecated">*</span>
									</td>
									<td>
										<code>sideways</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-orientation</code>
									</td>
									<td>
										<code>sideways</code>
									</td>
									<td>
										<code>rotate-normal</code>
										<span aria-label="deprecated">*</span>
									</td>
									<td>
										<code>sideways</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-orientation</code>
									</td>
									<td>
										<code>sideways</code>
									</td>
									<td>
										<code>sideways</code>
									</td>
									<td>
										<code>sideways</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-orientation</code>
									</td>
									<td>
										<code>mixed</code>
									</td>
									<td>
										<code>mixed</code>
									</td>
									<td>
										<code>mixed</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>-epub-writing-mode</code>
									</td>
									<td>
										<code>horizontal-tb</code>
									</td>
									<td>
										<code>horizontal-tb</code>
									</td>
									<td>
										<code>horizontal-tb</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>-epub-writing-mode</code>
									</td>
									<td>
										<code>vertical-rl</code>
									</td>
									<td>
										<code>vertical-rl</code>
									</td>
									<td>
										<code>vertical-rl</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>-epub-writing-mode</code>
									</td>
									<td>
										<code>vertical-lr</code>
									</td>
									<td>
										<code>vertical-lr</code>
									</td>
									<td>
										<code>vertical-lr</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-combine</code>
										<span aria-label="deprecated">*</span>
									</td>
									<td>
										<code>-epub-text-combine-horizontal: none</code>
									</td>
									<td>
										<code>none</code>
									</td>
									<td>
										<code>text-combine-upright: none</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-combine</code>
										<span aria-label="deprecated">*</span>
									</td>
									<td>
										<code>-epub-text-combine-horizontal: all</code>
									</td>
									<td>
										<code>horizontal</code>
									</td>
									<td>
										<code>text-combine-upright: all</code>
									</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-combine</code>
										<span aria-label="deprecated">*</span>
									</td>
									<td>Error</td>
									<td>
										<code>horizontal &lt;number&gt;</code>
									</td>
									<td>
										<code>text-combine-upright: digits &lt;number&gt;</code>
									</td>
								</tr>
							</tbody>
						</table>
					</section>

					<section id="sec-css-prefixed-text">
						<h5>CSS Text Level 3</h5>
						<table>
							<thead>
								<tr>
									<th>Property</th>
									<th>Value</th>
									<th>Mapping to [[!CSS-Text-3-20160119]]</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>-epub-hyphens</code>
									</td>
									<td>
										<code>none | manual | auto</code>
									</td>
									<td>No Change</td>
								</tr>
								<tr>
									<td>
										<code>-epub-hyphens</code>
									</td>
									<td>
										<code>all</code>
									</td>
									<td>Not Supported</td>
								</tr>
								<tr>
									<td>
										<code>-epub-line-break</code>
									</td>
									<td>
										<code>auto | loose | normal | strict</code>
									</td>
									<td>No Change</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-align-last</code>
									</td>
									<td>
										<code>auto | start | end | left | right | center | justify</code>
									</td>
									<td>No Change</td>
								</tr>
								<tr>
									<td>
										<code>-epub-word-break</code>
									</td>
									<td>
										<code>normal | keep-all | break-all</code>
									</td>
									<td>No Change</td>
								</tr>
								<tr>
									<td>
										<code>text-transform</code>
									</td>
									<td>
										<code>-epub-fullwidth</code>
									</td>
									<td>
										<code>text-transform: full-width</code>
									</td>
								</tr>
							</tbody>
						</table>
					</section>

					<section id="sec-css-prefixed-text-decoration">
						<h5>CSS Text Decoration Level 3</h5>
						<table>
							<thead>
								<tr>
									<th>Property</th>
									<th>Value</th>
									<th>Mapping to [[!CSS-Text-Decor-3]]</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<code>-epub-text-emphasis-color</code>
									</td>
									<td>
										<code>&lt;color&gt;</code>
									</td>
									<td>No Change</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-emphasis-position </code>
									</td>
									<td>
										<code>[ over | under ] &amp;&amp; [ right | left ]</code>
									</td>
									<td>No Change</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-emphasis-style</code>
									</td>
									<td>
										<code>none | [ [ filled | open ] || [ dot | circle | double-circle | triangle |
											sesame ] ] | &lt;string&gt;</code>
									</td>
									<td>No Change</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-underline-position</code>
									</td>
									<td>
										<code>auto | [ under || [ left | right ] ]</code>
									</td>
									<td>No Change</td>
								</tr>
								<tr>
									<td>
										<code>-epub-text-underline-position</code>
									</td>
									<td>
										<code>alphabetic</code>
									</td>
									<td>
										<code>text-underline-position: auto</code>
									</td>
								</tr>
							</tbody>
						</table>
						<p>Property value syntax defined in <a
								href="https://www.w3.org/TR/css-values/#component-combinators">Component value
								combinators</a> [[!CSS-Values-3]].</p>
					</section>
				</section>
			</section>

			<section id="sec-scripted-content">
				<h3>Scripting</h3>

				<section id="sec-scripted-support">
					<h4>Script Inclusion</h4>

					<p><a>EPUB Content Documents</a> MAY contain scripting using the facilities defined for this in the
						respective underlying specifications ([[!HTML]] and [[!SVG]]). When an EPUB Content Document
						contains scripting, it is referred to in this specification as a <a>Scripted Content
							Document</a>. This label also applies to <a>XHTML Content Documents</a> when they contain
						instances of [[!HTML]] <a href="https://html.spec.whatwg.org/multipage/forms.html#forms"
							>forms</a>.</p>

					<div class="note">
						<p>The <a href="#scripted"><code>scripted</code> property</a> of the <a>manifest</a>
							<code>item</code> element indicates that an EPUB Content Document is a <a>Scripted Content
								Document</a>.</p>
					</div>

					<p>When an [[HTML]] <code>script</code> element contains a <a
							href="https://html.spec.whatwg.org/multipage/scripting.html#data-block">data block</a>
						[[HTML]], it does not represent scripted content.</p>

					<div class="note">
						<p>[[SVG]] does not define data blocks as of publication, but the same exclusion would apply if
							a future update adds the concept.</p>
					</div>

					<p>Authors should note that Reading Systems are expected to behave as though a unique <a
							href="https://url.spec.whatwg.org/#origin">origin</a> [[URL]] has been assigned to each EPUB
						Publication. In practice, this means that it is not possible for scripts to share data between
						EPUB Publications.</p>

					<p>Which <a href="#sec-scripted-context">context</a> a script is used in also determines the rights
						and restrictions that a Reading System places on it (refer to <a
							href="https://www.w3.org/TR/epub-rs-33/#sec-scripted-content-rs-reqs">Scripting
							Conformance</a> [[EPUB-RS-33]] for more information).</p>

					<aside class="example">
						<p>Consider the following example Package Document:</p>
						<pre>&lt;package …&gt;
    …
    &lt;manifest&gt;
        …
        &lt;item id="chap01" 
            href="scripted01.xhtml" 
            media-type="application/xhtml+xml"
            properties="scripted"/&gt;
        &lt;item id="inset01" 
            href="scripted02.xhtml" 
            media-type="application/xhtml+xml"
            properties="scripted"/&gt;
        &lt;item id="slideshowjs" 
            href="slideshow.js" 
            media-type="text/javascript"/&gt;
    &lt;/manifest&gt;
    
    &lt;spine …&gt;
        &lt;itemref idref="chap01"/&gt;
        …
    &lt;/spine&gt;
    …
&lt;/package&gt;</pre>

						<p>and the following file <code>scripted01.xhtml</code>:</p>

						<pre>&lt;html …&gt;
    &lt;head&gt;
        …
        &lt;script type="text/javascript"&gt;
            alert("Reading System name: " + navigator.epubReadingSystem.name);
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        …
        &lt;iframe src="scripted02.xhtml" … /&gt;
        …
    &lt;/body&gt;
&lt;/html&gt;</pre>


						<p>and the following file <code>scripted02.xhtml</code>:</p>

						<pre>&lt;html …&gt;
    &lt;head&gt;
        …
        &lt;script type="text/javascript" href="slideshow.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        …
    &lt;/body&gt;
&lt;/html&gt;</pre>

						<p>From these examples, it is true that:</p>

						<ul>
							<li>
								<p>the code in the <code>script</code> element in the <code>head</code> in
										<code>scripted01.xhtml</code> is a spine-level script because the document is
									referenced from the spine; and</p>
							</li>
							<li>
								<p>the code in the <code>script</code> element in <code>scripted02.xhtml</code> is a
									container-constrained script because the HTML file it occurs in is included in
										<code>scripted01.xhtml</code> via the <code>iframe</code> element.</p>
							</li>
						</ul>
					</aside>
				</section>

				<section id="sec-scripted-context">
					<h4>Scripting Contexts</h4>

					<p>EPUB 3 defines two contexts for script execution:</p>

					<ul>
						<li><a href="#sec-scripted-container-constrained">container-constrained</a> &#8212; when the
							execution of a script occurs within an <code>iframe</code>; and</li>
						<li><a href="#sec-scripted-spine">spine-level</a> &#8212; when the execution of a script occurs
							directly within a <a>Top-level Content Document</a>.</li>
					</ul>

					<p>Whether the code is embedded directly in the <code>script</code> element or referenced via its
							<code>src</code> attribute makes no difference to its executing context.</p>

					<p>Which context Authors use for their scripts affects both what actions the scripts can perform and
						the likelihood of support in Reading Systems, as described in the following subsections.</p>

					<section id="sec-scripted-container-constrained">
						<h5>Container-Constrained Scripts</h5>

						<p>A <dfn>container-constrained script</dfn> is either of the following:</p>

						<ul>
							<li>
								<p>An instance of the [[!HTML]] <a
										href="https://html.spec.whatwg.org/multipage/scripting.html#the-script-element"
											><code>script</code></a> element contained in an <a>XHTML Content
										Document</a> that is embedded in a parent XHTML Content Document using the
									[[!HTML]] <a
										href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"
											><code>iframe</code></a> element.</p>
							</li>
							<li>
								<p>An instance of the [[!SVG]] <a
										href="https://www.w3.org/TR/SVG/interact.html#ScriptElement"
										><code>script</code></a> element contained in an <a>SVG Content Document</a>
									that is embedded in a parent XHTML Content Document using the [[!HTML]] <a
										href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"
											><code>iframe</code></a> element.</p>
							</li>
						</ul>

						<p id="confreq-cd-scripted-container">A container-constrained script MUST NOT contain
							instructions for modifying the DOM of the EPUB Content Document that embeds it (i.e., the
							one that contains the <code>iframe</code> element). It also MUST NOT contain instructions
							for manipulating the size of its containing rectangle.</p>

						<p>Authors should note that <a
								href="https://www.w3.org/TR/epub-rs-33/#sec-scripted-content-rs-reqs">support for
								container-constrained scripting in Reading Systems</a> is only recommended in reflowable
							documents [[EPUB-RS-33]]. Furthermore, Reading System support in fixed-layouts EPUBs is
							optional.</p>

						<p>Ensuring container-constrained scripts degrade gracefully in Reading Systems without
							scripting support is advised (see <a href="#sec-scripted-fallbacks"></a>).</p>
					</section>

					<section id="sec-scripted-spine">
						<h5>Spine-Level Scripts</h5>

						<p>A <dfn>spine-level script</dfn> is an instance of the [[!HTML]] <a
								href="https://html.spec.whatwg.org/multipage/scripting.html#the-script-element"
									><code>script</code></a> or [[!SVG]] <a
								href="https://www.w3.org/TR/SVG/interact.html#ScriptElement"><code>script</code></a>
							element contained in a <a>Top-level Content Document</a>.</p>

						<p>Authors should note that <a
								href="https://www.w3.org/TR/epub-rs-33/#sec-scripted-content-rs-reqs">support for
								spine-level scripting in Reading Systems</a> is only recommended in fixed layout
							documents and reflowable documents when they are set to scroll [[EPUB-RS-33]]. Furthermore,
							Reading System support in all other contexts is optional.</p>

						<p id="confreq-cd-scripted-spine"><a>Top-level Content Documents</a> that include spine-level
							scripting SHOULD remain consumable by the user without any information loss or other
							significant deterioration when scripting is disabled or not available (e.g., by employing
							progressive enhancement techniques or <a href="#sec-scripted-fallbacks">fallbacks</a>).
							Failing to account for non-scripted environments in Top-level Content Documents can result
							in EPUB Publications being unreadable.</p>
					</section>
				</section>

				<section id="sec-scripted-a11y">
					<h4>Scripting Accessibility</h4>

					<p id="confreq-cd-scripted-a11y">EPUB Content Documents that contain scripting SHOULD employ
						relevant [[!WAI-ARIA]] accessibility techniques to ensure that the content remains consumable by
						all users.</p>
				</section>

				<section id="sec-scripted-fallbacks">
					<h4 id="confreq-cd-scripted-flbk">Scripting Fallbacks</h4>

					<p id="confreq-cd-scripted-fallback">EPUB Content Documents that contain scripting MAY provide
						fallbacks for such content, either by using intrinsic fallback mechanisms (such as those
						available for the [[!HTML]] <a
							href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-object-element"
								><code>object</code></a> and <a
							href="https://html.spec.whatwg.org/multipage/canvas.html#the-canvas-element"
								><code>canvas</code></a> elements) or, when an intrinsic fallback is not applicable, by
						using a <a href="#sec-foreign-restrictions-manifest">manifest-level fallback</a>.</p>
					<p id="confreq-cd-scripted-foreign-resources">Authors MUST ensure that scripts only generate <a
							href="#sec-core-media-types">Core Media Type Resources</a> or fragments thereof.</p>
				</section>
			</section>

			<section id="sec-pls">
				<h3>Pronunciation Lexicons</h3>

				<p>The W3C Pronunciation Lexicon Specification (PLS) [[PRONUNCIATION-LEXICON]] defines syntax and
					semantics for XML-based pronunciation lexicons to be used by Automatic Speech Recognition and
						<a>Text-to-Speech</a> (TTS) engines.</p>

				<p id="confreq-cd-pls-xht">A PLS Document MAY be associated with <a>XHTML Content Documents</a>. Each
					XHTML Content Document MAY contain zero or more PLS document associations.</p>

				<p id="confreq-cd-pls-assoc">A PLS Document MUST be associated with the <a>XHTML Content Document</a> to
					which it applies using the [[!HTML]] <a
						href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element"
						><code>link</code></a> element with its <code>rel</code> attribute set to
						"<code>pronunciation</code>" and its <code>type</code> attribute set to the media type
						"<code>application/pls+xml</code>".</p>

				<p id="confreq-cd-pls-assoc-lang">The <code>link</code> element <code>hreflang</code> attribute SHOULD
					be specified on each <code>link</code>, and its value MUST match <a
						href="https://www.w3.org/TR/2008/REC-pronunciation-lexicon-20081014/#S4.1">the language for
						which the pronunciation lexicon is relevant</a> [[!PRONUNCIATION-LEXICON]] when specified.</p>

				<aside class="example">
					<p>The following example shows two <abbr title="Pronunciation Lexicon Specification">PLS</abbr>
						documents (one for Chinese and one for Mongolian) associated with an XHTML Content Document.</p>
					<pre>
&lt;html … &gt;    
    &lt;head&gt;
        …
        &lt;link rel="pronunciation" type="application/pls+xml" hreflang="zh" href="../speech/zh.pls"/&gt;
        &lt;link rel="pronunciation" type="application/pls+xml" hreflang="mn" href="../speech/mn.pls"/&gt;
    &lt;/head&gt;        
    …
&lt;/html&gt;</pre>
				</aside>

				<p id="confreq-cd-pls-docprops-schema">PLS Documents MUST be valid to the RELAX NG schema available at
					the URI <a href="https://www.w3.org/TR/2008/REC-pronunciation-lexicon-20081014/pls.rng"
							><code>https://www.w3.org/TR/2008/REC-pronunciation-lexicon-20081014/pls.rng</code></a>
					[[!PRONUNCIATION-LEXICON]].</p>

				<p id="confreq-cd-pls-fileprops-name">PLS Documents SHOULD use the file extension <code class="filename"
						>.pls</code>.</p>

				<div class="note">
					<p>For more information on EPUB 3 features related to synthetic speech, refer to <a
							href="https://www.w3.org/TR/epub-overview-33/#sec-tts">Text-to-speech</a>
						[[EPUB-OVERVIEW-33]].</p>
				</div>
			</section>
		</section>
		<section id="sec-nav">
			<h2>EPUB Navigation Document</h2>

			<section id="sec-nav-intro" class="informative">
				<h3>Introduction</h3>

				<p>The EPUB Navigation Document is a <a href="#confreq-nav">mandatory component</a> of an <a>EPUB
						Publication</a>. It allows <a>Authors</a> to include a human- and machine-readable global
					navigation layer, thereby ensuring increased usability and accessibility for the user.</p>

				<p>The EPUB Navigation Document is an <a>XHTML Content Document</a>, but with additional restrictions on
					its structure to facilitate the machine-processing of its contents. [[HTML]] <a
						href="https://html.spec.whatwg.org/multipage/sections.html#the-nav-element"><code>nav</code></a>
					elements contain the specialized navigational information, which remains human-readable as well as
					allowing Reading Systems to generate navigational interfaces.</p>

				<p>But the EPUB Navigation Document is not exclusively for machine processing. Because it is an XHTML
					Content Document, it can be part of the linear reading order, avoiding the need for duplicate tables
					of contents. Content which is only destined for machine processing, such as <a
						href="#sec-nav-pagelist">page lists</a>, can be hidden from visual rendering with the <a
						href="#sec-nav-def-hidden">hidden</a> attribute.</p>

				<p>Note that Reading Systems might strip scripting, styling, and HTML formatting as they generate
					navigational interfaces from information found in the EPUB Navigation Document. If such formatting
					and functionality is needed, then the EPUB Navigation Document also needs to be included in the
						<a>spine</a>. The use of progressive enhancement techniques for scripting and styling of the
					navigation document will help ensure the content will retain its integrity when rendered in a
					non-browser context.</p>
			</section>

			<section id="sec-nav-def">
				<h3>EPUB Navigation Document Definition</h3>

				<section id="sec-nav-def-model">
					<h4>The <code>nav</code> Element: Restrictions</h4>

					<p>When a <code>nav</code> element carries the <a href="#sec-epub-type-attribute"
								><code>epub:type</code> attribute</a> in an <a>EPUB Navigation Document</a>, this
						specification restricts the content model of the element and its descendants as follows:</p>

					<dl class="elemdef">
						<dt>Content Model</dt>
						<dd>
							<dl class="variablelist">
								<dt>
									<a href="https://html.spec.whatwg.org/multipage/sections.html#the-nav-element">
										<code>nav</code>
									</a>
								</dt>
								<dd>
									<p>In this order:</p>
									<ul class="nomark">
										<li>
											<p>
												<a
													href="https://html.spec.whatwg.org/multipage/dom.html#heading-content">
													<code>HTML Heading content</code>
												</a>
												<code>[0 or 1]</code>
											</p>
										</li>
										<li>
											<p>
												<code>ol</code>
												<code>[exactly 1]</code>
											</p>
										</li>
									</ul>
								</dd>
								<dt>
									<a
										href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-ol-element">
										<code>ol</code>
									</a>
								</dt>
								<dd>
									<p>In this order:</p>
									<ul class="nomark">
										<li>
											<p>
												<code>li</code>
												<code>[1 or more]</code>
											</p>
										</li>
									</ul>
								</dd>
								<dt>
									<a
										href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-li-element">
										<code>li</code>
									</a>
								</dt>
								<dd>
									<p>In this order:</p>
									<ul class="nomark">
										<li>
											<p> (<code>span</code> or <code>a</code>) <code>[exactly 1]</code></p>
										</li>
										<li>
											<p>
												<code>ol</code>
												<code>[conditionally required]</code>
											</p>
										</li>
									</ul>
								</dd>
								<dt><a
										href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-span-element"
											><code>span</code></a> and <a
										href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element"
											><code>a</code></a></dt>
								<dd>
									<p>In any order:</p>
									<ul class="nomark">
										<li>
											<p>
												<a
													href="https://html.spec.whatwg.org/multipage/dom.html#phrasing-content">
													<code>HTML Phrasing content</code>
												</a>
												<code>[1 or more]</code>
											</p>
										</li>
									</ul>
								</dd>
							</dl>
							<p>Note that there are no restrictions on the attributes allowed on these elements.</p>
							<p>Refer the definition below for additional requirements.</p>
						</dd>
					</dl>

					<p>The content model of the <code>nav</code> element is interpreted as follows:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-nav-ol">The <code>ol</code> child of the <code>nav</code> element represents
								the primary level of content navigation.</p>
						</li>
						<li>
							<p id="confreq-nav-a">Each list item of the ordered list represents a heading, structure, or
								other item of interest. A child <code>a</code> element describes the target that the
								link points to, while a <code>span</code> element serves as a heading for breaking down
								lists into distinct groups (for example, a large list of illustrations can be segmented
								into several lists, one for each chapter).</p>
						</li>
						<li>
							<p id="confreq-nav-a-cnt">The child <code>a</code> or <code>span</code> element MUST provide
								a non-zero-length text label after concatenation of all child content and application of
								white space normalization rules. Although non-textual descendant elements MAY be
								rendered directly to users, text content contained in <code>title</code> or
									<code>alt</code> attributes MUST be used when determining compliance with this
								requirement.</p>
						</li>
						<li>
							<p id="confreq-nav-a-title">If an <code>a</code> or <code>span</code> element contains
								instances of <a
									href="https://html.spec.whatwg.org/multipage/embedded-content.html#embedded-content"
									>HTML embedded content</a> that do not provide intrinsic text alternatives, the
								element MUST also contain a <code>title</code> attribute with an alternate text
								rendering of the link label.</p>
						</li>
						<li>
							<p id="confreq-nav-a-href">The IRI reference provided in the <code>href</code> attribute of
								the <code>a</code> element MUST adhere to the following requirements:</p>
							<ul class="conformance-list">
								<li>
									<p id="confreq-nav-a-href-default">In the case of the <a href="#sec-nav-toc"
												><code>toc nav</code></a>, <a href="#sec-nav-landmarks"><code>landmarks
												nav</code></a> and <a href="#sec-nav-pagelist"><code>page-list
												nav</code></a>, it MUST resolve to a <a>Top-level Content Document</a>
										or fragment therein.</p>
								</li>
								<li>
									<p id="confreq-nav-a-href-other">For all other <code>nav</code> types, it MAY also
										reference <a>Remote Resources</a>.</p>
								</li>
							</ul>
						</li>
						<li>
							<p id="confreq-nav-a-nest">An <code>a</code> element MAY be followed by an <code>ol</code>
								ordered list representing a subsidiary content level below that heading (e.g., all the
								subsection headings of a section).</p>
						</li>
						<li>
							<p id="confreq-nav-span-nest">A <code>span</code> element MUST be followed by an
									<code>ol</code> ordered list; it cannot be used in "leaf" <code>li</code>
								elements.</p>
						</li>
						<li>
							<p id="confreq-nav-sublist">Regardless of whether an <code>a</code> or <code>span</code>
								element precedes it, every sublist MUST adhere to the content requirements defined in
								this section for constructing the primary navigation list.</p>
						</li>
					</ul>

					<aside class="example">
						<p>The following example shows the basic patterns of a navigation element.</p>
						<pre>&lt;nav epub:type="…"&gt;
  &lt;h1&gt;…&lt;/h1&gt;
  &lt;ol&gt;
    &lt;li&gt;
      &lt;a href="chap1.xhtml"&gt;A basic leaf node&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;a href="chap2.xhtml"&gt;A linked heading&lt;/a&gt;
      &lt;ol&gt;
        …
      &lt;/ol&gt;
    &lt;li&gt;
      &lt;span&gt;An unlinked heading&lt;/span&gt;
      &lt;ol&gt;
        …
      &lt;/ol&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/nav&gt;
</pre>
					</aside>

					<p id="confreq-cd-nav-docprops-spine">As a conforming XHTML Content Document, the EPUB Navigation
						Document MAY be included in the <a href="#sec-spine-elem">spine</a>.</p>

					<p id="confreq-nav-ol-style">In the context of this specification, the default display style of list
						items within <code>nav</code> elements is equivalent to the <a
							href="https://www.w3.org/TR/CSS2/generate.html#propdef-list-style"><code>list-style:
								none</code> property</a> [[!CSSSnapshot]]. <a>Authors</a> MAY specify alternative list
						styling using CSS for rendering of the document in the <a href="#sec-spine-elem"
								><code>spine</code></a>.</p>
				</section>

				<section id="sec-nav-def-types">
					<h4>The <code>nav</code> Element: Types</h4>

					<section id="sec-nav-def-types-intro" class="informative">
						<h5>Introduction</h5>

						<p>The <code>nav</code> elements defined in an EPUB Navigation Document are distinguished
							semantically by the value of their <a href="#sec-epub-type-attribute"><code>epub:type</code>
								attribute</a>.</p>

						<p>This specification defines three types of navigation aid:</p>

						<dl class="variablelist">
							<dt>
								<a href="#sec-nav-toc">
									<code>toc</code>
								</a>
							</dt>
							<dd>
								<p>Identifies the <code>nav</code> element that contains the table of contents. The
										<code>toc</code>
									<code>nav</code> is the only navigation aid that has to be included in the EPUB
									Navigation Document.</p>
							</dd>
							<dt>
								<a href="#sec-nav-pagelist">
									<code>page-list</code>
								</a>
							</dt>
							<dd>
								<p>Identifies the <code>nav</code> element that contains a list of pages for a print or
									other statically paginated source.</p>
							</dd>
							<dt>
								<a href="#sec-nav-landmarks">
									<code>landmarks</code>
								</a>
							</dt>
							<dd>
								<p>Identifies the <code>nav</code> element that contains a list of points of
									interest.</p>
							</dd>
						</dl>

						<p>Additional navigation types can be included in the EPUB Navigation Document. See <a
								href="#sec-nav-def-types-other"></a> for more information.</p>

					</section>

					<section id="sec-nav-toc">
						<h5>The <code>toc nav</code> Element </h5>

						<p>The <code>toc</code>
							<code>nav</code> element defines the primary navigational hierarchy. It conceptually
							corresponds to a table of contents in a printed work (i.e., it provides navigation to the
							major structural sections of the publication).</p>

						<p>The references in the <code>toc</code>
							<code>nav</code> element SHOULD be ordered such that they reflect both:</p>

						<ul>
							<li>
								<p>the order of the <a href="#confreq-nav-a-href">referenced EPUB Content Documents</a>
									in the <a>spine</a>; and</p>
							</li>
							<li>
								<p>the order of the targeted elements within their respective EPUB Content
									Documents.</p>
							</li>
						</ul>

						<p>The <code>toc</code>
							<code>nav</code> element MUST occur exactly once in an EPUB Navigation Document.</p>
					</section>

					<section id="sec-nav-pagelist">
						<h5>The <code>page-list nav</code> Element </h5>

						<p>The <code>page-list</code>
							<code>nav</code> element provides navigation to positions in the content that correspond to
							the locations of page boundaries present in a print source.</p>

						<p>The <code>page-list</code>
							<code>nav</code> element is OPTIONAL in EPUB Navigation Documents and MUST NOT occur more
							than once.</p>

						<p>The page references in the <code>page-list</code>
							<code>nav</code> element MUST be ordered such that they reflect both:</p>

						<ul>
							<li>
								<p>the order of the <a href="#confreq-nav-a-href">referenced EPUB Content Documents</a>
									in the <a>spine</a>; and</p>
							</li>
							<li>
								<p>the order of each page within its respective EPUB Content Document.</p>
							</li>
						</ul>

						<p>The <code>page-list</code>
							<code>nav</code> element SHOULD contain only a single <code>ol</code> descendant (i.e., no
							nested sublists).</p>

						<p>The destinations of the <code>page-list</code> references MAY be identified in their
							respective EPUB Content Documents using the <a href="#pagebreak"><code>pagebreak</code>
								term</a>.</p>
					</section>

					<section id="sec-nav-landmarks">
						<h5>The <code>landmarks nav</code> Element </h5>

						<p>The <code>landmarks</code>
							<code>nav</code> element identifies fundamental structural components in the content to
							enable Reading Systems to provide the user efficient access to them.</p>

						<p>The <a href="#sec-epub-type-attribute"><code>epub:type</code> attribute</a> is REQUIRED on
								<code>a</code> element descendants of the <code>landmarks</code>
							<code>nav</code> element. The structural semantics of each link target within the
								<code>landmarks</code>
							<code>nav</code> element is determined by the value of this attribute.</p>

						<aside class="example">
							<p>The following example shows a <code>landmarks</code>
								<code>nav</code> element with structural semantics drawn from <a href="#structure-vocab"
								></a>.</p>
							<pre>&lt;nav epub:type="landmarks"&gt;
    &lt;h2&gt;Guide&lt;/h2&gt;
    &lt;ol&gt;
        &lt;li&gt;&lt;a epub:type="toc" href="#toc"&gt;Table of Contents&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a epub:type="loi" href="content.html#loi"&gt;List of Illustrations&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a epub:type="bodymatter" href="content.html#bodymatter"&gt;Start of Content&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
&lt;/nav&gt;</pre>
						</aside>

						<p>The <code>landmarks</code>
							<code>nav</code> MUST NOT include multiple entries with the same <code>epub:type</code>
							value that reference the same resource, or fragment thereof.</p>

						<p>The <code>landmarks</code>
							<code>nav</code> element is OPTIONAL in EPUB Navigation Documents and MUST NOT occur more
							than once.</p>
					</section>

					<section id="sec-nav-def-types-other">
						<h5>Other <code>nav</code> Elements</h5>

						<p>EPUB Navigation Documents MAY contain one or more <code>nav</code> elements in addition to
							the <code>toc</code>, <code>page-list</code>, and <code>landmarks</code>
							<code>nav</code> elements defined in the preceding sections. If these <code>nav</code>
							elements are intended for Reading System processing, they MUST have an <a
								href="#sec-epub-type-attribute"><code>epub:type</code> attribute</a> and are subject to
							the content model restrictions defined in <a href="#sec-nav-def-model"></a>.</p>

						<p>This specification imposes no restrictions on the semantics of any additional
								<code>nav</code> elements: they MAY be used to represent navigational semantics for any
							information domain, and they MAY contain link targets with homogeneous or heterogeneous
							semantics.</p>

						<aside class="example">
							<p>The following example shows a custom list of tables navigation element.</p>
							<pre>&lt;nav aria-labelledby="lot"&gt;
    &lt;h2 id="lot"&gt;List of tables&lt;/h2&gt;
    &lt;ol&gt;
        &lt;li&gt;&lt;span&gt;Tables in Chapter 1&lt;/span&gt;
            &lt;ol&gt;
                &lt;li&gt;&lt;a href="chap1.xhtml#table-1.1"&gt;Table 1.1&lt;/a&gt;
                &lt;/li&gt;
                &lt;li&gt;&lt;a href="chap1.xhtml#table-1.2"&gt;Table 1.2&lt;/a&gt;&lt;/li&gt;
            &lt;/ol&gt;
        &lt;/li&gt;
    	…
    &lt;/ol&gt;
&lt;/nav&gt;</pre>
						</aside>
					</section>
				</section>

				<section id="sec-nav-def-hidden">
					<h4>The <code>hidden</code> attribute</h4>

					<p>In some cases, <a>Authors</a> might wish to hide parts of the navigation data within the content
						flow (i.e., the Reading System's principal rendering of the <a>spine</a> contents). A typical
						example is the <a href="#sec-nav-pagelist">list of page breaks</a>, which usually is not
						rendered as part of the content flow but is instead exposed to the user separately in a
						dedicated navigation user interface.</p>

					<p> While the <a href="https://www.w3.org/TR/CSS2/visuren.html#propdef-display"><code>display</code>
							property</a> [[!CSSSnapshot]] can be used to control the visual rendering of EPUB Navigation
						Documents in Reading Systems with <a>Viewports</a>, not all Reading Systems provide such an
						interface. To control rendering across all Reading Systems, authors MUST use the [[!HTML]] <a
							href="https://html.spec.whatwg.org/multipage/interaction.html#the-hidden-attribute"
								><code>hidden</code></a> attribute to indicate which (if any) portions of the navigation
						data are excluded from rendering in the content flow. The <code>hidden</code> attribute has no
						effect on how navigation data is rendered outside of the content flow (such as in dedicated
						navigation user interfaces provided by Reading Systems).</p>

					<aside class="example">
						<p>The following example shows a partial <code>page-list</code>
							<code>nav</code> element. The presence of the <code>hidden</code> attribute on the root
							indicates that the entire list is excluded from rendering in the content flow.</p>
						<pre>&lt;nav epub:type="page-list" hidden=""&gt;
    &lt;h2&gt;Pagebreaks of the print version, third edition&lt;/h2&gt;
    &lt;ol&gt;
        &lt;li&gt;&lt;a href="frontmatter.xhtml#pi"&gt;I&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="frontmatter.xhtml#pii"&gt;II&lt;/a&gt;&lt;/li&gt; … &lt;li&gt;&lt;a href="chap1.xhtml#p1"&gt;1&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="chap1.xhtml#p2"&gt;2&lt;/a&gt;&lt;/li&gt; … &lt;/ol&gt;
&lt;/nav&gt;
</pre>
					</aside>

					<aside class="example">
						<p>The following example shows a partial <code>toc</code>
							<code>nav</code> element where the <code>hidden</code> attribute is used to limit content
							flow rendering to the two topmost hierarchical levels.</p>
						<pre>&lt;nav epub:type="toc" id="toc"&gt;
  &lt;h1&gt;Table of contents&lt;/h1&gt;
  &lt;ol&gt;
    &lt;li&gt;
      &lt;a href="chap1.xhtml"&gt;Chapter 1&lt;/a&gt;
      &lt;ol&gt;
        &lt;li&gt;
          &lt;a href="chap1.xhtml#sec-1.1"&gt;Chapter 1.1&lt;/a&gt;
          &lt;ol hidden=""&gt;
            &lt;li&gt;
              &lt;a href="chap1.xhtml#sec-1.1.1"&gt;Section 1.1.1&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
              &lt;a href="chap1.xhtml#sec-1.1.2"&gt;Section 1.1.2&lt;/a&gt;
            &lt;/li&gt;
          &lt;/ol&gt;
         &lt;/li&gt;
         &lt;li&gt;
           &lt;a href="chap1.xhtml#sec-1.2"&gt;Chapter 1.2&lt;/a&gt;
         &lt;/li&gt;
       &lt;/ol&gt;
     &lt;/li&gt;
    &lt;li&gt;
      &lt;a href="chap2.xhtml"&gt;Chapter 2&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/nav&gt;
</pre>
					</aside>
				</section>
			</section>
		</section>
		<section id="sec-fixed-layouts">
			<h2>Fixed Layouts</h2>

			<section id="fxl-intro" class="informative">
				<h3>Introduction</h3>

				<p>EPUB documents, unlike print books or PDF files, are designed to change. The content flows, or
					reflows, to fit the screen and to fit the needs of the user. As noted in <a
						href="https://www.w3.org/TR/epub-overview-33/#sec-rendering">Rendering and CSS</a> "content
					presentation adapts to the user, rather than the user having to adapt to a particular presentation
					of content." [[EPUB-OVERVIEW-33]]</p>

				<p>But this principle does not work for all types of documents. Sometimes content and design are so
					intertwined they cannot be separated. Any change in appearance risks changing the meaning or losing
					all meaning. <a>Fixed-Layout Documents</a> give <a>Authors</a> greater control over presentation
					when a reflowable EPUB is not suitable for the content.</p>

				<p>Fixed layouts are defined using a <a href="#sec-fxl-package">set of Package Document properties</a>
					to control the rendering in <a>Reading Systems</a>. In addition, <a href="#sec-fxl-package">the
						dimensions of each Fixed-Layout Document</a> is set in its respective EPUB Content Document.</p>

				<div class="note" id="note-mechanisms">
					<p>EPUB 3 affords multiple mechanisms for representing fixed-layout content. When fixed-layout
						content is necessary, the Author's choice of mechanism will depend on many factors including
						desired degree of precision, file size, accessibility, etc. This section does not attempt to
						dictate the Author's choice of mechanism.</p>
				</div>
			</section>

			<section id="sec-fxl-package">
				<h3>Fixed-Layout Package Settings</h3>

				<section id="layout">
					<h4>Layout</h4>

					<p>The <code>rendition:layout</code> property specifies whether the content is reflowable or
						pre-paginated.</p>

					<p id="property-layout-global">When the <a href="#layout"><code>rendition:layout</code> property</a>
						is specified on a <code>meta</code> element, it indicates that the paginated or reflowable
						layout style applies globally (i.e., for all spine items).</p>

					<p>The following values are defined for use with the <code>rendition:layout</code> property:</p>

					<dl class="variablelist">
						<dt id="def-layout-reflowable">reflowable</dt>
						<dd>
							<p>The content is not pre-paginated (i.e., Reading Systems apply dynamic pagination when
								rendering). Default value.</p>
						</dd>
						<dt id="def-layout-pre-paginated">pre-paginated</dt>
						<dd>
							<p>The content is pre-paginated (i.e., Reading Systems produce exactly one page per spine <a
									href="#elemdef-spine-itemref"><code>itemref</code></a> when rendering).</p>
						</dd>
					</dl>

					<div class="note" id="uaag">
						<p>Reading Systems typically restrict or deny the application of user or user agent style sheets
							to pre-paginated documents because dynamic style changes are likely to have unintended
							consequence on the intrinsic properties of such documents. Authors need to consider the
							negative impact on usability and accessibility that these restrictions have when choosing to
							use pre-paginated instead of reflowable content. Refer to <a
								href="https://www.w3.org/TR/2015/NOTE-UAAG20-20151215/#gl-text-config">Guideline 1.4 -
								Provide text configuration</a> [[UAAG20]] for related information.</p>
					</div>

					<p>When the property is set to <code>pre-paginated</code> for a spine item, its content dimensions
						MUST be set as defined in <a href="#sec-fixed-layouts"></a>.</p>

					<p>The <code>rendition:layout</code> property MUST NOT be declared more than once.</p>

					<aside class="example" id="fxl-ex1">
						<p>The following example demonstrates fully fixed-layout content, using [[CSS3-MediaQueries]] to
							apply different style sheets for three different device categories. Note that the Media
							Queries only affect the style sheet applied to the document; the size of the content area
							set in the <code>viewport</code>
							<code>meta</code> tag is static.</p>

						<h3>Package Document</h3>

						<pre>&lt;meta property="rendition:layout"&gt;pre-paginated&lt;/meta&gt;</pre>

						<h3>XHTML</h3>

						<pre>&lt;head&gt;
    &lt;meta name="viewport" content="width=1200, height=900"/&gt;
	
    &lt;link rel="stylesheet" href="eink-style.css" media="(max-monochrome: 3)"/&gt;
    &lt;link rel="stylesheet" href="skinnytablet-style.css" media="((color) and
        (max-height:600px) and (orientation:landscape), (color) and (max-width:600px)
        and (orientation:portrait))"/&gt;
    &lt;link rel="stylesheet" href="fattablet-style.css" media="((color) and
        (min-height:601px) and (orientation:landscape), (color) and (min-width:601px)
        and (orientation:portrait)"/&gt;	
&lt;/head&gt;
</pre>
					</aside>

					<section id="layout-overrides">
						<h5>Layout Overrides</h5>

						<p id="property-layout-local">Authors MAY specify the following properties locally on spine <a
								href="#elemdef-spine-itemref"><code>itemref</code> elements</a> to override the <a
								href="#property-layout-global">global value</a> for the given spine item:</p>

						<dl>
							<dt id="layout-pre-paginated">layout-pre-paginated</dt>
							<dd>Specifies that the given spine item is pre-paginated.</dd>

							<dt id="layout-reflowable">layout-reflowable</dt>
							<dd>Specifies that the given spine item is reflowable.</dd>
						</dl>

						<p>Only one of these overrides is allowed on any given spine item.</p>

					</section>
				</section>

				<section id="orientation">
					<h4>Orientation</h4>

					<p>The <code>rendition:orientation</code> property specifies which orientation the Author intends
						the content to be rendered in. </p>

					<p id="property-orientation-global">When the <a href="#orientation"
								><code>rendition:orientation</code> property</a> is specified on a <code>meta</code>
						element, it indicates that the intended orientation applies globally (i.e., for all spine
						items).</p>

					<p>The following values are defined for use with the <code>rendition:orientation</code>
						property:</p>

					<dl class="variablelist">
						<dt>landscape</dt>
						<dd>
							<p>The content is intended for landscape rendering.</p>
						</dd>
						<dt>portrait</dt>
						<dd>
							<p> The content is intended for portrait rendering.</p>
						</dd>
						<dt>auto</dt>
						<dd>
							<p>The content is not orientation constrained. Default value.</p>
						</dd>
					</dl>

					<p>The <code>rendition:orientation</code> property MUST NOT be declared more than once.</p>

					<aside class="example" id="fxl-ex2">
						<p>The following example demonstrates fully fixed-layout content intended to be rendered without
							synthetic spreads and locked to landscape orientation.</p>
						<pre>&lt;metadata&gt;
    &lt;meta property="rendition:layout"&gt;pre-paginated&lt;/meta&gt;
    &lt;meta property="rendition:spread"&gt;none&lt;/meta&gt;
    
    &lt;meta property="rendition:orientation"&gt;landscape&lt;/meta&gt;
&lt;/metadata&gt;</pre>
					</aside>

					<section id="orientation-overrides">
						<h5>Orientation Overrides</h5>

						<p id="property-orientation-local">Authors MAY specify the following properties locally on spine
								<a href="#elemdef-spine-itemref"><code>itemref</code> elements</a> to override the <a
								href="#property-orientation-global">global value</a> for the given spine item:</p>

						<dl>
							<dt id="orientation-auto">orientation-auto</dt>
							<dd>Specifies that the Reading System determines the orientation to render the spine item
								in.</dd>

							<dt id="orientation-landscape">orientation-landscape</dt>
							<dd>Specifies that the given spine item is to be rendered in landscape orientation.</dd>

							<dt id="orientation-portrait">orientation-portrait</dt>
							<dd>Specifies that the given spine item is to be rendered in portrait orientation.</dd>
						</dl>

						<p>Only one of these overrides is allowed on any given spine item.</p>

					</section>
				</section>

				<section id="spread">
					<h4>Synthetic Spreads</h4>

					<p>The <code>rendition:spread</code> property specifies the intended Reading System synthetic spread
						behavior.</p>

					<p id="property-spread-global">When the <code>rendition:spread</code> property is specified on a
							<code>meta</code> element, it indicates that the intended <a>Synthetic Spread</a> behavior
						applies globally (i.e., for all spine items).</p>

					<p>The following values are defined for use with the <code>rendition:spread</code> property:</p>

					<dl class="variablelist">
						<dt>none</dt>
						<dd>
							<p>Do not incorporate spine items in a Synthetic Spread.</p>
						</dd>
						<dt>landscape</dt>
						<dd>
							<p>Render a Synthetic Spread for spine items only when the device is in landscape
								orientation.</p>
						</dd>
						<dt>portrait (deprecated)</dt>
						<dd>
							<p>The use of spreads only in portrait orientation is <a href="#deprecated"
								>deprecated</a>.</p>
							<p>Authors are advised to use the value "<code>both</code>" instead, as spreads that are
								readable in portrait orientation are also readable in landscape.</p>
						</dd>
						<dt>both</dt>
						<dd>
							<p>Render a Synthetic Spread regardless of device orientation.</p>
						</dd>
						<dt>auto</dt>
						<dd>
							<p>No explicit Synthetic Spread behavior is defined. Default value.</p>
						</dd>
					</dl>

					<p>The <code>rendition:spread</code> property MUST NOT be declared more than once.</p>

					<div class="note">
						<p>When Synthetic Spreads are used in the context of HTML and SVG Content Documents, the
							dimensions given via the <a href="#sec-fxl-icb-html"><code>viewport</code>
								<code>meta</code> element</a> and <a href="#sec-fxl-icb-svg"><code>viewBox</code>
								attribute</a> represents the size of one page in the spread, respectively.</p>
					</div>

					<div class="note">
						<p>Refer to <a href="#sec-spine-elem">spine</a> for information about declaration of global flow
							directionality using the <code>page-progression-direction</code> attribute and that of local
							page-progression-direction within content documents.</p>
					</div>

					<aside class="example" id="fxl-ex3">
						<p>The following example demonstrates fully fixed-layout content intended to be rendered using
							synthetic spreads in landscape orientation, and with no spreads in portrait orientation.</p>
						<pre>&lt;metadata&gt;
    &lt;meta property="rendition:layout"&gt;pre-paginated&lt;/meta&gt;
    &lt;meta property="rendition:spread"&gt;landscape&lt;/meta&gt;
&lt;/metadata&gt;</pre>
					</aside>

					<aside class="example" id="fxl-ex4">
						<p>The following example demonstrates reflowable content with a single fixed-layout title page,
							where the fixed-layout page is intended for right-hand spread slot if the device renders
							Synthetic Spreads.</p>
						<pre>&lt;metadata&gt;
    &lt;meta property="rendition:layout"&gt;reflowable&lt;/meta&gt;
    &lt;meta property="rendition:spread"&gt;auto&lt;/meta&gt;
&lt;/metadata&gt;

&lt;spine&gt;
    &lt;itemref idref="titlepage" properties="page-spread-right rendition:layout-pre-paginated"/&gt;
&lt;/spine&gt;</pre>
						<p>Note that the alias <a href="#page-spread"><code>rendition:page-spread-right</code></a> could
							be used in place of <code>page-spread-right</code>.</p>
					</aside>

					<section id="spread-overrides">
						<h5>Synthetic Spread Overrides</h5>

						<p id="property-spread-local">Authors MAY specify the following properties locally on spine <a
								href="#elemdef-spine-itemref"><code>itemref</code> elements</a> to override the <a
								href="#property-spread-global">global value</a> for the given spine item:</p>

						<dl>
							<dt id="spread-auto">spread-auto</dt>
							<dd>Specifies the Reading System determines when to render a synthetic spread for the spine
								item. </dd>

							<dt id="spread-both">spread-both</dt>
							<dd>Specifies the Reading System should render a synthetic spread for the spine item in both
								portrait and landscape orientations. </dd>

							<dt id="spread-landscape">spread-landscape</dt>
							<dd>Specifies the Reading System should render a synthetic spread for the spine item only
								when in landscape orientation.</dd>

							<dt id="spread-none">spread-none</dt>
							<dd>Specifies the Reading System should not render a synthetic spread for the spine
								item.</dd>

							<dt id="spread-portrait">spread-portrait</dt>
							<dd>The <code>spread-portrait</code> property is <a href="#deprecated">deprecated</a>. Refer
								to its definition in [[!EPUBPublications-301]] for more information.</dd>
						</dl>

						<p>Only one of these overrides is allowed on any given spine item.</p>
					</section>
				</section>

				<section id="page-spread">
					<h4>Spread Placement</h4>

					<p>When a Reading System renders a <a>Synthetic Spread</a>, the default behavior is to populate the
						spread by rendering the next <a>EPUB Content Document</a> in the next available unpopulated
						viewport, where the next available viewport is determined by the given <a href="#sec-spine-elem"
							>page progression direction</a> or by local declarations within Content Documents. An Author
						MAY override this automatic population behavior and force a document to be placed in a
						particular viewport by specifying one of the following properties on its spine
							<code>itemref</code> element:</p>

					<dl>
						<dt id="page-spread-center">
							<code>rendition:page-spread-center</code>
						</dt>
						<dd>The <code>rendition:page-spread-center</code> property specifies the forced placement of a
							Content Document in a <a>Synthetic Spread</a>. </dd>

						<dt id="fxl-page-spread-left">
							<code>rendition:page-spread-left</code>
						</dt>
						<dd>The <code>rendition:page-spread-left</code> property is an alias for the <code><a
									href="#page-spread-left">page-spread-left</a></code> property.</dd>

						<dt id="fxl-page-spread-right">
							<code>rendition:page-spread-right</code>
						</dt>
						<dd>The <code>rendition:page-spread-right</code> property is an alias for the <code><a
									href="#page-spread-right">page-spread-right</a></code> property.</dd>
					</dl>

					<p>The <code>rendition:page-spread-left</code> property indicates that the given spine item is to be
						rendered in the left-hand slot in the spread, and <code>rendition:page-spread-right</code> that
						it be rendered in the right-hand slot. The <code>rendition:page-spread-center</code> property
						indicates to override the synthetic spread mode and render a single viewport positioned at the
						center of the screen.</p>

					<p>The <code>rendition:page-spread-left</code>, <code>rendition:page-spread-right</code> and
							<code>rendition:page-spread-center</code> properties apply to both pre-paginated and
						reflowable content, and they only apply when the Reading System is creating Synthetic
						Spreads.</p>

					<p>Although Authors often indicate to use a spread in certain device orientations, the content
						itself does not represent true spreads (i.e., two consecutive pages that have to be rendered
						side-by-side for readability, such as a two-page map). To indicate that two consecutive pages
						represent a true spread, Authors SHOULD use the <code>rendition:page-spread-left</code> and
							<code>rendition:page-spread-right</code> properties on the spine items for the two adjacent
						EPUB Content Documents, and omit the properties on spine items where one-up or two-up
						presentation is equally acceptable.</p>

					<p>Only one <code>page-spread-*</code> property can be declared on any given spine item.</p>

					<div class="note" id="note-page-spread-aliases">
						<p>The <code>rendition:page-spread-left</code> and <code>rendition:page-spread-right</code>
							properties are aliases for the <a href="#page-spread-left"><code>page-spread-left</code></a>
							and <a href="#page-spread-right"><code>spread-right</code></a> properties. They allow the
							use of a single vocabulary for all fixed-layout properties. Authors can use either property
							set, but older Reading Systems might only recognize the unprefixed versions. The <a
								href="#app-itemref-properties-vocab">EPUB Spine Properties Vocabulary</a> is no longer
							being extended for package rendering metadata, so an unprefixed
								<code>page-spread-center</code> is not available.</p>
					</div>

					<aside class="example" id="fxl-ex5">
						<p>The following example demonstrates reflowable content with a two-page fixed-layout center
							plate that is intended to be rendered using synthetic spreads in any device orientation.
							Note that the author has left spread behavior for the other (reflowable) parts undefined,
							since the global value of <code>rendition:spread</code> is initialized to <code>auto</code>
							by default.</p>
						<pre>&lt;spine page-progression-direction="ltr"&gt;
    …
    &lt;itemref idref="center-plate-left"
             properties="rendition:spread-both rendition:page-spread-left"/&gt;
    &lt;itemref idref="center-plate-right"
             properties="rendition:spread-both rendition:page-spread-right"/&gt;
    …
&lt;/spine&gt;</pre>
					</aside>

					<aside class="example" id="fxl-ex6">
						<p>The following example demonstrates fixed-layout content, where synthetic spreads, when used,
							have to be disabled for a center plate. Note that the <code>rendition:spread</code>
							declaration <code>none</code> expression is not needed on the center plate item, as the
								<code>rendition:page-spread-center</code> property already specifies semantics that
							dictates that synthetic spreads be disabled.</p>
						<pre>&lt;metadata&gt;
    &lt;meta property="rendition:layout"&gt;pre-paginated&lt;/meta&gt;
    &lt;meta property="rendition:spread"&gt;auto&lt;/meta&gt;
&lt;/metadata&gt;
&lt;spine&gt;
    &lt;itemref idref="center-plate" properties="rendition:page-spread-center"/&gt;
&lt;/spine&gt;</pre>
					</aside>
				</section>

				<section id="viewport">
					<h4>Viewport Dimensions (Deprecated)</h4>

					<p>The <code>rendition:viewport</code> property allows <a>Authors</a> to express the CSS initial
						containing block (ICB) [[!CSS2]] for XHTML and SVG Content Documents whose
							<code>rendition:layout</code> property has been set to <code>pre-paginated</code>.</p>

					<p>Use of the property is <a href="#deprecated">deprecated</a>. Refer to its definition in
						[[!EPUBPublications-301]] for more information.</p>
				</section>
			</section>

			<section id="sec-fxl-content-dimensions">
				<h3>Content Document Dimensions</h3>

				<p>This section defines rules for the expression and interpretation of dimensional properties of
						<a>Fixed-Layout Documents</a>.</p>

				<p id="confreg-fxl-icb">Fixed-Layout Documents specify their <a
						href="https://www.w3.org/TR/CSS2/visudet.html#containing-block-details">initial containing
						block</a> [[!CSS2]] in the manner applicable to their format:</p>

				<dl class="conformance-list" id="sec-fxl-html-svg-dimensions">
					<dt id="sec-fxl-icb-html">Expressing in XHTML</dt>
					<dd>
						<p>For XHTML <a>Fixed-Layout Documents</a>, the <a
								href="https://www.w3.org/TR/CSS2/visudet.html#containing-block-details">initial
								containing block</a> [[!CSS2]] dimensions MUST be expressed in a <code>viewport</code>
							<code>meta</code> tag using the syntax defined in [[!CSS-Device-Adapt-1]].</p>
						<aside class="example">
							<p>The following example shows a <code>viewport</code>
								<code>meta</code> tag.</p>
							<pre>
&lt;head&gt;
   …
   &lt;meta name="viewport" content="width=1200, height=600"/&gt;
   …
&lt;/head&gt;</pre>
						</aside>
					</dd>

					<dt id="sec-fxl-icb-svg">Expressing in SVG</dt>
					<dd>
						<p>For SVG <a>Fixed-Layout Documents</a>, the ICB dimensions MUST be expressed using the <a
								href="http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute"><code>viewBox</code>
								attribute</a> [[!SVG]].</p>
						<aside class="example">
							<p>The following example shows a <code>viewBox</code> attribute declaration for an SVG
								Content Document with an aspect ratio of 844 pixels wide by 1200 pixels high.</p>
							<pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     version="1.1" 
     viewBox="0 0 844 1200"&gt;
   …
&lt;/svg&gt;</pre>
						</aside>
					</dd>
				</dl>
			</section>
		</section>
		<section id="sec-ocf">
			<h2>Open Container Format</h2>

			<section id="sec-container-abstract">
				<h3>OCF Abstract Container</h3>

				<section id="sec-container-abstract-intro" class="informative">
					<h4>Introduction</h4>

					<p>The <a>OCF Abstract Container</a> file system model uses a single common <a>Root Directory</a>
						for all the contents. All <a>Local Resources</a> for the <a>EPUB Publication</a> are located
						within the directory tree headed by the Root Directory, but no specific file system structure
						for them is mandated by this specification.</p>

					<p>The file system model also includes a mandatory directory named <code>META-INF</code> that is a
						direct child of the Root Directory and is used to store the following special files:</p>

					<dl class="variablelist">
						<dt>
							<code>container.xml</code>
							<code>[required]</code>
						</dt>
						<dd>
							<p>Identifies the <a>Package Document(s)</a> that define the EPUB Publication.</p>
						</dd>
						<dt>
							<code>signatures.xml</code>
							<code>[optional]</code>
						</dt>
						<dd>
							<p>Contains digital signatures for various assets.</p>
						</dd>
						<dt>
							<code>encryption.xml</code>
							<code>[optional]</code>
						</dt>
						<dd>
							<p>Contains information about the encryption of <a>Publication Resources</a>. This file is
								mandatory when <a href="#sec-resource-obfuscation">obfuscation</a> is used.</p>
						</dd>
						<dt>
							<code>metadata.xml</code>
							<code>[optional]</code>
						</dt>
						<dd>
							<p>Used to store metadata about the <a>OCF ZIP Container</a>.</p>
						</dd>
						<dt>
							<code>rights.xml</code>
							<code>[optional]</code>
						</dt>
						<dd>
							<p>Used to store information about digital rights.</p>
						</dd>
						<dt>
							<code>manifest.xml</code>
							<code>[optional]</code>
						</dt>
						<dd>
							<p>A manifest of container contents as allowed by Open Document Format [[ODF]].</p>
						</dd>
					</dl>

					<p>Conformance requirements for the various files in the <code>META-INF</code> directory are defined
						in <a href="#sec-container-metainf"></a>.</p>

				</section>

				<section id="sec-container-file-and-dir-structure">
					<h4>File and Directory Structure</h4>

					<p>The virtual file system for the <a>OCF Abstract Container</a> MUST have a single common <a>Root
							Directory</a> for all the contents of the container.</p>

					<p> The OCF Abstract Container MUST include a directory named <code>META-INF</code> that is a direct
						child of the container's Root Directory. Requirements for the contents of this directory are
						described in <a href="#sec-container-metainf"></a>.</p>

					<p>The file name <code>mimetype</code> in the Root Directory is reserved for use by <a>OCF ZIP
							Containers</a>, as explained in <a href="#sec-container-zip"></a>.</p>

					<p>All other files within the OCF Abstract Container MAY be in any location descendant from the Root
						Directory, provided they are not within the <code>META-INF</code> directory.</p>
				</section>

				<section id="sec-container-iri">
					<h4>Relative IRIs for Referencing Other Components</h4>

					<p>Files within the <a>OCF Abstract Container</a> MUST reference each other via relative IRI
						references ([[!RFC3987]] and [[!RFC3986]]).</p>

					<aside class="example">
						<p>The following example shows how a file named <code>image1.jpg</code> in the same directory as
							an <a>XHTML Content Document</a> can be referenced from an [[HTML]] <code>img</code>
							element.</p>
						<pre>
&lt;img src="image1.jpg" alt="…" /&gt;
                </pre>
					</aside>

					<p>For relative IRI references, the Base IRI [[!RFC3986]] is determined by the relevant language
						specifications for the given file formats. For example, CSS defines how relative IRI references
						work in the context of CSS style sheets and property declarations [[!CSSSnapshot]].</p>

					<div class="note">
						<p>Some language specifications reference Requests For Comments [[RFC]] that preceded
							[[RFC3987]], in which case the earlier RFC applies for content in that language.</p>
					</div>

					<p>Unlike most language specifications, the Base IRIs for all files within the <code>META-INF</code>
						directory use the <a>Root Directory</a> of the OCF Abstract Container as the default Base
						IRI.</p>

					<p>For example, if <code>META-INF/container.xml</code> has the following content:</p>

					<pre class="example">
&lt;?xml version="1.0"?&gt;
&lt;container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;rootfiles&gt;
        &lt;rootfile full-path="EPUB/Great_Expectations.opf"
            media-type="application/oebps-package+xml" /&gt;	
    &lt;/rootfiles&gt;
&lt;/container&gt;
            </pre>

					<p>then the path <code>EPUB/Great_Expectations.opf</code> is relative to the root directory for the
						OCF Abstract Container and not relative to the <code>META-INF</code> directory.</p>

					<p>All relative IRI references MUST resolve to resources within the OCF Abstract Container (i.e., at
						or below the Root Directory).</p>
				</section>

				<section id="sec-container-filenames">
					<h4>File Names</h4>

					<p>The <a>File Name</a> restrictions described in this section are designed to allow <a>Path
							Names</a> and File Names to be used without modification on most commonly used operating
						systems.</p>

					<p>In the context of an <a>OCF Abstract Container</a>, <span id="ocf-fn-cs">File and Path Names are
							case sensitive</span> and have to meet the following criteria:</p>

					<ul class="conformance-list">
						<li>
							<p id="ocf-fn-encoding">File Names MUST be UTF-8 [[!Unicode]] encoded.</p>
						</li>
						<li>
							<p id="ocf-fn-length">File Names MUST NOT exceed 255 bytes.</p>
						</li>
						<li>
							<p id="ocf-pn-length">The Path Name for any directory or file within the OCF Abstract
								Container MUST NOT exceed 65535 bytes.</p>
						</li>
						<li>
							<p id="ocf-fn-chars">File Names MUST NOT use the following [[!Unicode]] characters, as these
								characters might not be supported consistently across commonly used operating
								systems:</p>
							<ul>
								<li>
									<p>SOLIDUS: <code>/</code> (<code>U+002F</code>)</p>
								</li>
								<li>
									<p>QUOTATION MARK: <code>"</code> (<code>U+0022</code>)</p>
								</li>
								<li>
									<p>ASTERISK: <code>*</code> (<code>U+002A</code>)</p>
								</li>
								<li>
									<p>FULL STOP as the last character: <code>.</code> (<code>U+002E</code>)</p>
								</li>
								<li>
									<p>COLON: <code>:</code> (<code>U+003A</code>)</p>
								</li>
								<li>
									<p>LESS-THAN SIGN: <code>&lt;</code> (<code>U+003C</code>)</p>
								</li>
								<li>
									<p>GREATER-THAN SIGN: <code>&gt;</code> (<code>U+003E</code>)</p>
								</li>
								<li>
									<p>QUESTION MARK: <code>?</code> (<code>U+003F</code>)</p>
								</li>
								<li>
									<p>REVERSE SOLIDUS: <code>\</code> (<code>U+005C</code>)</p>
								</li>
								<li>
									<p>VERTICAL LINE: <code>|</code> (<code>U+007C</code>)</p>
								</li>
								<li>
									<p>DEL (<code>U+007F</code>)</p>
								</li>
								<li>
									<p>C0 range (<code>U+0000 … U+001F</code>)</p>
								</li>
								<li>
									<p>C1 range (<code>U+0080 … U+009F</code>)</p>
								</li>
								<li>
									<p>Private Use Area (<code>U+E000 … U+F8FF</code>)</p>
								</li>
								<li>
									<p>Non characters in Arabic Presentation Forms-A (<code>U+FDDO … U+FDEF</code>)</p>
								</li>
								<li>
									<p>Specials (<code>U+FFF0 … U+FFFF</code>)</p>
								</li>
								<li>
									<p>Tags and Variation Selectors Supplement (<code>U+E0000 … U+E0FFF</code>)</p>
								</li>
								<li>
									<p>Supplementary Private Use Area-A (<code>U+F0000 … U+FFFFF</code>)</p>
								</li>
								<li>
									<p>Supplementary Private Use Area-B (<code>U+100000 … U+10FFFF</code>)</p>
								</li>
							</ul>
						</li>
						<li>
							<p id="ocf-fn-cn">All File Names within the same directory MUST be unique following case
								normalization as described in section 3.13 of [[!Unicode]].</p>
						</li>
						<li>
							<p id="ocf-fn-an">All File Names within the same directory SHOULD be unique following NFC or
								NFD normalization [[!TR15]].</p>
						</li>
					</ul>

					<div class="note">
						<p>Some commercial ZIP tools do not support the full Unicode range and might support only the
							[[US-ASCII]] range for File Names. <a>Authors</a> who want to use ZIP tools that have these
							restrictions might find it is best to restrict their File Names to the [[US-ASCII]] range.
							If the names of files cannot be preserved during the unzipping process, it will be necessary
							to compensate for any name translation which took place when the files are referenced by URI
							from within the content.</p>
					</div>

				</section>

				<section id="sec-container-metainf">
					<h4><code>META-INF</code> Directory</h4>

					<section id="sec-container-metainf-inc">
						<h5>Inclusion</h5>

						<p>All <a>OCF Abstract Containers</a> MUST include a directory called <code>META-INF</code> in
							their <a>Root Directory</a>.</p>

						<p>This directory contains the files specified in <a href="#sec-container-metainf-files"></a>.
							Files other than the ones listed in that section MAY be included in the
								<code>META-INF</code> directory.</p>
					</section>

					<section id="sec-container-metainf-files">
						<h5>Reserved Files</h5>

						<section id="sec-container-metainf-container.xml">
							<h6>Container File (<code>container.xml</code>)</h6>

							<p>The REQUIRED <code>container.xml</code> file in the <code>META-INF</code> directory
								identifies the <a>Package Documents</a> available in the <a>OCF Abstract
								Container</a>.</p>

							<p>The contents of this file MUST be valid to the schema in <a href="#app-schema-container"
								></a> after removing all elements and attributes from other namespaces (including all
								attributes and contents of such elements).</p>

							<p id="elemdef-container-rootfile">Each <code>rootfile</code> element MUST identify the
								location of a <a>Package Document</a> in its <code>full-path</code> attribute and
								specify the media type "<code>application/oebps-package+xml</code>" in its
									<code>media-type</code> attribute.</p>

							<p>If more than one <code>rootfile</code> element is defined, each MUST reference a Package
								Document that conforms to the same version of EPUB. Each Package Document represents one
								rendering of the EPUB Publication.</p>

							<div class="note">
								<p>Although the EPUB Container provides the ability to reference more than one Package
									Document, this specification does not define how to interpret, or select from, the
									available options. Refer to [[EPUB-MULTI-REND-11]] for more information on how to
									bundle more than one rendering of the content.</p>
							</div>

							<aside class="example">
								<p>The following example shows a sample <code>container.xml</code> for an EPUB
									Publication with the root file <code>EPUB/My Crazy Life.opf</code> (the Package
									Document):</p>
								<pre>
&lt;?xml version="1.0"?&gt;
&lt;container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;rootfiles&gt;
        &lt;rootfile full-path="EPUB/My_Crazy_Life.opf"
            media-type="application/oebps-package+xml" /&gt;
    &lt;/rootfiles&gt;
&lt;/container&gt;
                    </pre>
							</aside>

							<p>The OPTIONAL <code id="elemdef-container-links">links</code> element identifies resources
								necessary for the processing of the <a>OCF ZIP Container</a>. Each of its child <code
									id="elemdef-container-link">link</code> elements MUST specify an <code>href</code>
								attribute whose value identifies the location of a resource. Each <code>link</code>
								element also MUST specify a <code>rel</code> attribute whose value identifies the
								relationship of the resource, and MAY specify a <code>media-type</code> attribute whose
								value MUST be a media type [[!RFC2046]] that specifies the type and format of the
								resource referenced by the <code>link</code>.</p>

							<div class="note">
								<p>This specification currently does not define uses for the <code>links</code> element.
									Refer to [[EPUB-Multi-Rend-11]] for an example of its use.</p>
							</div>

							<p>The value of the <code>rootfile</code> element <code>full-path</code> attribute and the
									<code>link</code> element <code>href</code> attribute MUST contain a <em
									class="firstterm" id="def-path-component">path component</em> [[!RFC3986]] which
								MUST take the form of a <em class="firstterm" id="def-path-rootless">path-rootless</em>
								[[!RFC3986]] only. The path components are relative to the <a>Root Directory</a>.</p>
						</section>

						<section id="sec-container-metainf-encryption.xml">
							<h6>Encryption File (<code>encryption.xml</code>)</h6>

							<p>The OPTIONAL <code>encryption.xml</code> file in the <code>META-INF</code> directory
								holds all encryption information on the contents of the container. If any resource
								within the container is encrypted, <code>encryption.xml</code> MUST be present to
								indicate that the resource is encrypted and provide information on how it is
								encrypted.</p>

							<p>This file is an XML document whose root element is <code
									id="elemdef-encryption-encryption">encryption</code>. The <code>encryption</code>
								element contains child elements of type <code>EncryptedKey</code> and
									<code>EncryptedData</code> as defined by [[!XMLENC-CORE1]]. An <code
									id="elemdef-encryption-EncryptedKey">EncryptedKey</code> element describes each
								encryption key used in the container, while an <code
									id="elemdef-encryption-EncryptedData">EncryptedData</code> element describes each
								encrypted file. Each <code>EncryptedData</code> element refers to an
									<code>EncryptedKey</code> element, as described in XML Encryption.</p>

							<p>The contents of the <code>encryption.xml</code> file MUST be valid to the schema in <a
									href="#app-schema-encryption"></a>.</p>

							<p>OCF encrypts individual files independently, trading off some security for improved
								performance, allowing the container contents to be incrementally decrypted. Encryption
								in this way exposes the directory structure and file naming of the whole package.</p>

							<p>OCF uses XML Encryption [[!XMLENC-CORE1]] to provide a framework for encryption, allowing
								a variety of algorithms to be used. XML Encryption specifies a process for encrypting
								arbitrary data and representing the result in XML. Even though an <a>OCF Abstract
									Container</a> might contain non-XML data, XML Encryption can be used to encrypt all
								data in an OCF Abstract Container. OCF encryption supports only the encryption of entire
								files within the container, not parts of files. The <code>encryption.xml</code> file, if
								present, MUST NOT be encrypted.</p>

							<p>Encrypted data replaces unencrypted data in an OCF Abstract Container. For example, if an
								image named <code>photo.jpeg</code> is encrypted, the contents of the
									<code>photo.jpeg</code> resource SHOULD be replaced by its encrypted contents.
								Within the ZIP directory, encrypted files SHOULD be stored rather than
								Deflate-compressed.</p>

							<p id="encryption-obfuscation">Note that some situations require obfuscating the storage of
								embedded resources referenced by an <a>EPUB Publication</a> to make them more difficult
								to extract for unrestricted use (e.g., fonts). Although obfuscation is not encryption,
								the <code>encryption.xml</code> file is used in conjunction with the <a
									href="#sec-resource-obfuscation">resource obfuscation algorithm</a> to identify
								resources that need to be de-obfuscated before they can be used.</p>

							<p id="encryption-restrictions">The following files MUST NOT be encrypted, regardless of
								whether default or specific encryption is requested:</p>

							<ul class="nomark">
								<li>
									<code>mimetype</code>
								</li>
								<li>
									<code>META-INF/container.xml</code>
								</li>
								<li>
									<code>META-INF/encryption.xml</code>
								</li>
								<li>
									<code>META-INF/manifest.xml</code>
								</li>
								<li>
									<code>META-INF/metadata.xml</code>
								</li>
								<li>
									<code>META-INF/rights.xml</code>
								</li>
								<li>
									<code>META-INF/signatures.xml</code>
								</li>
								<li>
									<a>
										<code>Package Document</code>
									</a>
								</li>
							</ul>

							<p>Signed resources MAY subsequently be encrypted using the Decryption Transform for XML
								Signature [[!XMLENC-DECRYPT]]. This feature enables an application such as an OCF agent
								to distinguish data that was encrypted before signing from data that was encrypted after
								signing. Only data that was encrypted after signing MUST be decrypted before computing
								the digest used to validate the signature.</p>

							<aside class="example">
								<p>In the following example, adapted from <a
										href="https://www.w3.org/TR/2002/REC-xmlenc-core-20021210/#sec-eg-Symmetric-Key"
										>Section 2.2.1 </a> of [[!XMLENC-CORE1]] the resource <code>image.jpeg</code> is
									encrypted using a symmetric key algorithm (AES) and the symmetric key is further
									encrypted using an asymmetric key algorithm (RSA) with a key of John Smith.</p>
								<pre>
&lt;encryption
    xmlns ="urn:oasis:names:tc:opendocument:xmlns:container"
    xmlns:enc="http://www.w3.org/2001/04/xmlenc#"
    xmlns:ds="http://www.w3.org/2000/09/xmldsig#"&gt;
    &lt;enc:EncryptedKey Id="EK"&gt;
        &lt;enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"/&gt;
        &lt;ds:KeyInfo&gt;
            &lt;ds:KeyName&gt;John Smith&lt;/ds:KeyName&gt;
        &lt;/ds:KeyInfo&gt;
        &lt;enc:CipherData&gt;
            &lt;enc:CipherValue&gt;xyzabc&lt;/enc:CipherValue&gt;
        &lt;/enc:CipherData&gt;
    &lt;/enc:EncryptedKey&gt;
    &lt;enc:EncryptedData Id="ED1"&gt;
        &lt;enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#kw-aes128"/&gt;
        &lt;ds:KeyInfo&gt;
            &lt;ds:RetrievalMethod URI="#EK"
                Type="http://www.w3.org/2001/04/xmlenc#EncryptedKey"/&gt;
        &lt;/ds:KeyInfo&gt;
        &lt;enc:CipherData&gt;
            &lt;enc:CipherReference URI="image.jpeg"/&gt;
        &lt;/enc:CipherData&gt;
    &lt;/enc:EncryptedData&gt;
&lt;/encryption&gt;
                    </pre>
							</aside>

							<section id="sec-enc-compression">
								<h6>Order of Compression and Encryption</h6>

								<p>When stored in a ZIP container, streams of data with <a>Non-Codec</a> content types
									SHOULD be compressed before they are encrypted. Deflate compression MUST be used.
									This practice ensures that file entries stored in the ZIP container have a smaller
									size.</p>

								<p>Streams of data with <a>Codec</a> content types SHOULD NOT be compressed before they
									are encrypted. In such cases, additional compression would introduce unnecessary
									processing overhead at production time (especially with large resource files) and
									would impact audio/video playback performance at consumption time. In some cases,
									the combination of compression with some encryption schemes might even compromise
									the ability of Reading Systems to handle partial content requests (e.g. HTTP byte
									ranges), due to the technical impossibility to determine the length of the full
									resource ahead of media playback (e.g. HTTP Content-Length header).</p>

								<p>Streams of data that are compressed before they are encrypted SHOULD provide
									additional <code>EncryptionProperties</code> metadata to specify the size of the
									initial resource (i.e., before compression and encryption), as per the
										<code>Compression</code> XML element defined below. Streams of data that are not
									compressed before they are encrypted MAY provide the additional
										<code>EncryptionProperties</code> metadata to specify the size of the initial
									resource (i.e., before encryption).</p>

								<dl class="elemdef" id="elemdef-enc-Compression">
									<dt>Element Name</dt>
									<dd>
										<p>
											<code>Compression</code>
										</p>
									</dd>
									<dt>Namespace</dt>
									<dd>
										<p>
											<code>http://www.idpf.org/2016/encryption#compression</code>
										</p>
									</dd>
									<dt>Usage</dt>
									<dd>
										<p>OPTIONAL child of <code>EncryptionProperty</code>.</p>
									</dd>
									<dt>Attributes</dt>
									<dd>
										<dl class="variablelist">
											<dt>Method <code>[required]</code></dt>
											<dd>
												<p>Identifies the compression method used.</p>
												<p>Value is either "<code>0</code>" (no compression) or "<code>8</code>"
													(Deflate algorithm).</p>
											</dd>
											<dt>OriginalLength <code>[required]</code></dt>
											<dd>
												<p>Represents the size of the initial resource (number of bytes).</p>
												<p>Value is a positive integer.</p>
											</dd>
										</dl>
									</dd>
									<dt>Content Model</dt>
									<dd>
										<p>Empty</p>
									</dd>
								</dl>

								<aside class="example">
									<p>The following example shows an MP4 file that that has been Deflate compressed and
										whose original size was 3500000 bytes.</p>
									<pre>&lt;encryption xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;enc:EncryptedData xmlns:enc="http://www.w3.org/2001/04/xmlenc#"&gt;
        &#8230;
        &lt;enc:CipherData&gt;
            &lt;enc:CipherReference URI="OEPBS/video.mp4"/&gt;
        &lt;/enc:CipherData&gt;
        &lt;enc:EncryptionProperties&gt;
            &lt;enc:EncryptionProperty xmlns:ns="http://www.idpf.org/2016/encryption#compression"&gt;
                &lt;ns:Compression Method="8" OriginalLength="3500000"/&gt;
            &lt;/enc:EncryptionProperty&gt;
        &lt;/enc:EncryptionProperties&gt;
        &#8230;
    &lt;/enc:EncryptedData&gt;
&lt;/encryption&gt;</pre>
								</aside>
							</section>
						</section>

						<section id="sec-container-metainf-manifest.xml">
							<h6>Manifest File (<code>manifest.xml</code>)</h6>

							<p>The OPTIONAL <code>manifest.xml</code> file in the <code>META-INF</code> directory
								provides a manifest of files in the Container.</p>

							<p>The OCF specification does not mandate a format for the manifest.</p>

							<p>Note that <a>Package Documents</a> specify the only manifests used for processing <a>EPUB
									Publications</a>. Ancillary manifest information contained in the ZIP archive or in
								the OPTIONAL <code>manifest.xml</code> file MUST NOT be used for processing an EPUB
								Publication.</p>

							<div class="note">This feature exists only for compatibility with [[ODF]].</div>
						</section>

						<section id="sec-container-metainf-metadata.xml">
							<h6>Metadata File (<code>metadata.xml</code>)</h6>

							<p>The OPTIONAL <code>META-INF/metadata.xml</code> file in the <code>META-INF</code>
								directory, if present, MUST be used for container-level metadata.</p>

							<p>If the <code>metadata.xml</code> file is present, its contents SHOULD be only
								namespace-qualified elements [[!XML-NAMES]]. The file SHOULD contain the root element
									<code>metadata</code> in the namespace
									<code>http://www.idpf.org/2013/metadata</code>, but other root elements are allowed
								for backwards compatibility. Reading Systems SHOULD ignore <code>metadata.xml</code>
								files with unrecognized root elements.</p>

							<p>This version of the OCF specification does not define metadata for use in the
									<code>metadata.xml</code> file. Container-level metadata MAY be defined in future
								versions of this specification and in EPUB extension specifications.</p>
						</section>

						<section id="sec-container-metainf-rights.xml">
							<h6>Rights Management File (<code>rights.xml</code>)</h6>

							<p>The OPTIONAL <code>rights.xml</code> file in the <code>META-INF</code> directory is
								reserved for digital rights management (DRM) information for trusted exchange of EPUB
								Publications among rights holders, intermediaries, and users.</p>

							<p>This version of the OCF specification does not require a specific format for DRM
								information, but a future version might. The contents of the <code>rights.xml</code>
								SHOULD be only namespace-qualified elements [[!XML-NAMES]] to avoid collision with a
								future format.</p>

							<p>When the <code>rights.xml</code> file is not present, no part of the container is rights
								governed at the container level. Rights expressions might exist within the EPUB
								Publications.</p>

							<p>If the <code>rights.xml</code> file is not present, no part of the OCF Abstract Container
								is rights governed.</p>
						</section>

						<section id="sec-container-metainf-signatures.xml">
							<h6>Digital Signatures File (<code>signatures.xml</code>)</h6>

							<div class="note">
								<p>Adding a digital signature is not a guarantee that an EPUB cannot be tampered with,
									since Reading Systems are not required to check signatures.</p>
							</div>

							<p>The OPTIONAL <code>signatures.xml</code> file in the <code>META-INF</code> directory
								holds digital signatures for the container and its contents. The contents of this file
								MUST be valid to the schema in <a href="#app-schema-signatures"></a>.</p>

							<p>The root element of the <code>signatures.xml</code> file is the <code>signatures</code>
								element. This element contains child elements of type <code>Signature</code>, as defined
								by [[!XMLDSIG-CORE1]]. Signatures can be applied to an EPUB Publication as a whole or to
								its parts and can specify the signing of any kind of data (i.e., not just XML).</p>

							<p>When the <code>signatures.xml</code> file is not present, no part of the container is
								digitally signed at the container level. Digital signing might exist within the <a>EPUB
									Publication</a>.</p>

							<p id="sig-container">When a data signature is created for the container, the signature
								SHOULD be added as the last child <code>Signature</code> element of the
									<code>signatures</code> element.</p>

							<div class="note">
								<p>Each <code>Signature</code> in the <code>signatures.xml</code> file identifies by IRI
									the data to which the signature applies, using the [[XMLDSIG-CORE1]]
										<code>Manifest</code> element and its <code>Reference</code> sub-elements.
									Individual contained files might be signed separately or together. Separately
									signing each file creates a digest value for the resource that can be validated
									independently. This approach might make a Signature element larger. If files are
									signed together, the set of signed files can be listed in a single XML Signature
										<code>Manifest</code> element and referenced by one or more
										<code>Signature</code> elements.</p>
							</div>

							<p id="sig-restrictions">Any or all files in the container can be signed in their entirety,
								except for the <code>signatures.xml</code> file since that file will contain the
								computed signature information. Whether and how the <code>signatures.xml</code> file is
								signed depends on the objective of the signer.</p>

							<p>If the signer wants to allow signatures to be added or removed from the container without
								invalidating the signer's signature, the <code>signatures.xml</code> file SHOULD NOT be
								signed.</p>

							<p>If the signer wants any addition or removal of a signature to invalidate the signer’s
								signature, the Enveloped Signature transform defined in <a
									href="https://www.w3.org/TR/2008/REC-xmldsig-core-20080610/#sec-EnvelopedSignature"
									>Section 6.6.4</a> of [[!XMLDSIG-CORE1]] can be used to sign the entire preexisting
								signature file excluding the <code>Signature</code> being created. This transform would
								sign all previous signatures, and it would become invalid if a subsequent signature were
								added to the package.</p>

							<div class="note">
								<p>If the signer wants the removal of an existing signature to invalidate the signer’s
									signature, but also wants to allow the addition of signatures, an XPath transform
									could be used to sign just the existing signatures. The details of such a transform
									are outside the scope of this specification, however.</p>
							</div>

							<p>The [[!XMLDSIG-CORE1]] specification does not associate any semantics with a signature;
								an agent might include semantic information, for example, by adding information to the
								Signature element that describes the signature. The [[!XMLDSIG-CORE1]] specification
								describes how additional information can be added to a signature, such as by use the
									<code>SignatureProperties</code> element.</p>

							<aside class="example">
								<p>The following XML expression shows the content of an example
										<code>signatures.xml</code> file. It is based on the examples found in <a
										href="https://www.w3.org/TR/2008/REC-xmldsig-core-20080610/#sec-Overview"
										>Section 2</a> of [[!XMLDSIG-CORE1]]. It contains one signature, and the
									signature applies to two resources, <code class="filename">EPUB/book.xhtml</code>
									and <code>EPUB/images/cover.jpeg</code>, in the container.</p>
								<pre>
&lt;signatures xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;Signature Id="sig" xmlns="http://www.w3.org/2000/09/xmldsig#"&gt;
        &lt;SignedInfo&gt;
            &lt;CanonicalizationMethod 
                Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/&gt;
            &lt;SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#dsa-sha1"/&gt;
            &lt;Reference URI="#Manifest1"&gt;
                &lt;DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/&gt;
                &lt;DigestValue&gt;j6lwx3rvEPO0vKtMup4NbeVu8nk=&lt;/DigestValue&gt;
            &lt;/Reference&gt;
        &lt;/SignedInfo&gt;
        &lt;SignatureValue&gt;…&lt;/SignatureValue&gt;
        &lt;KeyInfo&gt;
            &lt;KeyValue&gt;
                &lt;DSAKeyValue&gt;
                    &lt;P&gt;…&lt;/P&gt;&lt;Q&gt;…&lt;/Q&gt;&lt;G&gt;…&lt;/G&gt;&lt;Y&gt;…&lt;/Y&gt; 
                &lt;/DSAKeyValue&gt;
            &lt;/KeyValue&gt;
        &lt;/KeyInfo&gt;
        &lt;Object&gt;
            &lt;Manifest Id="Manifest1"&gt;
                &lt;Reference URI="EPUB/book.xhtml"&gt;                    
                    &lt;Transforms&gt;                                                
                        &lt;Transform
                            Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/&gt;                        
                    &lt;/Transforms&gt;
                    &lt;DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/&gt;
                    &lt;DigestValue&gt;&lt;/DigestValue&gt;
                &lt;/Reference&gt;
                &lt;Reference URI="EPUB/images/cover.jpeg"&gt;
                    &lt;Transforms&gt;                                                
                        &lt;Transform
                            Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/&gt;                        
                    &lt;/Transforms&gt;
                    &lt;DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/&gt;
                    &lt;DigestValue&gt;&lt;/DigestValue&gt;
                &lt;/Reference&gt;
            &lt;/Manifest&gt;
        &lt;/Object&gt;
    &lt;/Signature&gt; 
&lt;/signatures&gt;
                    </pre>
							</aside>
						</section>
					</section>
				</section>
			</section>

			<section id="sec-container-zip">
				<h3>OCF ZIP Container</h3>

				<section id="sec-container-zip-intro" class="informative">
					<h4>Introduction</h4>

					<p>An <a>OCF ZIP Container</a> is a physical single-file manifestation of an <a>OCF Abstract
							Container</a>. The Container is used:</p>

					<ul>
						<li>
							<p>to exchange in-progress <a>EPUB Publication</a> between different individuals and/or
								different organizations;</p>
						</li>
						<li>
							<p>to provide EPUB Publications from a publisher or conversion house to the distribution or
								sales channel; and</p>
						</li>
						<li>
							<p>to deliver EPUB Publications to <a>EPUB Reading Systems</a> or users.</p>
						</li>
					</ul>

				</section>

				<section id="sec-zip-container-zipreqs">
					<h4>ZIP File Requirements</h4>

					<p>An <a>OCF ZIP Container</a> uses the ZIP format as specified by [[!ZIP]], but with the following
						constraints and clarifications:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-zip-abstr">The contents of the OCF ZIP Container MUST be a conforming <a
									href="#sec-container-abstract">OCF Abstract Container</a>.</p>
						</li>
						<li>
							<p id="confreq-zip-mult">OCF ZIP Containers MUST NOT use the features in the ZIP application
								note [[!ZIP]] that allow ZIP files to be spanned across multiple storage media or be
								split into multiple files.</p>
						</li>
						<li>
							<p id="confreq-zip-comp">OCF ZIP Containers MUST include only stored (uncompressed) and
								Deflate-compressed ZIP entries within the ZIP archive.</p>
						</li>
						<li>
							<p id="confreq-zip-64">OCF ZIP Containers MAY use the ZIP64 extensions defined as "Version
								1" in section V, subsection G of the application note [[!ZIP]] and SHOULD use only those
								extensions when the content requires them.</p>
						</li>
						<li>
							<p id="confreq-zip-enc">OCF ZIP Containers MUST NOT use the encryption features defined by
								the ZIP format; instead, encryption MUST be done using the features described in <a
									href="#sec-container-metainf-encryption.xml"></a>.</p>
						</li>
						<li>
							<p id="confreq-zip-utf8">OCF ZIP Containers MUST encode File System Names using UTF-8
								[[!Unicode]].</p>
						</li>
					</ul>

					<p>The following constraints apply to specific fields in the OCF ZIP Container archive:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-zip-fld-version">In the local file header table, OCF ZIP Containers MUST set
								the <code>version needed to extract</code> fields to the values <code>10</code>,
									<code>20</code> or <code>45</code> to match the maximum version level needed by the
								given file (e.g., <code>20</code> if Deflate is needed, <code>45</code> if ZIP64 is
								needed).</p>
						</li>
						<li>
							<p id="confreq-zip-fld-comp">In the local file header table, OCF ZIP Containers MUST set the
									<code>compression</code> method field to the values <code>0</code> or
								<code>8</code>.</p>
						</li>
					</ul>
				</section>

				<section id="sec-zip-container-mime">
					<h4>OCF ZIP Container Media Type Identification</h4>

					<p>The first file in the <a>OCF ZIP Container</a> MUST be the <code>mimetype</code> file, which
						meets the following requirements: </p>
					<ul>
						<li>The contents of the <code>mimetype</code> file MUST be the MIME media type [[!RFC2046]]
							string <code>application/epub+zip</code> encoded in US-ASCII [[!US-ASCII]].</li>
						<li>The <code>mimetype</code> file MUST NOT contain any leading or trailing padding or white
							space.</li>
						<li>The <code>mimetype</code> file MUST NOT begin with the Unicode byte order mark U+FEFF.</li>
						<li>The <code>mimetype</code> file MUST NOT be compressed or encrypted, and there MUST NOT be an
							extra field in its ZIP header.</li>
					</ul>

					<div class="note">
						<p>Refer to <a href="#app-media-type"></a> for further information about the
								<code>application/epub+zip</code> media type.</p>
					</div>
				</section>
			</section>

			<section id="sec-resource-obfuscation">
				<h3>Resource Obfuscation</h3>

				<section id="fobfus-intro" class="informative">
					<h4>Introduction</h4>

					<p>Since an <a>OCF ZIP Container</a> is fundamentally a ZIP file, commonly available ZIP tools can
						be used to extract any unencrypted content stream from the package. Moreover, the nature of ZIP
						files means that their contents might appear like any other native container on some systems
						(e.g., a folder).</p>

					<p>While this simplicity of ZIP files is quite useful, it also poses a problem when ease of
						extraction of resources is not a desired side-effect of not encrypting them. An <a>Author</a>
						who wishes to include a third-party font, for example, typically does not want that font
						extracted and re-used by others. More critically, many commercial fonts allow embedding, but
						embedding a font implies making it an integral part of the EPUB Publication, not just providing
						the original font file along with the content.</p>

					<p>Since integrated ZIP support is so ubiquitous in modern operating systems, simply placing a font
						in the ZIP archive is insufficient to signify that it is not intended to be reused in other
						contexts. This uncertainty can undermine the otherwise useful font embedding capability of EPUB
						Publications.</p>

					<p>To discourage reuse of the font, some font vendors might only allow use of their fonts in EPUB
						Publications if those fonts are bound in some way to the EPUB Publication. That is, if the font
						file cannot be installed directly for use on an operating system with the built-in tools of that
						computing device, and it cannot be directly used by other EPUB Publications.</p>

					<p>It is beyond the scope of this specification to provide a digital rights management or
						enforcement system for such resources. This section instead defines a method of obfuscation that
						will require additional work on the part of the final OCF recipient to gain general access to
						any obfuscated resources.</p>

					<p>Note that no claim is made in this specification that this constitutes encryption, nor does it
						guarantee that the resource will be secure from copyright infringement. It is hoped, however,
						that this algorithm will meet the requirements of most vendors who require some assurance that
						their resources cannot simply be extracted by unzipping the Container.</p>

					<p>In the case of fonts, the primary use case for obfuscation, the defined mechanism will simply
						provide a stumbling block for those who are unaware of the license details. It will not prevent
						a determined user from gaining full access to the font. Given an OCF Container, it is possible
						to apply the algorithms defined to extract the raw font file. Whether this method of obfuscation
						satisfies the requirements of individual font licenses remains a question for the licensor and
						licensee.</p>
				</section>

				<section id="obfus-keygen">
					<h4>Obfuscation Key</h4>

					<p>The key used in the obfuscation algorithm is derived from the <a>Unique Identifier</a>.</p>

					<p>All white space characters, as defined in <a
							href="https://www.w3.org/TR/2008/REC-xml-20081126/#sec-common-syn">section 2.3 of the XML
							1.0 specification</a> [[!XML]], MUST be removed from this identifier — specifically, the
						Unicode code points <code>U+0020</code>, <code>U+0009</code>, <code>U+000D</code> and
							<code>U+000A</code>.</p>

					<p>A SHA-1 digest of the UTF-8 representation of the resulting string SHOULD be generated as
						specified by the Secure Hash Standard [[!FIPS-180-4]]. This digest is then directly used as the
						key for the algorithm.</p>
				</section>

				<section id="obfus-algorithm">
					<h4>Obfuscation Algorithm</h4>

					<p>The algorithm employed to obfuscate resource consists of modifying the first 1040 bytes (~1KB) of
						the file. In the unlikely event that the file is less than 1040 bytes, then the entire file will
						be modified.</p>

					<p>To obfuscate the original data, the result of performing a logical exclusive or (XOR) on the
						first byte of the raw file and the first byte of the <a href="#obfus-keygen">obfuscation key</a>
						is stored as the first byte of the embedded resource.</p>

					<p>This process is repeated with the next byte of source and key and continues until all bytes in
						the key have been used. At this point, the process continues starting with the first byte of the
						key and 21st byte of the source. Once 1040 bytes have been encoded in this way (or the end of
						the source is reached), any remaining data in the source is directly copied to the
						destination.</p>

					<p>Obfuscation of resources MUST occur before they are compressed and added to the OCF Container.
						Note that as obfuscation is not encryption, this requirement is not a violation of the one in <a
							href="#sec-container-metainf-encryption.xml"></a> to compress resources before encrypting
						them.</p>

					<aside class="example">
						<p>The following pseudo-code exemplifies the obfuscation algorithm.</p>
						<pre class="programlisting">
set ocf to OCF container file
set source to file
set destination to obfuscated file
set keyData to key for file
set outer to 0
while outer &lt; 52 and not (source at EOF)
    set inner to 0
    while inner &lt; 20 and not (source at EOF)
        read 1 byte from source     //Assumes read advances file position
        set sourceByte to result of read
        set keyByte to byte inner of keyData
        set obfuscatedByte to (sourceByte XOR keyByte)
        write obfuscatedByte to destination
        increment inner
    end while
    increment outer
end while
if not (source at EOF) then
    read source to EOF
    write result of read to destination
end if
Deflate destination
store destination as source in ocf
            </pre>
					</aside>

					<p>To get the original font data back, the process is simply reversed: the source file becomes the
						obfuscated data, and the destination file will contain the raw data.</p>

					<div class="note">
						<p>The obfuscation of fonts was allowed prior to EPUB 3.0.1, but the order of obfuscation and
							compression was not specified. As a result, invalid fonts might be encountered after
							decompression and de-obfuscation. In such instances, de-obfuscating the data before
							inflating it might return a valid font. This specification does not require support for this
							method of retrieval, as it is not conforming with this version of this specification, but it
							needs to be considered when supporting EPUB 3 content generally.</p>
					</div>

				</section>

				<section id="obfus-specifying">
					<h4>Specifying Obfuscated Resources</h4>

					<p>Although not technically encrypted data, all obfuscated resources MUST have an entry in the <code
							class="filename">encryption.xml</code> file accompanying the EPUB Publication (see <a
							href="#sec-container-metainf-encryption.xml"></a>).</p>

					<p>An <code>EncryptedData</code> element MUST be specified for each obfuscated resource. Each
							<code>EncryptedData</code> element MUST contain a child <code>EncryptionMethod</code>
						element whose <code>Algorithm</code> attribute is set to the value
							<code>http://www.idpf.org/2008/embedding</code>. The presence of this attribute signals the
						use of the algorithm described in this specification. The path to the obfuscated resource MUST
						be listed in the <code>CipherReference</code> child of the <code>CipherData</code> element.</p>

					<aside class="example">
						<p>The following example shows an entry for an obfuscated font in the
								<code>encryption.xml</code> file.</p>
						<pre>
&lt;encryption 
    xmlns="urn:oasis:names:tc:opendocument:xmlns:container" 
    xmlns:enc="http://www.w3.org/2001/04/xmlenc#"&gt;
    &lt;enc:EncryptedData&gt; 
        &lt;enc:EncryptionMethod Algorithm="http://www.idpf.org/2008/embedding"/&gt; 
        &lt;enc:CipherData&gt; 
            &lt;enc:CipherReference URI="EPUB/Fonts/BKANT.TTF"/&gt;  
        &lt;/enc:CipherData&gt; 
    &lt;/enc:EncryptedData&gt;  
&lt;/encryption&gt; 

                </pre>
					</aside>

					<p>To prevent trivial copying of the embedded resource to other EPUB Publications, the <a
							href="#obfus-keygen">obfuscation key</a> MUST NOT be provided in the
							<code>encryption.xml</code> file.</p>
				</section>
			</section>
		</section>
		<section id="sec-media-overlays">
			<h2>Media Overlays</h2>

			<section id="sec-overlays-introduction" class="informative">
				<h4>Introduction</h4>

				<p>Synchronized audio narration is found in mainstream ebooks, educational tools and ebooks formatted
					for persons with print disabilities. In EPUB 3, these types of books are created using Media Overlay
					Documents to describe the timing for the pre-recorded audio narration and how it relates to the EPUB
					Content Document markup. The file format for Media Overlays is defined as a subset of [[SMIL3]], a
					W3C recommendation for representing synchronized multimedia information in XML.</p>

				<p>The text and audio synchronization enabled by Media Overlays provides enhanced accessibility for any
					user who has difficulty following the text of a traditional book. Media Overlays also provide a
					continuous listening experience for readers who are unable to read the text for any reason,
					something that traditional audio embedding techniques cannot offer. They are even useful for
					purposes not traditionally considered accessibility concerns (e.g., for language learning).</p>

				<p>The Media Overlays feature is designed to be transparent to <a>EPUB Reading Systems</a> that do not
					support the feature. The inclusion of Media Overlays in an EPUB Publication has no impact on the
					ability of Media Overlay-unaware Reading Systems to render the EPUB Publication as though the Media
					Overlays are not present.</p>

				<p>Media Overlays in EPUB are not an equivalent to audiobooks, as audiobooks are primarily audio-based
					with text occasionally provided as an alternate format. The W3C [[Audiobooks]] recommendation is
					designed for building audio publications.</p>

				<p>Although future versions of this specification might incorporate support for video media (e.g.,
					synchronized text/sign-language books), this version supports only synchronizing audio media with
					the EPUB Content Document.</p>
			</section>

			<section id="sec-overlay-docs">
				<h3>Media Overlay Documents</h3>

				<section id="sec-overlay-req">
					<h4>Media Overlay Document Requirements</h4>

					<p>A <a>Media Overlay Document</a> has to meet the following requirements:</p>

					<ul class="conformance-list">
						<li>
							<p id="confreq-mo-docprops-schema">It MUST be valid to the Media Overlays schema as defined
								in <a href="#app-schema-overlays"></a> and conform to all content conformance
								constraints expressed in <a href="#sec-overlays-def"></a>.</p>
						</li>
						<li>
							<p id="confreq-mo-docprops-references">It MAY refer to more than one EPUB Content Document,
								but an EPUB Content Document MUST NOT be referenced by more than one Media Overlay
								Document.</p>
						</li>
						<li>
							<p id="confreq-mo-docprops-semantics">It SHOULD use <a href="#sec-docs-structural-semantic"
									>semantic markup</a> where appropriate.</p>
						</li>
					</ul>
				</section>

				<section id="sec-overlays-def">
					<h3>Media Overlay Document Definition</h3>

					<p>All elements [[!XML]] defined in this section are in the <code>https://www.w3.org/ns/SMIL</code>
						namespace [[!XML-NAMES]] unless otherwise specified.</p>

					<section id="sec-smil-smil-elem">
						<h5>The <code>smil</code> Element</h5>

						<p>The <code>smil</code> element is the root element of all Media Overlay Documents.</p>

						<dl class="elemdef" id="elemdef-smil">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>smil</code>
								</p>
							</dd>
							<dt>Usage</dt>
							<dd>
								<p>The <code>smil</code> element is the root element of the Media Overlay Document.</p>
							</dd>
							<dt>Attributes</dt>
							<dd>
								<dl>
									<dt>
										<code>version</code>
										<code>[required]</code>
									</dt>
									<dd>
										<p>Specifies the version number of the [[!SMIL3]] specification to which the
											Media Overlay adheres.</p>
										<p>This attribute MUST have the value "<code>3.0</code>".</p>
									</dd>
									<dt>
										<code>id</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The ID [[!XML]] of the element, which MUST be unique within the document
											scope.</p>
									</dd>
									<dt id="attrdef-smil-prefix">
										<code>epub:prefix</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>Declares additional metadata vocabulary prefixes.</p>
										<p>Refer to <a href="#sec-docs-structural-semantic"></a> for more
											information.</p>
									</dd>
								</dl>
							</dd>
							<dt>Content Model</dt>
							<dd>
								<p>In this order:</p>
								<ul class="nomark">
									<li>
										<p>
											<a href="#elemdef-smil-head">
												<code>head</code>
											</a>
											<code>[0 or 1]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-smil-body">
												<code>body</code>
											</a>
											<code>[exactly 1]</code>
										</p>
									</li>
								</ul>
							</dd>
						</dl>
					</section>

					<section id="sec-smil-head-elem">
						<h5>The <code>head</code> Element</h5>

						<p>The <code>head</code> element is the container for metadata in the Media Overlay
							Document.</p>

						<dl class="elemdef" id="elemdef-smil-head">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>head</code>
								</p>
							</dd>
							<dt>Usage</dt>
							<dd>
								<p>The <code>head</code> element is the OPTIONAL first child of the <a
										href="#elemdef-smil"><code>smil</code></a> element.</p>
							</dd>
							<dt>Attributes</dt>
							<dd>
								<p>None</p>
							</dd>
							<dt>Content Model</dt>
							<dd>
								<p>
									<a href="#elemdef-smil-metadata">
										<code>metadata</code>
									</a>
									<code>[0 or 1]</code>
								</p>
							</dd>
						</dl>

						<p>As this specification does not define any metadata properties that have to occur in the Media
							Overlay Document, the <code>head</code> element is OPTIONAL.</p>
					</section>

					<section id="sec-smil-metadata-elem">
						<h5>The <code>metadata</code> Element</h5>

						<p>The <code>metadata</code> element represents metadata for the Media Overlay Document. The
								<code>metadata</code> element is an extension point that allows the inclusion of
							metadata from any metainformation structuring language.</p>

						<dl class="elemdef" id="elemdef-smil-metadata">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>metadata</code>
								</p>
							</dd>
							<dt>Usage</dt>
							<dd>
								<p>As a child of the <a href="#elemdef-smil-head"><code>head</code></a> element.</p>
							</dd>
							<dt>Attributes</dt>
							<dd>
								<p>None</p>
							</dd>
							<dt>Content Model</dt>
							<dd>
								<p><code>[0 or more]</code> elements from any namespace</p>
							</dd>
						</dl>

						<p>This specification defines no metadata properties that MUST occur in the Media Overlay
							Document; the <code>metadata</code> element is provided for custom metadata
							requirements.</p>
					</section>

					<section id="sec-smil-body-elem">
						<h5>The <code>body</code> Element</h5>

						<p>The <code>body</code> element is the starting point for the presentation contained in the
							Media Overlay Document. It contains the main sequence of <code>par</code> and
								<code>seq</code> elements.</p>

						<dl class="elemdef" id="elemdef-smil-body">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>body</code>
								</p>
							</dd>
							<dt>Usage</dt>
							<dd>
								<p>The <code>body</code> element is the REQUIRED second child of the <a
										href="#elemdef-smil"><code>smil</code></a> element.</p>
							</dd>
							<dt>Attributes</dt>
							<dd>
								<dl>
									<dt id="addrdef-smil-body-type">
										<code>epub:type</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>An expression of the structural semantics of the corresponding element in the
												<a>EPUB Content Document</a>.</p>
										<p>The value is a white space separated list of <a href="#sec-property-datatype"
												>property</a> types. Refer to <a href="#sec-docs-structural-semantic"
											></a> for more information.</p>
									</dd>
									<dt>
										<code>id</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The ID [[!XML]] of the element, which MUST be unique within the document
											scope.</p>
									</dd>
									<dt id="attrdef-body-textref">
										<code>epub:textref</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The relative IRI reference [[!RFC3987]] of the corresponding EPUB Content
											Document, including a fragment identifier that references the specific
											element as per the [[!XPTRSH]].</p>
									</dd>
								</dl>
							</dd>
							<dt>Content Model</dt>
							<dd>
								<p>In any order:</p>
								<ul class="nomark">
									<li>
										<p>
											<a href="#elemdef-smil-seq">
												<code>seq</code>
											</a>
											<code>[0 or more]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-smil-par">
												<code>par</code>
											</a>
											<code>[0 or more]</code>
										</p>
									</li>
								</ul>
								<p>At least one <code>par</code> or <code>seq</code> is REQUIRED.</p>
							</dd>
						</dl>
					</section>

					<section id="sec-smil-seq-elem">
						<h5>The <code>seq</code> Element</h5>

						<p>The <code>seq</code> element contains media objects which are to be rendered
							sequentially.</p>

						<dl class="elemdef" id="elemdef-smil-seq">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>seq</code>
								</p>
							</dd>
							<dt>Usage</dt>
							<dd>
								<p>One or more <code>seq</code> elements MAY occur as children of the <a
										href="#elemdef-smil-body"><code>body</code> element</a> and of the <a
										href="#elemdef-smil-seq"><code>seq</code> element</a>.</p>
							</dd>
							<dt>Attributes</dt>
							<dd>
								<dl>
									<dt>
										<code>epub:type</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>An expression of the structural semantics of the corresponding element in the
												<a>EPUB Content Document</a>.</p>
										<p>The value is a white space separated list of <a href="#sec-property-datatype"
												>property</a> types. Refer to <a href="#sec-docs-structural-semantic"
											></a> for more information.</p>
									</dd>
									<dt>
										<code>id</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The ID [[!XML]] of the element, which MUST be unique within the document
											scope.</p>
									</dd>
									<dt id="attrdef-seq-textref">
										<code>epub:textref</code>
										<code>[required]</code>
									</dt>
									<dd>
										<p>The relative IRI reference [[!RFC3987]] of the corresponding EPUB Content
											Document, including a fragment identifier that references the specific
											element as per the [[!XPTRSH]].</p>
										<p>Refer to <a href="#sec-media-overlays-structure"></a> for more
											information.</p>
									</dd>
								</dl>
							</dd>
							<dt>Content Model</dt>
							<dd>
								<p>In any order:</p>
								<ul class="nomark">
									<li>
										<p>
											<a href="#elemdef-smil-seq">
												<code>seq</code>
											</a>
											<code>[0 or more]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-smil-par">
												<code>par</code>
											</a>
											<code>[0 or more]</code>
										</p>
									</li>
								</ul>
								<p>At least one <code>par</code> or <code>seq</code> is REQUIRED.</p>
							</dd>
						</dl>
					</section>

					<section id="sec-smil-par-elem">
						<h5>The <code>par</code> Element</h5>

						<p>The <code>par</code> element contains media objects which are to be rendered in parallel.</p>

						<dl class="elemdef" id="elemdef-smil-par">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>par</code>
								</p>
							</dd>
							<dt>Usage</dt>
							<dd>
								<p>One or more <code>par</code> elements MAY occur as children of the <a
										href="#elemdef-smil-body"><code>body</code></a> and <a href="#elemdef-smil-seq"
											><code>seq</code></a> elements.</p>
							</dd>
							<dt>Attributes</dt>
							<dd>
								<dl>
									<dt>
										<code>epub:type</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>An expression of the structural semantics of the corresponding element in the
												<a>EPUB Content Document</a>.</p>
										<p>The value is a white space separated list of <a href="#sec-property-datatype"
												>property</a> types. Refer to <a href="#sec-docs-structural-semantic"
											></a> for more information.</p>
									</dd>
									<dt>
										<code>id</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The ID [[!XML]] of the element, which MUST be unique within the document
											scope.</p>
									</dd>
								</dl>
							</dd>
							<dt>Content Model</dt>
							<dd>
								<p>In any order:</p>
								<ul class="nomark">
									<li>
										<p>
											<a href="#elemdef-smil-text">
												<code>text</code>
											</a>
											<code>[exactly 1]</code>
										</p>
									</li>
									<li>
										<p>
											<a href="#elemdef-smil-audio">
												<code>audio</code>
											</a>
											<code>[0 or 1]</code>
										</p>
									</li>
								</ul>
								<p>The <a href="#elemdef-smil-audio"><code>audio</code> element</a> is OPTIONAL only if
									its sibling <a href="#elemdef-smil-text"><code>text</code> element</a> refers to
									audio or video media (see <a href="#sec-audio-video"></a>), or to textual content
									intended for rendering via <a>Text-to-Speech</a> (TTS).</p>
							</dd>
						</dl>
					</section>

					<section id="sec-smil-text-elem">
						<h5>The <code>text</code> Element</h5>

						<p>The <code>text</code> element references an element in the <a>EPUB Content Document</a>. A
								<code>text</code> element typically refers to a textual element but can also refer to
							other EPUB Content Document media elements (see <a href="#sec-audio-video"></a>).</p>

						<dl class="elemdef" id="elemdef-smil-text">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>text</code>
								</p>
							</dd>
							<dt>Usage</dt>
							<dd>
								<p>As a REQUIRED child of the <a href="#elemdef-smil-par"><code>par</code></a>
									element.</p>
							</dd>
							<dt>Attributes</dt>
							<dd>
								<dl>
									<dt>
										<code>src</code>
										<code>[required]</code>
									</dt>
									<dd>
										<p>The relative IRI reference [[!RFC3987]] of the corresponding EPUB Content
											Document, including a fragment identifier that references the specific
											element as per the [[!XPTRSH]].</p>
									</dd>
									<dt>
										<code>id</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The ID [[!XML]] of the element, which MUST be unique within the document
											scope.</p>
									</dd>
								</dl>
							</dd>
							<dt>Content Model</dt>
							<dd>
								<p>Empty</p>
							</dd>
						</dl>
					</section>

					<section id="sec-smil-audio-elem">
						<h5>The <code>audio</code> Element</h5>

						<p>The <code>audio</code> element represents a clip of audio media.</p>

						<dl class="elemdef" id="elemdef-smil-audio">
							<dt>Element Name</dt>
							<dd>
								<p>
									<code>audio</code>
								</p>
							</dd>
							<dt>Usage</dt>
							<dd>
								<p>A REQUIRED child of the <a href="#elemdef-smil-par"><code>par</code> element</a>
									unless its sibling <a href="#elemdef-smil-text"><code>text</code> element</a> refers
									to audio or video media, or to textual content intended for rendering via
										<a>Text-to-Speech</a> (TTS), in which case it is OPTIONAL (see <a
										href="#sec-audio-video"></a>).</p>
							</dd>
							<dt>Attributes</dt>
							<dd>
								<dl>
									<dt>
										<code>id</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>The ID [[!XML]] of the element, which MUST be unique within the document
											scope.</p>
									</dd>
									<dt>
										<code>src</code>
										<code>[required]</code>
									</dt>
									<dd>
										<p>The relative or absolute IRI reference [[!RFC3987]] of an audio file. The
											audio file MUST be one of the audio formats listed in the <a
												href="#sec-core-media-types">Core Media Type Resources</a> table.</p>
									</dd>
									<dt id="attrdef-smil-clipBegin">
										<code>clipBegin</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>A clock value that specifies the offset into the physical media corresponding
											to the start point of an audio clip.</p>
										<p>MUST be a [[!SMIL3]] <a
												href="https://www.w3.org/TR/SMIL/smil-timing.html#q22">clock
											value</a>.</p>
										<p>See <a href="#app-clock-examples"></a>.</p>
									</dd>
									<dt id="attrdef-smil-clipEnd">
										<code>clipEnd</code>
										<code>[optional]</code>
									</dt>
									<dd>
										<p>A clock value that specifies the offset into the physical media corresponding
											to the end point of an audio clip.</p>
										<p>MUST be a [[!SMIL3]] <a
												href="https://www.w3.org/TR/SMIL/smil-timing.html#q22">clock
											value</a>.</p>
										<p>See <a href="#app-clock-examples"></a>.</p>
										<p>The chronological offset of the terminating position MUST be after the
											starting offset specified in the <code>clipBegin</code> attribute.</p>
									</dd>
								</dl>
							</dd>
							<dt>Content Model</dt>
							<dd>
								<p>Empty</p>
							</dd>
						</dl>
					</section>
				</section>
			</section>

			<section id="sec-overlay-doc-create">
				<h3>Creating Media Overlays</h3>

				<section id="sec-docs-intro" class="informative">
					<h4>Introduction</h4>

					<p>A pre-recorded narration of a publication can be represented as a series of audio clips, each
						corresponding to part of the <a>EPUB Content Document</a>. A single audio clip, for example,
						typically represents a single phrase or paragraph, but infers no order relative to the other
						clips or to the text of a document. Media Overlays solve this problem of synchronization by
						tying the structured audio narration to its corresponding text (or other media) in the EPUB
						Content Document using [[SMIL3]] markup. Media Overlays are, in fact, a simplified subset of
						SMIL 3.0 that allow the playback sequence of these clips to be defined.</p>

					<p>The SMIL elements primarily used for structuring Media Overlays are <a href="#elemdef-smil-body"
								><code>body</code></a> (used for the main sequence), <a href="#elemdef-smil-seq"
								><code>seq</code></a> (sequence) and <a href="#elemdef-smil-par"><code>par</code></a>
						(parallel). (Refer to <a href="#sec-overlays-def"></a> for more information on these and other
						SMIL elements.)</p>

					<p>The <code>par</code> element is the basic building block of an Overlay and corresponds to a
						phrase in the EPUB Content Document. The element provides two key pieces of information for
						synchronizing content: 1) the audio clip containing the narration for the phrase; and 2) a
						pointer to the associated EPUB Content Document fragment. The <code>par</code> element uses two
						media element children to represent this information: an <a href="#elemdef-smil-audio"
								><code>audio</code></a> element and a <a href="#elemdef-smil-text"><code>text</code></a>
						element. Since <code>par</code> elements render their children in parallel, the audio clip and
						EPUB Content Document fragment are played at the same time, resulting in a synchronized
						presentation.</p>

					<p>The <code>text</code> element <code>src</code> attribute references the associated phrase,
						sentence, or other segment of the EPUB Content Document by its IRI reference. The
							<code>audio</code> element <code>src</code> attribute similarly references the location of
						the corresponding audio clip and adds the OPTIONAL <a href="#attrdef-smil-clipBegin"
								><code>clipBegin</code></a> and <a href="#attrdef-smil-clipEnd"><code>clipEnd</code></a>
						attributes to indicate a specific offset within the clip.</p>

					<aside class="example">
						<p>The following example shows the Media Overlays markup for a single phrase or sentence.</p>
						<pre>&lt;par&gt;                        
    &lt;text src="chapter1.xhtml#sentence1"/&gt;
    &lt;audio src="chapter1_audio.mp3" clipBegin="23s" clipEnd="30s"/&gt;
&lt;/par&gt;</pre>
					</aside>

					<p><code>par</code> elements are placed together sequentially to form a series of phrases or
						sentences. Not every element of the EPUB Content Document will have a corresponding
							<code>par</code> element in the Media Overlay, only those relevant to the audio
						narration.</p>

					<aside class="example">
						<p>The following example shows a basic Media Overlay Document containing a sequence of phrases.
							The <code>body</code> element acts as the main sequence for the whole document.</p>
						<pre>&lt;smil xmlns="http://www.w3.org/ns/SMIL" 
      version="3.0"&gt;
    &lt;body&gt;
        &lt;par id="par1"&gt;
            &lt;text src="chapter1.xhtml#sentence1"/&gt;
            &lt;audio src="chapter1_audio.mp3" clipBegin="0s" clipEnd="10s"/&gt;
        &lt;/par&gt;
        &lt;par id="par2"&gt;
            &lt;text src="chapter1.xhtml#sentence2"/&gt;
            &lt;audio src="chapter1_audio.mp3" clipBegin="10s" clipEnd="20s"/&gt;
        &lt;/par&gt;
        &lt;par id="par3"&gt;
            &lt;text src="chapter1.xhtml#sentence3"/&gt;
            &lt;audio src="chapter1_audio.mp3" clipBegin="20s" clipEnd="30s"/&gt;
        &lt;/par&gt;
    &lt;/body&gt;
&lt;/smil&gt;</pre>
					</aside>

					<p><code>par</code> elements can also be added to <code>seq</code> elements to define more complex
						structures such as parts and chapters (see <a href="#sec-media-overlays-structure"></a>).</p>
				</section>

				<section id="sec-docs-relations">
					<h4>Relationship to the EPUB Content Document</h4>

					<div class="note">
						<p>In this section, the <a>EPUB Content Document</a> is assumed to be an <a>XHTML Content
								Document</a>. While Media Overlays can be used with <a>SVG Content Documents</a>,
							playback behavior might not be consistent and therefore interoperability is not
							guaranteed.</p>
					</div>

					<section id="sec-media-overlays-structure">
						<h5>Overlay Structure</h5>

						<p>The <a href="#elemdef-smil-body"><code>body</code></a> of a Media Overlay Document consists
							of two elements: the <a href="#elemdef-smil-par"><code>par</code> element</a> and the <a
								href="#elemdef-smil-seq"><code>seq</code> element</a>. The ordering of these elements
							MUST match the default reading order of the EPUB Content Document.</p>

						<p>The <code>par</code> element represents phrases. Each element identifies a text and audio
							component to synchronize during playback.</p>

						<p>The <code>seq</code> element represents sequences. It is used to represent nested containers
							such as sections, asides, headers, and footnotes. It allows the structure inherent in these
							containers to be retained in the Media Overlay Document.</p>

						<p>The <code>seq</code> element MUST contain an <a href="#attrdef-body-textref"
									><code>epub:textref</code> attribute</a>. The IRI [[!RFC3987]] value of this
							attribute MUST reference the corresponding structural element in an EPUB Content Document.
							As <code>seq</code> elements do not provide synchronization instructions, this attribute
							allows a Reading System to still match the element to a location in the text.</p>

						<div class="example" id="example-mo-nesting">

							<p>The following example shows a Media Overlay Document with nested <code>seq</code>
								elements, representing a chapter with both a section header and a figure.</p>
							<pre>&lt;smil xmlns="http://www.w3.org/ns/SMIL" xmlns:epub="http://www.idpf.org/2007/ops" version="3.0"&gt;
    &lt;body&gt;

        &lt;!-- a chapter --&gt;
        &lt;seq id="id1" epub:textref="chapter1.xhtml#sectionstart" epub:type="chapter"&gt;

            &lt;!-- the section title --&gt;
            &lt;par id="id2"&gt;
                &lt;text src="chapter1.xhtml#section1_title"/&gt;
                &lt;audio src="chapter1_audio.mp3"
                       clipBegin="0:23:23.84"
                       clipEnd="0:23:34.221"/&gt;
            &lt;/par&gt;

            &lt;!-- some sentences in the chapter --&gt;
            &lt;par id="id3"&gt;
                &lt;text src="chapter1.xhtml#text1"/&gt;
                &lt;audio src="chapter1_audio.mp3"
                       clipBegin="0:23:34.221"
                       clipEnd="0:23:59.003"/&gt;
            &lt;/par&gt;
            &lt;par id="id4"&gt;
                &lt;text src="chapter1.xhtml#text2"/&gt;
                &lt;audio src="chapter1_audio.mp3"
                       clipBegin="0:23:59.003"
                       clipEnd="0:24:15.000"/&gt;
            &lt;/par&gt;

            &lt;!-- a figure --&gt;
            &lt;seq id="id7" epub:textref="chapter1.xhtml#figure"&gt;
                &lt;par id="id8"&gt;
                    &lt;text src="chapter1.xhtml#photo"/&gt;
                    &lt;audio src="chapter1_audio.mp3"
                           clipBegin="0:24:18.123"
                           clipEnd="0:24:28.764"/&gt;
                &lt;/par&gt;
                &lt;par id="id9"&gt;
                    &lt;text src="chapter1.xhtml#caption"/&gt;
                    &lt;audio src="chapter1_audio.mp3"
                           clipBegin="0:24:28.764"
                           clipEnd="0:24:50.010"/&gt;
                &lt;/par&gt;
            &lt;/seq&gt;

            &lt;!-- more sentences in the chapter (outside the figure) --&gt;
            &lt;par id="id12"&gt;
                &lt;text src="chapter1.xhtml#text3"/&gt;
                &lt;audio src="chapter1_audio.mp3"
                       clipBegin="0:25:45.515"
                       clipEnd="0:26:30.203"/&gt;
            &lt;/par&gt;
            &lt;par id="id13"&gt;
                &lt;text src="chapter1.xhtml#text4"/&gt;
                &lt;audio src="chapter1_audio.mp3"
                       clipBegin="0:26:30.203"
                       clipEnd="0:27:15.000"/&gt;
            &lt;/par&gt;

        &lt;/seq&gt;
    &lt;/body&gt;
&lt;/smil&gt;
</pre>
						</div>

						<div class="note">
							<p>The reason for grouping structures like sections, figures, tables, and footnotes in a
									<code>seq</code> element is so that their start and end positions can be identified
								during playback. Reading Systems can then offer playback options tailored to the layout
								of the content, such as jumping past a long figure, turning off rendering of page break
								announcements (see <a href="#sec-behaviors-skip-escape"></a>), or customizing the
								reading mode to suit structures such as tables.</p>
						</div>

						<aside class="example">
							<p>The following example shows the EPUB Content Document that corresponds to the <a
									href="#example-mo-nesting">previous Media Overlay example</a>.</p>
							<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:epub="http://www.idpf.org/2007/ops" 
      xml:lang="en" 
     &gt;
    &lt;head&gt;
        &lt;title&gt;Media Overlays Example of EPUB Content Document&lt;/title&gt;
    &lt;/head&gt;
    &lt;body id="sec1"&gt;
        &lt;section id="sectionstart" epub:type="chapter"&gt;
            &lt;h1 id="section1_title"&gt;The Section Title&lt;/h1&gt;
            &lt;p id="text1"&gt;The first phrase of the main text body.&lt;/p&gt;
            &lt;p id="text2"&gt;The second phrase of the main text body.&lt;/p&gt;
            &lt;figure id="figure"&gt;
                &lt;img id="photo" 
                     src="photo.png" 
                     alt="a photograph for which there is a caption" /&gt;
                &lt;figcaption id="caption"&gt;The photo caption&lt;/figcaption&gt;
            &lt;/figure&gt;
            &lt;p id="text3"&gt;The third phrase of the main text body.&lt;/p&gt;
            &lt;p id="text4"&gt;The fourth phrase of the main text body.&lt;/p&gt;
        &lt;/section&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>
						</aside>
					</section>

					<section id="sec-media-overlays-granularity" class="informative">
						<h5>Overlay Granularity</h5>

						<p>Media Overlay <a href="#elemdef-smil-text"><code>text</code> elements'</a>
							<code>src</code> attributes refer to <a>EPUB Content Document</a> elements by their IDs
							[[XML]]. The granularity level of the Media Overlay therefore depends on how the EPUB
							Content Document is marked up. If the finest level of markup is at the paragraph level, then
							that is the finest possible level at which Media Overlay synchronization can be authored.
							Likewise, if sub-paragraph markup is available, such as [[HTML]] <a
								href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-span-element"
									><code>span</code></a> elements representing phrases or sentences, then finer
							granularity is possible in the Media Overlay. Finer granularity gives users more precise
							results for synchronized playback when navigating by word or phrase and when searching the
							text but increases the file size of the Media Overlay Documents.</p>
					</section>

					<section id="sec-audio-video">
						<h5>Embedded Media</h5>

						<p>Any <a>EPUB Content Document</a> associated with a Media Overlay MAY contain embedded media
							such as video, audio, and images. The Media Overlay <a href="#elemdef-smil-text"
									><code>text</code> element</a> MAY be used in such instances to reference the
							embedded media by its ID [[!XML]] value.</p>

						<p>When a <code>text</code> element references embedded media that contains audio, the <a
								href="#elemdef-smil-audio"><code>audio</code></a> sibling element is OPTIONAL.</p>

						<p><a>Authors</a> SHOULD avoid using scripts to control playback of referenced embedded EPUB
							Content Document media, as this might conflict with Media Overlays playback behavior.</p>
					</section>

					<section id="sec-tts">
						<h5>Text-to-Speech Rendering</h5>

						<p>This specification allows the use of <a>Text-to-Speech</a> (TTS) in addition to pre-recorded
							audio clips. When a Media Overlay <a href="#elemdef-smil-text"><code>text</code> element</a>
							with no sibling <a href="#elemdef-smil-audio"><code>audio</code> element</a> references an
							element within the target <a>EPUB Content Document</a>, the contents of that referenced
							element MUST be appropriate for rendering via TTS. For example, it could be a textual EPUB
							Content Document element or contain a text fallback.</p>
					</section>
				</section>

				<section id="sec-docs-structural-semantic">
					<h4>Structural Semantics in Overlays</h4>

					<p>To express <a href="#app-structural-semantics">structural semantics</a> in <a>Media Overlay
							Documents</a>, the <a href="#attrdef-epub-type"><code>epub:type</code> attribute</a> MAY be
						specified on <a href="#elemdef-smil-par"><code>par</code></a>, <a href="#elemdef-smil-seq"
								><code>seq</code></a>, and <a href="#elemdef-smil-body"><code>body</code></a>
						elements.</p>

					<p>The <code>epub:type</code> attribute facilitates Reading System behavior appropriate for the
						semantic type(s) indicated. Examples of these behaviors are <a href="#sec-behaviors-skip-escape"
							>skippability and escapability</a> and <a
							href="https://www.w3.org/TR/epub-rs-33/#note-table-reading-mode">table reading mode</a>
						[[EPUB-RS-33]].</p>

					<aside class="example">
						<p>The following example shows the semantic markup for a Media Overlay containing a figure.</p>
						<pre>&lt;smil xmlns="http://www.w3.org/ns/SMIL" 
      xmlns:epub="http://www.idpf.org/2007/ops"
      version="3.0"&gt;
    &lt;body&gt;
        &lt;seq id="id1" epub:textref="chapter1.xhtml#figure" epub:type="figure"&gt;
            &lt;par id="id2"&gt;
                &lt;text src="chapter1.xhtml#figuretitle"/&gt;
                &lt;audio src="chapter1_audio.mp3" clipBegin="0:24:15.000" clipEnd="0:24:18.123"/&gt;
            &lt;/par&gt;
            &lt;par id="id3"&gt;
                &lt;text src="chapter1.xhtml#figurecaption"/&gt;
                &lt;audio src="chapter1_audio.mp3" clipBegin="0:24:18.123" clipEnd="0:24:38.530"/&gt;
            &lt;/par&gt;
            &lt;par id="id4"&gt;
                &lt;text src="chapter1.xhtml#figuretext1"/&gt;
                &lt;audio src="chapter1_audio.mp3" clipBegin="0:24:38.530" clipEnd="0:25:00.515"/&gt;
            &lt;/par&gt;
        &lt;/seq&gt;
    &lt;/body&gt;
&lt;/smil&gt;</pre>
					</aside>

					<p>Media Overlays MAY use the applicable <a href="#sec-vocab-assoc">vocabulary association
							mechanisms</a> for the <code>epub:type</code> attribute to define additional semantics.</p>
				</section>

				<section id="sec-docs-assoc-style">
					<h4>Associating Style Information</h4>

					<p>Visual rendering information for the currently playing <a>EPUB Content Document</a> element MAY
						be expressed in the CSS Style Sheet using author-defined classes.</p>

					<p>When used, the author-defined class names MUST be declared in the Package Document using the <a
							href="#active-class"><code>active-class</code></a> and <a href="#playback-active-class"
								><code>playback-active-class</code></a> properties.</p>

					<p>Authors MUST define exactly one CSS class name in each property they define. Each property MUST
						define a <a href="https://www.w3.org/TR/CSS2/syndata.html#characters">valid CSS class name</a>
						not including any <a href="https://www.w3.org/TR/CSS2/selector.html">selectors</a> [[!CSS2]].
						This specification <strong>does not</strong> reserve names for use with these properties.</p>

					<p>Authors MAY define any CSS properties for the specified CSS classes. Authors only need to ensure
						that each EPUB Content Document with an associated Media Overlay Document includes a link to the
						CSS style sheet that contains the class definitions. Reading Systems might provide their own
						styling, or no styling at all, in the absence of a linked definition.</p>

					<p>The <code>active-class</code> and <code>playback-active-class</code> properties MUST NOT be used
						in conjunction with a <a href="#attrdef-refines"><code>refines</code> attribute</a> as they are
						always considered to apply to the entire <a>EPUB Publication</a>.</p>

					<aside class="example">
						<p>This example demonstrates how Authors can associate style information with the currently
							playing EPUB Content Document.</p>

						<p>The author-defined CSS class names, declared using the metadata properties <a
								href="#active-class"><code>active-class</code></a> and <a href="#playback-active-class"
									><code>playback-active-class</code></a> in the Package Document:</p>

						<pre>&lt;meta property="media:active-class"&gt;my-active-item&lt;/meta&gt;
&lt;meta property="media:playback-active-class"&gt;my-document-playing&lt;/meta&gt;</pre>

						<p>The CSS Style Sheet containing the author-defined class names:</p>

						<pre>/* emphasize the active element */
.my-active-item {
    background-color: yellow;
    color: black !important;
}

/* fade out the inactive text */
html.my-document-playing * {
    color: gray;
}
</pre>

						<p>The relevant EPUB Content Document excerpt:</p>

						<pre>&lt;html&gt;
    …
    &lt;span id="txt1"&gt;This is the first phrase.&lt;/span&gt;
    &lt;span id="txt2"&gt;This is the second phrase.&lt;/span&gt;
    &lt;span id="txt3"&gt;This is the third phrase.&lt;/span&gt;
    …
&lt;/html&gt;</pre>

						<p>In this example, the Reading System would apply the author-defined
								<code>my-active-item</code> class to each text element in the EPUB Content Document as
							it became active during playback. Conversely, the class name is removed when the element is
							no longer active. The user would see each EPUB Content Document element styled with a yellow
							background for the duration of that element's playback.</p>

						<p>The Reading System would also apply the author-defined <code>my-document-playing</code> class
							to the document element of the EPUB Content Document when Media Overlays playback begins.
							The class name is removed when playback stops. In the case of an XHTML Content Document, the
							class name would be applied to the <code>html</code> element. In the case of an SVG Content
							Document, it would be applied to the <code>svg</code> element. The user would see all the
							inactive text elements turn gray during Media Overlays playback. When playback stopped, the
							elements' colors would return to their defaults.</p>
					</aside>
				</section>

				<section id="sec-docs-package">
					<h4>Media Overlays Packaging</h4>

					<section id="sec-package-including">
						<h5>Including Media Overlays</h5>

						<p>If an <a>EPUB Content Document</a> is wholly or partially referenced by a Media Overlay, then
							its <a>manifest</a>
							<a href="#elemdef-package-item"><code>item</code> element</a> MUST specify a
								<code>media-overlay</code> attribute. The attribute MUST reference the ID [[!XML]] of
							the manifest <code>item</code> for the corresponding Media Overlay Document.</p>

						<p>The <code>media-overlay</code> attribute MUST only be specified on manifest <code>item</code>
							elements that reference <a>EPUB Content Documents</a>.</p>

						<p>Manifest items for Media Overlay Documents MUST have the media type
								<code>application/smil+xml</code>.</p>

						<aside class="example">
							<p>The following example shows the entries for an EPUB Content Document and its associated
								Media Overlay in the manifest of a Package Document.</p>
							<pre>&lt;manifest&gt;
   &lt;item id="ch1" 
         href="chapter1.xhtml" 
         media-type="application/xhtml+xml" 
         media-overlay="ch1_audio"/&gt;
   
   &lt;item id="ch1_audio" 
         href="chapter1_audio.smil" 
         media-type="application/smil+xml"/&gt;
   …
&lt;/manifest&gt;</pre>
						</aside>
					</section>

					<section id="sec-mo-package-metadata">
						<h5>Overlays Package Metadata</h5>

						<p id="total-duration">The <a>Package Document</a> MUST specify the duration of the entire
								<a>EPUB Publication</a> in a <a href="#elemdef-meta"><code>meta</code> element</a> with
							the <a href="#duration"><code>duration</code> property</a>.</p>

						<p>In addition, the duration of each EPUB Content Document with an associated Media Overlay MUST
							be provided. The <a href="#attrdef-refines"><code>refines</code> attribute</a> is used to
							associate each duration declaration to the corresponding <a>manifest</a>
							<a href="#elemdef-package-item"><code>item</code></a>.</p>

						<p>The sum of the durations for each EPUB Content Document SHOULD equal the <a
								href="#total-duration">total duration</a>.</p>

						<p><a>Authors</a> also MAY specify <a href="#narrator"><code>narrator</code></a> information in
							the Package Document, as well as <a href="#sec-docs-assoc-style">author-defined CSS class
								names</a> to be applied to the currently playing EPUB Content Document element.</p>

						<aside class="example">
							<p>The following example shows a Package Document with metadata about Media Overlays.</p>
							<pre>&lt;metadata&gt;
   …
   &lt;meta property="media:duration" refines="#ch1_audio">0:32:29&lt;/meta>
   &lt;meta property="media:duration" refines="#ch2_audio">0:34:02&lt;/meta>
   &lt;meta property="media:duration" refines="#ch3_audio">0:29:49&lt;/meta>
   &lt;meta property="media:duration"&gt;1:36:20&lt;/meta&gt;
   &lt;meta property="media:narrator"&gt;Joe Speaker&lt;/meta&gt;
   &lt;meta property="media:active-class"&gt;my-active-item&lt;/meta&gt;
   &lt;meta property="media:playback-active-class"&gt;my-document-playing&lt;/meta&gt;
   …
&lt;/metadata&gt;</pre>
						</aside>

						<div class="note">
							<p>The prefix <a href="#sec-metadata-reserved-prefixes"><code>media:</code></a> is reserved
								by for the inclusion of these properties in package metadata.</p>
						</div>
					</section>
				</section>
			</section>

			<section id="sec-behaviors-skip-escape">
				<h3>Skippability and Escapability</h3>

				<section id="sec-skippability">
					<h4>Skippability</h4>

					<p>While reading, users might want to turn on or off certain features of the content, such as
						footnotes, page numbers, or other types of secondary content. This feature is called
						skippability. Reading Systems use the semantic information provided by Media Overlay elements'
							<a href="#sec-docs-structural-semantic"><code>epub:type</code></a> attribute to determine
						when to offer users the option of skippable features.</p>

					<aside class="example">
						<p>The following example shows a Media Overlay Document with a page break. A Reading System
							could offer the user the option of turning on and off the page break/page number
							announcements, which are often cumbersome to listen to.</p>
						<pre>&lt;smil xmlns="http://www.w3.org/ns/SMIL" 
      xmlns:epub="http://www.idpf.org/2007/ops"
      version="3.0"&gt;
    &lt;body&gt;
        &lt;!-- a paragraph --&gt;
        &lt;par id="id1"&gt;
            &lt;text src="chapter1.xhtml#para1"/&gt;
            &lt;audio src="chapter1_audio.mp3"
                   clipBegin="0:23:22.000"
                   clipEnd="0:24:15.000"/&gt;
        &lt;/par&gt;

        &lt;!-- a page number --&gt;
        &lt;par id="id2" epub:type="pagebreak"&gt;
            &lt;text src="chapter1.xhtml#pgbreak1"/&gt;
            &lt;audio src="chapter1_audio.mp3"
                   clipBegin="0:24:15.000"
                   clipEnd="0:24:18.123"/&gt;
        &lt;/par&gt;

        &lt;!-- another paragraph --&gt;
        &lt;par id="id3"&gt;
            &lt;text src="chapter1.xhtml#para2"/&gt;
            &lt;audio src="chapter1_audio.mp3"
                   clipBegin="0:24:18.123"
                   clipEnd="0:25:28.530"/&gt;
        &lt;/par&gt;
    &lt;/body&gt;
&lt;/smil&gt;
</pre>
					</aside>

					<aside class="example">
						<p>The following example shows an EPUB Content Document with a page break.</p>
						<pre>&lt;html … &gt;
    …
    &lt;body&gt;
        &lt;p id="para1"&gt;This is the paragraph before the page break … &lt;/p&gt;
        
        &lt;span id="pgbreak1" role="doc-pagebreak" aria-label="14"/&gt;
        
        &lt;p id="para2"&gt;This is the paragraph after the page break …&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>
					</aside>

					<p>The following non-exhaustive list represents terms from the <a href="#structure-vocab">Structural
							Semantics Vocabulary</a> for which Reading Systems might offer the option of
						skippability:</p>

					<ul>
						<li>
							<p>footnote</p>
						</li>
						<li>
							<p>endnote</p>
						</li>
						<li>
							<p>pagebreak</p>
						</li>
					</ul>

					<div class="note">
						<p>Reading System are not required to support for skippability based on <code>epub:type</code>
							values.</p>
					</div>
				</section>

				<section id="sec-escapability">
					<h4>Escapability</h4>

					<p>Escapable items are nested structures, such as tables and lists, that users might wish to skip
						over, continuing to read from the point immediately after the nested structure. The escapability
						feature differs from the skippability feature in that it does not enable or disable entire types
						of items, but provides an exit from them (e.g., a user can listen to some of the content before
						choosing to escape).</p>

					<aside class="example">
						<p>The following example shows the Media Overlay Document for an EPUB Content Document
							containing a paragraph, a table, and another paragraph. A Reading System that supported
							escapability would give the user the option to interrupt playback of the table to continue
							playing the next paragraph.</p>
						<pre>&lt;smil xmlns="http://www.w3.org/ns/SMIL" 
      xmlns:epub="http://www.idpf.org/2007/ops"
      version="3.0"&gt;
    &lt;body&gt;
        &lt;!-- a paragraph, part of the regular document text --&gt;
        &lt;par id="id1"&gt;
            &lt;text src="c01.xhtml#para1"/&gt;
            &lt;audio src="chapter1_audio.mp3"
                   clipBegin="0:23:22.000"
                   clipEnd="0:24:15.000"/&gt;
        &lt;/par&gt;

        &lt;!-- a table with two nested rows --&gt;
        &lt;seq id="id2" epub:textref="c01.xhtml#t1" epub:type="table"&gt;
            &lt;seq id="id3" epub:textref="c01.xhtml#tr1" epub:type="table-row"&gt;
                &lt;par id="id4" epub:type="table-cell"&gt;
                    &lt;text src="c01.xhtml#td1"/&gt;
                    &lt;audio src="chapter1_audio.mp3"
                           clipBegin="0:24:15.000"
                           clipEnd="0:24:18.123"/&gt;
                &lt;/par&gt;
                &lt;par id="id5" epub:type="table-cell"&gt;
                    &lt;text src="c01.xhtml#td2"/&gt;
                    &lt;audio src="chapter1_audio.mp3"
                           clipBegin="0:24:18.123"
                           clipEnd="0:25:28.530"/&gt;
                &lt;/par&gt;
                &lt;par id="id6" epub:type="table-cell"&gt;
                    &lt;text src="c01.xhtml#td3"/&gt;
                    &lt;audio src="chapter1_audio.mp3"
                           clipBegin="0:25:28.530"
                           clipEnd="0:25:45.515"/&gt;
                &lt;/par&gt;
            &lt;/seq&gt;
            &lt;seq id="id7" epub:textref="c01.xhtml#tr2" epub:type="table-row"&gt;
                &lt;par id="id8" epub:type="table-cell"&gt;
                    &lt;text src="c01.xhtml#td4"/&gt;
                    &lt;audio src="chapter1_audio.mp3"
                           clipBegin="0:25:45.515"
                           clipEnd="0:26:45.700"/&gt;
                &lt;/par&gt;
                &lt;par id="id9" epub:type="table-cell"&gt;
                    &lt;text src="chapter1.xhtml#td5"/&gt;
                    &lt;audio src="chapter1_audio.mp3"
                           clipBegin="0:26:45.700"
                           clipEnd="0:28:02.033"/&gt;
                &lt;/par&gt;
                &lt;par id="id10" epub:type="table-cell"&gt;
                    &lt;text src="chapter1.xhtml#td6"/&gt;
                    &lt;audio src="chapter1_audio.mp3"
                           clipBegin="0:28:02.033"
                           clipEnd="0:28:52.207"/&gt;
                &lt;/par&gt;
            &lt;/seq&gt;
        &lt;/seq&gt;

        &lt;!-- another paragraph --&gt;
        &lt;par id="id11"&gt;
            &lt;text src="c01.xhtml#para2"/&gt;
            &lt;audio src="chapter1_audio.mp3"
                   clipBegin="0:28:52.207"
                   clipEnd="0:30:01.000"/&gt;
        &lt;/par&gt;
    &lt;/body&gt;
&lt;/smil&gt;</pre>
					</aside>

					<p>The following non-exhaustive list represents terms from the <a href="#structure-vocab">Structural
							Semantics Vocabulary</a> for which Reading Systems might offer the option of
						escapability:</p>

					<ul>
						<li>
							<p>table</p>
						</li>
						<li>
							<p>table-row</p>
						</li>
						<li>
							<p>table-cell</p>
						</li>
						<li>
							<p>list</p>
						</li>
						<li>
							<p>list-item</p>
						</li>
						<li>
							<p>figure</p>
						</li>
					</ul>
				</section>
			</section>

			<section id="sec-nav-doc">
				<h3>Navigation Document Overlays</h3>

				<p>The <a>EPUB Navigation Document</a> is an <a>XHTML Content Document</a> and can therefore be
					associated with an audio Media Overlay. Unlike traditional XHTML Content Documents, however,
						<a>Reading Systems</a> have to present the EPUB Navigation Document to users even when it is not
					included in the <a>spine</a> (see <a href="https://www.w3.org/TR/epub-rs-33/#sec-nav-rs-conf"
						>Navigation Document Conformance</a> [[EPUB-RS-33]]). As a result, the method in which an
					associated Media Overlay behaves can change depending on the context:</p>

				<ul>
					<li>
						<p>When included in the spine, playback of the EPUB Navigation Document's Media Overlay obeys
							the same conformance requirements as with any other XHTML Content Document.</p>
					</li>
					<li>
						<p>When exposed in a presentation context that allows users to access and activate the links,
							Reading Systems MAY implement additional presentation behaviors to expose audio feedback
							when navigation links are accessed.</p>
					</li>
				</ul>

				<div class="note">
					<p>Specific implementation details are beyond the scope of this specification. The <a
							href="https://www.daisy.org/guidelines/epub/media-overlays-playback-requirements">DAISY
							Media Overlays Playback Requirements</a> document describes best practices for Authors and
						provides recommendations for Reading System developers.</p>
				</div>
			</section>
		</section>
		<!-- <section id="sec-privacy">
			<h2>Privacy</h2>
			<div class="ednote">
				<p>The working group will address issues related to privacy of EPUB Publications in a future draft.</p>
			</div>
		</section> -->
		<section id="sec-security-privacy">
			<h2>Security and Privacy</h2>

			<div class="ednote">
				<p>This is a very initial draft intended only as a starting point. It is inspired by the <a
						href="https://www.w3.org/TR/pub-manifest/#security-privacy">relevant section of the Publication
						Manifest</a> specification. It will require more work.</p>
			</div>

			<p>The particularity of an <a>EPUB Publication</a> is its structure. The EPUB format provides a means of
				representing, packaging, and encoding structured and semantically enhanced Web content — including HTML,
				CSS, SVG, and other resources — for distribution in a single-file container. This specification does not
					<em>add</em> any new features, APIs, etc. This also means that, essentially, the security and
				privacy issues are reliant on the features of those formats. In particular:</p>

			<ul>
				<li>EPUB 3 allows references to remotely hosted resources from within <a>EPUB Content Documents</a>, but
					also from the <a>Package Document</a> (e.g., in a <a href="#sec-item-elem"><code>item</code></a>
					element which allows both local and remote references). This is not unlike any external reference
					from an average Web site that potentially exposes users to malicious content, and the general Web
					security principles should be taken into account (e.g., cross-origin resource sharing).</li>
				<li>The <a href="#sec-package-doc">Package Document</a> allows personally identifiable information about
					an EPUB Publication's creator(s) (e.g., names, identifying URLs) to be included, so authoring tools
					could expose unexpected information if explicit author approval of metadata is not required.</li>
			</ul>

			<div class="ednote">
				<p>The Working Group will have to address the particularity of cross-origin by addressing the question
					of what the "origin" is for an EPUB Publication.</p>
			</div>
		</section>
		<section id="app-overview-unsupported" class="appendix">
			<h2>Unsupported Features</h2>

			<p>This specification and its siblings contain certain features that are no longer recommended for use or
				that are only retained for legacy support reasons. This section defines the meanings of the designations
				attached to these features and the support expectations for such features.</p>

			<section id="deprecated">
				<h3>Deprecated Features</h3>

				<p>A <strong>deprecated</strong> feature is one that is no longer recommended for use in this version of
					the specification. Deprecated features typically have had limited or no support in Reading Systems
					and/or usage in EPUB Publications. If a feature is marked as deprecated, the following hold
					true:</p>

				<ul>
					<li>
						<p><a>Authors</a> are strongly RECOMMENDED not to use the feature in their <a>EPUB
								Publications</a>.</p>
					</li>
					<li>
						<p><a>Reading Systems</a> MAY support the feature.</p>
						<p class="note">Developers are advised to consider the unlikelihood of encountering content with
							deprecated features before adding new support for them.</p>
					</li>
				</ul>

				<p>Validation tools SHOULD alert Authors that inclusion of the feature is deprecated when encountered in
					an EPUB Publication.</p>
			</section>

			<section id="legacy">
				<h3>Legacy Features</h3>

				<p>A <strong>legacy</strong> feature is one that is retained only for authoring content that is
					compatible with versions of EPUB prior to 3.0. If a feature is marked as legacy, the following hold
					true:</p>

				<ul>
					<li>
						<p><a>Authors</a> MAY include the legacy feature for compatibility purposes.</p>
					</li>
					<li>
						<p><a>Reading Systems</a> MUST NOT support the legacy feature in content that conforms to this
							version of EPUB.</p>
					</li>
				</ul>

				<p>Validation tools SHOULD NOT alert Authors about the presence of legacy features in an <a>EPUB
						Publication</a>, as their inclusion is valid for backwards compatibility. Validation tools MUST
					alert Authors if a legacy feature does not conform to its definition or otherwise breaks a usage
					requirement.</p>
			</section>
		</section>
		<section id="app-identifiers-allowed" class="appendix">
			<h2>Allowed External Identifiers</h2>

			<p>The following table lists the <a aria-label="public identifiers"
					href="https://www.w3.org/TR/2008/REC-xml-20081126/#dt-pubid">public </a> and <a
					href="https://www.w3.org/TR/2008/REC-xml-20081126/#dt-sysid">system identifiers</a> [[!XML]] allowed
				in <a href="https://www.w3.org/TR/2008/REC-xml-20081126/#dt-doctype">document type declarations</a>.
				[[!XML]]</p>

			<p>These external identifiers MAY be used only in <a>Publication Resources</a> with the listed media types
				specified in their <a href="#sec-manifest-elem">manifest</a> declarations. (Refer to <a
					href="#sec-xml-constraints"></a> for more information.)</p>

			<table>
				<thead>
					<tr>
						<th>Media Type(s)</th>
						<th>Public Identifier</th>
						<th>System Identifier</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<ul class="flat">
								<li>
									<code>application/mathml+xml</code>
								</li>
								<li>
									<code>application/mathml-presentation+xml</code>
								</li>
								<li>
									<code>application/mathml-content+xml</code>
								</li>
							</ul>
						</td>
						<td>
							<code>-//W3C//DTD MathML 3.0//EN</code>
						</td>
						<td>
							<code>http://www.w3.org/Math/DTD/mathml3/mathml3.dtd</code>
						</td>
					</tr>
					<tr>
						<td>
							<code>application/svg+xml</code>
						</td>
						<td>
							<code>-//W3C//DTD SVG 1.1//EN</code>
						</td>
						<td>
							<code>http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd</code>
						</td>
					</tr>
				</tbody>
			</table>
		</section>
		<section id="app-structural-semantics">
			<h2>Expressing Structural Semantics</h2>

			<section id="sec-structural-semantics-intro">
				<h3>Introduction</h3>

				<p>Structural semantics add additional meaning about the specific structural purpose an element plays.
					The <a href="#sec-epub-type-attribute"><code>epub:type</code> attribute</a> is used to express
					domain-specific semantics in <a>EPUB Content Documents</a> and <a>Media Overlay Documents</a>, with
					the structural information it carries complementing the underlying vocabulary.</p>

				<p>The applied semantics are intended to refine the meaning of their containing elements; they are not
					provided to override their nature (e.g., the attribute can be used to indicate a [[HTML]]
						<code>section</code> is a chapter in a work, but is not designed to turn <code>p</code> elements
					into list items to avoid proper list structures).</p>

				<p>Semantic metadata is intended to enrich content for use in publishing workflows and for
					author-defined purposes. It also allows Reading Systems to learn more about the structure and
					content of a document (e.g., to enable <a href="#sec-behaviors-skip-escape">skippability and
						escapability</a> in Media Overlays).</p>

				<p>This specification defines a method for adding structural semantics using <em>the attribute
					axis</em>: instead of adding new elements, the <code>epub:type</code> attribute can be appended to
					existing elements to add the desired semantics.</p>
			</section>

			<section id="sec-epub-type-attribute">
				<h3>The <code>epub:type</code> Attribute</h3>

				<dl class="elemdef" id="attrdef-epub-type">
					<dt>Attribute Name</dt>
					<dd>
						<p>
							<code>type</code>
						</p>
					</dd>
					<dt>Namespace</dt>
					<dd>
						<p>
							<code>http://www.idpf.org/2007/ops</code>
						</p>
					</dd>
					<dt>Usage</dt>
					<dd>
						<p><a href="https://html.spec.whatwg.org/multipage/dom.html#global-attributes">Global
								attribute</a>. MAY be specified on all elements.</p>
					</dd>
					<dt>Value</dt>
					<dd>
						<p>A white space-separated list of <a href="#sec-property-datatype">property</a> values, with
							restrictions as defined in <a href="#sec-vocab-assoc"></a>.</p>
						<p>White space is the set of characters as defined in [[!XML]].</p>
					</dd>
				</dl>

				<p>The <code>epub:type</code> attribute inflects semantics on the element on which it appears. Its value
					is one or more white space-separated terms stemming from external vocabularies associated with the
					document instance.</p>

				<p>The inflected semantic MUST express a subclass of the semantic of the carrying element. In the case
					of semantically neutral elements, such as the [[!HTML]] <a
						href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-div-element"
							><code>div</code></a> and <a
						href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-span-element"
							><code>span</code></a> elements, the inflected semantic MUST NOT attach a meaning that is
					already conveyed by an existing element (e.g., that a <code>div</code> represents a paragraph or
					section).</p>

				<div class="note">
					<p>Although the <code>epub:type</code> attribute is similar in nature to the <a
							href="https://html.spec.whatwg.org/multipage/infrastructure.html#attr-aria-role"
								><code>role</code> attribute</a> [[HTML]], the attributes serve different purposes. The
						values of the <code>epub:type</code> attribute do not enhance the accessibility of EPUB
						Publications, for example, they do not map to accessibility <abbr
							title="Application Programming Interfaces">APIs</abbr> used by assistive technologies. The
							<code>epub:type</code> attribute is only intended for publishing semantics and Reading
						System enhancements. Refer to <a href="https://www.w3.org/TR/dpub-aria-1.0/">Digital Publishing
							WAI-ARIA Module 1.0</a> [[DPUB-ARIA-1.0]] for more information about accessible publishing
						roles.</p>
				</div>

				<p>The <a href="#sec-default-vocab">default vocabulary</a> for the <code>epub:type</code> attribute is
					the <a href="#structure-vocab">Structural Semantics Vocabulary</a>. Unprefixed terms that are not
					part of this vocabulary MAY be included, but their use is discouraged. The use of <a
						href="#sec-prefix-attr">prefixes</a> is the preferred method for adding custom semantics. Refer
					to <a href="#sec-vocab-assoc"></a> for more information.</p>

				<aside class="example" id="ex.epubtype.note">
					<p>The following example shows how a preamble could be marked up with the <code>epub:type</code>
						attribute on its containing [[!HTML]] <code>section</code> element.</p>
					<pre>
&lt;html … xmlns:epub="http://www.idpf.org/2007/ops"&gt;
    …
    &lt;section epub:type="preamble"&gt;
        …    
    &lt;/section&gt;
    …
&lt;/html&gt;</pre>
				</aside>

				<aside class="example" id="ex.epubtype.gloss">
					<p>The following example shows the <code>epub:type</code> attribute used to add glossary semantics
						on an [[!HTML]] definition list.</p>
					<pre>
&lt;html … xmlns:epub="http://www.idpf.org/2007/ops"&gt;
    …
    &lt;dl epub:type="glossary"&gt;
        …    
    &lt;/dl&gt;        
    …
&lt;/html&gt;</pre>
				</aside>

				<aside class="example" id="ex.epubtype.pg">
					<p>The following example shows the <code>epub:type</code> attribute used to add page break
						semantics.</p>
					<pre>
&lt;html … xmlns:epub="http://www.idpf.org/2007/ops"&gt;
   …
  &lt;p&gt; … 
     &lt;span epub:type="pagebreak" id="p234" role="doc-pagebreak" aria-label="234"/&gt;
     … &lt;/p&gt;    
   … 
&lt;/html&gt;</pre>
				</aside>
			</section>
		</section>
		<section id="app-vocabs" class="appendix">
			<h2>Vocabularies</h2>

			<p>This appendix defines a general set of mechanisms by which attributes in this specification can reference
				terms from vocabularies, as well as EPUB-specific vocabularies that are used with the attributes.</p>

			<section id="sec-vocab-assoc">
				<h3>Vocabulary Association Mechanisms</h3>

				<section id="sec-vocab-assoc-intro">
					<h4>Introduction</h4>

					<p>EPUB defines a formal method of referencing terms and properties defined in metadata and semantic
						vocabularies using the <a href="#sec-property-datatype"><var>property</var> data type</a>. The
							<code>epub:type</code> attribute uses this data type in <a>EPUB Content Documents</a> and
							<a>Media Overlay Documents</a> to add <a href="#app-structural-semantics">structural
							semantics</a>, for example, while the <code>property</code> and <code>rel</code> attributes
						use the data type to define properties and relationships in the <a>Package Document</a>.</p>

					<p>A <var>property</var> value is like a CURIE [[RDFA-CORE]] &#8212; it represents an IRI
						[[RFC3987]] in compact form. The expression consists of a prefix and a reference, where the
						prefix — whether literal or implied — is a shorthand mapping of an IRI that typically resolves
						to a term vocabulary. When the prefix is converted to its IRI representation and combined with
						the reference, the resulting IRI normally resolves to a fragment within that vocabulary that
						contains human- and/or machine-readable information about the term.</p>

					<p>To reduce the complexity for authoring, each attribute that takes a <var>property</var> data type
						also defines a <a href="#sec-default-vocab">default vocabulary</a>. Terms and properties
						referenced from the default vocabularies do not include a prefix as the mapping <a>Reading
							Systems</a> use to map to a IRI is predefined.</p>

					<p>The power of the <var>property</var> data type lies in its easy extensibility. To incorporate new
						terms and properties, authors only need to declare a <a href="#sec-prefix-attr">prefix</a>. In
						another authoring convenience, this specification also <a href="#sec-metadata-reserved-prefixes"
							>reserves prefixes</a> for many commonly used publishing vocabularies (i.e., they do not
						have to be declared).</p>

					<p>Additional details on the <var>property</var> data type and vocabulary association mechanism are
						provided in the following sections.</p>
				</section>

				<section id="sec-property-datatype">
					<h4>The <var>property</var> Data Type</h4>

					<p>The <var>property</var> data type is a compact means of expressing an IRI [[!RFC3987]] and
						consists of an OPTIONAL prefix separated from a reference by a colon.</p>

					<table class="productionset">
						<caption>(EBNF productions <a
								href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=26153"
								>ISO/IEC 14977</a>)<br />All terminal symbols are in the Unicode Block 'Basic Latin'
							(U+0000 to U+007F). </caption>
						<tr>
							<td id="property.ebnf.property">
								<a href="#property.ebnf.property">property</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td>[ <a href="#property.ebnf.prefix">prefix</a> , ":" ] , <a
									href="#property.ebnf.reference">reference</a>; </td>
							<td> </td>
						</tr>
						<tr>
							<td id="property.ebnf.prefix">
								<a href="#property.ebnf.prefix">prefix</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td>? xsd:NCName ? ;</td>
							<td> </td>
						</tr>
						<tr>
							<td id="property.ebnf.reference">
								<a href="#property.ebnf.reference">reference</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td>? irelative-ref ? ;</td>
							<td>/* as defined in [[!RFC3987]] */<br /></td>
						</tr>
					</table>

					<p>The <var>property</var> data type is derived from the CURIE data type defined in [[!RDFA-CORE]]
						and represents a subset of CURIEs.</p>

					<aside class="example">
						<p>The following example shows a <var>property</var> value composed of the prefix
								<code>dcterms</code> and the reference <code>modified</code>.</p>
						<pre>&lt;meta property="dcterms:modified"&gt;2011-01-01T12:00:00Z&lt;/meta&gt;</pre>
					</aside>

					<p>After <a href="https://www.w3.org/TR/epub-rs-33/#sec-property-datatype">processing</a>
						[[EPUB-RS-33]], this property would expand to the following IRI:</p>

					<pre class="nohighlight">http://purl.org/dc/terms/modified</pre>

					<p>as the <code>dcterms:</code> prefix is a <a href="#sec-metadata-reserved-prefixes">reserved
							prefix</a> that maps to the IRI "<code>http://purl.org/dc/terms/</code>".</p>

					<p>When a prefix is omitted from a <var>property</var> value, the expressed reference represents a
						term from the <a href="#sec-default-vocab">default vocabulary</a> for that attribute.</p>

					<aside class="example">
						<p>The following example shows the <a href="#mathml"><code>mathml</code> property</a> on a
							manifest <a href="#elemdef-package-item"><code>item</code></a> element:</p>

						<pre>&lt;item … properties="mathml"/&gt;</pre>

						<p>This property expands to:</p>

						<pre>http://idpf.org/epub/vocab/package/item/#mathml</pre>

						<p>when the IRI for the vocabulary is concatenated with the reference.</p>
					</aside>

					<p>An empty string does not represent a valid <var>property</var> value, even though it is valid to
						the definition above.</p>
				</section>

				<section id="sec-default-vocab">
					<h5>Default Vocabularies</h5>

					<p>A default vocabulary is one that does not require a <a href="#sec-prefix-attr">prefix</a> to be
						declared to use its terms and properties where a <a href="#sec-property-datatype"
								><var>property</var> value</a> is expected. Terms and properties from a default
						vocabulary MUST always be unprefixed.</p>

					<p>The IRIs associated with these vocabularies MUST NOT be assigned a prefix using the <a
							href="#sec-prefix-attr"><code>prefix</code></a> attribute.</p>

					<div class="note">
						<p>Refer to the definition of each attribute that takes a <a href="#sec-property-datatype"
									><var>property</var> data type</a> for more information about its default
							vocabulary.</p>
					</div>
				</section>

				<section id="sec-prefix-attr">
					<h4>The <code>prefix</code> Attribute</h4>

					<p>The <code>prefix</code> attribute defines prefix mappings for use in <a
							href="#sec-property-datatype"><var>property</var> values</a>.</p>

					<p>The value of the <code>prefix</code> attribute is a white space-separated list of one or more
						prefix-to-IRI mappings of the form:</p>

					<table class="productionset">
						<caption>(EBNF productions <a
								href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=26153"
								>ISO/IEC 14977</a>)<br />All terminal symbols are in the Unicode Block 'Basic Latin'
							(U+0000 to U+007F). </caption>
						<tr>
							<td id="prefix.ebnf.def">
								<a href="#prefix.ebnf.def">prefixes</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td><a href="#prefix.ebnf.mapping">mapping</a> , { <a href="#prefix.ebnf.whitespace"
									>whitespace</a>, { <a href="#prefix.ebnf.space">whitespace</a> } , <a
									href="#prefix.ebnf.mapping">mapping</a> } ; </td>
							<td> </td>
						</tr>
						<tr>
							<td id="prefix.ebnf.mapping">
								<a href="#prefix.ebnf.mapping">mapping</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td><a href="#prefix.ebnf.prefix">prefix</a> , ":" , <a href="#prefix.ebnf.space">space</a>
								, { <a href="#prefix.ebnf.space">space</a> } , ? xsd:anyURI ? ; </td>
							<td> </td>
						</tr>
						<tr>
							<td id="prefix.ebnf.prefix">
								<a href="#prefix.ebnf.prefix">prefix</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td>? xsd:NCName ? ;</td>
							<td> </td>
						</tr>
						<tr>
							<td id="prefix.ebnf.space">
								<a href="#prefix.ebnf.space">space</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td>#x20 ;</td>
							<td> </td>
						</tr>
						<tr>
							<td id="prefix.ebnf.whitespace">
								<a href="#prefix.ebnf.whitespace">whitespace</a>
							</td>
							<td>
								<code>=</code>
							</td>
							<td>(#x20 | #x9 | #xD | #xA) ;</td>
							<td> </td>
						</tr>
					</table>

					<p>The <code>prefix</code> attribute MUST only be specified on the root element of the respective
						format.</p>

					<p>The attribute is not namespaced when used in the <a>Package Document</a>.</p>

					<aside class="example">
						<p>The following example shows prefixes for the Friend of a Friend (<code>foaf</code>) and
							DBPedia (<code>dbp</code>) vocabularies being declared in the Package Document.</p>
						<pre>&lt;package … 
         prefix="foaf: http://xmlns.com/foaf/spec/
         dbp: http://dbpedia.org/ontology/">
   …
&lt;/package></pre>
					</aside>

					<p>The attribute MUST be declared in the namespace <code>http://www.idpf.org/2007/ops</code> when
						declared in <a>EPUB Content Documents</a> and <a>Media Overlay Documents</a>.</p>

					<aside class="example">
						<p>The following example shows the <code>prefix</code> attribute declared in an <a>XHTML Content
								Document</a>.</p>
						<pre>&lt;html …
      xmlns:epub="http://www.idpf.org/2007/ops"
      epub:prefix="z3998: https://www.daisy.org/z3998/2012/vocab/structure/">
   …
&lt;/html></pre>
					</aside>

					<div class="note">
						<p>Although the <code>prefix</code> attribute is modeled on the identically named
								<code>prefix</code> attribute in [[RDFA-CORE]], Authors cannot use the attributes
							interchangeably. The <code>prefix</code> attribute without a namespace in EPUB Content
							Documents is the RDFa attribute.</p>

						<p>It is common for both attributes to appear in EPUB Content Documents that also specify RDFa
							expressions.</p>

						<pre>&lt;html … prefix="…"
        xmlns:epub="http://www.idpf.org/2007/ops"
        epub:prefix="…">   …
&lt;/html></pre>
					</div>

					<p>Note that for <a href="#sec-xhtml-svg">embedded SVG</a>, prefixes MUST be declared on the
						[[!HTML]] root <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-html-element"
								><code>html</code> element</a>.</p>

					<p>To avoid conflicts, the <code>prefix</code> attribute MUST NOT be used to declare a prefix that
						maps to the <a href="#sec-default-vocab">default vocabulary</a>.</p>

					<p>The prefix '_' MUST NOT be declared as it is reserved for future compatibility with RDFa
						[[!RDFA-CORE]] processing.</p>

					<p>For future compatibility with alternative serializations of the Package Document, a prefix for
						the Dublin Core <em>/elements/1.1/</em> namespace [[!DCTERMS]] MUST NOT be declared in the
							<code>prefix</code> attribute. <a>Authors</a> MUST use only the [[!DC11]] elements <a
							href="#sec-pkg-metadata">allowed in the Package Document metadata</a>.</p>
				</section>

				<section id="sec-reserved-prefixes">
					<h4>Reserved Prefixes</h4>

					<p class="warning">Although reserved prefixes are an authoring convenience, reliance on them can
						lead to interoperability issues. Validation tools will often reject new prefixes until the tools
						are updated, for example. Authors are strongly encouraged to declare all prefixes they use to
						avoid such issues.</p>

					<p><a>Authors</a> MAY use reserved prefixes in attributes that expect a <a
							href="#sec-property-datatype"><var>property</var> value</a> without declaring them in a <a
							href="#sec-prefix-attr"><code>prefix</code> attribute</a>.</p>

					<p>Reserved prefixes SHOULD NOT be overridden in the <a href="#sec-prefix-attr"><code>prefix</code>
							attribute</a>.</p>

					<p>The reserved prefixes available for use is context dependent:</p>

					<dl class="conformance-list">
						<dt>Package Document</dt>
						<dd id="sec-metadata-reserved-prefixes">
							<p>Authors MAY use the following prefixes in <a>Package Document</a> attributes without
								having to declare them.</p>
							<table id="tbl-pkg-reserved-prefixes" class="prefix">
								<thead>
									<tr>
										<th>Prefix</th>
										<th>IRI</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>a11y</td>
										<td>http://www.idpf.org/epub/vocab/package/a11y/#</td>
									</tr>
									<tr>
										<td>dcterms</td>
										<td>http://purl.org/dc/terms/</td>
									</tr>
									<tr>
										<td>marc</td>
										<td>http://id.loc.gov/vocabulary/</td>
									</tr>
									<tr>
										<td>media</td>
										<td>http://www.idpf.org/epub/vocab/overlays/#</td>
									</tr>
									<tr>
										<td>onix</td>
										<td>http://www.editeur.org/ONIX/book/codelists/current.html#</td>
									</tr>
									<tr>
										<td>rendition</td>
										<td>http://www.idpf.org/vocab/rendition/#</td>
									</tr>
									<tr>
										<td>schema</td>
										<td>http://schema.org/</td>
									</tr>
									<tr>
										<td>xsd</td>
										<td>http://www.w3.org/2001/XMLSchema#</td>
									</tr>
								</tbody>
							</table>
						</dd>

						<dt id="sec-content-reserved-prefixes">Structural Semantics</dt>
						<dd>
							<p>Authors MAY use the following reserved prefixes in the <a
									href="#app-structural-semantics"><code>epub:type</code> attribute</a> without having
								to declare them.</p>
							<table id="tbl-reserved-prefixes" class="prefix">
								<thead>
									<tr>
										<th>Prefix</th>
										<th>IRI</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>msv</td>
										<td>http://www.idpf.org/epub/vocab/structure/magazine/#</td>
									</tr>
									<tr>
										<td>prism</td>
										<td>http://www.prismstandard.org/specifications/3.0/PRISM_CV_Spec_3.0.htm#</td>
									</tr>
								</tbody>
							</table>
						</dd>
					</dl>
				</section>
			</section>

			<div data-include="vocab/meta-property.html" data-oninclude="fixIncludes" data-include-replace="true"></div>

			<div data-include="vocab/link.html" data-oninclude="fixIncludes" data-include-replace="true"></div>

			<div data-include="vocab/rendering.html" data-oninclude="fixIncludes" data-include-replace="true"></div>

			<div data-include="vocab/item-properties.html" data-oninclude="fixIncludes" data-include-replace="true"></div>

			<div data-include="vocab/itemref-properties.html" data-oninclude="fixIncludes" data-include-replace="true"></div>

			<div data-include="vocab/overlays.html" data-oninclude="fixIncludes" data-include-replace="true"></div>

			<div data-include="vocab/structure.html" data-oninclude="fixIncludes" data-include-replace="true"></div>
		</section>
		<section id="app-schemas" class="appendix">
			<h2>Schemas</h2>

			<section id="app-package-schema">
				<h3>Package Document Schema</h3>

				<p>A non-normative schema for Package Documents is available at <a
						href="https://github.com/w3c/epubcheck/tree/master/src/main/resources/com/adobe/epubcheck/schema/30/package-30.nvdl"
						>https://github.com/w3c/epubcheck/tree/master/src/main/resources/com/adobe/epubcheck/schema/30/package-30.nvdl</a>.</p>

				<p>Validation using this schema requires a processor that supports [[NVDL]], [[RelaxNG-Schema]],
					[[ISOSchematron]] and [[XMLSCHEMA-2]].</p>

				<div class="note">
					<p>The NVDL schema layer can be substituted by a multi-pass validation using the embedded RELAX NG
						and ISO Schematron schemas alone.</p>
				</div>

				<div class="note">
					<p>These schemas may be updated and corrected outside of formal revisions of this specification. As
						a result, they are subject to change at any time. </p>
				</div>
			</section>

			<section id="app-ocf-schema">
				<h3>OCF Schemas</h3>

				<section id="app-schema-container">
					<h4>Schema for <code>container.xml</code></h4>

					<p>The schema for <code>container.xml</code> files is available at <a
							href="https://github.com/w3c/epubcheck/tree/master/src/main/resources/com/adobe/epubcheck/schema/30/ocf-container-30.nvdl">
							<code>https://github.com/w3c/epubcheck/tree/master/src/main/resources/com/adobe/epubcheck/schema/30/ocf-container-30.nvdl</code></a>.</p>

					<p>Validation using this schema requires a processor that supports [[!RelaxNG-Schema]] and
						[[!XMLSCHEMA-2]].</p>
				</section>

				<section id="app-schema-encryption">
					<h4>Schema for <code>encryption.xml</code></h4>

					<p>The schema for <code>encryption.xml</code> files is included in
						[[!XMLSEC-RNGSCHEMA-20130411]].</p>
				</section>

				<section id="app-schema-signatures">
					<h4>Schema for <code>signatures.xml</code></h4>

					<p>The schema for <code>signatures.xml</code> files is included in
						[[!XMLSEC-RNGSCHEMA-20130411]].</p>
				</section>
			</section>

			<section id="app-schema-overlays">
				<h3>Media Overlays Schema</h3>

				<p>The schema for Media Overlays is available at <a
						href="https://github.com/w3c/epubcheck/tree/master/src/main/resources/com/adobe/epubcheck/schema/30/media-overlay-30.nvdl"
						>https://github.com/w3c/epubcheck/tree/main/src/master/resources/com/adobe/epubcheck/schema/30/media-overlay-30.nvdl</a>.</p>

				<p>Validation using this schema requires a processor that supports [[!NVDL]], [[!RelaxNG-Schema]],
					[[!ISOSchematron]] and [[!XMLSCHEMA-2]].</p>

				<div class="note">
					<p>The NVDL schema layer can be substituted by a multi-pass validation using the embedded RELAX NG
						and ISO Schematron schemas alone.</p>
				</div>
			</section>
		</section>
		<section id="app-ocf-example" class="appendix informative">
			<h2>OCF Example</h2>

			<p>The following example demonstrates the use of the OCF format to contain a signed and encrypted EPUB
				Publication within an <a>OCF ZIP Container</a>.</p>

			<aside class="example">
				<p>Ordered list of files in the OCF ZIP Container</p>
				<pre>mimetype
META-INF/container.xml
META-INF/signatures.xml
META-INF/encryption.xml
EPUB/As_You_Like_It.opf
EPUB/book.html
EPUB/nav.html
EPUB/images/cover.png</pre>
			</aside>

			<aside class="example">
				<p>The contents of the <code>mimetype</code> file</p>
				<pre>application/epub+zip</pre>
			</aside>

			<aside class="example">
				<p>The contents of the <code>META-INF/container.xml</code> file</p>
				<pre>&lt;?xml version="1.0"?&gt;
&lt;container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;rootfiles&gt;
        &lt;rootfile full-path="EPUB/As_You_Like_It.opf"
            media-type="application/oebps-package+xml"/&gt;
    &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
			</aside>

			<aside class="example">
				<p>The contents of the <code>META-INF/signatures.xml</code> file</p>
				<pre>&lt;signatures xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;Signature Id="AsYouLikeItSignature" xmlns="http://www.w3.org/2000/09/xmldsig#"&gt;
        
        &lt;!--
             SignedInfo is the information that is actually signed.
             In this case, the SHA-1 algorithm is used to sign the 
             canonical form of the XML documents enumerated in the
             Object element below.
        --&gt;
        &lt;SignedInfo&gt;
            &lt;CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/&gt;
            &lt;SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#dsa-sha1"/&gt;
            &lt;Reference URI="#AsYouLikeIt"&gt;
                &lt;DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/&gt;
                &lt;DigestValue&gt;…&lt;/DigestValue&gt;
            &lt;/Reference&gt;
        &lt;/SignedInfo&gt;
        
        &lt;!--
             The signed value of the digest above, using the DSA 
             algorithm
        --&gt;
        &lt;SignatureValue&gt;…&lt;/SignatureValue&gt;
        
        &lt;!--
             The key used to validate the signature
        --&gt;
        &lt;KeyInfo&gt;
            &lt;KeyValue&gt;
                &lt;DSAKeyValue&gt;
                    &lt;P&gt;…&lt;/P&gt;
                    &lt;Q&gt;…&lt;/Q&gt;
                    &lt;G&gt;…&lt;/G&gt;
                    &lt;Y&gt;…&lt;/Y&gt;
                &lt;/DSAKeyValue&gt;
            &lt;/KeyValue&gt;
        &lt;/KeyInfo&gt;
        
        &lt;!--
             The list of resources to sign (note that the canonical
             form of XML documents is signed, while the binary form
             of all other resources is used)
        --&gt;
        &lt;Object&gt;
            &lt;Manifest Id="AsYouLikeIt"&gt;
                &lt;Reference URI="EPUB/As_You_Like_It.opf"&gt;
                    &lt;Transforms&gt;
                        &lt;Transform Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/&gt;
                    &lt;/Transforms&gt;
                    &lt;DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/&gt;
                    &lt;DigestValue&gt;&lt;/DigestValue&gt;
                &lt;/Reference&gt;
                &lt;Reference URI="EPUB/book.html"&gt;
                    &lt;Transforms&gt;
                        &lt;Transform Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/&gt;
                    &lt;/Transforms&gt;
                    &lt;DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/&gt;
                    &lt;DigestValue&gt;&lt;/DigestValue&gt;
                &lt;/Reference&gt;
                &lt;Reference URI="EPUB/images/cover.png"&gt;
                    &lt;DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/&gt;
                    &lt;DigestValue&gt;&lt;/DigestValue&gt;
                &lt;/Reference&gt;
            &lt;/Manifest&gt;
        &lt;/Object&gt;
    &lt;/Signature&gt;
&lt;/signatures&gt;</pre>
			</aside>

			<aside class="example">
				<p>The contents of the <code>META-INF/encryption.xml</code> file</p>
				<pre>&lt;?xml version="1.0"?&gt;
&lt;encryption xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
    xmlns:enc="http://www.w3.org/2001/04/xmlenc#" xmlns:ds="http://www.w3.org/2000/09/xmldsig#"&gt;

    &lt;!--
         The RSA-encrypted AES-128 symmetric key used to encrypt
         data enumerated in EncryptedData blocks below
    --&gt;
    &lt;enc:EncryptedKey Id="EK"&gt;
        &lt;enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"/&gt;
        &lt;ds:KeyInfo&gt;
            &lt;ds:KeyName&gt;John Smith&lt;/ds:KeyName&gt;
        &lt;/ds:KeyInfo&gt;
        &lt;enc:CipherData&gt;
            &lt;enc:CipherValue&gt;xyzabc…&lt;/enc:CipherValue&gt;
        &lt;/enc:CipherData&gt;
    &lt;/enc:EncryptedKey&gt;

    &lt;!--
         Each EncryptedData block identifies a single resource
         that has been encrypted using the AES-128 algorithm.
         The data remains stored, in its encrypted form, in the
         original file within the container.
    --&gt;
    &lt;enc:EncryptedData Id="ED1"&gt;
        &lt;enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#kw-aes128"/&gt;
        &lt;ds:KeyInfo&gt;
            &lt;ds:RetrievalMethod URI="#EK" Type="http://www.w3.org/2001/04/xmlenc#EncryptedKey"/&gt;
        &lt;/ds:KeyInfo&gt;
        &lt;enc:CipherData&gt;
            &lt;enc:CipherReference URI="EPUB/book.html"/&gt;
        &lt;/enc:CipherData&gt;
    &lt;/enc:EncryptedData&gt;

    &lt;enc:EncryptedData Id="ED2"&gt;
        &lt;enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#kw-aes128"/&gt;
        &lt;ds:KeyInfo&gt;
            &lt;ds:RetrievalMethod URI="#EK" Type="http://www.w3.org/2001/04/xmlenc#EncryptedKey"/&gt;
        &lt;/ds:KeyInfo&gt;
        &lt;enc:CipherData&gt;
            &lt;enc:CipherReference URI="EPUB/images/cover.png"/&gt;
        &lt;/enc:CipherData&gt;
    &lt;/enc:EncryptedData&gt;
&lt;/encryption&gt;</pre>
			</aside>

			<aside class="example">
				<p>The contents of the <code>EPUB/As_You_Like_It.opf</code> file</p>
				<pre>&lt;?xml version="1.0"?&gt;
&lt;package version="3.0"
         xml:lang="en"
         xmlns="http://www.idpf.org/2007/opf"
         unique-identifier="pub-id"&gt;
    
    &lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
        &lt;dc:identifier id="pub-id"&gt;urn:uuid:B9B412F2-CAAD-4A44-B91F-A375068478A0&lt;/dc:identifier&gt;
        
        &lt;dc:language&gt;en&lt;/dc:language&gt;
        
        &lt;dc:title&gt;As You Like It&lt;/dc:title&gt;
        
        &lt;dc:creator id="creator"&gt;William Shakespeare&lt;/dc:creator&gt;
        
        &lt;meta property="dcterms:modified"&gt;2000-03-24T00:00:00Z&lt;/meta&gt;
        
        &lt;dc:publisher&gt;Project Gutenberg&lt;/dc:publisher&gt;
        
        &lt;dc:date&gt;2000-03-24&lt;/dc:date&gt;
        
        &lt;meta property="dcterms:dateCopyrighted"&gt;9999-01-01&lt;/meta&gt;
        
        &lt;dc:identifier id="isbn13"&gt;urn:isbn:9780741014559&lt;/dc:identifier&gt;
        
        &lt;dc:identifier id="isbn10"&gt;0-7410-1455-6&lt;/dc:identifier&gt;
        
        &lt;link rel="xml-signature"
              href="../META-INF/signatures.xml#AsYouLikeItSignature"/&gt;
    &lt;/metadata&gt;
    
    &lt;manifest&gt;
        &lt;item id="r4915" 
              href="book.html" 
              media-type="application/xhtml+xml"/&gt;
        &lt;item id="r7184" 
              href="images/cover.png" 
              media-type="image/png"/&gt;
        &lt;item id="nav" 
              href="nav.html" 
              media-type="application/xhtml+xml" 
              properties="nav"/&gt;
    &lt;/manifest&gt;
    
    &lt;spine&gt;
        &lt;itemref idref="r4915"/&gt;
    &lt;/spine&gt;
&lt;/package&gt;</pre>
			</aside>
		</section>
		<section id="app-clock-examples" class="appendix informative">
			<h2>Examples of Clock Values</h2>

			<p>The following are examples of allowed clock values:</p>

			<ul>
				<li>
					<p><code>5:34:31.396</code> = 5 hours, 34 minutes, 31 seconds, and 396 milliseconds</p>
				</li>
				<li>
					<p><code>124:59:36</code> = 124 hours, 59 minutes, and 36 seconds</p>
				</li>
				<li>
					<p><code>0:05:01.2</code> = 5 minutes, 1 second, and 200 milliseconds</p>
				</li>
				<li>
					<p><code>0:00:04</code> = 4 seconds</p>
				</li>
				<li>
					<p><code>09:58</code> = 9 minutes and 58 seconds</p>
				</li>
				<li>
					<p><code>00:56.78</code> = 56 seconds and 780 milliseconds</p>
				</li>
				<li>
					<p><code>76.2s</code> = 76.2 seconds = 76 seconds and 200 milliseconds</p>
				</li>
				<li>
					<p><code>7.75h</code> = 7.75 hours = 7 hours and 45 minutes</p>
				</li>
				<li>
					<p><code>13min</code> = 13 minutes</p>
				</li>
				<li>
					<p><code>2345ms</code> = 2345 milliseconds</p>
				</li>
				<li>
					<p><code>12.345</code> = 12 seconds and 345 milliseconds</p>
				</li>
			</ul>
		</section>
		<section id="app-media-types" class="appendix informative">
			<h2>Media Type Registrations</h2>

			<section id="app-media-type-app-oebps-package">
				<h3>The <code>application/oebps-package+xml</code> Media Type</h3>

				<p>This appendix registers the media type <code>application/oebps-package+xml</code> for the EPUB
					Package Document. This registration supersedes [[RFC4839]].</p>

				<p>The Package Document is an XML file that describes an EPUB Publication. It identifies the resources
					in the EPUB Publication and provides metadata information. The Package Document and its related
					specifications are maintained and defined by the <a href="https://www.w3.org">World Wide Web
						Consortium</a> (W3C).</p>

				<dl class="variablelist">
					<dt>MIME media type name:</dt>
					<dd>
						<p>
							<code>application</code>
						</p>
					</dd>
					<dt>MIME subtype name:</dt>
					<dd>
						<p>
							<code>oebps-package+xml</code>
						</p>
					</dd>
					<dt>Required parameters:</dt>
					<dd>
						<p>None.</p>
					</dd>
					<dt>Optional parameters:</dt>
					<dd>
						<p>None.</p>
					</dd>
					<dt>Encoding considerations:</dt>
					<dd>
						<p>Package Documents are UTF-8 or UTF-16 encoded XML.</p>
					</dd>
					<dt>Security considerations:</dt>
					<dd>
						<p>Package Documents contain well-formed XML conforming to the XML 1.0 specification.</p>
						<p>Clearly, it is possible to author malicious files which, for example, contain malformed data.
							Most XML parsers protect themselves from such attacks by rigorously enforcing
							conformance.</p>
						<p>All processors that read Package Documents should rigorously check the size and validity of
							data retrieved.</p>
						<p>There is no current provision in the EPUB 3 specification for encryption, signing, or
							authentication within the Package Document format.</p>
					</dd>
					<dt>Interoperability considerations:</dt>
					<dd>
						<p>None.</p>
					</dd>
					<dt>Published specification:</dt>
					<dd>
						<p>This media type registration is for the EPUB Package Document, as described by the EPUB 3
							specification located at <a href="https://www.w3.org/TR/epub-33/"
								>https://www.w3.org/TR/epub-33/</a>.</p>
						<p>The EPUB 3 specification supersedes the Open Packaging Format 2.0.1 specification, which is
							located at <a href="http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm"
								>http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm</a> and which also uses the <code
								class="media-type">application/oepbs-package+xml</code> media type.</p>
					</dd>
					<dt>Applications which use this media type:</dt>
					<dd>
						<p>This media type is in wide use for the distribution of ebooks in the EPUB format. The
							following list of applications is not exhaustive.</p>
						<ul>
							<li>
								<p>Adobe Digital Editions</p>
							</li>
							<li>
								<p>Aldiko</p>
							</li>
							<li>
								<p>Azardi</p>
							</li>
							<li>
								<p>Apple iBooks</p>
							</li>
							<li>
								<p>Barnes &amp; Noble Nook</p>
							</li>
							<li>
								<p>Bluefire Reader</p>
							</li>
							<li>
								<p>Calibre</p>
							</li>
							<li>
								<p>Google Play Books</p>
							</li>
							<li>
								<p>Kobo</p>
							</li>
							<li>
								<p>Microsoft Edge</p>
							</li>
							<li>
								<p>Readium</p>
							</li>
						</ul>
					</dd>
					<dt>Additional information:</dt>
					<dd>
						<dl class="variablelist">
							<dt>Magic number(s):</dt>
							<dd>
								<p>none</p>
							</dd>
							<dt>File extension(s):</dt>
							<dd>
								<p>
									<code>.opf</code>
								</p>
							</dd>
							<dt>Macintosh File Type Code(s):</dt>
							<dd>
								<p>TEXT</p>
							</dd>
							<dt>Fragment Identifiers:</dt>
							<dd>
								<p>A registry of linking schemes is maintained at <a class="uri"
										href="http://www.idpf.org/epub/linking/"
											><code>http://www.idpf.org/epub/linking/</code></a>. Some of these schemes
									define custom fragment identifiers that resolve to
										<code>application/oebps-package+xml</code> documents.</p>
							</dd>
						</dl>
					</dd>
					<dt>Person &amp; email address to contact for further information:</dt>
					<dd>
						<p>public-epub3@w3.org</p>
					</dd>
					<dt>Intended usage:</dt>
					<dd>
						<p>COMMON</p>
					</dd>
					<dt>Author/Change controller:</dt>
					<dd>
						<p>World Wide Web Consortium (W3C)</p>
					</dd>
				</dl>
			</section>

			<section class="informative" id="app-media-type">
				<h3>The <code>application/epub+zip</code> Media Type</h3>

				<p>This appendix registers the media type <code>application/epub+zip</code> for the EPUB Open Container
					Format (OCF).</p>

				<p>An <a>OCF ZIP Container</a>, or <a>EPUB Container</a>, file is a container technology based on the
					[[!ZIP]] archive format. It is used to encapsulate the EPUB Publication. OCF and its related
					standards are maintained and defined by the <a href="https://www.w3.org">World Wide Web
						Consortium</a> (W3C).</p>

				<dl class="variablelist">
					<dt>MIME media type name:</dt>
					<dd>
						<p>
							<code>application</code>
						</p>
					</dd>
					<dt>MIME subtype name:</dt>
					<dd>
						<p>
							<code>epub+zip</code>
						</p>
					</dd>
					<dt>Required parameters:</dt>
					<dd>
						<p>None.</p>
					</dd>
					<dt>Optional parameters:</dt>
					<dd>
						<p>None.</p>
					</dd>
					<dt>Encoding considerations:</dt>
					<dd>
						<p>OCF ZIP Container files are binary files encoded in the <a class="media-type"
								href="https://www.iana.org/assignments/media-types/application/zip">
								<code>application/zip</code></a> media type.</p>
					</dd>
					<dt>Security considerations:</dt>
					<dd>
						<p>All processors that read OCF ZIP Container files should rigorously check the size and
							validity of data retrieved.</p>
						<p>In addition, because of the various content types that can be embedded in OCF ZIP Container
							files, <code>application/epub+zip</code> may describe content that poses security
							implications beyond those noted here. However, only in cases where the processor recognizes
							and processes the additional content, or where further processing of that content is
							dispatched to other processors, would security issues potentially arise. In such cases,
							matters of security would fall outside the domain of this registration document.</p>
						<p>Security considerations that apply to <code>application/zip</code> also apply to OCF ZIP
							Container files.</p>
					</dd>
					<dt>Interoperability considerations:</dt>
					<dd>
						<p>None.</p>
					</dd>
					<dt>Published specification:</dt>
					<dd>
						<p>This media type registration is for the EPUB Open Container Format (OCF), as described by the
							EPUB 3 specification located at <a href="https://www.w3.org/TR/epub-33/"
									><code>https://www.w3.org/TR/epub-33/</code></a>.</p>
						<p>The EPUB 3 specification supersedes both <a href="https://tools.ietf.org/html/rfc4839">RFC
								4839</a> and the Open Container Format 2.0.1 specification, which is located at <a
								href="http://www.idpf.org/doc_library/epub/OCF_2.0.1_draft.doc"
									><code>http://www.idpf.org/doc_library/epub/OCF_2.0.1_draft.doc</code></a>, and
							which also uses the <code>application/epub+zip</code> media type.</p>
					</dd>
					<dt>Applications that use this media type:</dt>
					<dd>
						<p>This media type is in wide use for the distribution of ebooks in the EPUB format. The
							following list of applications is not exhaustive.</p>
						<ul>
							<li>Adobe Digital Editions</li>
							<li>Aldiko</li>
							<li>Azardi</li>
							<li>Apple iBooks</li>
							<li>Barnes &amp; Noble NOOK</li>
							<li>Bluefire Reader</li>
							<li>Calibre</li>
							<li>Google Play Books</li>
							<li>Kobo</li>
							<li>Microsoft Edge</li>
							<li>Readium</li>
						</ul>
					</dd>
					<dt>Additional information:</dt>
					<dd>
						<dl class="variablelist">
							<dt>Magic number(s):</dt>
							<dd>
								<p>0: <code>PK 0x03 0x04</code>, 30: <code>mimetype</code>, 38:
										<code>application/epub+zip</code></p>
							</dd>
							<dt>File extension(s):</dt>
							<dd>
								<p>OCF ZIP Container files are most often identified with the extension
										<code>.epub</code>.</p>
							</dd>
							<dt>Macintosh file type code(s):</dt>
							<dd>
								<p>ZIP</p>
							</dd>
							<dt>Fragment identifiers:</dt>
							<dd>
								<p>A registry of linking schemes is maintained at <a
										href="http://www.idpf.org/epub/linking/"
											><code>http://www.idpf.org/epub/linking/</code></a>. Some of these schemes
									define custom fragment identifiers that resolve to <code>application/epub+zip</code>
									and <code>application/oebps-package+xml</code> documents.</p>
							</dd>
						</dl>
					</dd>
					<dt>Person &amp; email address to contact for further information:</dt>
					<dd>
						<p>public-epub3@w3.org</p>
					</dd>
					<dt>Intended usage:</dt>
					<dd>
						<p>COMMON</p>
					</dd>
					<dt>Author/change controller:</dt>
					<dd>
						<p>World Wide Web Consortium (W3C)</p>
					</dd>
				</dl>
			</section>
		</section>
		<section id="change-log">
			<h2>Change Log</h2>

			<p>Note that this change log only identifies substantive changes &#8212; those that affect the conformance
				of <a>EPUB Publications</a> or are similarly noteworthy.</p>

			<p>For a list of all issues addressed during the revision, refer to the <a
					href="https://github.com/w3c/epub-specs/issues?q=is%3Aissue+is%3Aclosed+label%3AEPUB33+-label%3ASpec-RS+"
					>Working Group's issue tracker</a>.</p>

			<section id="changes-latest">
				<h3>Substantive Changes since the <a href="https://www.w3.org/TR/2021/WD-epub-33-20210112/">First Public
						Working Draft</a></h3>

				<!--
					After each working draft is published:
						- change the link/text in the section heading to refer to the published draft (use the dated URL)
						- move all changes down to the next section
				-->

				<ul>
					<li>17-Feb-2020: File extension recommendations have been removed (affects the Package Document,
						XHTML Content Documents, PLS Lexicons and Media Overlay Documents). See <a
							href="https://github.com/w3c/epub-specs/issues/1294">issue 1294</a>.</li>
					<li>15-Feb-2021: Clarified that <code>nav</code> elements without an <code>epub:type</code>
						attribute are not subject to the EPUB Navigation Document's content model restrictions. See <a
							href="https://github.com/w3c/epub-specs/issues/976">issue 976</a>.</li>
					<li>10-Feb-2021: A very first draft for <a href="#sec-security-privacy"></a> has been added.</li>
					<li>4-Feb-2021: Clarify that the value of <code>dc:language</code> elements must be well-formed
						language tags. See <a href="https://github.com/w3c/epub-specs/issues/1325">issue 1325</a>.</li>
					<li>2-Feb-2021: Added <code>auto</code> value for <code>dir</code> attribute and clarified the
						precedence of the attribute. See <a href="https://github.com/w3c/epub-specs/issues/1491">issue
							1491</a> and <a href="https://github.com/w3c/epub-specs/issues/1494">issue 1494</a>.</li>
					<li>2-Feb-2021: Added the <code>hreflang</code> attribute to <code>link</code> elements to identify
						the language of linked resources. See <a href="https://github.com/w3c/epub-specs/issues/1488"
							>issue 1488</a>.</li>
					<li>20-Jan-2021: Clarified that user-defined media overlay style classes must be declared in the
						Package Document metadata. See <a href="https://github.com/w3c/epub-specs/issues/1319">issue
							1319</a>.</li>
					<li>20-Jan-2021: Add recommendation that the sum of the media overlay durations for each Content
						Document match the total duration specified for the EPUB Publication. See <a
							href="https://github.com/w3c/epub-specs/issues/1322">issue 1322</a>.</li>
					<li>20-Jan-2021: Clarified that the <code>epub:type</code> attribute does not improve the
						accessibility of publications. Added pointers to the <code>role</code> attribute and the
						DPUB-ARIA vocabulary for accessibility.</li>
					<li>13-Jan-2021: The requirement for progressive enhancement with spine-level scripting has been
						changed to a recommendation that top-level content documents remain consumable when scripting is
						not available. See <a href="https://github.com/w3c/epub-specs/issues/1444">issue 1444</a>.</li>
				</ul>
			</section>

			<section id="changes-older">
				<h3>Substantive changes since <a href="https://www.w3.org/publishing/epub/epub-spec.html">EPUB
					3.2</a></h3>

				<ul>
					<li>24-Dec-2020: The specification no longer makes reference to a release identifier, but the
						requirement to include a last modification date remains for backwards compatibility. See <a
							href="https://github.com/w3c/epub-specs/issues/1440">issue 1440</a>.</li>
					<li>16-Dec-2020: Terminology and requirements related to "renditions" of an EPUB Publication have
						been simplified to improve the readability of the specifications (i.e., to align with the
						generally understood concept that an EPUB Publication has only a single rendering described by a
						single Package Document). These changes do not affect the ability to include multiple
						renditions, which are now more fully covered in [[EPUB-MULTI-REND-11]]. See <a
							href="https://github.com/w3c/epub-specs/issues/1436">issue 1436</a>.</li>
					<li>14-Nov-2020: The term "semantic inflection" is no longer used to describe the process of adding
						structural semantics to elements. The term is not widely understood outside of EPUB, and is
						unnecessarily complex. The specification now simply refers to "expressing" or "adding" structual
						semantics.</li>
					<li>9-Nov-2020: The requirement that the ordering of the <code>toc nav</code> match the ordering of
						EPUB Content Documents in the spine, and the elements within each file, has been reduced to a
						recommendation. See <a href="https://github.com/w3c/epub-specs/issues/1283">issue 1283</a>.</li>
					<li>6-Nov-2020: Clarified that HTML <code>script</code> elements that contain <a
							href="#sec-scripted-context">data blocks are not instances of scripting</a>. See <a
							href="https://github.com/w3c/epub-specs/issues/1352">issue 1352</a>.</li>
					<li>6-Nov-2020: Added WebP to the <a href="#cmt-grp-image">image core media types</a>. See <a
							href="https://github.com/w3c/epub-specs/issues/1344">issue 1344</a>.</li>
					<li>6-Nov-2020: A <a href="#app-identifiers-allowed">restricted set of external identifiers</a> are
						now allowed in publication resources. <a href="#sec-xml-constraints">References to external
							entities</a> from the internal DTD subset remain restricted, however. See <a
							href="https://github.com/w3c/epub-specs/issues/1338">issue 1338</a>.</li>
					<li>12-Oct-2020: Added OPUS to the <a href="#cmt-grp-audio">audio core media types</a> with a
						warning that it is still subject to review depending on support in Mac/iOS. See <a
							href="https://github.com/w3c/epub-specs/issues/645">issue 645</a>.</li>
					<li>30-Sept-2020: The structure of the EPUB core specifications has been simplified to ease
						understanding and access to information. This specification now consolidates the authoring
						requirements from the EPUB 3.2 specification together with the Packages, Content Documents, OCF
						and Media Overlays specifications. A separate document, EPUB Reading Systems 3.3, consolidates
						the reading system requirements from those documents.</li>
				</ul>
			</section>
		</section>
		<div data-include="../common/acknowledgements-core.html" data-oninclude="fixIncludes"
			data-include-replace="true"></div>
	</body>
</html>
