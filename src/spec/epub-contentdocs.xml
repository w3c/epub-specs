<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../../util/docbook/schema/docbookspec.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="../../util/docbook/schema/docbookspec.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="../../util/docbook/schema/docbook.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1" xmlns:epub="http://www.idpf.org/2011/epub"
    xmlns:spec="http://www.idpf.org/2016/epub/spec" xml:lang="en">
    <title>EPUB Content Documents 3.1</title>

    <info>
        <releaseinfo>Editor's Draft</releaseinfo>
        <pubdate>01 January 2016</pubdate>
        <printhistory>
            <formalpara>
                <title>This version</title>
                <para><link xlink:href="http://www.idpf.org/epub/31/spec/epub-contentdocs-20160101.html"/></para>
            </formalpara>
            <formalpara>
                <title>Latest version</title>
                <para><link xlink:href="http://www.idpf.org/epub3/latest/publications"/></para>
            </formalpara>
            <formalpara>
                <title>Previous version</title>
                <para><link xlink:href="http://www.idpf.org/epub/301/spec/epub-contentdocs-20140626.html"/></para>
            </formalpara>
            <formalpara>
                <title>Previous recommendation</title>
                <para><link xlink:href="http://www.idpf.org/epub/301/spec/epub-contentdocs-20140626.html"/></para>
            </formalpara>
        </printhistory>
        <releaseinfo role="errata"><link xlink:href="./epub-contentdocs-errata/">Errata</link></releaseinfo>
        <releaseinfo role="history"><link
                xlink:href="https://github.com/IDPF/epub-revision/commits/master/src/spec/epub-contentdocs.xml">Changes to
                this document</link></releaseinfo>
        <releaseinfo role="formats">The complete EPUB 3.1 specification is also available for download as an <link
                xlink:href="http://www.idpf.org/epub/31/epub31.epub">EPUB Publication</link>.</releaseinfo>
        <xi:include href="./share/copyright.xml"/>
        <xi:include href="./share/legalnotice.xml"/>
        <authorgroup role="current">
            <editor>
                <personname>Markus Gylling</personname>
                <affiliation>
                    <org>
                        <orgname>International Digital Publishing Forum (IDPF)</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>William McCoy</personname>
                <affiliation>
                    <org>
                        <orgname>International Digital Publishing Forum (IDPF)</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Elika J. Etemad</personname>
                <affiliation>
                    <org>
                        <orgname>Invited Expert</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Matt Garrish</personname>
                <affiliation>
                    <org>
                        <orgname>Invited Expert</orgname>
                    </org>
                </affiliation>
            </editor>
        </authorgroup>
        <abstract>
            <title>EPUB Content Documents 3.1</title>
            <para>EPUB Content Documents 3.1 specifies a usage of HTML, SVG and CSS optimized for representation of
                structured, composable, and accessible documents.</para>
        </abstract>
    </info>

    <xi:include href="share/status.xml"/>

    <chapter xml:id="sec-overview">
        <title>Overview</title>

        <section xml:id="sec-overview-purpose-and-scope" conformance="informative">
            <title>Purpose and Scope</title>

            <para>This specification, EPUB Content Documents 3.1, defines profiles of HTML5, SVG, and CSS for use in the
                context of <olink targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec">EPUB®
                    Publications</olink>.</para>

            <xi:include href="share/specdesc-all.xml"/>

            <para>This specification supersedes EPUB Content Documents 3.0.1 <xref linkend="refContentDocs301"/>. Refer to
                    <xref linkend="refEPUB3Changes"/> for more information on the differences between this specification and
                its predecessor.</para>

        </section>

        <section xml:id="sec-overview-relations" conformance="informative">

            <title>Relationship to Other Specifications</title>

            <section xml:id="sec-overview-relations-html">
                <title>Relationship to HTML5</title>

                <para>The <link linkend="sec-html">HTML document type defined by this specification</link> is based on W3C
                        <xref linkend="refHTML5"/>, and inherits all definitions of semantics, structure and processing
                    behaviors from the HTML5 specification unless otherwise specified.</para>

                <para>In addition, this specification <link linkend="sec-html-extensions">defines a set of extensions</link>
                    to the W3C HTML5 document model. Extensions that are <link linkend="sec-xhtml-extensions">only available
                        in XML</link> serialized <olink targetdoc="spec" targetptr="gloss-content-document-epub-html">HTML
                        Content Documents</olink> are being phased out.</para>

                <para>This specification defines a simplified processing model that does not require <olink targetdoc="spec"
                        targetptr="gloss-epub-reading-system" type="epub-spec">EPUB Reading Systems</olink> to support
                    scripting, HTML5 forms or the HTML5 DOM. Reading Systems conformant with this specification are only
                    required to be able to process a conforming <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub" type="epub-spec"/>. As <link
                        linkend="sec-scripted-content-rs-reqs">support for scripting and HTML5 forms</link> are optional
                    Reading System features, a conformant Reading System might not be a fully-conformant HTML5 User Agent
                    (i.e., it might not implement the complete HTML5 processing model).</para>

            </section>

            <section xml:id="sec-overview-relations-svg">
                <title>Relationship to SVG</title>

                <para>This specification defines <link linkend="sec-svg">a restricted subset of SVG 1.1</link> to represent
                    vector graphics inline in <olink targetdoc="spec" targetptr="gloss-content-document-epub-html"
                        type="epub-spec">HTML Content Documents</olink> and as standalone <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-svg" type="epub-spec">SVG Content Documents</olink>. </para>
            </section>

            <section xml:id="sec-overview-relations-css">
                <title>Relationship to CSS</title>
                <para>The <link linkend="sec-css">CSS profile</link> defined in this specification has CSS 2.1 <xref
                        linkend="refCSS21"/> as its baseline. Any CSS Style Sheet that conforms to CSS 2.1 may be used in the
                    context of an EPUB Publication, except as noted in <xref linkend="sec-css-2.1"/>.</para>
                <para>This specification also incorporates features defined by CSS3 Modules and introduces EPUB-specific CSS
                    constructs.</para>
            </section>

            <section xml:id="sec-overview-versioning">
                <title>Future Maintenance</title>
                <para xml:id="sec-overview-versionining">This specification references W3C specifications that are not yet
                    final, and incompatible changes to them may occur in the future that would cause EPUB 3.1 Content
                    Documents that were previously conformant to no longer be conformant to the latest versions of the
                    referenced specifications.</para>
                <para>The IDPF anticipates revisions to this specification, as necessary, to update the normative constraints
                    defined herein if and when such incompatible changes occur.</para>
            </section>

        </section>

        <xi:include href="./share/terminology.xml"/>

        <xi:include href="./share/typography.xml"/>

        <xi:include href="./share/conformancestatements.xml"/>

        <xi:include href="./share/deprecated.xml"/>

        <section xml:id="sec-overview-pfx">
            <title>Namespace prefix mapping</title>

            <para>For convenience, the following namespace prefixes <xref linkend="refXMLNamespaces"/> are used in this
                specification without explicitly being declared. To use any of these prefixes in an <olink targetdoc="spec"
                    targetptr="gloss-content-document-epub" type="epub-spec"/>, a declaration is <literal role="rfc2119"
                    >required</literal>.</para>

            <table xml:id="tbl-nspfx">
                <caption>Prefix mappings</caption>
                <tr>
                    <th class="left">prefix</th>
                    <th class="odd">URI</th>
                </tr>
                <tr>
                    <td class="left">
                        <markup>epub</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.idpf.org/2007/ops</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>m</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.w3.org/1998/Math/MathML</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>pls</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.w3.org/2005/01/pronunciation-lexicon</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>ssml</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.w3.org/2001/10/synthesis</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>svg</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.w3.org/2000/svg</uri>
                    </td>
                </tr>
            </table>

        </section>
    </chapter>

    <chapter xml:id="sec-html">
        <title>HTML Content Documents</title>

        <section>
            <title>Introduction</title>

            <para>This section defines a profile of <xref linkend="refHTML5"/> for creating HTML Content Documents. An
                instance of an HTML document that conforms to this profile is a <olink targetdoc="spec"
                    targetptr="gloss-core-media-type" type="epub-spec"/> and is referred to in this specification as an
                    <olink targetdoc="spec" targetptr="gloss-content-document-epub-html" type="epub-spec"/>.</para>

            <para>Unless otherwise specified, this specification inherits all definitions of semantics, structure and
                processing behaviors from the <xref linkend="refHTML5"/> specification. </para>
        </section>

        <section xml:id="sec-html-conf-content" xreflabel="HTML Content Documents — Content Conformance">
            <title>Content Conformance</title>
            <para>An <olink targetdoc="spec" targetptr="gloss-content-document-epub-html" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>
            <variablelist role="conformance-list" xml:id="confreq-cd-html">
                <varlistentry xml:id="confreq-cd-html-docprops">
                    <term>Document Properties</term>
                    <listitem>
                        <para xml:id="confreq-cd-html-docprops-syntax">It <literal role="rfc2119">must</literal> be an <xref
                                linkend="refHTML5"/> document that conforms to the <link
                                xlink:href="http://www.w3.org/TR/html5/syntax.html#syntax">HTML</link> or <link
                                xlink:href="http://www.w3.org/TR/html5/the-xhtml-syntax.html#the-xhtml-syntax">XHTML</link>
                            syntax.</para>

                        <para xml:id="confreq-cd-html-html"> If it uses the <link
                                xlink:href="http://www.w3.org/TR/html5/syntax.html#syntax">HTML syntax</link>
                            <xref linkend="refHTML5"/>, it <literal role="rfc2119">must</literal> be encoded in UTF-8 or
                            UTF-16 <xref linkend="refUnicode5"/>.</para>

                        <para xml:id="confreq-cd-html-xml">If it uses the <link
                                xlink:href="http://www.w3.org/TR/html5/the-xhtml-syntax.html#the-xhtml-syntax">XHTML
                                syntax</link>
                            <xref linkend="refHTML5"/>, it <literal role="rfc2119">must</literal> meet the conformance
                            constraints for XML documents defined in <olink epub:spec-include="default" type="epub-spec"
                                targetdoc="spec" targetptr="sec-xml-constraints"/>. </para>

                        <para xml:id="confreq-cd-html-docprops-html5">For all document constructs used that are defined by
                                <xref linkend="refHTML5"/>, it <literal role="rfc2119">must</literal> conform to the
                            conformance criteria defined for those constructs in that specification, unless explicitly
                            overridden in <xref linkend="sec-html-deviations"/>.</para>

                        <para xml:id="confreq-cd-html-docprops-schema">It <literal role="rfc2119">may</literal> include
                            extensions to the <xref linkend="refHTML5"/> grammar as defined in <xref
                                linkend="sec-html-extensions"/>, and <literal role="rfc2119">must</literal> conform to all
                            content conformance constraints defined therein. </para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="confreq-cd-html-fileprops">
                    <term>File Properties</term>
                    <listitem>
                        <para xml:id="confreq-cd-html-fileprops-name">HTML Content Documents that use the <link
                                xlink:href="http://www.w3.org/TR/html5/syntax.html#syntax">HTML syntax</link>
                            <xref linkend="refHTML5"/>
                            <literal role="rfc2119">should</literal> use the file extension
                            <filename>.html</filename>.</para>
                        <para xml:id="confreq-cd-xhtml-fileprops-name">HTML Content Document that use the <link
                                xlink:href="http://www.w3.org/TR/html5/the-xhtml-syntax.html#the-xhtml-syntax">XHTML
                                syntax</link>
                            <xref linkend="refHTML5"/>
                            <literal role="rfc2119">should</literal> use the file extension
                            <filename>.xhtml</filename></para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>

        <section xml:id="sec-html-conf-rs" xreflabel="HTML Content Documents — Reading System Conformance">
            <title>Reading System Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria for processing <olink
                    targetdoc="spec" targetptr="gloss-content-document-epub-html" type="epub-spec">HTML Content
                    Documents</olink>:</para>

            <itemizedlist role="conformance-list" xml:id="html-rs-confreqs">
                <listitem>
                    <!-- todo below: overridden really refers to the deviations and extensions sections-->
                    <para xml:id="confreq-html-rs-behavior">Unless explicitly defined by this specification as overridden, it
                            <literal role="rfc2119">must</literal> process HTML Content Documents using semantics defined by
                        the <xref linkend="refHTML5"/> specification and honor any applicable User Agent conformance
                        constraints expressed therein.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-html-rs-behavior-syntax">It <literal role="rfc2119">must</literal> support Content
                        Documents that use either the <link xlink:href="http://www.w3.org/TR/html5/syntax.html#syntax"
                            >HTML</link> or <link
                            xlink:href="http://www.w3.org/TR/html5/the-xhtml-syntax.html#the-xhtml-syntax">XHTML</link>
                        syntaxes defined in <xref linkend="refHTML5"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-html-rs-behavior-add">It <literal role="rfc2119">must</literal> meet all Reading
                        System conformance criteria defined in <xref linkend="sec-html-extensions"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-html-rs-behavior-restr">It <literal role="rfc2119">must</literal> recognize and
                        adapt behaviorally to the constraints defined in <xref linkend="sec-html-deviations"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-html-rs-scrpt">It <literal role="rfc2119">must</literal> meet the Reading System
                        conformance criteria defined in <xref linkend="sec-scripted-content-rs-reqs"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-html-rs-css">It <literal role="rfc2119">must</literal> support visual rendering of
                        HTML Content Documents as defined in <xref linkend="sec-css-rs-conf"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-html-rs-a11y">It <literal role="rfc2119">should</literal> recognize embedded ARIA
                        markup and support exposure of any given ARIA roles, states and properties to platform accessibility
                        APIs <xref linkend="refARIA"/>. </para>
                </listitem>
            </itemizedlist>
        </section>

        <section xml:id="sec-html-extensions">
            <title>HTML5 Extensions</title>

            <section xml:id="sec-html-general-intro">
                <title>Introduction</title>

                <para>This section defines EPUB 3.1 <olink targetdoc="spec" targetptr="gloss-content-document-epub-html"
                        type="epub-spec"/> extensions to the underlying <xref linkend="refHTML5"/> document model.</para>

                <para>The extensions are divided into two categories: those that can be used in HTML Content Documents
                    regardless of whether they use the HTML or XHTML syntax (<xref linkend="sec-html-general-extensions"/>),
                    and those designed when EPUB 3 only supported the XHTML syntax and for which no equivalent functionality
                    is available in the HTML syntax (<xref linkend="sec-xhtml-extensions"/>).</para>

                <para>The W3C is actively developing many specifications that enhance and extend the core functionality
                    defined in <xref linkend="refHTML5"/>, but if these extensions are not listed in this section they are
                    not available for use in EPUB Content Documents. New additions are considered in each revision to the
                    standard.</para>
            </section>

            <section xml:id="sec-html-general-extensions">
                <title>General Extensions</title>

                <section xml:id="sec-html-semantic-inflection" xreflabel="HTML Semantic Inflection">
                    <title>Semantic Inflection</title>

                    <section xml:id="sec-html-semantic-inflection-intro" conformance="informative">
                        <title>Introduction</title>

                        <para>Semantic inflection is the process of attaching additional meaning about the specific purpose
                            and/or nature an element plays in an <olink targetdoc="spec"
                                targetptr="gloss-content-document-epub-html" type="epub-spec"/>. The <xref linkend="refHTML5"
                            /> implementation of the <link
                                xlink:href="http://www.w3.org/TR/html5/dom.html#aria-role-attribute">ARIA
                                    <markup>role</markup> attribute</link> is used to express domain-specific semantics in
                            HTML Content Documents, with the inflection(s) it carries complementing the underlying <xref
                                linkend="refHTML5"/> host vocabulary.</para>

                        <para>The applied semantics are intended to refine the meaning of their containing elements; they are
                            not provided to override their nature (e.g., the attribute can be used to indicate a
                                <markup>section</markup> is a chapter in a work, but is not designed to turn
                                <markup>p</markup> elements into list items to avoid proper list structures).</para>

                        <para>Semantic metadata is not intended for direct human consumption; it instead provides a
                            controlled way for Reading Systems and other User Agents to learn more about the structure and
                            content of a document, providing them the opportunity to enhance the reading experience for
                            Users. </para>

                        <para>This specification defines a method for semantic inflection using <emphasis>the attribute
                                axis</emphasis>: instead of adding new elements, the <markup>role</markup> attribute can be
                            appended to existing elements to inflect the desired semantics.</para>
                    </section>

                    <section xml:id="sec-html-aria-role-attribute">
                        <title>The ARIA <markup>role</markup> Attribute</title>

                        <para>The <xref linkend="refHTML5"/> implementation of the <link
                                xlink:href="http://www.w3.org/TR/html5/dom.html#aria-role-attribute">ARIA
                                    <markup>role</markup> attribute</link> is the <literal role="rfc2119"
                                >recommended</literal> method for inflecting semantics on <olink targetdoc="spec"
                                targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content
                            Documents</olink>.</para>

                        <para>The <markup>role</markup> attribute supersedes the <link linkend="sec-epub-type-attribute"
                                    ><markup>epub:type</markup> attribute</link>, as it is compatible with both the HTML and
                            XHTML syntaxes of <xref linkend="refHTML5"/>, which ensures a single common method for adding
                            semantics.</para>

                        <para>The primary vocabulary for roles for use in HTML Content Documents is the <link
                                xlink:href="http://www.w3.org/TR/dpub-aria-1.0/">W3C Digital Publishing WAI-ARIA Module
                                1.0</link>
                            <xref linkend="refDPUBVocab"/>, but roles defined in <xref linkend="refARIA11"/> and in other
                            modules maintained by the WAI-ARIA Working Group are also valid.</para>

                        <annotation xml:id="issue-aria-registry">
                            <para>Need to find out if the WAI-ARIA group will be maintaining a registry of role modules so we
                                can point to a concrete page here.</para>
                        </annotation>

                        <note>
                            <para>Mapping of properties in the <xref linkend="refEPUBStructureVocab"/> to applicable ARIA
                                roles is available at <link
                                    xlink:href="http://www.idpf.org/epub/vocab/structure/mapping.html"/>.</para>
                        </note>

                        <para>Due to the tight binding the <markup>role</markup> attribute has with assistive technologies,
                            Authors are strongly encouraged to familiarize themselves with proper use of the attribute and
                            roles, as outlined in <xref linkend="refARIA11"/>. Incorrect application of roles to elements
                            could negatively impact on the usability of publications.</para>

                        <note>
                            <para>See also <xref linkend="refARIAHTML"/> for more information about the use of the roles in
                                HTML.</para>
                        </note>
                    </section>

                    <section xml:id="sec-epub-type-attribute" spec:scope="xhtml">
                        <title>The <markup>epub:type</markup> Attribute</title>

                        <para>The <link
                                xlink:href="http://www.idpf.org/epub/301/spec/epub-contentdocs.html#sec-xhtml-content-type-attribute"
                                    ><markup>epub:type</markup> attribute</link>
                            <xref linkend="refContentDocs301"/> has been superseded by the <link
                                linkend="sec-html-aria-role-attribute">ARIA <markup>role</markup> attribute</link>, but
                                <literal role="rfc2119">may</literal> still be used in <olink targetdoc="spec"
                                targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content
                            Documents</olink>.</para>

                        <para>The <markup>epub:type</markup> attribute is retained primarily for compatibility for modular
                            extensions for which equivalent roles do not yet exist.</para>

                        <para><olink targetdoc="spec" targetptr="gloss-author" type="epub-spec">Authors</olink>
                            <literal role="rfc2119">should</literal> use the <markup>role</markup> attribute whenever an
                            equivalent semantic is available, but <literal role="rfc2119">may</literal> include both
                            attributes.</para>
                    </section>

                </section>

                <section xml:id="sec-html-semantic-enrichment" xreflabel="HTML Semantic Enrichment">
                    <title>Semantic Enrichment</title>

                    <section xml:id="sec-html-semantic-enrichment-intro" conformance="informative">
                        <title>Introduction</title>

                        <para>Unlike <link linkend="sec-html-semantic-inflection">semantic inflection</link>, which is about
                            refining the structures within your markup, semantic enrichment enables the layering of meaning
                            into the content in order to facilitate machine processing.</para>

                        <para>The <xref linkend="refMicrodata"/> and <xref linkend="refRDFa"/> specifications both define
                            sets of attributes that can be used in <olink targetdoc="spec"
                                targetptr="gloss-content-document-epub-html" type="epub-spec">HTML Content Documents</olink>
                            to semantically enrich the content.</para>
                    </section>

                    <section xml:id="sec-html-semantic-enrichment-content-conf">
                        <title>Content Conformance</title>

                        <para>A conformant <olink targetdoc="spec" targetptr="gloss-content-document-epub-html"
                                type="epub-spec"/>
                            <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

                        <itemizedlist role="conformance-list" xml:id="html-semantic-enrichment-confreqs">
                            <listitem>
                                <para xml:id="confreq-html-microdata">It <literal role="rfc2119">must</literal> allow the use
                                    of <xref linkend="refMicrodata"/> attributes as defined in that specification.</para>
                            </listitem>
                            <listitem>
                                <para xml:id="confreq-html-rdfa">It <literal role="rfc2119">must</literal> allow the use of
                                        <xref linkend="refRDFa"/> attributes as defined in <xref linkend="refHTMLRDFa"
                                    />.</para>
                            </listitem>
                        </itemizedlist>
                    </section>

                    <section xml:id="sec-html-semantic-enrichment-processing-reqs">
                        <title>Processing Requirements</title>

                        <para>Reading Systems <literal role="rfc2119">may</literal> process <xref linkend="refMicrodata"/>
                            and <xref linkend="refRDFa"/> attributes as defined in their respective specifications, but such
                            support is <literal role="rfc2119">optional</literal>.</para>
                    </section>

                </section>


                <section xml:id="sec-html-alternate-style-tags">
                    <title>Alternate Style Tags</title>
                    <para>In accordance with <xref linkend="refAlternateStyleTags"/> , the <markup>link</markup> element
                            <markup>class</markup> attribute <literal role="rfc2119">may</literal> include any of the
                        following values: <code role="value">horizontal</code>, <code role="value">vertical</code>, <code
                            role="value">day</code> and <code role="value">night</code>. These values inherit the semantics
                        defined by that specification for their use.</para>
                    <para>Reading Systems <literal role="rfc2119">should</literal> select and utilize such tagged style sets
                        as appropriate, and as described in that specification.</para>
                </section>
            </section>

            <section xml:id="sec-xhtml-extensions">
                <title>XHTML Extensions</title>

                <caution>
                    <para>The following features are only available in HTML Content Documents that use the <link
                            xlink:href="http://www.w3.org/TR/html5/the-xhtml-syntax.html#the-xhtml-syntax">XHTML
                            syntax</link> of <xref linkend="refHTML5"/>.</para>
                    <para>Deprecated features will be removed from a future version of the specification. Features not marked
                        as deprecated are expected to be harmonized with the <link
                            xlink:href="http://www.w3.org/TR/html5/syntax.html#syntax">HTML syntax</link>, in which case they
                        will not be available in their current form.</para>
                </caution>

                <section xml:id="sec-xhtml-ssml-attrib">
                    <title>SSML Attributes</title>

                    <section xml:id="sec-cd-ssml-intro">
                        <title>Introduction</title>

                        <para>The W3C Speech Synthesis Markup Language <xref linkend="refSSML"/> is a language used for
                            assisting <olink targetdoc="spec" targetptr="gloss-tts" type="epub-spec"/> engines in generating
                            synthetic speech. Although SSML is designed as a standalone document type, it also defines
                            semantics suitable for use within other host languages.</para>

                        <para>This specification recasts the <link
                                xlink:href="http://www.w3.org/TR/speech-synthesis11/#S3.1.10">SSML 1.1
                                    <markup>phoneme</markup> element</link> as two attributes — <markup>ssml:ph</markup> and
                                <markup>ssml:alphabet</markup> — and makes them available within HTML Content
                            Documents.</para>

                        <para>Reading Systems with <olink targetdoc="spec" targetptr="gloss-tts" type="epub-spec"/>
                            capabilities <literal role="rfc2119">should</literal> support the SSML Attributes as defined
                            below.</para>

                        <xi:include href="./share/note-tts-features.xml"/>

                    </section>

                    <section xml:id="sec-cd-ssml-ph-attrib" spec:scope="xhtml">
                        <title>The <markup>ssml:ph</markup> attribute</title>
                        <para>The <markup>ssml:ph</markup> attribute specifies a phonemic/phonetic pronunciation of the text
                            represented by the element to which the attribute is attached.</para>
                        <variablelist xreflabel="ssml:ph" role="elem-synopsis" xml:id="attrdef-ssml-ph">
                            <varlistentry>
                                <term>Attribute Name</term>
                                <listitem>
                                    <para>
                                        <markup>ph</markup>
                                    </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Namespace</term>
                                <listitem>
                                    <para>
                                        <uri>http://www.w3.org/2001/10/synthesis</uri>
                                    </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Usage</term>
                                <listitem>
                                    <para><link xlink:href="http://www.w3.org/TR/html5/dom.html#global-attributes">Global
                                            attribute</link>. May be specified on all elements with which a phonetic
                                        equivalent can logically be associated (e.g., elements that contain textual
                                        information).</para>
                                    <para>Must not be specified on a descendant of an element that already carries this
                                        attribute.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Value</term>
                                <listitem>
                                    <para>A phonemic/phonetic expression, syntactically valid with respect to <link
                                            linkend="sec-cd-ssml-alphabet-attrib">the phonemic/phonetic alphabet being
                                            used</link>.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>
                        <para>This attribute inherits all the semantics of the <link linkend="refSSML">SSML 1.1</link>
                            <markup>phoneme</markup> element <markup
                                xlink:href="http://www.w3.org/TR/speech-synthesis11/#S3.1.10"> ph</markup> attribute, with
                            the following addition:</para>
                        <itemizedlist role="conformance-list">
                            <listitem>
                                <para xml:id="ssml-ph-concat"> When the <markup>ssml:ph</markup> attribute appears on an
                                    element that has text node descendants, the corresponding document text to which the
                                    pronunciation applies is the string that results from concatenating the descendant text
                                    nodes, in document order. The specified phonetic pronunciation <literal role="rfc2119"
                                        >must</literal> therefore logically match the element's textual data in its entirety
                                    (i.e., not just an isolated part of its content).</para>
                            </listitem>
                        </itemizedlist>
                        <note>
                            <para>Reading Systems that support the SSML Attributes and <link linkend="sec-pls">PLS
                                    Documents</link> must honor the defined <link linkend="confreq-pls-rs-casc">precedence
                                    rules</link> for these two constructs. </para>
                        </note>
                    </section>

                    <section xml:id="sec-cd-ssml-alphabet-attrib" spec:scope="xhtml">
                        <title>The <markup>ssml:alphabet</markup> attribute</title>

                        <para>The <markup>ssml:alphabet</markup> attribute specifies which phonemic/phonetic pronunciation
                            alphabet is used in the value of the <markup><xref linkend="attrdef-ssml-ph"/></markup>
                            attribute.</para>

                        <variablelist xreflabel="ssml:alphabet" role="elem-synopsis" xml:id="attrdef-ssml-alphabet">
                            <varlistentry>
                                <term>Attribute Name</term>
                                <listitem>
                                    <para>
                                        <markup>alphabet</markup>
                                    </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Namespace</term>
                                <listitem>
                                    <para>
                                        <uri>http://www.w3.org/2001/10/synthesis</uri>
                                    </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Usage</term>
                                <listitem>
                                    <para><link xlink:href="http://www.w3.org/TR/html5/dom.html#global-attributes">Global
                                            attribute</link>. <literal role="rfc2119">May</literal> be specified on any
                                        element.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Value</term>
                                <listitem>
                                    <para>The name of the pronunciation alphabet used in the value of <markup><xref
                                                linkend="attrdef-ssml-ph"/></markup> (inherited). </para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <para>This attribute inherits all the semantics of the <link linkend="refSSML">SSML 1.1</link>
                            <markup>phoneme</markup> element <markup
                                xlink:href="http://www.w3.org/TR/speech-synthesis11/#S3.1.10"> alphabet</markup> attribute,
                            with the following addition:</para>
                        <itemizedlist role="conformance-list">
                            <listitem>
                                <para xml:id="ssml-alphabet-inherit">The value of the <markup>ssml:alphabet</markup>
                                    attribute is inherited in the document tree. The pronunciation alphabet used in a given
                                        <markup>ssml:ph</markup> attribute value is determined by locating the first
                                    occurrence of the <markup>ssml:alphabet</markup> attribute starting with the element on
                                    which the <markup>ssml:ph</markup> attribute appears, followed by the nearest ancestor
                                    element.</para>
                            </listitem>
                        </itemizedlist>

                        <para>Reading Systems that support the <link linkend="sec-xhtml-ssml-attrib">SSML Attributes</link>
                            feature of this specification <literal role="rfc2119">should</literal> support the IPA alphabet
                                <xref linkend="refIPA"/>, as expressed by the value "<code role="value">ipa</code>".</para>
                    </section>
                </section>

                <section xml:id="sec-xhtml-custom-attributes" spec:scope="xhtml">
                    <title>Custom Attributes</title>

                    <para><olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec">Reading
                            Systems</olink>
                        <literal role="rfc2119">may</literal> introduce functionality not defined in this specification to
                        enhance the rendering of <olink targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"
                            >EPUB Publications</olink>. To facilitate this experimentation, vendors <literal role="rfc2119"
                            >may</literal> define custom attributes for use in <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-html" type="epub-spec">HTML Content
                        Documents</olink>.</para>

                    <para>Custom attributes <literal role="rfc2119">may</literal> be included on any element in an HTML
                        Content Document provided such attributes are from a foreign namespace, which is defined as a
                        namespace <xref linkend="refXMLNamespaces"/> that does not map to either of the following
                        URIs:</para>

                    <itemizedlist>
                        <listitem>
                            <para><uri>http://www.w3.org/1999/xhtml</uri></para>
                        </listitem>
                        <listitem>
                            <para><uri>http://www.idpf.org/2007/ops</uri></para>
                        </listitem>
                    </itemizedlist>

                    <para>Custom attributes, and the behaviors associated with them, <literal role="rfc2119">must
                            not</literal> alter the integrity of an EPUB Publication. The content <literal role="rfc2119"
                            >must</literal> remain consumable by a User without any information loss or other significant
                        deterioration, regardless of the Reading System it is rendered on.</para>

                    <note>
                        <para>To facilitate interoperability of custom attributes across Reading Systems, vendors are
                            strongly encouraged to document any extensions they implement at <uri
                                xlink:href="http://www.idpf.org/epub/extensions/attributes"
                                >http://www.idpf.org/epub/extensions/attributes</uri>.</para>
                    </note>
                </section>
            </section>
        </section>

        <section xml:id="sec-html-deviations">
            <title>HTML5 Deviations and Constraints</title>

            <para>This section defines deviations from, and constraints on, the underlying <xref linkend="refHTML5"/>
                document model applicable to EPUB 3.1 <olink targetdoc="spec" targetptr="gloss-content-document-epub-html"
                    type="epub-spec">HTML Content Documents</olink>.</para>

            <section xml:id="sec-html-mathml">
                <title>Embedded MathML</title>

                <section xml:id="sec-html-mathml-intro" conformance="informative">
                    <title>Introduction</title>

                    <para>HTML Content Documents support embedded <xref linkend="refMathML"/> but limit its usage to a
                        restricted subset of the full MathML markup language.</para>

                    <para>This subset is designed to ease the implementation burden on Reading Systems and to promote
                        accessibility, while retaining compatibility with <xref linkend="refHTML5"/> User Agents. </para>

                    <note>
                        <para>The <link xlink:href="../../vocab/package/epub-vocab-package.html#mathml"
                                    ><property>mathml</property> property</link>
                            <xref linkend="refEPUBPackageVocab"/> of the <olink targetdoc="spec" targetptr="gloss-manifest"
                                type="epub-spec"/>
                            <markup>item</markup> element indicates that an HTML Content Document contains embedded
                            MathML.</para>
                    </note>

                </section>

                <section xml:id="sec-html-mathml-conf-content" xreflabel="Embedded MathML — Content Conformance">
                    <title>Content Conformance</title>

                    <para>Any occurrence of MathML markup in HTML Content Documents <literal role="rfc2119">must</literal>
                        conform to the constraints expressed in the MathML specification <xref linkend="refMathML"/>, with
                        the following additional restrictions:</para>

                    <variablelist role="conformance-list">
                        <varlistentry xml:id="math-pres">
                            <term>Presentation MathML</term>
                            <listitem>
                                <para xml:id="confreq-mathml-pres">The <markup>math</markup> element <literal role="rfc2119"
                                        >must</literal> contain only <link
                                        xlink:href="http://www.w3.org/TR/MathML/chapter3.html">Presentation MathML</link>,
                                    with the exception of the <markup>annotation-xml</markup> element as defined
                                    below.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry xml:id="math-cont">
                            <term>Content MathML</term>
                            <listitem>
                                <para xml:id="confreq-mathml-annot-cont"><link
                                        xlink:href="http://www.w3.org/TR/MathML/chapter4.html">Content MathML</link>
                                    <literal role="rfc2119">may</literal> be included within MathML markup in HTML Content
                                    Documents, and, when present, <literal role="rfc2119">must</literal> occur within an
                                        <markup>annotation-xml</markup> child element of an <markup>semantics</markup>
                                    element.</para>
                                <para xml:id="confreq-mathml-annot-cont-attrs">When Content MathML is included as per the
                                    previous condition, the given <markup>annotation-xml</markup> element's
                                        <markup>encoding</markup> attribute <literal role="rfc2119">must</literal> be set to
                                    either of the functionally-equivalent values <code role="value">MathML-Content</code> or
                                        <code role="value">application/mathml-content+xml</code>, and its
                                        <markup>name</markup> attribute <literal role="rfc2119">must</literal> be set to
                                        <code role="value">contentequiv</code>. </para>
                            </listitem>
                        </varlistentry>
                        <varlistentry xml:id="math-deprecated">
                            <term>Deprecated MathML</term>
                            <listitem>
                                <para xml:id="confreq-mathml-deprecated">Elements and attributes marked as deprecated in
                                        <xref linkend="refMathML"/>
                                    <literal role="rfc2119">must not</literal> be included within MathML markup in HTML
                                    Content Documents.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry xml:id="math-html">
                            <term>HTML Content Document fragments</term>
                            <listitem>
                                <para xml:id="confreq-mathml-annot-xht">HTML Content Document fragments <literal
                                        role="rfc2119">may</literal> be included within MathML markup in HTML Content
                                    Documents, and, when present, <literal role="rfc2119">must</literal> occur within an
                                        <markup>annotation-xml</markup> child element of an <markup>semantics</markup>
                                    element.</para>
                                <para xml:id="confreq-mathml-annot-xht-attrs">When an HTML Content Document fragment is
                                    included as per the above paragraph, the given <markup>annotation-xml</markup> element's
                                        <markup>encoding</markup> attribute <literal role="rfc2119">must</literal> be set to
                                    the media type of the parent HTML Content Document (either <code role="value"
                                        >application/xhtml+xml</code> or <code role="value">text/html</code>) and its
                                        <markup>name</markup> attribute <literal role="rfc2119">must</literal> be set to
                                        <code role="value">alternate-representation</code>.</para>
                                <para xml:id="confreq-mathml-annot-xht-math">Any included HTML Content Document fragments
                                        <literal role="rfc2119">must not</literal> themselves contain MathML markup.</para>
                                <para xml:id="confreq-mathml-annot-xht-model">Any included HTML Content Document fragments
                                        <literal role="rfc2119">must</literal> conform to the content model in which the
                                    ancestor <markup>math</markup> element occurs, such that if the <markup>math</markup>
                                    element is replaced by the given HTML Content Document fragment the document remains
                                    valid.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry xml:id="math-alt">
                            <term>Alternative Content</term>
                            <listitem>
                                <para xml:id="confreq-mathml-alt">Alternative content <literal role="rfc2119"
                                        >should</literal> be included, and, when present, <literal role="rfc2119"
                                        >must</literal> be represented as defined in <xref linkend="sec-html-mathml-alt"
                                    />.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>

                </section>


                <section xml:id="sec-html-mathml-rs-conf" xreflabel="Embedded MathML — Reading System Conformance">
                    <title>Reading System Conformance</title>

                    <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                        <literal role="rfc2119">must</literal> meet all of the following criteria for processing MathML
                        embedded in HTML Content Documents:</para>

                    <itemizedlist role="conformance-list" xml:id="mathml-rs-confreqs">
                        <listitem>
                            <para xml:id="confreq-mathml-rs-behavior">It <literal role="rfc2119">must</literal> support
                                processing of <link xlink:href="http://www.w3.org/TR/MathML/chapter3.html">Presentation
                                    MathML</link>, and <literal role="rfc2119">may</literal> support processing of <link
                                    xlink:href="http://www.w3.org/TR/MathML/chapter4.html">Content MathML</link>, using
                                semantics defined by the MathML 3.0 specification <xref linkend="refMathML"/>.</para>
                        </listitem>
                        <listitem>
                            <para xml:id="confreq-mathml-rs-render">If it has a <olink targetdoc="spec"
                                    targetptr="gloss-viewport" type="epub-spec"/>, it <literal role="rfc2119">must</literal>
                                support visual rendering of Presentation MathML.</para>
                        </listitem>
                        <listitem>
                            <para xml:id="confreq-mathml-rs-alt-text">When producing <link linkend="sec-html-mathml-alt"
                                    >alternative textual content</link> for MathML markup, it <literal role="rfc2119"
                                    >should</literal> be able to dynamically generate such content from the given <link
                                    linkend="confreq-mathml-pres">Presentation MathML</link>, and if not, <literal
                                    role="rfc2119">must</literal> give preference to <link linkend="math-html">HTML Content
                                    Document fragments</link> followed by the <markup>alttext</markup> attribute on the
                                    <markup>math</markup> element.</para>
                        </listitem>
                        <listitem>
                            <para xml:id="confreq-rs-mathml-prop">It <literal role="rfc2119">must</literal> regard the <link
                                    xlink:href="../../vocab/package/epub-vocab-package.html#mathml"
                                        ><property>mathml</property> property</link>
                                <xref linkend="refEPUBPackageVocab"/> of the <olink targetdoc="spec"
                                    targetptr="gloss-package-document" type="epub-spec"/>
                                <olink targetdoc="spec" targetptr="gloss-manifest" type="epub-spec"/>
                                <markup>item</markup> element as the authoritative definition of whether an HTML Content
                                Document includes embedded MathML.</para>
                        </listitem>

                    </itemizedlist>
                </section>

                <section xml:id="sec-html-mathml-alt">
                    <title>Alternative Content</title>

                    <para>Reading Systems <literal role="rfc2119">should</literal> be able to generate any necessary
                        alternative textual rendering dynamically using the given <link linkend="confreq-mathml-pres"
                            >Presentation MathML</link> markup (e.g., as output to <olink targetdoc="spec"
                            targetptr="gloss-tts" type="epub-spec"/> engines). To support Reading Systems that are not so
                        capable, alternative textual content <literal role="rfc2119">should</literal> be included with each
                        occurrence of the <markup>math</markup> element in HTML Content Documents.</para>

                    <para>The <markup>alttext</markup> attribute on the <markup>math</markup> element <literal role="rfc2119"
                            >should</literal> be used for this purpose primarily when shorter alternative text runs are
                        sufficient. When more extensive alternative text is required, <link linkend="math-html">HTML Content
                            Document fragments</link>
                        <literal role="rfc2119">should</literal> be used. (Note that Reading Systems query these two
                        alternative text locations using a defined <link linkend="confreq-mathml-rs-alt-text">preference
                            order</link>.) </para>

                    <para>For Reading System forward compatibility purposes, fallback images <literal role="rfc2119"
                            >may</literal> be provided using the <markup>altimg</markup> attribute on the
                            <markup>math</markup> element. It is <literal role="rfc2119">recommended</literal> that the
                        dimension and alignment attributes (<markup>altimg-width</markup>, <markup>altimg-height</markup> and
                            <markup>altimg-valign</markup>) be used in conjunction with the <markup>altimg</markup>
                        attribute.</para>

                    <note xml:id="note-mathml-altimg-refprops-pkg">
                        <!-- note similar statement for xhtml, svg and css and mathml alternative content -->
                        <para><olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"
                                >Publication Resources</olink> referenced from alternative content have conform to the
                            constraints for Publication Resources defined in <olink targetdoc="spec"
                                targetptr="sec-epub-pub-conf" type="epub-spec"/>.</para>
                    </note>
                </section>

            </section>

            <section xml:id="sec-html-svg">
                <title>Embedded SVG</title>
                <!-- http://www.w3.org/TR/html5/the-map-element.html#svg-0 -->

                <para><olink targetdoc="spec" targetptr="gloss-content-document-epub-html" type="epub-spec">HTML Content
                        Documents</olink> support the embedding of <link
                        xlink:href="http://www.w3.org/TR/SVG/intro.html#TermSVGDocumentFragment">SVG 1.1 document
                        fragments</link>
                    <emphasis>by reference</emphasis> (embedding via reference, for example, from an <markup>img</markup> or
                        <markup>object</markup> element) and <emphasis>by inclusion</emphasis> (embedding via direct
                    inclusion of the <markup>svg</markup> element in the HTML Content Document) <xref linkend="refSVG"
                    />.</para>

                <para>The content conformance constraints for SVG embedded in HTML Content Documents are the same as defined
                    for <olink targetdoc="spec" targetptr="gloss-content-document-epub-svg" type="epub-spec">SVG Content
                        Documents</olink> in <xref linkend="sec-svg-restrictions"/>, with the exception that SVG embedded
                    in the HTML syntax does not have to meet the <link linkend="confreq-cd-svg-xml">XML conformance
                        requirements</link>.</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> process SVG embedded in HTML Content Documents
                    as defined in <xref linkend="sec-svg-rs-conf"/>.</para>

                <note>
                    <para>The <link xlink:href="../../vocab/package/epub-vocab-package.html#svg"><property>svg</property>
                            property</link>
                        <xref linkend="refEPUBPackageVocab"/> of the <olink targetdoc="spec" targetptr="gloss-manifest"
                            type="epub-spec"/>
                        <markup>item</markup> element indicates that an HTML Content Document contains embedded SVG.</para>
                </note>

                <!--
                    <note>
                        <para>This section defines conformance requirements for SVG embedded in
                            HTML Content Documents. Refer to <xref linkend="sec-svg"/> for
                            conformance requirements for SVG as an EPUB Content Document.</para>
                    </note>
                    -->

                <section xml:id="sec-html-svg-css">
                    <title>Embedded SVG and CSS</title>

                    <para xml:id="confreq-svg-rs-css-embed-ref">For the purposes of styling SVG embedded in HTML Content
                        Documents <emphasis>by reference</emphasis>, Reading Systems <literal role="rfc2119">must
                            not</literal> apply CSS style rules of the containing document to the referenced SVG
                        document.</para>

                    <para xml:id="confreq-svg-rs-css-embed-inc">For the purposes of styling SVG embedded in HTML Content
                        Documents <emphasis>by inclusion</emphasis>, Reading Systems <literal role="rfc2119">must</literal>
                        apply applicable CSS rules of the containing document to the included SVG elements.</para>

                    <note>
                        <para>SVG included <emphasis>by reference</emphasis> is processed as a separate document, and may
                            include its own CSS style rules just like an <olink targetdoc="spec"
                                targetptr="gloss-content-document-epub-svg" type="epub-spec"/> would. Note that this is
                            consistent with situations where an <xref linkend="refHTML5"/>
                            <markup xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#the-object-element"
                                >object</markup> element references an external <xref linkend="refHTML5"/> element.</para>
                    </note>

                </section>

            </section>

            <section xml:id="sec-html-deviations-unicode">
                <title>Unicode Restrictions</title>

                <para>This section lists restrictions on the Unicode character repertoire.</para>

                <variablelist>
                    <varlistentry>
                        <term>Private Use Characters and Embedded Fonts</term>
                        <listitem>
                            <para xml:id="confreq-html-unicode-pua">Any included characters that map to a code point within
                                one of the Private Use Area (PUA) ranges as defined in <xref linkend="refUnicode5"/>
                                <literal role="rfc2119">must</literal> occur within a string that is styled or attributed in
                                a manner that includes a reference to an <link linkend="sec-css-fonts">embedded font</link>
                                that contains an appropriate glyph for that code point.</para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </section>

            <section xml:id="sec-html-deviations-discouraged">
                <title>Discouraged Constructs</title>
                <variablelist role="conformance-list">
                    <varlistentry>
                        <term>The <markup>rp</markup> Element</term>
                        <listitem>
                            <para xml:id="confreq-html-vocab-rp">The <xref linkend="refHTML5"/>
                                <markup xlink:href="http://www.w3.org/TR/html5/text-level-semantics.html#the-rp-element"
                                    >rp</markup> element is intended to provide a fallback — an optional parenthesis display
                                around <markup>ruby</markup> markup — for older version <olink targetdoc="spec"
                                    targetptr="gloss-epub-reading-system" type="epub-spec">Reading Systems</olink> that do
                                not recognize ruby markup. As EPUB 3.1 Reading Systems are ruby-aware, and can provide
                                fallbacks, the use of <markup>rp</markup> elements in <olink targetdoc="spec"
                                    targetptr="gloss-content-documents-html">HTML Content Documents</olink> is
                                discouraged.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>The <markup>embed</markup> Element</term>
                        <listitem>
                            <para xml:id="confreq-html-vocab-embed">Since the <xref linkend="refHTML5"/>
                                <markup xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#the-embed-element"
                                    >embed</markup> element does not provide intrinsic facilities to provide <link
                                    linkend="confreq-rs-scripted-flbk">fallbacks</link> for Reading Systems that do not
                                support scripting, its use is discouraged when the resource referenced has scripting
                                components. <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec">Authors</olink>
                                <literal role="rfc2119">should</literal> use the <markup>object</markup> element
                                instead.</para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </section>

            <section xml:id="sec-html-deviations-special">
                <title>Special Considerations</title>

                <section xml:id="sec-html-deviations-special-body">
                    <title>The <markup>body</markup> element</title>

                    <para>It is assumed, in formatting, that the default rendering for the <xref linkend="refHTML5"/>
                        <markup xlink:href="http://www.w3.org/TR/html5/sections.html#the-body-element">body</markup> element
                        is consistent with the <xref linkend="refCSS21"/>
                        <property>page-break-before</property> property having been set to <code role="value">always</code>,
                        but this default <literal role="rfc2119">may</literal> be overridden by an appropriate style sheet
                        declaration.</para>
                </section>
            </section>

            <section xml:id="sec-html-fallbacks">
                <title>Foreign Resource Restrictions</title>
                <para xml:id="confreq-resources-cd-fallback">Foreign Resources <literal role="rfc2119">may</literal> be
                    referenced from elements that have explicit intrinsic fallback mechanisms (e.g., many <xref
                        linkend="refHTML5"/>
                    <link xlink:href="http://www.w3.org/TR/html5/dom.html#embedded-content">embedded content
                    elements</link>). A Core Media Type resource <literal role="rfc2119">must</literal> be provided via the
                    given element's intrinsic fallback mechanism in such cases.</para>

                <para xml:id="confreq-resources-cd-fallback-video">For both the <xref linkend="refHTML5"/>
                    <markup xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#audio">audio</markup> and <markup
                        xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#video">video</markup> elements, flow
                    content embedded within the elements does not represent a Core Media Type fallback, but <literal
                        role="rfc2119">may</literal> be included for rendering in older Reading Systems that do not recognize
                    these elements (e.g., EPUB 2 Reading Systems).</para>

                <para xml:id="confreq-resources-cd-fallback-track">The <xref linkend="refHTML5"/>
                    <markup xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#the-track-element">track</markup>
                    element is exempt from the <olink targetdoc="spec" targetptr="confreq-cmt" type="epub-spec">Core Media
                        Type usage rule</olink>: Foreign Resources <literal role="rfc2119">may</literal> be referenced from
                        <markup>track</markup> without the provision of a Core Media Type fallback.</para>

                <note>
                    <para>Refer to <olink targetdoc="packages" targetptr="sec-foreign-restrictions-manifest" type="epub-spec"
                            >manifest fallbacks</olink> for the provision of fallbacks for elements without intrinsic
                        mechanisms, such as the <xref linkend="refHTML5"/>
                        <markup xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#the-iframe-element"
                            >iframe</markup> and <markup
                            xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#the-img-element">img</markup>
                        elements.</para>
                </note>
            </section>
        </section>

    </chapter>

    <chapter xml:id="sec-svg">
        <title>SVG Content Documents</title>

        <section xml:id="sec-svg-intro" conformance="informative">
            <title>Introduction</title>

            <para>The Scalable Vector Graphics (SVG) 1.1 (Second Edition) specification <xref linkend="refSVG"/> defines a
                format for representing final-form vector graphics and text.</para>

            <para>Although an EPUB Publication typically uses <link linkend="sec-html">HTML Content Documents</link> as the
                    <olink targetdoc="spec" targetptr="gloss-content-document-top-level" type="epub-spec">top-level</olink>
                document type, the use of <olink targetdoc="spec" targetptr="gloss-content-document-epub-svg"
                    type="epub-spec">SVG Content Documents</olink> is also permitted. SVGs are typically only used in certain
                special circumstances, such as when final-form page images are the only suitable representation of the
                content (as may be the case, for example, in the context of manga or comic books). </para>

            <para>This section defines a profile for <xref linkend="refSVG"/> documents. An instance of an XML document that
                conforms to this profile is a <olink targetdoc="spec" targetptr="gloss-core-media-type" type="epub-spec"/>
                and is referred to in this specification as an <olink targetdoc="spec"
                    targetptr="gloss-content-document-epub-svg" type="epub-spec"/>.</para>

            <note>
                <para>This section defines conformance requirements for <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-svg" type="epub-spec">SVG Content Documents</olink>. Refer to
                        <xref linkend="sec-html-svg"/> for conformance requirements for SVG embedded in HTML Content
                    Documents.</para>
            </note>

        </section>
        <section xml:id="sec-svg-content-conf" xreflabel="SVG Content Documents — Content Conformance">
            <title>Content Conformance</title>
            <variablelist role="conformance-list">
                <para>An <olink targetdoc="spec" targetptr="gloss-content-document-epub-svg" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> meet all of the following criteria:</para>
                <varlistentry xml:id="confreq-svg-docprops">
                    <term>Document Properties</term>
                    <listitem role="conformance-item">
                        <para xml:id="confreq-cd-svg-xml">
                            <xi:include href="./share/xml-defref.xml"/>
                        </para>
                        <para xml:id="confreq-resources-svg-fallback">It <literal role="rfc2119">may</literal> include
                            references to <olink targetdoc="spec" targetptr="gloss-publication-resource-foreign"
                                type="epub-spec">Foreign Resources</olink> provided a fallback to a <olink targetdoc="spec"
                                targetptr="gloss-publication-resource-cmt" type="epub-spec"/> is included.</para>
                        <para xml:id="confreq-cd-svg-docprops-schema">It <literal role="rfc2119">must</literal> be an <link
                                xlink:href="http://www.w3.org/TR/SVG/intro.html#TermSVGDocumentFragment">SVG 1.1 document
                                fragment</link> valid to the constructs defined in that specification, and conform to all
                            content conformance constraints expressed in <xref linkend="sec-svg-restrictions"/>.</para>
                        <para xml:id="confreq-cd-svg-accessibility">It <literal role="rfc2119">should</literal> adhere to the
                            accessibility guidelines given in <xref linkend="refSVGAccess"/>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="confreq-svg-fileprops">
                    <term>File Properties</term>
                    <listitem>
                        <para xml:id="confreq-svg-fileprops-name">The SVG Content Document filename <literal role="rfc2119"
                                >should</literal> use the file extension <filename>.svg</filename>.</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>
        <section xml:id="sec-svg-restrictions">
            <title>Restrictions on SVG 1.1</title>

            <para>This specification restricts the content model of <olink targetdoc="spec"
                    targetptr="gloss-content-document-epub-svg" type="epub-spec">SVG Content Documents</olink> and <link
                    linkend="sec-html-svg">SVG embedded in HTML Content Documents</link> as follows:</para>

            <itemizedlist role="conformance-list" xml:id="sec-svg-restrictions-list">
                <listitem>
                    <para xml:id="confreq-svg-anim">The <xref linkend="refSVG"/>
                        <link xlink:href="http://www.w3.org/TR/SVG/animate.html#AnimationElements">Animation Elements</link>
                        and <link xlink:href="http://www.w3.org/TR/SVG/script.html#AnimationEvents">Animation event
                            attributes</link>
                        <literal role="rfc2119">must not</literal> occur. </para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-svg-foreignObject">The <xref linkend="refSVG"/>
                        <markup xlink:href="http://www.w3.org/TR/SVG11/extend.html#ForeignObjectElement"
                            >foreignObject</markup> element <literal role="rfc2119">must</literal> contain either <xref
                            linkend="refHTML5"/>
                        <link xlink:href="http://www.w3.org/TR/html5/dom.html#flow-content-1">flow content</link> or exactly
                        one <xref linkend="refHTML5"/>
                        <link xlink:href=""><markup>body</markup> element</link>. This content <literal role="rfc2119"
                            >must</literal> represent a valid document fragment of the HTML Content Document model defined in
                            <xref linkend="sec-html-conf-content"/>. The <markup>foreignObject</markup> element's
                            <markup>requiredExtensions</markup> attribute, if given, <literal role="rfc2119">must</literal>
                        be set to <uri>http://www.idpf.org/2007/ops</uri>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-svg-title">The <xref linkend="refSVG"/>
                        <markup xlink:href="http://www.w3.org/TR/SVG11/struct.html#TitleElement">title</markup> element
                            <literal role="rfc2119">must</literal> contain only valid HTML Content Document Phrasing
                        content.</para>
                </listitem>
                <!-- <listitem>
                        <para xml:id="confreq-svg-dim">It <literal role="rfc2119">should</literal> include the <markup><link
                                    xlink:href="http://www.w3.org/TR/SVG/struct.html#SVGElementWidthAttribute"
                                    >width</link></code> and <markup><link
                                    xlink:href="http://www.w3.org/TR/SVG/struct.html#SVGElementHeightAttribute"
                                    >height</link></code> attributes on the <markup>svg</markup>
                            element.</para>
                    </listitem> -->
            </itemizedlist>

        </section>
        <section xml:id="sec-svg-rs-conf" xreflabel="SVG Content Documents — Reading System Conformance">
            <title>Reading System Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria for processing SVG Content
                Documents and SVG <link linkend="sec-html-svg">embedded in HTML Content Documents</link>:</para>

            <itemizedlist role="conformance-list" xml:id="svg-rs-confreqs">
                <!--
                    <listitem>
                        <para xml:id="confreq-svg-rs-behavior">It <literal role="rfc2119">must</literal> support processing of SVG
                            using semantics defined by the SVG 1.1 specification <xref
                                linkend="refSVG"/>.</para>
                    </listitem>
                    -->
                <listitem>
                    <para xml:id="confreq-svg-rs-behavior">It <literal role="rfc2119">must</literal> support the language
                        features of SVG that correspond to the feature string
                            <uri>http://www.w3.org/TR/SVG11/feature#SVG-dynamic</uri> minus the
                            <uri>http://www.w3.org/TR/SVG11/feature#Animation</uri> and
                            <uri>http://www.w3.org/TR/SVG11/feature#AnimationEventsAttribute</uri> features (see <link
                            xlink:href="http://www.w3.org/TR/SVG/feature.html">Feature strings</link>) <xref linkend="refSVG"
                        />.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-svg-rs-scrpt">It <literal role="rfc2119">must</literal> meet the Reading System
                        conformance criteria defined in <xref linkend="sec-scripted-content-rs-reqs"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-svg-rs-css">If it has an <olink targetdoc="spec" targetptr="gloss-viewport-svg"
                            type="epub-spec"/>, it <literal role="rfc2119">must</literal> support the visual rendering of SVG
                        using CSS as defined in <link xlink:href="http://www.w3.org/TR/SVG11/styling.html">Section 6</link>
                        of <xref linkend="refSVG"/>, and it <literal role="rfc2119">should</literal> support all properties
                        defined in <link xlink:href="http://www.w3.org/TR/SVG11/propidx.html">Appendix N</link> of that
                        specification. In the case of embedded SVG, it <literal role="rfc2119">must</literal> also conform to
                        the constraints defined in <xref linkend="sec-html-svg-css"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-svg-rs-text">It <literal role="rfc2119">should</literal> support User selection and
                        searching of text within SVG elements.</para>
                </listitem>
                <!-- not needed as we changed confreq-svg-rs-behavior
                    <listitem>
                        <para xml:id="confreq-svg-rs-links">It <literal role="rfc2119">must</literal> recognize SVG links (i.e., the
                                <markup>a</markup> element), and if it supports exposing links to
                            Users for activation, then these links <literal role="rfc2119">must</literal> be exposed. </para>
                    </listitem>
                    -->
                <listitem>
                    <para xml:id="confreq-svg-rs-reqdExt">It <literal role="rfc2119">must</literal> recognize the value
                            <uri>http://www.idpf.org/2007/ops</uri> of the <markup>requiredExtensions</markup> attribute when
                        appearing on the <markup>switch</markup> and <markup>foreignObject</markup> elements as
                        representing the occurrence of HTML Content Document fragments.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-rs-svg-prop">It <literal role="rfc2119">must</literal> regard the <link
                            xlink:href="../../vocab/package/epub-vocab-package.html#svg"><property>svg</property>
                            property</link>
                        <xref linkend="refEPUBPackageVocab"/> of the <olink targetdoc="spec"
                            targetptr="gloss-package-document" type="epub-spec"/>
                        <olink targetdoc="spec" targetptr="gloss-manifest" type="epub-spec"/>
                        <markup>item</markup> element as the authoritative definition of whether an EPUB HTML Content
                        Document includes embedded SVG.</para>
                </listitem>
            </itemizedlist>
        </section>
        <section xml:id="sec-svg-semantic-inflection" xreflabel="SVG Semantic Inflection">
            <title>Semantic Inflection</title>

            <para>The <xref linkend="refHTML5"/> implementation of the <link
                    xlink:href="http://www.w3.org/TR/html5/dom.html#aria-role-attribute">ARIA <markup>role</markup>
                    attribute</link> is <literal role="rfc2119">recommended</literal> for semantically inflecting SVG
                elements using the <xref linkend="refSVGVocab"/>.</para>

            <para>The <markup>role</markup> attribute supersedes the <link linkend="sec-epub-type-attribute"
                        ><markup>epub:type</markup> attribute</link> used in previous versions of this specification for
                semantic inflection of SVG.</para>
        </section>
    </chapter>

    <chapter xml:id="sec-scripted-content">
        <title>Scripting</title>

        <para><olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content Documents</olink>
            <literal role="rfc2119">may</literal> contain scripting using the facilities defined for this in the respective
            underlying specifications (<xref linkend="refHTML5"/> and <xref linkend="refSVG"/>). When an EPUB Content
            Document contains scripting, it is referred to in this specification as a <olink targetdoc="spec"
                targetptr="gloss-content-document-epub-scripted" type="epub-spec"/>. This label also applies to <olink
                targetdoc="spec" targetptr="gloss-content-document-epub-html" type="epub-spec">HTML Content Documents</olink>
            when they contain instances of <link xlink:href="http://www.w3.org/TR/html5/forms.html#forms">HTML5
            forms</link>.</para>

        <section xml:id="sec-scripted-context">
            <title>Scripting Contexts</title>

            <para xml:id="sec-scripted-content-models">This specification defines two contexts in which scripts <literal
                    role="rfc2119">may</literal> appear:</para>

            <variablelist>
                <varlistentry xml:id="sec-scripted-content-type-spine-level" xreflabel="spine-level">
                    <term>spine-level</term>
                    <listitem>
                        <para>An instance of the <xref linkend="refHTML5"/>
                            <markup xlink:href="http://www.w3.org/TR/html5/scripting-1.html#the-script-element"
                                >script</markup> element included in a <olink targetdoc="spec"
                                targetptr="gloss-content-document-top-level" type="epub-spec"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-scripted-content-type-container-constrained" xreflabel="container-constrained">
                    <term>container-constrained</term>
                    <listitem>
                        <para>An instance of the <xref linkend="refHTML5"/>
                            <markup>script</markup> element included in an <olink targetdoc="spec"
                                targetptr="gloss-content-document-epub" type="epub-spec"/> that is embedded in a parent
                            Content Document using one of the <xref linkend="refHTML5"/>
                            <markup xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#the-object-element"
                                >object</markup>, <markup
                                xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#the-iframe-element"
                                >iframe</markup> or <markup
                                xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#the-embed-element"
                                >embed</markup> elements.</para>
                    </listitem>
                </varlistentry>
            </variablelist>

            <para>In both of the above-defined contexts, whether the JavaScript code is embedded directly in the
                    <markup>script</markup> element or referenced via its <markup>src</markup> attribute makes no difference
                to the executing context.</para>

            <para>Which context a script is used in determines the rights and restrictions that a Reading System may place on
                it. Refer to <link linkend="sec-scripted-content-content-reqs">Content Conformance</link> and <link
                    linkend="sec-scripted-content-rs-reqs">Reading System Conformance</link> for some specific requirements
                that must be adhered to (not all Reading Systems may provide the same scripting functionality).</para>

            <bridgehead>Example</bridgehead>

            <para>Consider the following example Package Document:</para>

            <informalexample>
                <synopsis><xi:include href="examples/contentdocs/scriptcontext-01.xml" parse="text"/></synopsis>
            </informalexample>

            <para>and the following file <filename>scripted01.xhtml</filename>:</para>

            <informalexample>
                <synopsis><xi:include href="examples/contentdocs/scriptcontext-02.xml" parse="text"/></synopsis>
            </informalexample>

            <para>and the following file <filename>scripted02.xhtml</filename>:</para>

            <informalexample>
                <synopsis><xi:include href="examples/contentdocs/scriptcontext-03.xml" parse="text"/></synopsis>
            </informalexample>

            <para>From these examples, it is true that:</para>

            <itemizedlist>
                <listitem>
                    <para>the code in the <markup>script</markup> element in the <markup>head</markup> in
                            <filename>scripted01.xhtml</filename> is a spine-level script because the document is referenced
                        from the spine;</para>
                </listitem>
                <listitem>
                    <para>the code in the <markup>script</markup> element in <filename>scripted02.xhtml</filename> is a
                        container-constrained script because the HTML file it occurs in is included in
                            <filename>scripted01.xhtml</filename> via the <markup>iframe</markup> element.</para>
                </listitem>
            </itemizedlist>

        </section>

        <section xml:id="sec-scripted-content-content-reqs" xreflabel="Scripted Content Documents — Content Conformance">
            <title>Content Conformance</title>

            <variablelist role="conformance-list">
                <varlistentry>
                    <term>Container-constrained scripts</term>
                    <listitem>
                        <para xml:id="confreq-cd-scripted-container">A container-constrained script <literal role="rfc2119"
                                >must not</literal> contain instructions for modifying the DOM of the parent Content Document
                            or other contents in the EPUB Publication, and <literal role="rfc2119">must not</literal> contain
                            instructions for manipulating the size of its containing rectangle.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Spine-level scripts</term>
                    <listitem>
                        <para xml:id="confreq-cd-scripted-spine">EPUB Content Documents that include <xref
                                linkend="sec-scripted-content-type-spine-level"/> scripting <literal role="rfc2119"
                                >must</literal> utilize the <emphasis>progressive enhancement technique</emphasis>, which for
                            the purposes of this specification has the following definition: when the document is rendered by
                            a Reading System without scripting support or with scripting support disabled, the <olink
                                targetdoc="spec" targetptr="gloss-content-document-top-level" type="epub-spec">top-level
                                document content</olink>
                            <literal role="rfc2119">must</literal> retain its integrity, remaining consumable by the User
                            without any information loss or other significant deterioration.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Accessibility</term>
                    <listitem>
                        <para xml:id="confreq-cd-scripted-a11y">EPUB Content Documents that include scripting — using any
                                <link linkend="sec-scripted-content-models">inclusion model</link> — <literal role="rfc2119"
                                >should</literal> employ relevant accessibility techniques to ensure that the content remains
                            consumable by all Users. <xref linkend="refARIA"/>
                            <xref linkend="refWCAG20"/>
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="confreq-cd-scripted-flbk" xreflabel="Fallbacks for Scripted Content Documents">
                    <term>Fallbacks</term>
                    <listitem>
                        <!--
                            <para xml:id="confreq-cd-scripted-flbk-canvas">EPUB Content Documents
                                that include the HTML <markup>canvas</markup> element for scripting
                                purposes <literal role="rfc2119">should</literal> include non-scripted fallback content using the
                                intrinsic model for fallback as defined by <markup>canvas</markup>
                                <xref linkend="refHTML5"/>.</para>
                            <para xml:id="confreq-cd-scripted-flbk-object">EPUB Content Documents
                                that include the HTML <markup>object</markup> element for scripting
                                purposes <literal role="rfc2119">should</literal> include non-scripted fallback content using the
                                intrinsic model for fallback as defined by <markup>object</markup>
                                <xref linkend="refHTML5"/>.</para> -->
                        <para xml:id="confreq-cd-scripted-fallback">EPUB Content Documents that include scripting — using any
                                <link linkend="sec-scripted-content-models">inclusion model</link> — <literal role="rfc2119"
                                >may</literal> provide fallbacks for such content, either by using intrinsic fallback
                            mechanisms (such as those available for the <xref linkend="refHTML5"/>
                            <markup xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#the-object-element"
                                >object</markup> and <markup
                                xlink:href="http://www.w3.org/TR/html5/scripting-1.html#the-canvas-element">canvas</markup>
                            elements) or, when an intrinsic fallback is not applicable, by using a <olink
                                targetdoc="packages" targetptr="sec-foreign-restrictions-manifest" type="epub-spec"
                                >manifest-level</olink> fallback.</para>
                    </listitem>
                </varlistentry>
            </variablelist>
            <note>
                <para>The <link xlink:href="../../vocab/package/epub-vocab-package.html#scripted"
                            ><property>scripted</property> property</link>
                    <xref linkend="refEPUBPackageVocab"/> of the <olink targetdoc="spec" targetptr="gloss-manifest"
                        type="epub-spec"/>
                    <markup>item</markup> element indicates that an EPUB Content Document is a <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-scripted" type="epub-spec"/>.</para>
            </note>
            <!-- TODO handler note -->
        </section>

        <section xml:id="sec-scripted-content-rs-reqs" xreflabel="Scripted Content Documents — Reading System Conformance">
            <title>Reading System Conformance</title>

            <para><olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/> support for scripting is
                    <literal role="rfc2119">optional</literal>. A Reading System that supports scripting <literal
                    role="rfc2119">must</literal> meet the following criteria:</para>

            <itemizedlist role="conformance-list">
                <listitem>
                    <para xml:id="confreq-rs-scripted-support">It <literal role="rfc2119">must</literal> support <xref
                            linkend="sec-scripted-content-type-container-constrained"/> scripting and <literal role="rfc2119"
                            >may</literal> support <xref linkend="sec-scripted-content-type-spine-level"/> scripting.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-rs-scripted-ua">It <literal role="rfc2119">may</literal> render <olink
                            targetdoc="spec" targetptr="gloss-content-document-epub-scripted" type="epub-spec">Scripted
                            Content Documents</olink> as an interactive, scripted User Agent according to <xref
                            linkend="refHTML5"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-rs-scripted-container">It <literal role="rfc2119">must not</literal> allow a
                        container-constrained script to modify the DOM of the parent Content Document or other contents in
                        the EPUB Publication, and <literal role="rfc2119">must not</literal> allow it to manipulate the size
                        of its containing rectangle. (Note: Even if a script is not container-constrained, the Reading System
                            <literal role="rfc2119">may</literal> impose restrictions on modifications (see also the <link
                            linkend="feature-dom-manipulation">dom-manipulation feature</link>).)</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-rs-scripted-limit">It <literal role="rfc2119">may</literal> place additional
                        limitations on the capabilities provided to scripts during execution (e.g., limiting
                        networking).</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-rs-scripted-readingsystem-object">It <literal role="rfc2119">must</literal>
                        implement the JavaScript <markup>navigator</markup> extension object
                            <markup>epubReadingSystem</markup> defined in <xref linkend="app-epubReadingSystem"/>. It also
                            <literal role="rfc2119">must</literal> support the <markup>dom-manipulation</markup> and
                            <markup>layout-change</markup> features defined in <xref linkend="app-ers-hasFeature-features"/>
                        in container-constrained scripting contexts.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-rs-scripted-prop">It <literal role="rfc2119">must</literal> regard the <link
                            xlink:href="../../vocab/package/epub-vocab-package.html#scripted">
                            <property>scripted</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> of the <olink targetdoc="spec"
                            targetptr="gloss-package-document" type="epub-spec"/>
                        <olink targetdoc="spec" targetptr="gloss-manifest" type="epub-spec"/>
                        <markup>item</markup> element as the authoritative definition of whether an EPUB Content Document
                        includes scripting.</para>
                </listitem>
            </itemizedlist>

            <para>A Reading System that does not support scripting <literal role="rfc2119">must</literal> meet the following
                criteria:</para>

            <itemizedlist role="conformance-list">
                <listitem>
                    <para xml:id="confreq-rs-scripted-flbk">It <literal role="rfc2119">must</literal> process fallbacks for
                        scripted content as defined in <xref linkend="confreq-cd-scripted-flbk"/>.</para>
                </listitem>
            </itemizedlist>

            <note>
                <para>Reading Systems may render Scripted Content Documents in a manner that disables other EPUB capabilities
                    and/or provides a different rendering and User experience (e.g., by disabling pagination).</para>

                <para>Authors choosing to restrict the usage of scripting to the <xref
                        linkend="sec-scripted-content-type-container-constrained"/> model will ensure a more consistent User
                    experience between scripted and non-scripted content (e.g., consistent pagination behavior).</para>

                <para>Authors should use declarative techniques whenever practical to increase the interoperability,
                    longevity and accessibility of their EPUB Publications, and avoid the inclusion of scripting whenever
                    practical.</para>
            </note>
        </section>

        <section xml:id="sec-scripted-content-security" conformance="informative">
            <title>Security Considerations</title>

            <para>All EPUB <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec">Authors</olink> and Reading
                System developers need to be aware of the security issues that arise when scripted content is executed by a
                Reading System. As the underlying scripting model employed by Reading Systems and browsers is the same, the
                same kinds of issues encountered in Web contexts must be taken into consideration.</para>

            <para>Each Reading System should establish if the scripts in a particular document are to be trusted or not. It
                is recommended that all scripts be treated as untrusted (and potentially malicious), and that all vectors of
                attack be examined and protected against. In particular, the following should be considered:</para>

            <itemizedlist>
                <listitem>
                    <para>an attack against the runtime environment (e.g., stealing files from a <olink targetdoc="spec"
                            targetptr="gloss-user" type="epub-spec"/>'s hard drive);</para>
                </listitem>
                <listitem>
                    <para>an attack against the Reading System itself (e.g., stealing a list of a User's books or causing
                        unexpected behavior);</para>
                </listitem>
                <listitem>
                    <para>an attack of one Content Document against another (e.g., stealing data that originated in a
                        different document);</para>
                </listitem>
                <listitem>
                    <para>an attack of an unencrypted script against an encrypted portion of a document (e.g., an injected
                        malicious script extracting protected content);</para>
                </listitem>
                <listitem>
                    <para>an attack against the local network (e.g., stealing data from a server behind a firewall).</para>
                </listitem>
            </itemizedlist>

            <para>The following recommendations are provided as a guide to handling untrusted scripts:</para>

            <itemizedlist>
                <listitem>
                    <para>Reading Systems should behave as if a unique domain were allocated to each Content Document, as
                        browser-based security relies heavily on document URLs and domains. Adopting this approach will
                        isolate documents from each other and from other Internet domains, thereby limiting access to
                        external URLs, cookies, DOM storage, etc.</para>
                    <para>Reading Systems that enable scripting and network access should also consider including methods to
                        notify the user that network activity is occurring and/or that allow them to disable it.</para>
                    <note>
                        <para>In practice, Reading Systems may share domains across documents, but they still should maintain
                            isolation between documents.</para>
                        <para>If parts of a document are encrypted and parts are not, or if different encryption keys are
                            used for different parts of the document, a unique per-document domain might not provide
                            sufficient protection.</para>
                    </note>
                </listitem>
                <listitem>
                    <para>If a Reading System allows persistent data to be stored, that data should be treated as sensitive.
                        Scripts may save persistent data through cookies and DOM storage, but Reading Systems may block such
                        attempts. Reading Systems that do allow data to be stored must ensure that it is not made available
                        to other unrelated documents (e.g., ones that could have been spoofed). In particular, checking for a
                        matching document identifier (or similar metadata) is not a valid method to control access to
                        persistent data.</para>
                    <para>Reading Systems that allow local storage should also provide methods for Users to inspect, disable,
                        or delete that data. The data should be destroyed if the corresponding EPUB Publication is
                        deleted.</para>
                </listitem>
            </itemizedlist>

            <para>Note that compliance with these recommendations does not guarantee protection from the possible attacks
                listed above; developers must examine each potential vulnerability within the context of their Reading
                System.</para>
        </section>

        <section xml:id="sec-scripted-content-events" conformance="informative">
            <title>Event Model Considerations</title>

            <para>Reading Systems should follow the DOM Event model as per <xref linkend="refHTML5"/> and pass UI events to
                the scripting environment before performing any default action associated with these events. Reading System
                implementers should ensure that scripts cannot disable critical functionality (such as navigation) to
                constrain the extent to which a <link linkend="sec-scripted-content-events">potentially malicious</link>
                script could impact their Reading Systems. As a result, although the scripting environment should be able to
                cancel the default action of any event, some events either might not be passed through or might not be
                cancelable.</para>

            <para><olink targetdoc="spec" targetptr="gloss-author" type="epub-spec">Authors</olink> should take into account
                the wide variety of possible Reading System implementations when adding scripting functionality to their EPUB
                Publications (e.g., not all devices have physical keyboard, and in many cases a soft keyboard is only
                activated only for text input elements). Consequently, relying on keyboard events alone is not recommended;
                alternative ways to trigger the desired action should always be provided.</para>

        </section>

    </chapter>

    <chapter xml:id="sec-fixed-layouts">
        <title>Fixed Layouts</title>

        <section xml:id="sec-fxl-overview" conformance="informative">
            <title>Introduction</title>

            <para>This section defines rules for the expression and interpretation of dimensional properties of <olink
                    targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content Documents</olink>
                marked as <property>pre-paginated</property> in the <olink targetdoc="spec"
                    targetptr="gloss-package-document" type="epub-spec"/>.</para>

            <para>This specification does not define how the the <link
                    xlink:href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">initial containing
                    block</link>, will be placed within the Reading System content display area.</para>

            <note>
                <para>Refer to <olink targetdoc="packages" targetptr="sec-package-metadata-fxl" type="epub-spec"/> for
                    information on how to designate that a <olink targetdoc="spec" targetptr="gloss-rendition"
                        type="epub-spec"/>, or its individual spine items, are to be rendered in a pre-paginated manner
                    (i.e., with fixed width and height dimensions).</para>
            </note>
        </section>

        <section xml:id="sec-fxl-rs-conf" xreflabel="Fixed Layouts — Reading System Conformance">
            <title>Reading System Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria for processing <olink
                    targetdoc="spec" targetptr="gloss-fixed-layout-document" type="epub-spec">Fixed-Layout
                Documents</olink>:</para>

            <itemizedlist role="conformance-list" xml:id="image-rs-confreqs">
                <listitem>
                    <para xml:id="confreq-fxl-rs-viewport">It <literal role="rfc2119">should</literal> allocate the full
                        content rendering area for the document.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-fxl-rs-html">It <literal role="rfc2119">must</literal> use the dimensions expressed
                        in the <property>viewport</property>
                        <markup>meta</markup> tag to render <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-html" type="epub-spec">HTML Content Documents</olink>, but
                            <literal role="rfc2119">may</literal> obtain these dimensions from the package <olink
                            targetdoc="packages" targetptr="fxl-property-viewport" type="epub-spec"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-fxl-rs-svg">It <literal role="rfc2119">must</literal> use the dimensions expressed
                        in the <markup>viewBox</markup> attribute to render <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-svg" type="epub-spec">SVG Content Documents</olink>, but
                            <literal role="rfc2119">may</literal> obtain these dimensions from the package <olink
                            targetdoc="packages" targetptr="fxl-property-viewport" type="epub-spec"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-fxl-rs-content-precedence">It <literal role="rfc2119">must</literal> use the
                        dimensions expressed in the content in the case of discrepancies with the package <olink
                            targetdoc="packages" targetptr="fxl-property-viewport" type="epub-spec"/>.</para>
                </listitem>
            </itemizedlist>
        </section>

        <section xml:id="sec-fxl-synthetic-spreads">
            <title>Viewport Rendering</title>

            <para>When rendering Fixed-Layout Documents, the default intent is that the content rendering area <literal
                    role="rfc2119">should</literal> occupy as much of the available application screen area as possible.
                Reading Systems <literal role="rfc2119">should not</literal> inject additional content such as border,
                margins, headers or footers into the viewport or the application area surrounding the viewport.</para>

            <note>
                <para>The exposure of Reading System control widgets to the <olink targetdoc="spec" targetptr="gloss-user"
                        type="epub-spec"/> is implementation-specific and not included in the above behavioral
                    expectations.</para>
            </note>
        </section>

        <section xml:id="sec-fxl-html-svg-dimensions">
            <title>Content Dimensions for HTML and SVG</title>

            <para>Each <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/> referenced from a
                spine item that has the <property>pre-paginated</property> value set <literal role="rfc2119">must</literal>
                contain the <property role="html">viewport</property> (for HTML) or <markup>viewBox</markup> (for SVG)
                dimension expressions as defined below, regardless of whether the value is set via the global <olink
                    targetdoc="packages" targetptr="fxl-property-layout" type="epub-spec">rendition:layout property</olink>
                for the <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> or on a <olink
                    targetdoc="packages" targetptr="fxl-property-layout-overrides" type="epub-spec">spine-level
                    override</olink>.</para>

            <para>For both HTML and SVG Content Documents, the dimension expressions define the CSS initial containing block
                (ICB) expressed in CSS Pixels <xref linkend="refCSS21"/>.</para>

            <section xml:id="sec-fxl-icb-html">
                <title>Expressing ICB Dimensions in HTML</title>

                <para>For HTML Content Documents, the ICB dimensions <literal role="rfc2119">must</literal> be expressed in a
                        <property>viewport</property>
                    <markup>meta</markup> tag using the syntax defined in <xref linkend="refMetaTags"/>. In this version of
                    this specification, only the width and height expressions <literal role="rfc2119">must</literal> be
                    recognized by Reading Systems.</para>

                <informalexample>
                    <para>The following example shows a <property role="html">viewport</property>
                        <markup>meta</markup> tag.</para>
                    <synopsis>
<xi:include href="./examples/contentdocs/fxl-xhtml-01.xml" parse="text"/></synopsis>
                </informalexample>

                <para>Reading Systems <literal role="rfc2119">must</literal> clip HTML content to the ICB dimensions declared
                    in the <property role="html">viewport</property>
                    <markup>meta</markup> tag; content positioned outside of the initial containing block will not be
                    visible. When the ICB aspect ratio does not match the aspect ratio of the Reading System content display
                    area, Reading Systems <literal role="rfc2119">may</literal> position the ICB inside the area to
                    accommodate the user interface; in other words, added letter-boxing space <literal role="rfc2119"
                        >may</literal> appear on either side (or both) of the content.</para>
            </section>

            <section xml:id="sec-fxl-icb-svg">
                <title>Expressing ICB Dimensions in SVG</title>

                <para>For SVG Content Documents, the ICB dimensions <literal role="rfc2119">must</literal> be expressed using
                    the <code xlink:href="http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute">viewBox</code> attribute
                        <xref linkend="refSVG"/>.</para>

                <informalexample>
                    <para>The following example shows a <markup>viewBox</markup> attribute declaration.</para>
                    <synopsis>
<xi:include href="./examples/contentdocs/fxl-svg-01.xml" parse="text"/></synopsis>
                </informalexample>
            </section>
        </section>
    </chapter>

    <chapter xml:id="sec-css">
        <title>Cascading Style Sheets</title>

        <para>This section defines a profile for Cascading Style Sheets (CSS) intended to be used for styling of <olink
                targetdoc="spec" targetptr="gloss-content-document-epub-html" type="epub-spec">HTML Content
            Documents</olink>. An instance of a CSS Style Sheet that conforms to this profile is a <olink targetdoc="spec"
                targetptr="gloss-core-media-type" type="epub-spec"/>.</para>

        <caution xml:id="caution-css">
            <para>The EPUB 3.1 CSS Profile references CSS specifications that are still works in progress and may change in
                incompatible ways. When utilizing features from such specifications, authors should consider the inherent
                risks in terms of the potential impact on interoperability and document longevity.</para>
        </caution>

        <note xml:id="note-css-unprefixed-authoring">
            <para>The EPUB 3.1 CSS Profile employs the usage of the <property>-epub-</property>
                <link xlink:href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefix</link> for a number of CSS3
                <!-- keywords and --> property names, as detailed below. As the CSS3 modules that define these properties
                mature and stabilize, EPUB authoring guidelines may encourage authors to also include unprefixed equivalents
                of these properties in EPUB 3.1 Style Sheets.</para>
        </note>

        <section xml:id="sec-css-content-conf" xreflabel="Cascading Style Sheets — Content Conformance">
            <title>Content Conformance</title>

            <para>A conformant CSS Style Sheet <literal role="rfc2119">must</literal> meet all of the following
                criteria:</para>

            <itemizedlist role="conformance-list">
                <listitem xml:id="confreq-content-css-support">
                    <para>It <literal role="rfc2119">must</literal> adhere to all content restrictions given in <xref
                            linkend="sec-css-profile"/>.</para>
                </listitem>
                <listitem xml:id="confreq-content-css-unsupport">
                    <para>It <literal role="rfc2119">may</literal> include constructs not explicitly identified in the EPUB
                        3.1 CSS Profile, but <literal role="rfc2119">should</literal> be authored so that rendering fidelity
                        does not depend on such additional constructs.</para>
                </listitem>
                <listitem xml:id="confreq-content-css-encoding">
                    <para>It <literal role="rfc2119">must</literal> be UTF-8 or UTF-16 encoded.</para>
                </listitem>
            </itemizedlist>

            <note xml:id="note-css-refprops-pkg">
                <!-- note similar statement for xhtml, svg and css-->
                <para>All <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/>s
                    referenced from a CSS Style Sheet must conform to the constraints for Publication Resources defined in
                        <olink targetdoc="spec" targetptr="sec-epub-pub-conf" type="epub-spec"/></para>
            </note>

        </section>

        <section xml:id="sec-css-rs-conf" xreflabel="Cascading Style Sheets — Reading System Conformance">
            <title>Reading System Conformance</title>

            <itemizedlist role="conformance-list">
                <listitem xml:id="confreq-rs-css-support">
                    <para>Reading Systems with a <olink targetdoc="spec" targetptr="gloss-viewport-css" type="epub-spec"/>
                        <literal role="rfc2119">should</literal> support — render as defined by the corresponding
                        specification in the Viewport — all CSS constructs included in this profile unless detailed otherwise
                        in <xref linkend="sec-css-profile"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-rs-css-unsupport">Reading Systems <literal role="rfc2119">may</literal> support
                        additional CSS constructs not explicitly identified in the EPUB 3.1 CSS Profile, and <literal
                            role="rfc2119">must</literal> handle any unsupported constructs as <link
                            xlink:href="http://www.w3.org/TR/CSS21/conform.html#ignore">defined</link> in <xref
                            linkend="refCSS21"/>. </para>
                </listitem>
            </itemizedlist>
            <note xml:id="note-rs-css-support">
                <para>Reading Systems have varying capabilities with regards to CSS rendering support, so may ignore some or
                    all style information of an CSS Style Sheet.</para>
                <para>In addition, even when a Reading System does have a <olink targetdoc="spec"
                        targetptr="gloss-viewport-css" type="epub-spec"/>, it is likely to render content in a manner that
                    differs from typical HTML5 User Agents (e.g., paginating content rather than providing a infinitely
                    scrolling surface). </para>
            </note>
        </section>

        <section xml:id="sec-css-profile">
            <title>EPUB 3.1 CSS Profile</title>

            <section xml:id="sec-css-2.1">
                <title>CSS 2.1</title>

                <para>The style baseline of the EPUB 3.1 CSS Profile is Cascading Style Sheets Level 2 Revision 1 <xref
                        linkend="refCSS21"/>. The profile includes all style sheet constructs normatively defined in <xref
                        linkend="refCSS21"/>, with the following exceptions:</para>

                <itemizedlist>
                    <listitem>
                        <para>The <code role="value">absolute</code> value of the <property>position</property> property
                                <literal role="rfc2119">should</literal> be used only with HTML Content Documents whose
                                <olink targetdoc="packages" targetptr="fxl-property-layout" type="epub-spec">rendition:layout
                                property</olink> has been set to <property>pre-paginated</property>.</para>
                    </listitem>
                    <listitem>
                        <para>The <code role="value">fixed</code> value of the <property>position</property> property is not
                            part of the EPUB 3.1 CSS Profile. To avoid potential rendering and interoperability issues, it
                                <literal role="rfc2119">should not</literal> be included in a CSS Style Sheet.</para>
                    </listitem>
                    <listitem>
                        <para>The <property>direction</property> and <property>unicode-bidi</property> properties <literal
                                role="rfc2119">must not</literal> be included in a CSS Style Sheet. Authors <literal
                                role="rfc2119">should</literal> use appropriate <xref linkend="refHTML5"/> markup to express
                            directionality information instead. </para>
                    </listitem>
                </itemizedlist>

                <para>Reading Systems that have a <olink targetdoc="spec" targetptr="gloss-viewport-css" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> support the <property>font-family</property> property.</para>
            </section>
            <section xml:id="sec-css-2.0-list-style-type">
                <title>CSS 2.0</title>
                <para>The EPUB 3.1 CSS Profile includes the following values for the <property>list-style-type</property>
                    property as <link xlink:href="http://www.w3.org/TR/2008/REC-CSS2-20080411/generate.html#lists">defined
                        in</link>
                    <xref linkend="refCSS20"/>:</para>
                <itemizedlist>
                    <listitem>
                        <para>
                            <code role="value">cjk-ideographic</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code role="value">hebrew</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code role="value">hiragana</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code role="value">hiragana-iroha</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code role="value">katakana</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code role="value">katakana-iroha</code>
                        </para>
                    </listitem>
                </itemizedlist>
                <!--
                <para>Additional details on these list styles can be found in <xref
                        linkend="refCSS3Lists"/>. <remark role="todo">The definitions in CSS3 Lists
                        are incorrect, so remove this paragraph if an updated WD has not yet been
                        published.</remark>
                </para>
                -->
            </section>
            <section xml:id="sec-css-voice-characteristics">
                <title>CSS 3.0 Speech</title>
                <!-- TODO note the difference in inclusion <para>The EPUB 3 CSS Profile includes all features defined in the CSS 3.0 Speech
                    Module <xref linkend="refCSS3Speech"/>. Reading Systems with <olink targetdoc="spec" targetptr="gloss-tts" type="epub-spec"/> capabilities <literal role="rfc2119">should</literal> support the following
                        properties:</para> -->
                <para>The EPUB 3.1 CSS Profile includes <property>-epub-</property> prefixed versions of the following
                    properties from the CSS3 Speech Module <xref linkend="refCSS3Speech"/> using syntax as defined in <xref
                        linkend="refCSS3Speech-dated"/> and semantics as defined in <xref linkend="refCSS3Speech"/>:</para>
                <itemizedlist>
                    <listitem>
                        <para>
                            <property>-epub-cue</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property>-epub-pause</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property>-epub-rest</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property>-epub-speak</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property>-epub-speak-as</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property>-epub-voice-family</property>
                        </para>
                    </listitem>
                </itemizedlist>
                <xi:include href="./share/note-tts-features.xml"/>
            </section>
            <section xml:id="sec-css-fonts">
                <title>CSS Fonts Level 3</title>
                <!-- jdaggett, editor of CSS3 Fonts, believes the below-referenced @font-face portion of
                 CSS3 Fonts to be stable. Other parts of the CSS3 Fonts spec are not yet stable.
                 2011-01-11 -->

                <para>The EPUB 3.1 CSS Profile includes <property>@font-face</property> rules and descriptors as defined in
                    the CSS Fonts Module Level 3 <xref linkend="refCSS3FontsModule"/> specification, using syntax as defined
                    in <xref linkend="refCSS3FontsModule-dated"/> and semantics as defined in <xref
                        linkend="refCSS3FontsModule"/>. </para>

                <para xml:id="confreq-rs-embedded-font-types">Reading Systems with a <olink targetdoc="spec"
                        targetptr="gloss-viewport-css" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> support OpenType <xref linkend="refOpenType"/> and WOFF <xref
                        linkend="refWOFF"/> fonts embedded using the <property>@font-face</property> rule.</para>

                <para xml:id="sec-css-font-fallbacks">Fonts embedded in Content Documents or CSS Style Sheets using the
                        <property>@font-face</property> mechanism <literal role="rfc2119">may</literal> be Foreign Resources.
                    Reading Systems <literal role="rfc2119">must</literal> use the <link
                        xlink:href="http://www.w3.org/TR/css3-fonts/#font-style-matching">rules for matching font
                        styles</link>
                    <xref linkend="refCSS3FontsModule"/> when identifying a fallback for an unsupported font type.</para>

                <para>In addition, Reading Systems <literal role="rfc2119">must</literal> support at least the following
                        <property>@font-face</property> font descriptors. <!-- using
                        <literal>-epub-</literal> prefixed property names,
                        syntax as defined in <xref
                        linkend="refCSS3FontsModule-dated"/> and semantics -->
                    <!-- as
                    defined in <xref linkend="refCSS3FontsModule-dated"/>.--></para>

                <itemizedlist>
                    <!-- Got rid of font-size, as instructred by John Daggett. -->
                    <!-- Got rid of font-variant, as instructed by John Daggett.  -->
                    <listitem>
                        <para>
                            <property><!--epub-->font-family</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property><!--epub-->font-style</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property><!--epub-->font-weight</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property><!--epub-->src</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property><!--epub-->unicode-range</property>
                        </para>
                    </listitem>
                </itemizedlist>

                <para>For forwards compatibility with EPUB 2 Reading Systems that do not support <property
                        linkend="sec-css-fonts">@font-face</property> rules, authors <literal role="rfc2119">should</literal>
                    reference a generic font using the <property>font-family</property> property.</para>

                <note>
                    <para>Refer to <olink targetdoc="ocf" targetptr="sec-resource-obfuscation" type="epub-spec"/> for Reading
                        System font obfuscation requirements. </para>
                </note>

            </section>
            <section xml:id="sec-css-text">
                <title>CSS Text Level 3</title>

                <para>The EPUB 3.1 CSS Profile includes <property>-epub-</property> prefixed versions of the following
                    properties from the CSS Text Level 3 <xref linkend="refCSS3Text"/> specification using syntax as defined
                    in <xref linkend="refCSS3Text-dated"/> and semantics as defined in <xref linkend="refCSS3Text"/>.</para>

                <itemizedlist>
                    <listitem>
                        <para>
                            <property>-epub-hyphens</property>* </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property>-epub-line-break</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property>-epub-text-align-last</property>
                        </para>
                    </listitem>
                    <!-- <listitem>
                        <para>
                            <property>-epub-text-transform</property>
                        </para>
                    </listitem> -->
                    <listitem>
                        <para>
                            <property>-epub-word-break</property>
                        </para>
                    </listitem>
                </itemizedlist>

                <para>* The <property>-epub-hyphens</property> property does not include support for the value <code
                        role="value">all</code>.</para>

                <para xml:id="css-propdef-text-transform">In addition, the EPUB 3.1 CSS Profile includes the unprefixed
                        <property>text-transform</property> property from CSS Text Level 3 using semantics as defined in
                        <xref linkend="refCSS3Text"/> and syntax as defined in <xref linkend="refCSS3Text-dated"/>, with the
                    exception that the <code role="value">fullwidth</code> and <code role="value">fullsize-kana</code> values
                    are prefixed in the EPUB 3.1 CSS Profile (<code role="value">-epub-fullwidth</code> and <code
                        role="value">-epub-fullsize-kana</code>, respectively). </para>

                <para>Note that the CSS Text Level 3 module has dropped support for the <code role="value"
                        >fullsize-kana</code> value since the EPUB 3.0 revision. The EPUB 3.1 CSS Profile retains this value,
                    but now defines its semantics as below:</para>

                <variablelist>
                    <varlistentry>
                        <term><code role="value">-epub-fullsize-kana</code></term>
                        <listitem>
                            <para>This value represents a mapping of HIRAGANA or KATAKANA characters as shown in <xref
                                    linkend="fullsize-kana-char-mapping"/>. This value is typically used for Japanese ruby
                                annotation text.</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

            </section>
            <section xml:id="sec-css-text-decoration">
                <title>CSS Text Decoration Level 3</title>

                <para>The EPUB 3.1 CSS Profile includes <property>-epub-</property> prefixed versions of the following
                    properties from the CSS Text Decoration Level 3 <xref linkend="refCSS3TextDecoration"/> specification
                    using syntax as defined in <xref linkend="refCSS3TextDecoration-dated"/> and semantics as defined in
                        <xref linkend="refCSS3TextDecoration"/>.</para>

                <itemizedlist>
                    <listitem>
                        <para>
                            <property>-epub-text-emphasis</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property>-epub-text-emphasis-color</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property>-epub-text-emphasis-position</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property>-epub-text-emphasis-style</property>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <property>-epub-text-underline-position</property>
                        </para>
                    </listitem>
                </itemizedlist>
            </section>
            <section xml:id="sec-css-writing-modes">
                <title>CSS Writing Modes</title>
                <para>With exceptions for the <property>direction</property> and <property>unicode-bidi</property> properties
                        <link linkend="css-writing-modes-excl">as noted below</link>, the EPUB 3.1 CSS Profile includes all
                    of the features defined in the CSS Writing Modes Module Level 3 <xref linkend="refCSS3WritingModesModule"
                    /> specification using <property>-epub-</property> prefixed property names, syntax as defined in <xref
                        linkend="refCSS3WritingModesModule-dated"/> and semantics as defined in <xref
                        linkend="refCSS3WritingModesModule"/>. Furthermore, as specified in <xref
                        linkend="refCSS3WritingModesModule-new-dated"/>, both "<code role="value">sideways</code>" and "<code
                        role="value">mixed</code>" are permitted as values of the <property>-epub-text-orientation</property>
                    property. The values "<code role="value">vertical-right</code>", "<code role="value"
                    >rotate-right</code>", "<code role="value">rotate-left</code>", "<code role="value">rotate-normal</code>"
                    and "<code role="value">auto</code>" of this property are deprecated.</para>

                <note>
                    <para>The semantics of "<code role="value">vertical-right</code>", "<code role="value"
                            >rotate-right</code>", "<code role="value">rotate-left</code>", "<code role="value"
                            >rotate-normal</code>", and "<code role="value">auto</code>" is the same as that of "<code
                            role="value">mixed</code>", "<code role="value">sideways-right</code>", "<code role="value"
                            >sideways-left</code>", "<code role="value">sideways</code>" and "<code role="value"
                            >use-glyph-orientation</code>" in <xref linkend="refCSS3WritingModesModule"/>,
                        respectively.</para>
                </note>

                <para>The <property>-epub-text-combine</property> property is deprecated, and the
                        <property>-epub-text-combine-horizontal</property> property from <xref
                        linkend="refCSS3WritingModesModule-new-dated"/> added.</para>

                <note>
                    <para>The <property>-epub-text-combine</property> property's values can be mapped to
                            <property>-epub-text-combine-horizontal</property> as follows: '<code role="value">none</code>'
                        to '<code role="value">none</code>' and '<code role="value">horizontal</code>' to '<code role="value"
                            >all</code>'. The syntax '<code role="value">horizontal</code> &lt;number>' is treated as an
                        error.</para>
                </note>

                <para xml:id="css-writing-modes-excl">The <property>direction</property> and
                        <property>unicode-bidi</property> properties from <xref linkend="refCSS3WritingModesModule"/> are not
                    included in the EPUB 3.1 CSS Profile. Authors <literal role="rfc2119">should</literal> use appropriate
                        <xref linkend="refHTML5"/> markup to express directionality information instead.</para>
            </section>
            <section xml:id="sec-css-selectors">
                <title>Selectors</title>
                <para>The EPUB 3.1 CSS Profile includes support for the Selectors Level 3 <xref linkend="refSelectors"/>
                    specification.</para>
            </section>
            <section xml:id="sec-css-media-queries">
                <!-- CR as of July 2010 -->
                <title>Media Queries</title>
                <para>The EPUB 3.1 CSS Profile includes <property>@media</property>
                    <!-- As instructed by Fantasai, @import is added. --> and <property>@import</property> rules with media
                    queries as defined in the Media Queries <xref linkend="refMediaQueries"/> specification.</para>
            </section>
            <section xml:id="sec-css-namespaces">
                <!-- CR as of May 2008 -->
                <title>CSS Namespaces</title>

                <para>The EPUB 3.1 CSS Profile includes the <property>@namespace</property> rule defined in <xref
                        linkend="refCSSNamespacesModule"/> for declaring the default namespace for a style sheet and for
                    binding prefixes to namespaces.</para>
            </section>
            <section xml:id="sec-css-multi-column">
                <!-- CR as of April 2011 -->
                <title>CSS Multi-Column Layout</title>
                <para>The EPUB 3.1 CSS Profile includes all of the features defined in the CSS Multi-column Layout Module
                        <xref linkend="refCSS3Multicol"/> specification with the exception of the
                        <property>column-span</property> property. </para>
                <caution>
                    <para>Authors should not rely on column behavior in overflow conditions as this behavior is unstable and
                        may change.</para>
                </caution>
                <caution>
                    <para>Pagination algorithms are not fully defined in CSS. Authors should therefore expect exact
                        pagination points to vary from Reading System to Reading System.</para>
                </caution>
                <para>Reading Systems <literal role="rfc2119">must</literal> treat the <property>oeb-column-number</property>
                    property as an alias for the <property>column-count</property> property. The use of the
                        <property>oeb-column-number</property> property in CSS Style Sheets is deprecated; this conformance
                    requirement may be removed in the next major version of EPUB.</para>
            </section>
            <section xml:id="sec-css-ruby-position">
                <title>Ruby Positioning</title>
                <!-- both syntax and semantics locally defined -->
                <para>The EPUB 3.1 CSS Profile includes the <property>-epub-ruby-position</property> property as defined
                    below:</para>

                <informaltable xml:id="tbl-rubyposition">
                    <tgroup cols="2">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <tbody>
                            <row>
                                <entry role="rdfa-property-header">Name:</entry>
                                <entry role="rdfa-property"><property>-epub-ruby-position</property></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Value:</entry>
                                <entry><code role="value">over</code> | <code role="value">under</code> | <code role="value"
                                        >inter-character</code>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Initial:</entry>
                                <entry>over</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Applies to:</entry>
                                <entry>ruby text elements</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Inherited:</entry>
                                <entry>yes</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Percentages:</entry>
                                <entry>N/A</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Media:</entry>
                                <entry>visual</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Computed value:</entry>
                                <entry>as specified</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </informaltable>

                <para>This property controls the placement of ruby text with respect to its base text. Values have the
                    following meanings:</para>

                <variablelist>
                    <varlistentry>
                        <term>
                            <code role="value">over</code>
                        </term>
                        <listitem>
                            <para>Ruby text is positioned on the <link
                                    xlink:href="http://www.w3.org/TR/css3-writing-modes/#over">over</link> side of the ruby
                                base.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>
                            <code role="value">under</code>
                        </term>
                        <listitem>
                            <para>Ruby text is positioned on the <link
                                    xlink:href="http://www.w3.org/TR/css3-writing-modes/#under">under</link> side of the ruby
                                base.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>
                            <code role="value">inter-character</code>
                        </term>
                        <listitem>
                            <para>Ruby text is positioned on the right side of the base text. (This value is typically used
                                for Zhuyin Fuhao (Bopomofo) ruby.)</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <note>
                    <para>The <property>-epub-ruby-position</property> property will become an alias for the
                            <property>ruby-position</property> property in the CSS Ruby Module <xref linkend="refCSS3Ruby"
                        />.</para>
                </note>
            </section>
            <section xml:id="sec-css-oeb-head-foot">
                <title>Display Property Values <property>oeb-page-head</property> and <property>oeb-page-foot</property>
                    [DEPRECATED]</title>

                <para>The <property>oeb-page-head</property> and <code>oeb-page-foot</code> values are deprecated and
                    expected to be removed or replaced in a future version of EPUB.</para>

                <para>Authors <literal role="rfc2119">may</literal> continue to include these values in CSS Style Sheets to
                    define running headers and footers. Refer to the <link
                        xlink:href="../../30/spec/epub-contentdocs.html#sec-css-oeb-head-foot"
                        xlink:title="oeb-page-head and oeb-page-foot definitions in EPUB 3.0">oeb-page-head oeb-page-foot
                        definitions</link> in <xref linkend="refContentDocs30"/> for more information.</para>

            </section>
        </section>

    </chapter>

    <chapter xml:id="sec-pls">
        <title>Pronunciation Lexicons</title>

        <section xml:id="sec-pls-intro" conformance="informative">
            <title>Introduction</title>

            <para>The W3C Pronunciation Lexicon Specification <xref linkend="refPLS"/> defines syntax and semantics for
                XML-based pronunciation lexicons to be used by Automatic Speech Recognition and <olink targetdoc="spec"
                    targetptr="gloss-tts" type="epub-spec"/> engines.</para>

            <para>The following sections define conformance criteria for PLS documents when included in <olink
                    targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec">EPUB Publications</olink>, and rules
                for associating PLS Documents with <olink targetdoc="spec" targetptr="gloss-content-document-epub-html"
                    type="epub-spec">HTML Content Documents</olink>. </para>

            <xi:include href="./share/note-tts-features.xml"/>

        </section>

        <section xml:id="sec-pls-conf-pub">
            <title>EPUB Publication Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of an <olink
                    targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria for inclusion of PLS
                Documents:</para>

            <itemizedlist role="conformance-list">
                <listitem>
                    <para xml:id="confreq-cd-pls-xht">PLS Documents <literal role="rfc2119">may</literal> be associated with
                            <olink targetdoc="spec" targetptr="gloss-content-document-epub-html" type="epub-spec">HTML
                            Content Documents</olink>. Each HTML Content Document <literal role="rfc2119">may</literal>
                        contain zero or more PLS Document associations. </para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-cd-pls-assoc">PLS Documents <literal role="rfc2119">must</literal> be associated
                        with the <olink targetdoc="spec" targetptr="gloss-content-document-epub-html" type="epub-spec"/> to
                        which it applies using the <xref linkend="refHTML5"/>
                        <markup xlink:href="http://www.w3.org/TR/html5/document-metadata.html#the-link-element">link</markup>
                        element with its <markup>rel</markup> attribute set to <property role="html">pronunciation</property>
                        and its <markup>type</markup> attribute set to the <olink targetdoc="spec" targetptr="cmt-pls"
                            type="epub-spec">PLS media type</olink> (<code role="media-type"
                        >application/pls+xml</code>).</para>
                    <para xml:id="confreq-cd-pls-assoc-lang">The <markup>link</markup> element <markup>hreflang</markup>
                        attribute <literal role="rfc2119">should</literal> be specified on each PLS <markup>link</markup>,
                        and its value <literal role="rfc2119">must</literal> match <link
                            xlink:href="http://www.w3.org/TR/pronunciation-lexicon/#S4.1">the language for which the
                            pronunciation lexicon is relevant</link>
                        <xref linkend="refPLS"/> when specified.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-pls-pub-cont">PLS Documents <literal role="rfc2119">must</literal> meet the content
                        conformance criteria defined in <xref linkend="sec-pls-conf-content"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-pls-pub-manif">PLS Documents <literal role="rfc2119">must</literal> be represented
                        and located as defined in <olink targetdoc="packages" targetptr="sec-package-content-conformance"
                            type="epub-spec"/>.</para>
                </listitem>
            </itemizedlist>

            <bridgehead>Examples</bridgehead>
            <informalexample>
                <para>The following example shows two PLS Documents (one for Chinese and one for Mongolian) associated with
                    an HTML Content Document.</para>
                <synopsis>
<xi:include href="./examples/contentdocs/pls-assoc-1.xml" parse="text"/></synopsis>
            </informalexample>

        </section>

        <section xml:id="sec-pls-conf-content" xreflabel="PLS Documents — Content Conformance">
            <title>Content Conformance</title>

            <para>To be considered a <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt" type="epub-spec"/>, a
                PLS Document <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

            <variablelist role="conformance-list" xml:id="confreq-cd-pls">
                <varlistentry xml:id="confreq-cd-pls-docprops">
                    <term>Document Properties</term>
                    <listitem>
                        <para xml:id="confreq-cd-pls-xml">
                            <xi:include href="./share/xml-defref.xml"/>
                        </para>
                        <para xml:id="confreq-cd-pls-docprops-schema">It <literal role="rfc2119">must</literal> be valid to
                            the RELAX NG schema for PLS documents available at the URI <uri
                                xlink:href="http://www.w3.org/TR/pronunciation-lexicon/pls.rng"
                                >http://www.w3.org/TR/pronunciation-lexicon/pls.rng</uri>
                            <xref linkend="refPLS"/>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="confreq-cd-pls-fileprops">
                    <term>File Properties</term>
                    <listitem>
                        <para xml:id="confreq-cd-pls-fileprops-name">The PLS Document filename <literal role="rfc2119"
                                >should</literal> use the file extension <filename>.pls</filename>.</para>
                    </listitem>
                </varlistentry>
            </variablelist>

        </section>

        <section xml:id="sec-pls-conf-rs" xreflabel="PLS Documents — Reading System Conformance">
            <title>Reading System Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria for processing PLS
                Documents:</para>

            <itemizedlist role="conformance-list" xml:id="pls-rs-confreqs">
                <listitem>
                    <para xml:id="confreq-pls-rs-sptts">Reading Systems with <olink targetdoc="spec" targetptr="gloss-tts"
                            type="epub-spec"/> capabilities <literal role="rfc2119">should</literal> support PLS.</para>
                    <para xml:id="confreq-pls-rs-proc">Reading Systems that support PLS <literal role="rfc2119"
                            >must</literal> process PLS documents as defined in <xref linkend="refPLS"/>.</para>
                    <para xml:id="confreq-pls-rs-scope">Reading Systems that support PLS <literal role="rfc2119"
                            >must</literal> apply the supplied pronunciation instructions to all text nodes in the current
                        HTML Content Document whose <link
                            xlink:href="http://www.w3.org/TR/html5/dom.html#the-lang-and-xml:lang-attributes">language</link>
                        <xref linkend="refHTML5"/> matches <link
                            xlink:href="http://www.w3.org/TR/pronunciation-lexicon/#S4.1">the language for which the
                            pronunciation lexicon is relevant</link>
                        <xref linkend="refPLS"/>. The algorithm for matching language tags is defined in <link
                            linkend="refRFC5646">BCP47</link>.</para>
                    <para xml:id="confreq-pls-rs-multi"> When a pronunciation rule is specified more than once for a given
                        string target in a given language, the last occurrence of the rule takes precedence, in such a way
                        that any previously-defined pronunciation rule gets overridden. </para>
                    <para xml:id="confreq-pls-rs-casc">Reading Systems that support PLS and the <link
                            linkend="sec-xhtml-ssml-attrib">SSML Attributes</link>
                        <literal role="rfc2119">must</literal> let any pronunciation instructions provided via the <markup
                            linkend="sec-cd-ssml-ph-attrib">ssml:ph</markup> attribute take precedence in cases where a
                            <markup>pls:grapheme</markup> matches a text node of an element that carries the
                            <markup>ssml:ph</markup> attribute.</para>
                </listitem>
            </itemizedlist>
        </section>

    </chapter>

    <appendix xml:id="app-epubReadingSystem">
        <title>JavaScript epubReadingSystem Object</title>

        <section xml:id="app-ers-syntax">
            <title>Syntax</title>

            <para role="syntax"><emphasis>ReadingSystem</emphasis> = navigator.epubReadingSystem;</para>

        </section>

        <section xml:id="app-ers-desc">
            <title>Description</title>

            <para>The <markup>epubReadingSystem</markup> object provides an interface through which a <olink targetdoc="spec"
                    targetptr="gloss-content-document-epub-scripted" type="epub-spec"/> can query information about a <olink
                    targetdoc="spec" targetptr="gloss-user" type="epub-spec"/>'s <olink targetdoc="spec"
                    targetptr="gloss-epub-reading-system" type="epub-spec">Reading System</olink>.</para>

            <para>The object exposes a number of <link linkend="app-ers-properties">properties</link>, about the Reading
                System, such as its name and version, and provides the <link linkend="app-ers-hasFeature">hasFeature</link>
                method which can be invoked to determine the features it supports.</para>

            <informalexample>
                <para>Example JavaScript function that displays the name of the current Reading System.</para>
                <synopsis>alert("Reading System name: " + navigator.epubReadingSystem.name);</synopsis>
            </informalexample>
        </section>

        <section xml:id="app-ers-properties">
            <title>Properties</title>

            <para>The following properties <literal role="rfc2119">must</literal> be made available for retrieving
                information about the Reading System.</para>

            <table xml:id="tbl-epubReadingSystem-properties">
                <caption>Required epubReadingSystem properties</caption>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><property role="js">name</property></td>
                        <td>Returns a <code role="datatype">String</code> value representing the name of the Reading System
                            (e.g., "<code role="value">iBooks</code>", "<code role="value">Kindle</code>").</td>
                    </tr>
                    <tr>
                        <td><property role="js">version</property></td>
                        <td>Returns a <code role="datatype">String</code> value representing the version of the Reading
                            System (e.g., "<code role="value">1.0</code>", "<code role="value">2.1.1</code>").</td>
                    </tr>
                    <tr>
                        <td><property role="js">layoutStyle</property></td>
                        <td><para>Returns a <code role="datatype">String</code> value representing the style of layout for
                                the content.</para>
                            <para>A Reading System will typically return one of the values "<code role="value"
                                    >paginated</code>" or "<code role="value">scrolling</code>", but <literal role="rfc2119"
                                    >may</literal> define values for any additional layout formats it supports.</para></td>
                    </tr>
                </tbody>
            </table>
        </section>


        <section xml:id="app-ers-methods">
            <title>Methods</title>

            <section xml:id="app-ers-hasFeature">
                <title>hasFeature</title>

                <section xml:id="app-ers-hasFeature-syntax">
                    <title>Syntax</title>

                    <para role="syntax">hasFeature(feature[, version])</para>
                </section>

                <section xml:id="app-ers-hasFeature-desc">
                    <title>Description</title>
                    <para>For recognized features, the <markup>hasFeature</markup> method returns a boolean value indicating
                        whether any version is supported.</para>
                    <para>If the optional <markup>version</markup> parameter is included, the return value indicates support
                        only for the specified version.</para>
                    <para>The method returns <code role="value">undefined</code> if the feature is not recognized by the
                        Reading System.</para>

                    <informalexample>
                        <para>Example JavaScript function that displays whether the current Reading System supports scripted
                            manipulation of the DOM.</para>
                        <synopsis>var feature = "dom-manipulation";

var conformTest = navigator.epubReadingSystem.hasFeature(feature);

alert("Feature " + feature + " supported?: " + conformTest);</synopsis>
                    </informalexample>
                </section>

                <section xml:id="app-ers-hasFeature-features">
                    <title>Features</title>

                    <para>The following table details the features that <literal role="rfc2119">must</literal> be recognized
                        by all Reading Systems that support scripting (<link linkend="sec-scripted-context"
                            >spine-level</link> or <link linkend="sec-scripted-context">container-constrained</link>).
                        Reading Systems <literal role="rfc2119">may</literal> support some or all of these features (refer to
                            <xref linkend="sec-scripted-content-rs-reqs"/> for more information).</para>

                    <para>Feature names are case-insensitive.</para>

                    <table xml:id="tbl-epubReadingSystem-features">
                        <caption>Required epubReadingSystem features</caption>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td xml:id="feature-dom-manipulation"><code role="value">dom-manipulation</code></td>
                                <td>Scripts <literal role="rfc2119">may</literal> make structural changes to the document’s
                                    DOM (applies to spine-level scripting only).</td>
                            </tr>
                            <tr>
                                <td xml:id="feature-layout-changes"><code role="value">layout-changes</code></td>
                                <td>Scripts <literal role="rfc2119">may</literal> modify attributes and CSS styles that
                                    affect content layout (applies to spine-level scripting only).</td>
                            </tr>
                            <tr>
                                <td xml:id="feature-touch-events"><code role="value">touch-events</code></td>
                                <td>The device supports touch events and the Reading System passes touch events to the
                                    content.</td>
                            </tr>
                            <tr>
                                <td xml:id="feature-mouse-events"><code role="value">mouse-events</code></td>
                                <td>The device supports mouse events and the Reading System passes mouse events to the
                                    content.</td>
                            </tr>
                            <tr>
                                <td xml:id="feature-keyboard-events"><code role="value">keyboard-events</code></td>
                                <td>The device supports keyboard events and the Reading System passes keyboard events to the
                                    content.</td>
                            </tr>
                            <tr>
                                <td xml:id="feature-spine-scripting"><code role="value">spine-scripting</code></td>
                                <td>Spine-level scripting is supported.</td>
                            </tr>
                        </tbody>
                    </table>

                    <para>If a Reading System supports a feature defined in this section, it <literal role="rfc2119"
                            >must</literal> return a <code role="value">true</code> value both when queried without the
                        version parameter set and when that parameter is set to the value "<code role="value">1.0</code>".
                        Otherwise, it <literal role="rfc2119">must</literal> return <code role="value">false</code>. Reading
                        System developers <literal role="rfc2119">should not</literal> change the version number of these
                        features independently of this specification.</para>

                    <para>Additional features <literal role="rfc2119">may</literal> be added by Reading System developers,
                        but future versions of this specification <literal role="rfc2119">may</literal> append to this list
                        in ways that <literal role="rfc2119">may</literal> conflict or be incompatible with any such custom
                        additions.</para>
                </section>
            </section>
        </section>
    </appendix>

    <appendix xml:id="fullsize-kana-char-mapping" conformance="informative">
        <title><code role="value">-epub-fullsize-kana</code> Character Mapping Reference</title>

        <para>The following table provides character mappings for the <code role="value">-epub-fullsize-kana</code> value of
            the <link linkend="css-propdef-text-transform"><property>text-transform</property> property</link>.</para>

        <table xml:id="tbl-kanamapping">
            <caption>Kana Mapping</caption>
            <tr>
                <th>From</th>
                <th>From Character</th>
                <th>From Name</th>
                <th>To</th>
                <th>To Character</th>
                <th>To Name</th>
            </tr>
            <tr>
                <td>03041</td>
                <td class="center">&#12353;</td>
                <td>HIRAGANA LETTER SMALL A</td>
                <td>03042</td>
                <td class="center">&#12354;</td>
                <td>HIRAGANA LETTER A</td>
            </tr>
            <tr>
                <td>03043</td>
                <td class="center">&#12355;</td>
                <td>HIRAGANA LETTER SMALL I</td>
                <td>03044</td>
                <td class="center">&#12356;</td>
                <td>HIRAGANA LETTER I</td>
            </tr>
            <tr>
                <td>03045</td>
                <td class="center">&#12357;</td>
                <td>HIRAGANA LETTER SMALL U</td>
                <td>03046</td>
                <td class="center">&#12358;</td>
                <td>HIRAGANA LETTER U</td>
            </tr>
            <tr>
                <td>03047</td>
                <td class="center">&#12359;</td>
                <td>HIRAGANA LETTER SMALL E</td>
                <td>03048</td>
                <td class="center">&#12360;</td>
                <td>HIRAGANA LETTER E</td>
            </tr>
            <tr>
                <td>03049</td>
                <td class="center">&#12361;</td>
                <td>HIRAGANA LETTER SMALL O</td>
                <td>0304A</td>
                <td class="center">&#12362;</td>
                <td>HIRAGANA LETTER O</td>
            </tr>
            <tr>
                <td>03063</td>
                <td class="center">&#12387;</td>
                <td>HIRAGANA LETTER SMALL TU</td>
                <td>03064</td>
                <td class="center">&#12388;</td>
                <td>HIRAGANA LETTER TU</td>
            </tr>
            <tr>
                <td>03083</td>
                <td class="center">&#12419;</td>
                <td>HIRAGANA LETTER SMALL YA</td>
                <td>03084</td>
                <td class="center">&#12420;</td>
                <td>HIRAGANA LETTER YA</td>
            </tr>
            <tr>
                <td>03085</td>
                <td class="center">&#12421;</td>
                <td>HIRAGANA LETTER SMALL YU</td>
                <td>03086</td>
                <td class="center">&#12422;</td>
                <td>HIRAGANA LETTER YU</td>
            </tr>
            <tr>
                <td>03087</td>
                <td class="center">&#12423;</td>
                <td>HIRAGANA LETTER SMALL YO</td>
                <td>03088</td>
                <td class="center">&#12424;</td>
                <td>HIRAGANA LETTER YO</td>
            </tr>
            <tr>
                <td>0308E</td>
                <td class="center">&#12430;</td>
                <td>HIRAGANA LETTER SMALL WA</td>
                <td>0308F</td>
                <td class="center">&#12431;</td>
                <td>HIRAGANA LETTER WA</td>
            </tr>
            <tr>
                <td>03095</td>
                <td class="center">&#12437;</td>
                <td>HIRAGANA LETTER SMALL KA</td>
                <td>0304B</td>
                <td class="center">&#12363;</td>
                <td>HIRAGANA LETTER KA</td>
            </tr>
            <tr>
                <td>03096</td>
                <td class="center">&#12438;</td>
                <td>HIRAGANA LETTER SMALL KE</td>
                <td>03051</td>
                <td class="center">&#12369;</td>
                <td>HIRAGANA LETTER KE</td>
            </tr>
            <tr>
                <td>030A1</td>
                <td class="center">&#12449;</td>
                <td>KATAKANA LETTER SMALL A</td>
                <td>030A2</td>
                <td class="center">&#12450;</td>
                <td>KATAKANA LETTER A</td>
            </tr>
            <tr>
                <td>030A3</td>
                <td class="center">&#12451;</td>
                <td>KATAKANA LETTER SMALL I</td>
                <td>030A4</td>
                <td class="center">&#12452;</td>
                <td>KATAKANA LETTER I</td>
            </tr>
            <tr>
                <td>030A5</td>
                <td class="center">&#12453;</td>
                <td>KATAKANA LETTER SMALL U</td>
                <td>030A6</td>
                <td class="center">&#12454;</td>
                <td>KATAKANA LETTER U</td>
            </tr>
            <tr>
                <td>030A7</td>
                <td class="center">&#12455;</td>
                <td>KATAKANA LETTER SMALL E</td>
                <td>030A8</td>
                <td class="center">&#12456;</td>
                <td>KATAKANA LETTER E</td>
            </tr>
            <tr>
                <td>030A9</td>
                <td class="center">&#12457;</td>
                <td>KATAKANA LETTER SMALL O</td>
                <td>030AA</td>
                <td class="center">&#12458;</td>
                <td>KATAKANA LETTER O</td>
            </tr>
            <tr>
                <td>030C3</td>
                <td class="center">&#12483;</td>
                <td>KATAKANA LETTER SMALL TU</td>
                <td>030C4</td>
                <td class="center">&#12484;</td>
                <td>KATAKANA LETTER TU</td>
            </tr>
            <tr>
                <td>030E3</td>
                <td class="center">&#12515;</td>
                <td>KATAKANA LETTER SMALL YA</td>
                <td>030E4</td>
                <td class="center">&#12516;</td>
                <td>KATAKANA LETTER YA</td>
            </tr>
            <tr>
                <td>030E5</td>
                <td class="center">&#12517;</td>
                <td>KATAKANA LETTER SMALL YU</td>
                <td>030E6</td>
                <td class="center">&#12518;</td>
                <td>KATAKANA LETTER YU</td>
            </tr>
            <tr>
                <td>030E7</td>
                <td class="center">&#12519;</td>
                <td>KATAKANA LETTER SMALL YO</td>
                <td>030E8</td>
                <td class="center">&#12520;</td>
                <td>KATAKANA LETTER YO</td>
            </tr>
            <tr>
                <td>030EE</td>
                <td class="center">&#12526;</td>
                <td>KATAKANA LETTER SMALL WA</td>
                <td>030EF</td>
                <td class="center">&#12527;</td>
                <td>KATAKANA LETTER WA</td>
            </tr>
            <tr>
                <td>030F5</td>
                <td class="center">&#12533;</td>
                <td>KATAKANA LETTER SMALL KA</td>
                <td>030AB</td>
                <td class="center">&#12459;</td>
                <td>KATAKANA LETTER KA</td>
            </tr>
            <tr>
                <td>030F6</td>
                <td class="center">&#12534;</td>
                <td>KATAKANA LETTER SMALL KE</td>
                <td>030B1</td>
                <td class="center">&#12465;</td>
                <td>KATAKANA LETTER KE</td>
            </tr>
            <tr>
                <td>031F0</td>
                <td class="center">&#12784;</td>
                <td>KATAKANA LETTER SMALL KU</td>
                <td>030AF</td>
                <td class="center">&#12463;</td>
                <td>KATAKANA LETTER KU</td>
            </tr>
            <tr>
                <td>031F1</td>
                <td class="center">&#12785;</td>
                <td>KATAKANA LETTER SMALL SI</td>
                <td>030B7</td>
                <td class="center">&#12471;</td>
                <td>KATAKANA LETTER SI</td>
            </tr>
            <tr>
                <td>031F2</td>
                <td class="center">&#12786;</td>
                <td>KATAKANA LETTER SMALL SU</td>
                <td>030B9</td>
                <td class="center">&#12473;</td>
                <td>KATAKANA LETTER SU</td>
            </tr>
            <tr>
                <td>031F3</td>
                <td class="center">&#12787;</td>
                <td>KATAKANA LETTER SMALL TO</td>
                <td>030C8</td>
                <td class="center">&#12488;</td>
                <td>KATAKANA LETTER TO</td>
            </tr>
            <tr>
                <td>031F4</td>
                <td class="center">&#12788;</td>
                <td>KATAKANA LETTER SMALL NU</td>
                <td>030CC</td>
                <td class="center">&#12492;</td>
                <td>KATAKANA LETTER NU</td>
            </tr>
            <tr>
                <td>031F5</td>
                <td class="center">&#12789;</td>
                <td>KATAKANA LETTER SMALL HA</td>
                <td>030CF</td>
                <td class="center">&#12495;</td>
                <td>KATAKANA LETTER HA</td>
            </tr>
            <tr>
                <td>031F6</td>
                <td class="center">&#12790;</td>
                <td>KATAKANA LETTER SMALL HI</td>
                <td>030D2</td>
                <td class="center">&#12498;</td>
                <td>KATAKANA LETTER HI</td>
            </tr>
            <tr>
                <td>031F7</td>
                <td class="center">&#12791;</td>
                <td>KATAKANA LETTER SMALL HU</td>
                <td>030D5</td>
                <td class="center">&#12501;</td>
                <td>KATAKANA LETTER HU</td>
            </tr>
            <tr>
                <td>031F8</td>
                <td class="center">&#12792;</td>
                <td>KATAKANA LETTER SMALL HE</td>
                <td>030D8</td>
                <td class="center">&#12504;</td>
                <td>KATAKANA LETTER HE</td>
            </tr>
            <tr>
                <td>031F9</td>
                <td class="center">&#12793;</td>
                <td>KATAKANA LETTER SMALL HO</td>
                <td>030DB</td>
                <td class="center">&#12507;</td>
                <td>KATAKANA LETTER HO</td>
            </tr>
            <tr>
                <td>031FA</td>
                <td class="center">&#12794;</td>
                <td>KATAKANA LETTER SMALL MU</td>
                <td>030E0</td>
                <td class="center">&#12512;</td>
                <td>KATAKANA LETTER MU</td>
            </tr>
            <tr>
                <td>031FB</td>
                <td class="center">&#12795;</td>
                <td>KATAKANA LETTER SMALL RA</td>
                <td>030E9</td>
                <td class="center">&#12521;</td>
                <td>KATAKANA LETTER RA</td>
            </tr>
            <tr>
                <td>031FC</td>
                <td class="center">&#12796;</td>
                <td>KATAKANA LETTER SMALL RI</td>
                <td>030EA</td>
                <td class="center">&#12522;</td>
                <td>KATAKANA LETTER RI</td>
            </tr>
            <tr>
                <td>031FD</td>
                <td class="center">&#12797;</td>
                <td>KATAKANA LETTER SMALL RU</td>
                <td>030EB</td>
                <td class="center">&#12523;</td>
                <td>KATAKANA LETTER RU</td>
            </tr>
            <tr>
                <td>031FE</td>
                <td class="center">&#12798;</td>
                <td>KATAKANA LETTER SMALL RE</td>
                <td>030EC</td>
                <td class="center">&#12524;</td>
                <td>KATAKANA LETTER RE</td>
            </tr>
            <tr>
                <td>031FF</td>
                <td class="center">&#12799;</td>
                <td>KATAKANA LETTER SMALL RO</td>
                <td>030ED</td>
                <td class="center">&#12525;</td>
                <td>KATAKANA LETTER RO</td>
            </tr>
            <tr>
                <td>0FF67</td>
                <td class="center">&#65383;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL A</td>
                <td>0FF71</td>
                <td class="center">&#65393;</td>
                <td>HALFWIDTH KATAKANA LETTER A</td>
            </tr>
            <tr>
                <td>0FF68</td>
                <td class="center">&#65384;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL I</td>
                <td>0FF72</td>
                <td class="center">&#65394;</td>
                <td>HALFWIDTH KATAKANA LETTER I</td>
            </tr>
            <tr>
                <td>0FF69</td>
                <td class="center">&#65385;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL U</td>
                <td>0FF73</td>
                <td class="center">&#65395;</td>
                <td>HALFWIDTH KATAKANA LETTER U</td>
            </tr>
            <tr>
                <td>0FF6A</td>
                <td class="center">&#65386;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL E</td>
                <td>0FF74</td>
                <td class="center">&#65396;</td>
                <td>HALFWIDTH KATAKANA LETTER E</td>
            </tr>
            <tr>
                <td>0FF6B</td>
                <td class="center">&#65387;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL O</td>
                <td>0FF75</td>
                <td class="center">&#65397;</td>
                <td>HALFWIDTH KATAKANA LETTER O</td>
            </tr>
            <tr>
                <td>0FF6C</td>
                <td class="center">&#65388;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL YA</td>
                <td>0FF94</td>
                <td class="center">&#65428;</td>
                <td>HALFWIDTH KATAKANA LETTER YA</td>
            </tr>
            <tr>
                <td>0FF6D</td>
                <td class="center">&#65389;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL YU</td>
                <td>0FF95</td>
                <td class="center">&#65429;</td>
                <td>HALFWIDTH KATAKANA LETTER YU</td>
            </tr>
            <tr>
                <td>0FF6E</td>
                <td class="center">&#65390;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL YO</td>
                <td>0FF96</td>
                <td class="center">&#65430;</td>
                <td>HALFWIDTH KATAKANA LETTER YO</td>
            </tr>
            <tr>
                <td>0FF6F</td>
                <td class="center">&#65391;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL TU</td>
                <td>0FF82</td>
                <td class="center">&#65410;</td>
                <td>HALFWIDTH KATAKANA LETTER TU</td>
            </tr>
        </table>

    </appendix>

    <xi:include href="./share/contributors.xml"/>

    <xi:include href="./share/references.xml"/>
</book>
