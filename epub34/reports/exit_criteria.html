<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="color-scheme" content="light dark" />

    <title>EPUB 3.4 Testing Strategies and CR Exit Criteria</title>
    <script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove" defer></script>
    <style>
      .todo {
        background-color: yellow;
        color: #900;
      }

    </style>
    <script class="remove">
        var respecConfig = {
            specStatus: "base",
            latestVersion: "https://w3c.github.io/epub-specs/epub33/reports/exit_criteria.html",
            edDraftURI: "https://w3c.github.io/epub-specs/epub33/reports/exit_criteria.html",
            noRecTrack: true,
            editors: [{
                name: "Ivan Herman",
                url: "https://www.w3.org/People/Ivan/",
                company: "W3C",
                w3cid: 7382,
                orcid: "0000-0003-0782-2704",
                companyURL: "https://www.w3.org",
            }],
            github: {
                repoURL: "https://github.com/w3c/epub-specs",
                branch: "main"
            },
            shortName: "exit-criteria",
            xref: {
              profile: "web-platform",
              specs: ["epub-rs-34","epub-34"]
            },
        };
    </script>
</head>

<body>
    <section id="abstract">
        <p>
            This document outlines the testing strategies, reporting, and specifies the <a href="https://www.w3.org/2021/Process-20211102/#RecsCR">W3C Candidate Recommendation (CR)</a> exit criteria for the EPUB 3.4 specifications. The three Recommendation-track specifications that are subject to testing and PR review are:
        </p>
        <ol>
            <li>EPUB Reading Systems 3.3 [[epub-rs-34]]</li>
            <li>EPUB 3.4 [[epub-34]]</li>
            <li>EPUB Accessibility 1.1 [[epub-a11y-11]]</li>
        </ol>
    </section>
    <section id="sotd">
    </section>

    <section>
        <h1 id="introduction">Introduction</h1>
        <p>
          At the core, an EPUB 3.4 publication consists of a number of [=publication resources=] that are in XHTML, SVG, CSS, or various media formats. Beyond these publication resources the EPUB publication includes some EPUB-specific files (e.g, a [=package document=]) whose formats are defined by the EPUB 3.4 standard family. Accordingly, an EPUB 3.4 reading system has to:
        </p>

        <ul>
            <li>interpret and render these standard formats, much like web browsers do; and</li>
            <li>provide some additional features <em>“on top”</em> of that renderer.</li>
        </ul>

        <p>See also the the EPUB 3 Overview [[epub-overview-34]] for more details on the structure of EPUB 3.4 publications.</p>
        <p>
          As a consequence of this particular structure, the validity and conformance of an EPUB 3.4 publication, as well as of a reading system implementation, <em>includes</em> the requirement of valid and conformant publication resources, and the conformant rendering thereof.
          Comprehensive testing would therefore require to include the union of all HTML, SVG, or CSS tests both on the content side as well as the implementation side <em>as well as</em> testing the unique, EPUB 3.4 specific features. The standard checking tools that are widely used by the publishing community, like <a href="https://www.w3.org/publishing/epubcheck/">EPUBCheck</a> or <a href="https://daisy.github.io/ace/">ACE</a>, indeed include externally developed HTML, CSS, or accessibility checkers, which would check the validity or conformance of the publication resources. Also, today’s reading systems do not develop an HTML renderer themselves; they, rather, rely on external tools (typically a “WebView” implementation) that can be assumed to conform to the relevant W3C specifications.
        </p>

        <p>
          This means that these additional tests would be quite unnecessary for the purpose of testing the EPUB 3.4 specification (which is the main purpose of a <a href="https://www.w3.org/2021/Process-20211102/#RecsCR">W3C Candidate Recommendation</a>). As a consequence, the <em><strong>testing strategy of EPUB 3.4 concentrates on the unique EPUB 3.4 features only</strong></em>, and considers the publication resources, as well as the reading systems, to conform to the relevant Open Web Platform  specifications.
        </p>
    </section>

    <section>
        <h1 id="testing-strategies">Testing strategies</h1>

        <p>EPUB 3.4 consists of three recommendation-track documents:</p>

        <ol type="1">
          <li>EPUB Reading Systems 3.3 [[epub-rs-34]]</li>
          <li>EPUB 3.4 [[epub-34]]</li>
          <li>EPUB Accessibility 1.1 [[epub-a11y-11]]</li>
      </ol>

        <p>Due to the specificities of these documents the strategy, exit criteria, and reporting are different. These are detailed below.</p>

        <section>
            <h2 id="epub-3.3-reading-systems">EPUB 3.4 Reading Systems</h2>

            <p>
              Implementers of the <a href="https://www.w3.org/TR/epub-rs-34/">EPUB 3.4 Reading Systems</a> specification are provided with a <a href="https://w3c.github.io/epub-tests/">test suite</a> that follows the examples of the Web Platform test model, but adapted to the specificities of EPUB. The test suite provides separate tests for <em>all</em> <em style="font-variant: small-caps;">must</em> statements, as well as for many <em style="font-variant: small-caps;">should</em> and for some <em style="font-variant: small-caps;">may</em> statements, that appear in the <a href="https://www.w3.org/TR/epub-rs-34/">EPUB 3.4 Reading Systems</a> specification.
            </p>

            <p>
              The <a href="https://w3c.github.io/epub-tests/">test suite documentation</a> describes the individual tests, linking them to the relevant section(s) of the specifications. The <a href="https://w3c.github.io/epub-specs/epub33/rs/"><em>editors’ draft</em></a> (as opposed to the official, published version) of the specification has a pull-down menu attached to each <em style="font-variant: small-caps;">must</em> statement providing the references to the relevant tests.
            </p>
            <section>
                <h3 id="exit-criteria-rs">Exit criteria</h3>

                <p>
                  The <a href="https://www.w3.org/TR/epub-rs-34/">EPUB 3.4 Reading System</a> document must have at least two passing, independent implementations for <a href="https://w3c.github.io/epub-tests/">each test</a> linked to a <em style="font-variant: small-caps;">must</em> statement in the specification.
                </p>
                <p>                  
                  The results of testing are available in a separate <a href="https://w3c.github.io/epub-tests/results">implementation report</a>.
                </p>
            </section>
        </section>

        <section>
            <h2 id="epub-3.3-core">EPUB 3.4 (Core)</h2>
            <p>
              The normative features of the <a href="https://www.w3.org/TR/epub-34/">EPUB 3.4</a> specification can be divided, roughly, into the following categories:
            </p>

            <ol>
                <li>
                    <p>
                      Features that have a direct effect on the reading system behavior, and whose behavioral details are mostly specified by <a href="https://www.w3.org/TR/epub-rs-34/">EPUB 3.4 Reading Systems</a>. Examples are the list of <a href="https://www.w3.org/TR/epub-34/#sec-core-media-types">supported media types</a>, semantics of some <a href="https://www.w3.org/TR/epub-34/#attrdef-dir">internationalization features</a>, or the <a href="https://www.w3.org/TR/epub-34/#sec-container-iri">specificities of URLs</a> in the case of packaged contents. These features have their counterpart in the <a href="https://www.w3.org/TR/epub-rs-34/">EPUB 3.4 Reading Systems</a> document and they share the relevant tests. In other words, some of the aforementioned tests, and their implementations, are also relevant for the core <a href="https://www.w3.org/TR/epub-34/">EPUB 3.4</a> document.
                    </p>
                </li>
                <li>
                    <p>
                      Structural constraints on a the EPUB-specific files of the publication; examples include the <a href="https://www.w3.org/TR/epub-34/#sec-ocf">structure of the container format (OCF)</a> or of the <a href="https://www.w3.org/TR/epub-34/#sec-package-doc">package document</a>.
                    </p>
                </li>
                <li>
                    <p>
                      Extra restrictions concerning content documents such as the <a href="https://www.w3.org/TR/epub-34/#sec-xhtml-deviations">restrictions on XHTML</a>, the <a href="https://www.w3.org/TR/epub-34/#sec-nav">format of an XHTML navigation document</a>, or the <a href="https://www.w3.org/TR/epub-34/#sec-xml-constraints">requirements on XML conformance</a>.
                    </p>
                </li>
                <li>
                    <p>
                      Vocabulary items which serve as metadata for the publication, and added to the <a href="https://www.w3.org/TR/epub-34/#sec-package-doc">EPUB 3.4 package document</a>. Although only few of those vocabulary items are <em>required</em> for a conformant EPUB specification, their formats, value constraints, etc., are normatively specified in the standard and these <em>must</em> be followed for a publication to be valid if they are used.
                    </p>
                </li>
            </ol>
            <section>
                <h3 id="exit-criteria-core">Exit criteria</h3>
                <p>The criteria are different for each category of the normative features:</p>
                <ol>
                    <li id="exit-criteria-core-1">
                        <p>
                          Features in category 1 share the testing methodology, exit criteria, as well as the <a href="https://w3c.github.io/epub-tests/">tests</a> and <a href="https://w3c.github.io/epub-tests/results">implementation results</a>, with the <a href="#exit-criteria-rs">criteria</a> of <a href="https://www.w3.org/TR/epub-rs-34/">EPUB 3.4 Reading Systems</a>. This includes the mechanism whereby the tests are referenced from the <a href="https://w3c.github.io/epub-specs/epub33/core/"><em>editors’ draft</em></a> via pull-down menus.
                        </p>
                    </li>
                    <li id="exit-criteria-core-2-3">
                        <p>
                          Testing the features in categories 2 and 3 concentrates on whether these restrictions are <em>feasible</em> in practice, i.e., whether they are enforceable when checking validity. 
                        </p>
                        <p>  
                          The latest version of <a href="https://www.w3.org/publishing/epubcheck/">EPUBCheck</a>, namely <a href="https://github.com/w3c/epubcheck/releases/tag/v5.0.0">EPUBCheck 5</a>, validates EPUB 3.4. Earlier versions of EPUBCheck are extensively used throughout the industry for several years now, and act as “gatekeepers” in the publication workflow for the major EPUB platforms; it is to be expected that all these platforms will upgrade their workflow for EPUB 3.4.
                        </p>

                        <p>
                          EPUBCheck has its own <a href="https://github.com/w3c/epubcheck/tree/w3c/epub-33-cr-report/src/test/resources">test suite</a>; the exit criteria for testing categories 2 and 3 features is therefore formulated by requiring that each relevant <em style="font-variant: small-caps;">must</em> statement in <a href="https://www.w3.org/TR/epub-34/">EPUB 3.4</a> is covered by at least one EPUBCheck test.
                        </p>

                        <p>
                          The results of testing is shown in a <a href="https://w3c.github.io/epub-structural-tests/">separate document</a>, providing a short description, and reference, for each relevant EPUBCheck test. The test descriptions are grouped using the structure of <a href="https://www.w3.org/TR/epub-34/">EPUB 3.4</a>, and these groups are referenced, via pull-down menus, from the section headers of the <a href="https://w3c.github.io/epub-specs/epub33/core/"><em>editors’ draft</em></a> of the specification.
                        </p>
                            
                    </li>
                    <li id="exit-criteria-core-4">
                        <p>
                          Testing the features in category 4 concentrates on vocabulary term <em>usage</em>, i.e., whether real-world publishers use those terms. Each term must have at least two independent publishers using those terms in production.
                        </p>
                        <p>
                          The results of testing are available in the separate <a href="epub-properties-use.html">EPUB 3.4 Metadata Usage Report</a>.
                        </p>
                    </li>
                </ol>
            </section>
        </section>
        <section>
            <h2 id="epub-accessibility-1.1">EPUB Accessibility 1.1</h2>
            <p>
              The goals of the <a href="https://www.w3.org/TR/epub-a11y-111/">EPUB Accessibility 1.1</a> document is to define accessibility conformance of EPUB publications beyond the accessibility requirements defined by WCAG for publication resources. The normative features of this specification can be divided, roughly, into the following categories:
            </p>
            <ol>
                <li>
                    <p>
                      Additional structural constraints on a publication; examples include the <a href="https://www.w3.org/TR/epub-a11y-111/#sec-page-list">requirement on page lists</a> or <a href="https://www.w3.org/TR/epub-a11y-111/#sec-mo-order">reading order</a>. Through those constraints the document defines accessibility <a href="https://www.w3.org/TR/epub-a11y-111/#sec-conf-reporting-pub">conformance requirements</a> on top of the conformance levels defined by <a href="https://www.w3.org/TR/WCAG21/">WCAG</a>.
                    </p>
                </li>
                <li>
                    <p>
                      Vocabulary items which serve as metadata for reporting; for example, <a href="https://www.w3.org/TR/epub-a11y-111/#sec-conf-reporting-pub">conformance levels</a>, or disclosing the <a href="https://www.w3.org/TR/epub-a11y-111/#sec-disc-package">accessibility features</a> related to this publication.
                    </p>
                </li>
            </ol>
            <section>
                <h3 id="exit-criteria-a11y">Exit criteria</h3>
                <ol>
                    <li id="exit-criteria-a11y-1">
                        <p>
                          Testing the features in category 1 tests whether these restrictions are <em>feasible</em> and <em>used</em> in practice. This is achieved by the requirement that at least 5 publishers will produce at least 1 EPUB publication each that conform to <a href="https://www.w3.org/TR/epub-a11y-111/#sec-conf-reporting-pub">EPUB Accessibility 1.1 - WCAG 2.0 Level AA</a>.
                        </p> 
                          
                        <p>
                          Note that these conformance levels rely on each publication resource to conform to WCAG 2.0 AA, when applicable; there are only a few EPUB specific features like page numbering. At least two independent publishers should be fulfilling that conformance level.
                        </p>
                          
                        <p>
                          The separate <a href="a11y-usage">EPUB Accessibility 1.1 Usage Report</a> shows the conformance table.
                        </p>
                    </li>
                    <li id="exit-criteria-a11y-2">
                        <p>
                          Testing the features in category 2 concentrates on vocabulary term <em>usage</em>, i.e., that real-world publishers use those terms. Each term must have at least two independent publishers using those terms in production.
                        </p>
                        <p>
                          The separate <a href="a11y-properties-use">EPUB Accessibility 1.1 Metadata Usage Report</a> shows the implementation table.
                        </p>
                    </li>
                </ol>
            </section>
        </section>
    </section>
</body>

</html>
